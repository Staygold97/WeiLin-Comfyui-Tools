(function(ia){typeof define=="function"&&define.amd?define(ia):ia()})((function(){"use strict";/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ia(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const Ct={},ua=[],Vn=()=>{},vu=()=>!1,Ws=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),_r=e=>e.startsWith("onUpdate:"),Vt=Object.assign,yr=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},vm=Object.prototype.hasOwnProperty,gt=(e,t)=>vm.call(e,t),He=Array.isArray,ca=e=>Va(e)==="[object Map]",da=e=>Va(e)==="[object Set]",_u=e=>Va(e)==="[object Date]",Ge=e=>typeof e=="function",Mt=e=>typeof e=="string",On=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",yu=e=>(Et(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),bu=Object.prototype.toString,Va=e=>bu.call(e),_m=e=>Va(e).slice(8,-1),wu=e=>Va(e)==="[object Object]",br=e=>Mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,za=ia(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),js=e=>{const t=Object.create(null);return(o=>t[o]||(t[o]=e(o)))},ym=/-\w/g,kn=js(e=>e.replace(ym,t=>t.slice(1).toUpperCase())),bm=/\B([A-Z])/g,xo=js(e=>e.replace(bm,"-$1").toLowerCase()),Vs=js(e=>e.charAt(0).toUpperCase()+e.slice(1)),wr=js(e=>e?`on${Vs(e)}`:""),To=(e,t)=>!Object.is(e,t),zs=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},xu=(e,t,o,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:o})},qs=e=>{const t=parseFloat(e);return isNaN(t)?e:t},wm=e=>{const t=Mt(e)?Number(e):NaN;return isNaN(t)?e:t};let Tu;const Gs=()=>Tu||(Tu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mt(e){if(He(e)){const t={};for(let o=0;o<e.length;o++){const n=e[o],a=Mt(n)?km(n):mt(n);if(a)for(const s in a)t[s]=a[s]}return t}else if(Mt(e)||Et(e))return e}const xm=/;(?![^(]*\))/g,Tm=/:([^]+)/,Sm=/\/\*[^]*?\*\//g;function km(e){const t={};return e.replace(Sm,"").split(xm).forEach(o=>{if(o){const n=o.split(Tm);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ee(e){let t="";if(Mt(e))t=e;else if(He(e))for(let o=0;o<e.length;o++){const n=Ee(e[o]);n&&(t+=n+" ")}else if(Et(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const Cm=ia("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Su(e){return!!e||e===""}function Em(e,t){if(e.length!==t.length)return!1;let o=!0;for(let n=0;o&&n<e.length;n++)o=jo(e[n],t[n]);return o}function jo(e,t){if(e===t)return!0;let o=_u(e),n=_u(t);if(o||n)return o&&n?e.getTime()===t.getTime():!1;if(o=On(e),n=On(t),o||n)return e===t;if(o=He(e),n=He(t),o||n)return o&&n?Em(e,t):!1;if(o=Et(e),n=Et(t),o||n){if(!o||!n)return!1;const a=Object.keys(e).length,s=Object.keys(t).length;if(a!==s)return!1;for(const l in e){const r=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(r&&!u||!r&&u||!jo(e[l],t[l]))return!1}}return String(e)===String(t)}function xr(e,t){return e.findIndex(o=>jo(o,t))}const ku=e=>!!(e&&e.__v_isRef===!0),h=e=>Mt(e)?e:e==null?"":He(e)||Et(e)&&(e.toString===bu||!Ge(e.toString))?ku(e)?h(e.value):JSON.stringify(e,Cu,2):String(e),Cu=(e,t)=>ku(t)?Cu(e,t.value):ca(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[n,a],s)=>(o[Tr(n,s)+" =>"]=a,o),{})}:da(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>Tr(o))}:On(t)?Tr(t):Et(t)&&!He(t)&&!wu(t)?String(t):t,Tr=(e,t="")=>{var o;return On(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jt;class Eu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jt,!t&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Jt;try{return Jt=this,t()}finally{Jt=o}}}on(){++this._on===1&&(this.prevScope=Jt,Jt=this)}off(){this._on>0&&--this._on===0&&(Jt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,n;for(o=0,n=this.effects.length;o<n;o++)this.effects[o].stop();for(this.effects.length=0,o=0,n=this.cleanups.length;o<n;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,n=this.scopes.length;o<n;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Sr(e){return new Eu(e)}function Lu(){return Jt}function Lm(e,t=!1){Jt&&Jt.cleanups.push(e)}let At;const kr=new WeakSet;class $u{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jt&&Jt.active&&Jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,kr.has(this)&&(kr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Iu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Du(this),Mu(this);const t=At,o=Rn;At=this,Rn=!0;try{return this.fn()}finally{Ou(this),At=t,Rn=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)$r(t);this.deps=this.depsTail=void 0,Du(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?kr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lr(this)&&this.run()}get dirty(){return Lr(this)}}let Au=0,qa,Ga;function Iu(e,t=!1){if(e.flags|=8,t){e.next=Ga,Ga=e;return}e.next=qa,qa=e}function Cr(){Au++}function Er(){if(--Au>0)return;if(Ga){let t=Ga;for(Ga=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;qa;){let t=qa;for(qa=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=o}}if(e)throw e}function Mu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ou(e){let t,o=e.depsTail,n=o;for(;n;){const a=n.prevDep;n.version===-1?(n===o&&(o=a),$r(n),$m(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}e.deps=t,e.depsTail=o}function Lr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ru(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ru(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qa)||(e.globalVersion=Qa,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Lr(e))))return;e.flags|=2;const t=e.dep,o=At,n=Rn;At=e,Rn=!0;try{Mu(e);const a=e.fn(e._value);(t.version===0||To(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{At=o,Rn=n,Ou(e),e.flags&=-3}}function $r(e,t=!1){const{dep:o,prevSub:n,nextSub:a}=e;if(n&&(n.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=n,e.nextSub=void 0),o.subs===e&&(o.subs=n,!n&&o.computed)){o.computed.flags&=-5;for(let s=o.computed.deps;s;s=s.nextDep)$r(s,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function $m(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let Rn=!0;const Nu=[];function zn(){Nu.push(Rn),Rn=!1}function qn(){const e=Nu.pop();Rn=e===void 0?!0:e}function Du(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=At;At=void 0;try{t()}finally{At=o}}}let Qa=0;class Am{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ar{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!Rn||At===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==At)o=this.activeLink=new Am(At,this),At.deps?(o.prevDep=At.depsTail,At.depsTail.nextDep=o,At.depsTail=o):At.deps=At.depsTail=o,Pu(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const n=o.nextDep;n.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=n),o.prevDep=At.depsTail,o.nextDep=void 0,At.depsTail.nextDep=o,At.depsTail=o,At.deps===o&&(At.deps=n)}return o}trigger(t){this.version++,Qa++,this.notify(t)}notify(t){Cr();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{Er()}}}function Pu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Pu(n)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const Qs=new WeakMap,Vo=Symbol(""),Ir=Symbol(""),Ya=Symbol("");function Xt(e,t,o){if(Rn&&At){let n=Qs.get(e);n||Qs.set(e,n=new Map);let a=n.get(o);a||(n.set(o,a=new Ar),a.map=n,a.key=o),a.track()}}function oo(e,t,o,n,a,s){const l=Qs.get(e);if(!l){Qa++;return}const r=u=>{u&&u.trigger()};if(Cr(),t==="clear")l.forEach(r);else{const u=He(e),d=u&&br(o);if(u&&o==="length"){const c=Number(n);l.forEach((f,g)=>{(g==="length"||g===Ya||!On(g)&&g>=c)&&r(f)})}else switch((o!==void 0||l.has(void 0))&&r(l.get(o)),d&&r(l.get(Ya)),t){case"add":u?d&&r(l.get("length")):(r(l.get(Vo)),ca(e)&&r(l.get(Ir)));break;case"delete":u||(r(l.get(Vo)),ca(e)&&r(l.get(Ir)));break;case"set":ca(e)&&r(l.get(Vo));break}}Er()}function Im(e,t){const o=Qs.get(e);return o&&o.get(t)}function fa(e){const t=nt(e);return t===e?t:(Xt(t,"iterate",Ya),Cn(e)?t:t.map(Qt))}function Ys(e){return Xt(e=nt(e),"iterate",Ya),e}const Mm={__proto__:null,[Symbol.iterator](){return Mr(this,Symbol.iterator,Qt)},concat(...e){return fa(this).concat(...e.map(t=>He(t)?fa(t):t))},entries(){return Mr(this,"entries",e=>(e[1]=Qt(e[1]),e))},every(e,t){return ao(this,"every",e,t,void 0,arguments)},filter(e,t){return ao(this,"filter",e,t,o=>o.map(Qt),arguments)},find(e,t){return ao(this,"find",e,t,Qt,arguments)},findIndex(e,t){return ao(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ao(this,"findLast",e,t,Qt,arguments)},findLastIndex(e,t){return ao(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ao(this,"forEach",e,t,void 0,arguments)},includes(...e){return Or(this,"includes",e)},indexOf(...e){return Or(this,"indexOf",e)},join(e){return fa(this).join(e)},lastIndexOf(...e){return Or(this,"lastIndexOf",e)},map(e,t){return ao(this,"map",e,t,void 0,arguments)},pop(){return Ka(this,"pop")},push(...e){return Ka(this,"push",e)},reduce(e,...t){return Fu(this,"reduce",e,t)},reduceRight(e,...t){return Fu(this,"reduceRight",e,t)},shift(){return Ka(this,"shift")},some(e,t){return ao(this,"some",e,t,void 0,arguments)},splice(...e){return Ka(this,"splice",e)},toReversed(){return fa(this).toReversed()},toSorted(e){return fa(this).toSorted(e)},toSpliced(...e){return fa(this).toSpliced(...e)},unshift(...e){return Ka(this,"unshift",e)},values(){return Mr(this,"values",Qt)}};function Mr(e,t,o){const n=Ys(e),a=n[t]();return n!==e&&!Cn(e)&&(a._next=a.next,a.next=()=>{const s=a._next();return s.value&&(s.value=o(s.value)),s}),a}const Om=Array.prototype;function ao(e,t,o,n,a,s){const l=Ys(e),r=l!==e&&!Cn(e),u=l[t];if(u!==Om[t]){const f=u.apply(e,s);return r?Qt(f):f}let d=o;l!==e&&(r?d=function(f,g){return o.call(this,Qt(f),g,e)}:o.length>2&&(d=function(f,g){return o.call(this,f,g,e)}));const c=u.call(l,d,n);return r&&a?a(c):c}function Fu(e,t,o,n){const a=Ys(e);let s=o;return a!==e&&(Cn(e)?o.length>3&&(s=function(l,r,u){return o.call(this,l,r,u,e)}):s=function(l,r,u){return o.call(this,l,Qt(r),u,e)}),a[t](s,...n)}function Or(e,t,o){const n=nt(e);Xt(n,"iterate",Ya);const a=n[t](...o);return(a===-1||a===!1)&&Nr(o[0])?(o[0]=nt(o[0]),n[t](...o)):a}function Ka(e,t,o=[]){zn(),Cr();const n=nt(e)[t].apply(e,o);return Er(),qn(),n}const Rm=ia("__proto__,__v_isRef,__isVue"),Bu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(On));function Nm(e){On(e)||(e=String(e));const t=nt(this);return Xt(t,"has",e),t.hasOwnProperty(e)}class Uu{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,n){if(o==="__v_skip")return t.__v_skip;const a=this._isReadonly,s=this._isShallow;if(o==="__v_isReactive")return!a;if(o==="__v_isReadonly")return a;if(o==="__v_isShallow")return s;if(o==="__v_raw")return n===(a?s?qu:zu:s?Vu:ju).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=He(t);if(!a){let u;if(l&&(u=Mm[o]))return u;if(o==="hasOwnProperty")return Nm}const r=Reflect.get(t,o,Ot(t)?t:n);return(On(o)?Bu.has(o):Rm(o))||(a||Xt(t,"get",o),s)?r:Ot(r)?l&&br(o)?r:r.value:Et(r)?a?Gu(r):Zs(r):r}}class Hu extends Uu{constructor(t=!1){super(!1,t)}set(t,o,n,a){let s=t[o];if(!this._isShallow){const u=ko(s);if(!Cn(n)&&!ko(n)&&(s=nt(s),n=nt(n)),!He(t)&&Ot(s)&&!Ot(n))return u||(s.value=n),!0}const l=He(t)&&br(o)?Number(o)<t.length:gt(t,o),r=Reflect.set(t,o,n,Ot(t)?t:a);return t===nt(a)&&(l?To(n,s)&&oo(t,"set",o,n):oo(t,"add",o,n)),r}deleteProperty(t,o){const n=gt(t,o);t[o];const a=Reflect.deleteProperty(t,o);return a&&n&&oo(t,"delete",o,void 0),a}has(t,o){const n=Reflect.has(t,o);return(!On(o)||!Bu.has(o))&&Xt(t,"has",o),n}ownKeys(t){return Xt(t,"iterate",He(t)?"length":Vo),Reflect.ownKeys(t)}}class Wu extends Uu{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const Dm=new Hu,Pm=new Wu,Fm=new Hu(!0),Bm=new Wu(!0),Rr=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function Um(e,t,o){return function(...n){const a=this.__v_raw,s=nt(a),l=ca(s),r=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,d=a[e](...n),c=o?Rr:t?tl:Qt;return!t&&Xt(s,"iterate",u?Ir:Vo),{next(){const{value:f,done:g}=d.next();return g?{value:f,done:g}:{value:r?[c(f[0]),c(f[1])]:c(f),done:g}},[Symbol.iterator](){return this}}}}function Js(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hm(e,t){const o={get(a){const s=this.__v_raw,l=nt(s),r=nt(a);e||(To(a,r)&&Xt(l,"get",a),Xt(l,"get",r));const{has:u}=Ks(l),d=t?Rr:e?tl:Qt;if(u.call(l,a))return d(s.get(a));if(u.call(l,r))return d(s.get(r));s!==l&&s.get(a)},get size(){const a=this.__v_raw;return!e&&Xt(nt(a),"iterate",Vo),a.size},has(a){const s=this.__v_raw,l=nt(s),r=nt(a);return e||(To(a,r)&&Xt(l,"has",a),Xt(l,"has",r)),a===r?s.has(a):s.has(a)||s.has(r)},forEach(a,s){const l=this,r=l.__v_raw,u=nt(r),d=t?Rr:e?tl:Qt;return!e&&Xt(u,"iterate",Vo),r.forEach((c,f)=>a.call(s,d(c),d(f),l))}};return Vt(o,e?{add:Js("add"),set:Js("set"),delete:Js("delete"),clear:Js("clear")}:{add(a){!t&&!Cn(a)&&!ko(a)&&(a=nt(a));const s=nt(this);return Ks(s).has.call(s,a)||(s.add(a),oo(s,"add",a,a)),this},set(a,s){!t&&!Cn(s)&&!ko(s)&&(s=nt(s));const l=nt(this),{has:r,get:u}=Ks(l);let d=r.call(l,a);d||(a=nt(a),d=r.call(l,a));const c=u.call(l,a);return l.set(a,s),d?To(s,c)&&oo(l,"set",a,s):oo(l,"add",a,s),this},delete(a){const s=nt(this),{has:l,get:r}=Ks(s);let u=l.call(s,a);u||(a=nt(a),u=l.call(s,a)),r&&r.call(s,a);const d=s.delete(a);return u&&oo(s,"delete",a,void 0),d},clear(){const a=nt(this),s=a.size!==0,l=a.clear();return s&&oo(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{o[a]=Um(a,e,t)}),o}function Xs(e,t){const o=Hm(e,t);return(n,a,s)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?n:Reflect.get(gt(o,a)&&a in n?o:n,a,s)}const Wm={get:Xs(!1,!1)},jm={get:Xs(!1,!0)},Vm={get:Xs(!0,!1)},zm={get:Xs(!0,!0)},ju=new WeakMap,Vu=new WeakMap,zu=new WeakMap,qu=new WeakMap;function qm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gm(e){return e.__v_skip||!Object.isExtensible(e)?0:qm(_m(e))}function Zs(e){return ko(e)?e:el(e,!1,Dm,Wm,ju)}function Qm(e){return el(e,!1,Fm,jm,Vu)}function Gu(e){return el(e,!0,Pm,Vm,zu)}function cI(e){return el(e,!0,Bm,zm,qu)}function el(e,t,o,n,a){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=Gm(e);if(s===0)return e;const l=a.get(e);if(l)return l;const r=new Proxy(e,s===2?n:o);return a.set(e,r),r}function So(e){return ko(e)?So(e.__v_raw):!!(e&&e.__v_isReactive)}function ko(e){return!!(e&&e.__v_isReadonly)}function Cn(e){return!!(e&&e.__v_isShallow)}function Nr(e){return e?!!e.__v_raw:!1}function nt(e){const t=e&&e.__v_raw;return t?nt(t):e}function Dr(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&xu(e,"__v_skip",!0),e}const Qt=e=>Et(e)?Zs(e):e,tl=e=>Et(e)?Gu(e):e;function Ot(e){return e?e.__v_isRef===!0:!1}function _(e){return Qu(e,!1)}function Ym(e){return Qu(e,!0)}function Qu(e,t){return Ot(e)?e:new Km(e,t)}class Km{constructor(t,o){this.dep=new Ar,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:nt(t),this._value=o?t:Qt(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,n=this.__v_isShallow||Cn(t)||ko(t);t=n?t:nt(t),To(t,o)&&(this._rawValue=t,this._value=n?t:Qt(t),this.dep.trigger())}}function m(e){return Ot(e)?e.value:e}const Jm={get:(e,t,o)=>t==="__v_raw"?e:m(Reflect.get(e,t,o)),set:(e,t,o,n)=>{const a=e[t];return Ot(a)&&!Ot(o)?(a.value=o,!0):Reflect.set(e,t,o,n)}};function Yu(e){return So(e)?e:new Proxy(e,Jm)}function Xm(e){const t=He(e)?new Array(e.length):{};for(const o in e)t[o]=eh(e,o);return t}class Zm{constructor(t,o,n){this._object=t,this._key=o,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Im(nt(this._object),this._key)}}function eh(e,t,o){const n=e[t];return Ot(n)?n:new Zm(e,t,o)}class th{constructor(t,o,n){this.fn=t,this.setter=o,this._value=void 0,this.dep=new Ar(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return Iu(this,!0),!0}get value(){const t=this.dep.track();return Ru(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function nh(e,t,o=!1){let n,a;return Ge(e)?n=e:(n=e.get,a=e.set),new th(n,a,o)}const nl={},ol=new WeakMap;let zo;function oh(e,t=!1,o=zo){if(o){let n=ol.get(o);n||ol.set(o,n=[]),n.push(e)}}function ah(e,t,o=Ct){const{immediate:n,deep:a,once:s,scheduler:l,augmentJob:r,call:u}=o,d=w=>a?w:Cn(w)||a===!1||a===0?so(w,1):so(w);let c,f,g,p,v=!1,b=!1;if(Ot(e)?(f=()=>e.value,v=Cn(e)):So(e)?(f=()=>d(e),v=!0):He(e)?(b=!0,v=e.some(w=>So(w)||Cn(w)),f=()=>e.map(w=>{if(Ot(w))return w.value;if(So(w))return d(w);if(Ge(w))return u?u(w,2):w()})):Ge(e)?t?f=u?()=>u(e,2):e:f=()=>{if(g){zn();try{g()}finally{qn()}}const w=zo;zo=c;try{return u?u(e,3,[p]):e(p)}finally{zo=w}}:f=Vn,t&&a){const w=f,O=a===!0?1/0:a;f=()=>so(w(),O)}const x=Lu(),k=()=>{c.stop(),x&&x.active&&yr(x.effects,c)};if(s&&t){const w=t;t=(...O)=>{w(...O),k()}}let A=b?new Array(e.length).fill(nl):nl;const U=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const O=c.run();if(a||v||(b?O.some((W,V)=>To(W,A[V])):To(O,A))){g&&g();const W=zo;zo=c;try{const V=[O,A===nl?void 0:b&&A[0]===nl?[]:A,p];A=O,u?u(t,3,V):t(...V)}finally{zo=W}}}else c.run()};return r&&r(U),c=new $u(f),c.scheduler=l?()=>l(U,!1):U,p=w=>oh(w,!1,c),g=c.onStop=()=>{const w=ol.get(c);if(w){if(u)u(w,4);else for(const O of w)O();ol.delete(c)}},t?n?U(!0):A=c.run():l?l(U.bind(null,!0),!0):c.run(),k.pause=c.pause.bind(c),k.resume=c.resume.bind(c),k.stop=k,k}function so(e,t=1/0,o){if(t<=0||!Et(e)||e.__v_skip||(o=o||new Map,(o.get(e)||0)>=t))return e;if(o.set(e,t),t--,Ot(e))so(e.value,t,o);else if(He(e))for(let n=0;n<e.length;n++)so(e[n],t,o);else if(da(e)||ca(e))e.forEach(n=>{so(n,t,o)});else if(wu(e)){for(const n in e)so(e[n],t,o);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&so(e[n],t,o)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ja=[];let Pr=!1;function dI(e,...t){if(Pr)return;Pr=!0,zn();const o=Ja.length?Ja[Ja.length-1].component:null,n=o&&o.appContext.config.warnHandler,a=sh();if(n)pa(n,o,11,[e+t.map(s=>{var l,r;return(r=(l=s.toString)==null?void 0:l.call(s))!=null?r:JSON.stringify(s)}).join(""),o&&o.proxy,a.map(({vnode:s})=>`at <${td(o,s.type)}>`).join(`
`),a]);else{const s=[`[Vue warn]: ${e}`,...t];a.length&&s.push(`
`,...lh(a)),console.warn(...s)}qn(),Pr=!1}function sh(){let e=Ja[Ja.length-1];if(!e)return[];const t=[];for(;e;){const o=t[0];o&&o.vnode===e?o.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function lh(e){const t=[];return e.forEach((o,n)=>{t.push(...n===0?[]:[`
`],...rh(o))}),t}function rh({vnode:e,recurseCount:t}){const o=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,a=` at <${td(e.component,e.type,n)}`,s=">"+o;return e.props?[a,...ih(e.props),s]:[a+s]}function ih(e){const t=[],o=Object.keys(e);return o.slice(0,3).forEach(n=>{t.push(...Ku(n,e[n]))}),o.length>3&&t.push(" ..."),t}function Ku(e,t,o){return Mt(t)?(t=JSON.stringify(t),o?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?o?t:[`${e}=${t}`]:Ot(t)?(t=Ku(e,nt(t.value),!0),o?t:[`${e}=Ref<`,t,">"]):Ge(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=nt(t),o?t:[`${e}=`,t])}function pa(e,t,o,n){try{return n?e(...n):e()}catch(a){al(a,t,o)}}function Nn(e,t,o,n){if(Ge(e)){const a=pa(e,t,o,n);return a&&yu(a)&&a.catch(s=>{al(s,t,o)}),a}if(He(e)){const a=[];for(let s=0;s<e.length;s++)a.push(Nn(e[s],t,o,n));return a}}function al(e,t,o,n=!0){const a=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Ct;if(t){let r=t.parent;const u=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${o}`;for(;r;){const c=r.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,u,d)===!1)return}r=r.parent}if(s){zn(),pa(s,null,10,[e,u,d]),qn();return}}uh(e,o,a,n,l)}function uh(e,t,o,n=!0,a=!1){if(a)throw e;console.error(e)}const ln=[];let Gn=-1;const ga=[];let Co=null,ma=0;const Ju=Promise.resolve();let sl=null;function Qe(e){const t=sl||Ju;return e?t.then(this?e.bind(this):e):t}function ch(e){let t=Gn+1,o=ln.length;for(;t<o;){const n=t+o>>>1,a=ln[n],s=Xa(a);s<e||s===e&&a.flags&2?t=n+1:o=n}return t}function Fr(e){if(!(e.flags&1)){const t=Xa(e),o=ln[ln.length-1];!o||!(e.flags&2)&&t>=Xa(o)?ln.push(e):ln.splice(ch(t),0,e),e.flags|=1,Xu()}}function Xu(){sl||(sl=Ju.then(tc))}function dh(e){He(e)?ga.push(...e):Co&&e.id===-1?Co.splice(ma+1,0,e):e.flags&1||(ga.push(e),e.flags|=1),Xu()}function Zu(e,t,o=Gn+1){for(;o<ln.length;o++){const n=ln[o];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ln.splice(o,1),o--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ec(e){if(ga.length){const t=[...new Set(ga)].sort((o,n)=>Xa(o)-Xa(n));if(ga.length=0,Co){Co.push(...t);return}for(Co=t,ma=0;ma<Co.length;ma++){const o=Co[ma];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}Co=null,ma=0}}const Xa=e=>e.id==null?e.flags&2?-1:1/0:e.id;function tc(e){try{for(Gn=0;Gn<ln.length;Gn++){const t=ln[Gn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),pa(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Gn<ln.length;Gn++){const t=ln[Gn];t&&(t.flags&=-2)}Gn=-1,ln.length=0,ec(),sl=null,(ln.length||ga.length)&&tc()}}let Yt=null,nc=null;function ll(e){const t=Yt;return Yt=e,nc=e&&e.type.__scopeId||null,t}function ht(e,t=Yt,o){if(!t||e._n)return e;const n=(...a)=>{n._d&&hl(-1);const s=ll(t);let l;try{l=e(...a)}finally{ll(s),n._d&&hl(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Te(e,t){if(Yt===null)return e;const o=yl(Yt),n=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[s,l,r,u=Ct]=t[a];s&&(Ge(s)&&(s={mounted:s,updated:s}),s.deep&&so(l),n.push({dir:s,instance:o,value:l,oldValue:void 0,arg:r,modifiers:u}))}return e}function qo(e,t,o,n){const a=e.dirs,s=t&&t.dirs;for(let l=0;l<a.length;l++){const r=a[l];s&&(r.oldValue=s[l].value);let u=r.dir[n];u&&(zn(),Nn(u,o,8,[e.el,r,e,t]),qn())}}const oc=Symbol("_vte"),ac=e=>e.__isTeleport,Za=e=>e&&(e.disabled||e.disabled===""),sc=e=>e&&(e.defer||e.defer===""),lc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,rc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Br=(e,t)=>{const o=e&&e.to;return Mt(o)?t?t(o):null:o},ic={name:"Teleport",__isTeleport:!0,process(e,t,o,n,a,s,l,r,u,d){const{mc:c,pc:f,pbc:g,o:{insert:p,querySelector:v,createText:b,createComment:x}}=d,k=Za(t.props);let{shapeFlag:A,children:U,dynamicChildren:w}=t;if(e==null){const O=t.el=b(""),W=t.anchor=b("");p(O,o,n),p(W,o,n);const V=(q,he)=>{A&16&&(a&&a.isCE&&(a.ce._teleportTarget=q),c(U,q,he,a,s,l,r,u))},H=()=>{const q=t.target=Br(t.props,v),he=cc(q,t,b,p);q&&(l!=="svg"&&lc(q)?l="svg":l!=="mathml"&&rc(q)&&(l="mathml"),k||(V(q,he),il(t,!1)))};k&&(V(o,W),il(t,!0)),sc(t.props)?(t.el.__isMounted=!1,un(()=>{H(),delete t.el.__isMounted},s)):H()}else{if(sc(t.props)&&e.el.__isMounted===!1){un(()=>{ic.process(e,t,o,n,a,s,l,r,u,d)},s);return}t.el=e.el,t.targetStart=e.targetStart;const O=t.anchor=e.anchor,W=t.target=e.target,V=t.targetAnchor=e.targetAnchor,H=Za(e.props),q=H?o:W,he=H?O:V;if(l==="svg"||lc(W)?l="svg":(l==="mathml"||rc(W))&&(l="mathml"),w?(g(e.dynamicChildren,w,q,a,s,l,r),Kr(e,t,!0)):u||f(e,t,q,he,a,s,l,r,!1),k)H?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):rl(t,o,O,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const le=t.target=Br(t.props,v);le&&rl(t,le,null,d,0)}else H&&rl(t,W,V,d,1);il(t,k)}},remove(e,t,o,{um:n,o:{remove:a}},s){const{shapeFlag:l,children:r,anchor:u,targetStart:d,targetAnchor:c,target:f,props:g}=e;if(f&&(a(d),a(c)),s&&a(u),l&16){const p=s||!Za(g);for(let v=0;v<r.length;v++){const b=r[v];n(b,t,o,p,!!b.dynamicChildren)}}},move:rl,hydrate:fh};function rl(e,t,o,{o:{insert:n},m:a},s=2){s===0&&n(e.targetAnchor,t,o);const{el:l,anchor:r,shapeFlag:u,children:d,props:c}=e,f=s===2;if(f&&n(l,t,o),(!f||Za(c))&&u&16)for(let g=0;g<d.length;g++)a(d[g],t,o,2);f&&n(r,t,o)}function fh(e,t,o,n,a,s,{o:{nextSibling:l,parentNode:r,querySelector:u,insert:d,createText:c}},f){function g(b,x,k,A){x.anchor=f(l(b),x,r(b),o,n,a,s),x.targetStart=k,x.targetAnchor=A}const p=t.target=Br(t.props,u),v=Za(t.props);if(p){const b=p._lpa||p.firstChild;if(t.shapeFlag&16)if(v)g(e,t,b,b&&l(b));else{t.anchor=l(e);let x=b;for(;x;){if(x&&x.nodeType===8){if(x.data==="teleport start anchor")t.targetStart=x;else if(x.data==="teleport anchor"){t.targetAnchor=x,p._lpa=t.targetAnchor&&l(t.targetAnchor);break}}x=l(x)}t.targetAnchor||cc(p,t,c,d),f(b&&l(b),t,p,o,n,a,s)}il(t,v)}else v&&t.shapeFlag&16&&g(e,t,e,l(e));return t.anchor&&l(t.anchor)}const uc=ic;function il(e,t){const o=e.ctx;if(o&&o.ut){let n,a;for(t?(n=e.el,a=e.anchor):(n=e.targetStart,a=e.targetAnchor);n&&n!==a;)n.nodeType===1&&n.setAttribute("data-v-owner",o.uid),n=n.nextSibling;o.ut()}}function cc(e,t,o,n){const a=t.targetStart=o(""),s=t.targetAnchor=o("");return a[oc]=s,e&&(n(a,e),n(s,e)),s}const lo=Symbol("_leaveCb"),ul=Symbol("_enterCb");function dc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vt(()=>{e.isMounted=!0}),Eo(()=>{e.isUnmounting=!0}),e}const En=[Function,Array],fc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:En,onEnter:En,onAfterEnter:En,onEnterCancelled:En,onBeforeLeave:En,onLeave:En,onAfterLeave:En,onLeaveCancelled:En,onBeforeAppear:En,onAppear:En,onAfterAppear:En,onAppearCancelled:En},pc=e=>{const t=e.subTree;return t.component?pc(t.component):t},ph={name:"BaseTransition",props:fc,setup(e,{slots:t}){const o=uo(),n=dc();return()=>{const a=t.default&&Hr(t.default(),!0);if(!a||!a.length)return;const s=gc(a),l=nt(e),{mode:r}=l;if(n.isLeaving)return Ur(s);const u=hc(s);if(!u)return Ur(s);let d=es(u,l,n,o,f=>d=f);u.type!==Zt&&Go(u,d);let c=o.subTree&&hc(o.subTree);if(c&&c.type!==Zt&&!Ko(c,u)&&pc(o).type!==Zt){let f=es(c,l,n,o);if(Go(c,f),r==="out-in"&&u.type!==Zt)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,o.job.flags&8||o.update(),delete f.afterLeave,c=void 0},Ur(s);r==="in-out"&&u.type!==Zt?f.delayLeave=(g,p,v)=>{const b=mc(n,c);b[String(c.key)]=c,g[lo]=()=>{p(),g[lo]=void 0,delete d.delayedLeave,c=void 0},d.delayedLeave=()=>{v(),delete d.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function gc(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==Zt){t=o;break}}return t}const gh=ph;function mc(e,t){const{leavingVNodes:o}=e;let n=o.get(t.type);return n||(n=Object.create(null),o.set(t.type,n)),n}function es(e,t,o,n,a){const{appear:s,mode:l,persisted:r=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:g,onLeave:p,onAfterLeave:v,onLeaveCancelled:b,onBeforeAppear:x,onAppear:k,onAfterAppear:A,onAppearCancelled:U}=t,w=String(e.key),O=mc(o,e),W=(q,he)=>{q&&Nn(q,n,9,he)},V=(q,he)=>{const le=he[1];W(q,he),He(q)?q.every(R=>R.length<=1)&&le():q.length<=1&&le()},H={mode:l,persisted:r,beforeEnter(q){let he=u;if(!o.isMounted)if(s)he=x||u;else return;q[lo]&&q[lo](!0);const le=O[w];le&&Ko(e,le)&&le.el[lo]&&le.el[lo](),W(he,[q])},enter(q){let he=d,le=c,R=f;if(!o.isMounted)if(s)he=k||d,le=A||c,R=U||f;else return;let Y=!1;const X=q[ul]=z=>{Y||(Y=!0,z?W(R,[q]):W(le,[q]),H.delayedLeave&&H.delayedLeave(),q[ul]=void 0)};he?V(he,[q,X]):X()},leave(q,he){const le=String(e.key);if(q[ul]&&q[ul](!0),o.isUnmounting)return he();W(g,[q]);let R=!1;const Y=q[lo]=X=>{R||(R=!0,he(),X?W(b,[q]):W(v,[q]),q[lo]=void 0,O[le]===e&&delete O[le])};O[le]=e,p?V(p,[q,Y]):Y()},clone(q){const he=es(q,t,o,n,a);return a&&a(he),he}};return H}function Ur(e){if(dl(e))return e=Lo(e),e.children=null,e}function hc(e){if(!dl(e))return ac(e.type)&&e.children?gc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&Ge(o.default))return o.default()}}function Go(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Go(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Hr(e,t=!1,o){let n=[],a=0;for(let s=0;s<e.length;s++){let l=e[s];const r=o==null?l.key:String(o)+String(l.key!=null?l.key:s);l.type===Oe?(l.patchFlag&128&&a++,n=n.concat(Hr(l.children,t,r))):(t||l.type!==Zt)&&n.push(r!=null?Lo(l,{key:r}):l)}if(a>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function gn(e,t){return Ge(e)?Vt({name:e.name},t,{setup:e}):e}function vc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const cl=new WeakMap;function ts(e,t,o,n,a=!1){if(He(e)){e.forEach((v,b)=>ts(v,t&&(He(t)?t[b]:t),o,n,a));return}if(ha(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ts(e,t,o,n.component.subTree);return}const s=n.shapeFlag&4?yl(n.component):n.el,l=a?null:s,{i:r,r:u}=e,d=t&&t.r,c=r.refs===Ct?r.refs={}:r.refs,f=r.setupState,g=nt(f),p=f===Ct?vu:v=>gt(g,v);if(d!=null&&d!==u){if(_c(t),Mt(d))c[d]=null,p(d)&&(f[d]=null);else if(Ot(d)){d.value=null;const v=t;v.k&&(c[v.k]=null)}}if(Ge(u))pa(u,r,12,[l,c]);else{const v=Mt(u),b=Ot(u);if(v||b){const x=()=>{if(e.f){const k=v?p(u)?f[u]:c[u]:u.value;if(a)He(k)&&yr(k,s);else if(He(k))k.includes(s)||k.push(s);else if(v)c[u]=[s],p(u)&&(f[u]=c[u]);else{const A=[s];u.value=A,e.k&&(c[e.k]=A)}}else v?(c[u]=l,p(u)&&(f[u]=l)):b&&(u.value=l,e.k&&(c[e.k]=l))};if(l){const k=()=>{x(),cl.delete(e)};k.id=-1,cl.set(e,k),un(k,o)}else _c(e),x()}}}function _c(e){const t=cl.get(e);t&&(t.flags|=8,cl.delete(e))}Gs().requestIdleCallback,Gs().cancelIdleCallback;const ha=e=>!!e.type.__asyncLoader,dl=e=>e.type.__isKeepAlive;function mh(e,t){yc(e,"a",t)}function hh(e,t){yc(e,"da",t)}function yc(e,t,o=en){const n=e.__wdc||(e.__wdc=()=>{let a=o;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(fl(t,n,o),o){let a=o.parent;for(;a&&a.parent;)dl(a.parent.vnode)&&vh(n,t,o,a),a=a.parent}}function vh(e,t,o,n){const a=fl(t,e,n,!0);Dn(()=>{yr(n[t],a)},o)}function fl(e,t,o=en,n=!1){if(o){const a=o[e]||(o[e]=[]),s=t.__weh||(t.__weh=(...l)=>{zn();const r=us(o),u=Nn(t,o,e,l);return r(),qn(),u});return n?a.unshift(s):a.push(s),s}}const ro=e=>(t,o=en)=>{(!cs||e==="sp")&&fl(e,(...n)=>t(...n),o)},_h=ro("bm"),vt=ro("m"),bc=ro("bu"),wc=ro("u"),Eo=ro("bum"),Dn=ro("um"),yh=ro("sp"),bh=ro("rtg"),wh=ro("rtc");function xh(e,t=en){fl("ec",e,t)}const Th="components";function Sh(e,t){return Ch(Th,e,!0,t)||e}const kh=Symbol.for("v-ndc");function Ch(e,t,o=!0,n=!1){const a=Yt||en;if(a){const s=a.type;{const r=ed(s,!1);if(r&&(r===t||r===kn(t)||r===Vs(kn(t))))return s}const l=xc(a[e]||s[e],t)||xc(a.appContext[e],t);return!l&&n?s:l}}function xc(e,t){return e&&(e[t]||e[kn(t)]||e[Vs(kn(t))])}function je(e,t,o,n){let a;const s=o,l=He(e);if(l||Mt(e)){const r=l&&So(e);let u=!1,d=!1;r&&(u=!Cn(e),d=ko(e),e=Ys(e)),a=new Array(e.length);for(let c=0,f=e.length;c<f;c++)a[c]=t(u?d?tl(Qt(e[c])):Qt(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){a=new Array(e);for(let r=0;r<e;r++)a[r]=t(r+1,r,void 0,s)}else if(Et(e))if(e[Symbol.iterator])a=Array.from(e,(r,u)=>t(r,u,void 0,s));else{const r=Object.keys(e);a=new Array(r.length);for(let u=0,d=r.length;u<d;u++){const c=r[u];a[u]=t(e[c],c,u,s)}}else a=[];return a}function ns(e,t,o={},n,a){if(Yt.ce||Yt.parent&&ha(Yt.parent)&&Yt.parent.ce)return t!=="default"&&(o.name=t),T(),yt(Oe,null,[ze("slot",o,n&&n())],64);let s=e[t];s&&s._c&&(s._d=!1),T();const l=s&&Tc(s(o)),r=o.key||l&&l.key,u=yt(Oe,{key:(r&&!On(r)?r:`_${t}`)+(!l&&n?"_fb":"")},l||(n?n():[]),l&&e._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function Tc(e){return e.some(t=>is(t)?!(t.type===Zt||t.type===Oe&&!Tc(t.children)):!0)?e:null}const Wr=e=>e?Jc(e)?yl(e):Wr(e.parent):null,os=Vt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Wr(e.parent),$root:e=>Wr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ec(e),$forceUpdate:e=>e.f||(e.f=()=>{Fr(e.update)}),$nextTick:e=>e.n||(e.n=Qe.bind(e.proxy)),$watch:e=>Qh.bind(e)}),jr=(e,t)=>e!==Ct&&!e.__isScriptSetup&&gt(e,t),Eh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:n,data:a,props:s,accessCache:l,type:r,appContext:u}=e;let d;if(t[0]!=="$"){const p=l[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return a[t];case 4:return o[t];case 3:return s[t]}else{if(jr(n,t))return l[t]=1,n[t];if(a!==Ct&&gt(a,t))return l[t]=2,a[t];if((d=e.propsOptions[0])&&gt(d,t))return l[t]=3,s[t];if(o!==Ct&&gt(o,t))return l[t]=4,o[t];Vr&&(l[t]=0)}}const c=os[t];let f,g;if(c)return t==="$attrs"&&Xt(e.attrs,"get",""),c(e);if((f=r.__cssModules)&&(f=f[t]))return f;if(o!==Ct&&gt(o,t))return l[t]=4,o[t];if(g=u.config.globalProperties,gt(g,t))return g[t]},set({_:e},t,o){const{data:n,setupState:a,ctx:s}=e;return jr(a,t)?(a[t]=o,!0):n!==Ct&&gt(n,t)?(n[t]=o,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:n,appContext:a,propsOptions:s,type:l}},r){let u,d;return!!(o[r]||e!==Ct&&r[0]!=="$"&&gt(e,r)||jr(t,r)||(u=s[0])&&gt(u,r)||gt(n,r)||gt(os,r)||gt(a.config.globalProperties,r)||(d=l.__cssModules)&&d[r])},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:gt(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function Sc(e){return He(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}let Vr=!0;function Lh(e){const t=Ec(e),o=e.proxy,n=e.ctx;Vr=!1,t.beforeCreate&&kc(t.beforeCreate,e,"bc");const{data:a,computed:s,methods:l,watch:r,provide:u,inject:d,created:c,beforeMount:f,mounted:g,beforeUpdate:p,updated:v,activated:b,deactivated:x,beforeDestroy:k,beforeUnmount:A,destroyed:U,unmounted:w,render:O,renderTracked:W,renderTriggered:V,errorCaptured:H,serverPrefetch:q,expose:he,inheritAttrs:le,components:R,directives:Y,filters:X}=t;if(d&&$h(d,n,null),l)for(const se in l){const P=l[se];Ge(P)&&(n[se]=P.bind(o))}if(a){const se=a.call(o,o);Et(se)&&(e.data=Zs(se))}if(Vr=!0,s)for(const se in s){const P=s[se],F=Ge(P)?P.bind(o,o):Ge(P.get)?P.get.bind(o,o):Vn,K=!Ge(P)&&Ge(P.set)?P.set.bind(o):Vn,oe=ot({get:F,set:K});Object.defineProperty(n,se,{enumerable:!0,configurable:!0,get:()=>oe.value,set:Q=>oe.value=Q})}if(r)for(const se in r)Cc(r[se],n,o,se);if(u){const se=Ge(u)?u.call(o):u;Reflect.ownKeys(se).forEach(P=>{gl(P,se[P])})}c&&kc(c,e,"c");function Z(se,P){He(P)?P.forEach(F=>se(F.bind(o))):P&&se(P.bind(o))}if(Z(_h,f),Z(vt,g),Z(bc,p),Z(wc,v),Z(mh,b),Z(hh,x),Z(xh,H),Z(wh,W),Z(bh,V),Z(Eo,A),Z(Dn,w),Z(yh,q),He(he))if(he.length){const se=e.exposed||(e.exposed={});he.forEach(P=>{Object.defineProperty(se,P,{get:()=>o[P],set:F=>o[P]=F,enumerable:!0})})}else e.exposed||(e.exposed={});O&&e.render===Vn&&(e.render=O),le!=null&&(e.inheritAttrs=le),R&&(e.components=R),Y&&(e.directives=Y),q&&vc(e)}function $h(e,t,o=Vn){He(e)&&(e=zr(e));for(const n in e){const a=e[n];let s;Et(a)?"default"in a?s=io(a.from||n,a.default,!0):s=io(a.from||n):s=io(a),Ot(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:l=>s.value=l}):t[n]=s}}function kc(e,t,o){Nn(He(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,o)}function Cc(e,t,o,n){let a=n.includes(".")?jc(o,n):()=>o[n];if(Mt(e)){const s=t[e];Ge(s)&&Ze(a,s)}else if(Ge(e))Ze(a,e.bind(o));else if(Et(e))if(He(e))e.forEach(s=>Cc(s,t,o,n));else{const s=Ge(e.handler)?e.handler.bind(o):t[e.handler];Ge(s)&&Ze(a,s,e)}}function Ec(e){const t=e.type,{mixins:o,extends:n}=t,{mixins:a,optionsCache:s,config:{optionMergeStrategies:l}}=e.appContext,r=s.get(t);let u;return r?u=r:!a.length&&!o&&!n?u=t:(u={},a.length&&a.forEach(d=>pl(u,d,l,!0)),pl(u,t,l)),Et(t)&&s.set(t,u),u}function pl(e,t,o,n=!1){const{mixins:a,extends:s}=t;s&&pl(e,s,o,!0),a&&a.forEach(l=>pl(e,l,o,!0));for(const l in t)if(!(n&&l==="expose")){const r=Ah[l]||o&&o[l];e[l]=r?r(e[l],t[l]):t[l]}return e}const Ah={data:Lc,props:$c,emits:$c,methods:as,computed:as,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:as,directives:as,watch:Mh,provide:Lc,inject:Ih};function Lc(e,t){return t?e?function(){return Vt(Ge(e)?e.call(this,this):e,Ge(t)?t.call(this,this):t)}:t:e}function Ih(e,t){return as(zr(e),zr(t))}function zr(e){if(He(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function rn(e,t){return e?[...new Set([].concat(e,t))]:t}function as(e,t){return e?Vt(Object.create(null),e,t):t}function $c(e,t){return e?He(e)&&He(t)?[...new Set([...e,...t])]:Vt(Object.create(null),Sc(e),Sc(t??{})):t}function Mh(e,t){if(!e)return t;if(!t)return e;const o=Vt(Object.create(null),e);for(const n in t)o[n]=rn(e[n],t[n]);return o}function Ac(){return{app:null,config:{isNativeTag:vu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Oh=0;function Rh(e,t){return function(n,a=null){Ge(n)||(n=Vt({},n)),a!=null&&!Et(a)&&(a=null);const s=Ac(),l=new WeakSet,r=[];let u=!1;const d=s.app={_uid:Oh++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:vv,get config(){return s.config},set config(c){},use(c,...f){return l.has(c)||(c&&Ge(c.install)?(l.add(c),c.install(d,...f)):Ge(c)&&(l.add(c),c(d,...f))),d},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),d},component(c,f){return f?(s.components[c]=f,d):s.components[c]},directive(c,f){return f?(s.directives[c]=f,d):s.directives[c]},mount(c,f,g){if(!u){const p=d._ceVNode||ze(n,a);return p.appContext=s,g===!0?g="svg":g===!1&&(g=void 0),e(p,c,g),u=!0,d._container=c,c.__vue_app__=d,yl(p.component)}},onUnmount(c){r.push(c)},unmount(){u&&(Nn(r,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(c,f){return s.provides[c]=f,d},runWithContext(c){const f=Qo;Qo=d;try{return c()}finally{Qo=f}}};return d}}let Qo=null;function gl(e,t){if(en){let o=en.provides;const n=en.parent&&en.parent.provides;n===o&&(o=en.provides=Object.create(n)),o[e]=t}}function io(e,t,o=!1){const n=uo();if(n||Qo){let a=Qo?Qo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return o&&Ge(t)?t.call(n&&n.proxy):t}}function Nh(){return!!(uo()||Qo)}const Ic={},Mc=()=>Object.create(Ic),Oc=e=>Object.getPrototypeOf(e)===Ic;function Dh(e,t,o,n=!1){const a={},s=Mc();e.propsDefaults=Object.create(null),Rc(e,t,a,s);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);o?e.props=n?a:Qm(a):e.type.props?e.props=a:e.props=s,e.attrs=s}function Ph(e,t,o,n){const{props:a,attrs:s,vnode:{patchFlag:l}}=e,r=nt(a),[u]=e.propsOptions;let d=!1;if((n||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let g=c[f];if(ml(e.emitsOptions,g))continue;const p=t[g];if(u)if(gt(s,g))p!==s[g]&&(s[g]=p,d=!0);else{const v=kn(g);a[v]=qr(u,r,v,p,e,!1)}else p!==s[g]&&(s[g]=p,d=!0)}}}else{Rc(e,t,a,s)&&(d=!0);let c;for(const f in r)(!t||!gt(t,f)&&((c=xo(f))===f||!gt(t,c)))&&(u?o&&(o[f]!==void 0||o[c]!==void 0)&&(a[f]=qr(u,r,f,void 0,e,!0)):delete a[f]);if(s!==r)for(const f in s)(!t||!gt(t,f))&&(delete s[f],d=!0)}d&&oo(e.attrs,"set","")}function Rc(e,t,o,n){const[a,s]=e.propsOptions;let l=!1,r;if(t)for(let u in t){if(za(u))continue;const d=t[u];let c;a&&gt(a,c=kn(u))?!s||!s.includes(c)?o[c]=d:(r||(r={}))[c]=d:ml(e.emitsOptions,u)||(!(u in n)||d!==n[u])&&(n[u]=d,l=!0)}if(s){const u=nt(o),d=r||Ct;for(let c=0;c<s.length;c++){const f=s[c];o[f]=qr(a,u,f,d[f],e,!gt(d,f))}}return l}function qr(e,t,o,n,a,s){const l=e[o];if(l!=null){const r=gt(l,"default");if(r&&n===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&Ge(u)){const{propsDefaults:d}=a;if(o in d)n=d[o];else{const c=us(a);n=d[o]=u.call(null,t),c()}}else n=u;a.ce&&a.ce._setProp(o,n)}l[0]&&(s&&!r?n=!1:l[1]&&(n===""||n===xo(o))&&(n=!0))}return n}const Fh=new WeakMap;function Nc(e,t,o=!1){const n=o?Fh:t.propsCache,a=n.get(e);if(a)return a;const s=e.props,l={},r=[];let u=!1;if(!Ge(e)){const c=f=>{u=!0;const[g,p]=Nc(f,t,!0);Vt(l,g),p&&r.push(...p)};!o&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!u)return Et(e)&&n.set(e,ua),ua;if(He(s))for(let c=0;c<s.length;c++){const f=kn(s[c]);Dc(f)&&(l[f]=Ct)}else if(s)for(const c in s){const f=kn(c);if(Dc(f)){const g=s[c],p=l[f]=He(g)||Ge(g)?{type:g}:Vt({},g),v=p.type;let b=!1,x=!0;if(He(v))for(let k=0;k<v.length;++k){const A=v[k],U=Ge(A)&&A.name;if(U==="Boolean"){b=!0;break}else U==="String"&&(x=!1)}else b=Ge(v)&&v.name==="Boolean";p[0]=b,p[1]=x,(b||gt(p,"default"))&&r.push(f)}}const d=[l,r];return Et(e)&&n.set(e,d),d}function Dc(e){return e[0]!=="$"&&!za(e)}const Gr=e=>e==="_"||e==="_ctx"||e==="$stable",Qr=e=>He(e)?e.map(Qn):[Qn(e)],Bh=(e,t,o)=>{if(t._n)return t;const n=ht((...a)=>Qr(t(...a)),o);return n._c=!1,n},Pc=(e,t,o)=>{const n=e._ctx;for(const a in e){if(Gr(a))continue;const s=e[a];if(Ge(s))t[a]=Bh(a,s,n);else if(s!=null){const l=Qr(s);t[a]=()=>l}}},Fc=(e,t)=>{const o=Qr(t);e.slots.default=()=>o},Bc=(e,t,o)=>{for(const n in t)(o||!Gr(n))&&(e[n]=t[n])},Uh=(e,t,o)=>{const n=e.slots=Mc();if(e.vnode.shapeFlag&32){const a=t._;a?(Bc(n,t,o),o&&xu(n,"_",a,!0)):Pc(t,n)}else t&&Fc(e,t)},Hh=(e,t,o)=>{const{vnode:n,slots:a}=e;let s=!0,l=Ct;if(n.shapeFlag&32){const r=t._;r?o&&r===1?s=!1:Bc(a,t,o):(s=!t.$stable,Pc(t,a)),l=t}else t&&(Fc(e,t),l={default:1});if(s)for(const r in a)!Gr(r)&&l[r]==null&&delete a[r]},un=nv;function Wh(e){return jh(e)}function jh(e,t){const o=Gs();o.__VUE__=!0;const{insert:n,remove:a,patchProp:s,createElement:l,createText:r,createComment:u,setText:d,setElementText:c,parentNode:f,nextSibling:g,setScopeId:p=Vn,insertStaticContent:v}=e,b=(L,E,B,ne=null,ge=null,ve=null,S=void 0,y=null,N=!!E.dynamicChildren)=>{if(L===E)return;L&&!Ko(L,E)&&(ne=M(L),Q(L,ge,ve,!0),L=null),E.patchFlag===-2&&(N=!1,E.dynamicChildren=null);const{type:j,ref:xe,shapeFlag:_e}=E;switch(j){case ss:x(L,E,B,ne);break;case Zt:k(L,E,B,ne);break;case Jr:L==null&&A(E,B,ne,S);break;case Oe:R(L,E,B,ne,ge,ve,S,y,N);break;default:_e&1?O(L,E,B,ne,ge,ve,S,y,N):_e&6?Y(L,E,B,ne,ge,ve,S,y,N):(_e&64||_e&128)&&j.process(L,E,B,ne,ge,ve,S,y,N,D)}xe!=null&&ge?ts(xe,L&&L.ref,ve,E||L,!E):xe==null&&L&&L.ref!=null&&ts(L.ref,null,ve,L,!0)},x=(L,E,B,ne)=>{if(L==null)n(E.el=r(E.children),B,ne);else{const ge=E.el=L.el;E.children!==L.children&&d(ge,E.children)}},k=(L,E,B,ne)=>{L==null?n(E.el=u(E.children||""),B,ne):E.el=L.el},A=(L,E,B,ne)=>{[L.el,L.anchor]=v(L.children,E,B,ne,L.el,L.anchor)},U=({el:L,anchor:E},B,ne)=>{let ge;for(;L&&L!==E;)ge=g(L),n(L,B,ne),L=ge;n(E,B,ne)},w=({el:L,anchor:E})=>{let B;for(;L&&L!==E;)B=g(L),a(L),L=B;a(E)},O=(L,E,B,ne,ge,ve,S,y,N)=>{E.type==="svg"?S="svg":E.type==="math"&&(S="mathml"),L==null?W(E,B,ne,ge,ve,S,y,N):q(L,E,ge,ve,S,y,N)},W=(L,E,B,ne,ge,ve,S,y)=>{let N,j;const{props:xe,shapeFlag:_e,transition:J,dirs:ue}=L;if(N=L.el=l(L.type,ve,xe&&xe.is,xe),_e&8?c(N,L.children):_e&16&&H(L.children,N,null,ne,ge,Yr(L,ve),S,y),ue&&qo(L,null,ne,"created"),V(N,L,L.scopeId,S,ne),xe){for(const Pe in xe)Pe!=="value"&&!za(Pe)&&s(N,Pe,null,xe[Pe],ve,ne);"value"in xe&&s(N,"value",null,xe.value,ve),(j=xe.onVnodeBeforeMount)&&Yn(j,ne,L)}ue&&qo(L,null,ne,"beforeMount");const Me=Vh(ge,J);Me&&J.beforeEnter(N),n(N,E,B),((j=xe&&xe.onVnodeMounted)||Me||ue)&&un(()=>{j&&Yn(j,ne,L),Me&&J.enter(N),ue&&qo(L,null,ne,"mounted")},ge)},V=(L,E,B,ne,ge)=>{if(B&&p(L,B),ne)for(let ve=0;ve<ne.length;ve++)p(L,ne[ve]);if(ge){let ve=ge.subTree;if(E===ve||Gc(ve.type)&&(ve.ssContent===E||ve.ssFallback===E)){const S=ge.vnode;V(L,S,S.scopeId,S.slotScopeIds,ge.parent)}}},H=(L,E,B,ne,ge,ve,S,y,N=0)=>{for(let j=N;j<L.length;j++){const xe=L[j]=y?$o(L[j]):Qn(L[j]);b(null,xe,E,B,ne,ge,ve,S,y)}},q=(L,E,B,ne,ge,ve,S)=>{const y=E.el=L.el;let{patchFlag:N,dynamicChildren:j,dirs:xe}=E;N|=L.patchFlag&16;const _e=L.props||Ct,J=E.props||Ct;let ue;if(B&&Yo(B,!1),(ue=J.onVnodeBeforeUpdate)&&Yn(ue,B,E,L),xe&&qo(E,L,B,"beforeUpdate"),B&&Yo(B,!0),(_e.innerHTML&&J.innerHTML==null||_e.textContent&&J.textContent==null)&&c(y,""),j?he(L.dynamicChildren,j,y,B,ne,Yr(E,ge),ve):S||P(L,E,y,null,B,ne,Yr(E,ge),ve,!1),N>0){if(N&16)le(y,_e,J,B,ge);else if(N&2&&_e.class!==J.class&&s(y,"class",null,J.class,ge),N&4&&s(y,"style",_e.style,J.style,ge),N&8){const Me=E.dynamicProps;for(let Pe=0;Pe<Me.length;Pe++){const We=Me[Pe],Ve=_e[We],ut=J[We];(ut!==Ve||We==="value")&&s(y,We,Ve,ut,ge,B)}}N&1&&L.children!==E.children&&c(y,E.children)}else!S&&j==null&&le(y,_e,J,B,ge);((ue=J.onVnodeUpdated)||xe)&&un(()=>{ue&&Yn(ue,B,E,L),xe&&qo(E,L,B,"updated")},ne)},he=(L,E,B,ne,ge,ve,S)=>{for(let y=0;y<E.length;y++){const N=L[y],j=E[y],xe=N.el&&(N.type===Oe||!Ko(N,j)||N.shapeFlag&198)?f(N.el):B;b(N,j,xe,null,ne,ge,ve,S,!0)}},le=(L,E,B,ne,ge)=>{if(E!==B){if(E!==Ct)for(const ve in E)!za(ve)&&!(ve in B)&&s(L,ve,E[ve],null,ge,ne);for(const ve in B){if(za(ve))continue;const S=B[ve],y=E[ve];S!==y&&ve!=="value"&&s(L,ve,y,S,ge,ne)}"value"in B&&s(L,"value",E.value,B.value,ge)}},R=(L,E,B,ne,ge,ve,S,y,N)=>{const j=E.el=L?L.el:r(""),xe=E.anchor=L?L.anchor:r("");let{patchFlag:_e,dynamicChildren:J,slotScopeIds:ue}=E;ue&&(y=y?y.concat(ue):ue),L==null?(n(j,B,ne),n(xe,B,ne),H(E.children||[],B,xe,ge,ve,S,y,N)):_e>0&&_e&64&&J&&L.dynamicChildren?(he(L.dynamicChildren,J,B,ge,ve,S,y),(E.key!=null||ge&&E===ge.subTree)&&Kr(L,E,!0)):P(L,E,B,xe,ge,ve,S,y,N)},Y=(L,E,B,ne,ge,ve,S,y,N)=>{E.slotScopeIds=y,L==null?E.shapeFlag&512?ge.ctx.activate(E,B,ne,S,N):X(E,B,ne,ge,ve,S,N):z(L,E,N)},X=(L,E,B,ne,ge,ve,S)=>{const y=L.component=uv(L,ne,ge);if(dl(L)&&(y.ctx.renderer=D),cv(y,!1,S),y.asyncDep){if(ge&&ge.registerDep(y,Z,S),!L.el){const N=y.subTree=ze(Zt);k(null,N,E,B),L.placeholder=N.el}}else Z(y,L,E,B,ge,ve,S)},z=(L,E,B)=>{const ne=E.component=L.component;if(ev(L,E,B))if(ne.asyncDep&&!ne.asyncResolved){se(ne,E,B);return}else ne.next=E,ne.update();else E.el=L.el,ne.vnode=E},Z=(L,E,B,ne,ge,ve,S)=>{const y=()=>{if(L.isMounted){let{next:_e,bu:J,u:ue,parent:Me,vnode:Pe}=L;{const jt=Uc(L);if(jt){_e&&(_e.el=Pe.el,se(L,_e,S)),jt.asyncDep.then(()=>{L.isUnmounted||y()});return}}let We=_e,Ve;Yo(L,!1),_e?(_e.el=Pe.el,se(L,_e,S)):_e=Pe,J&&zs(J),(Ve=_e.props&&_e.props.onVnodeBeforeUpdate)&&Yn(Ve,Me,_e,Pe),Yo(L,!0);const ut=zc(L),dt=L.subTree;L.subTree=ut,b(dt,ut,f(dt.el),M(dt),L,ge,ve),_e.el=ut.el,We===null&&tv(L,ut.el),ue&&un(ue,ge),(Ve=_e.props&&_e.props.onVnodeUpdated)&&un(()=>Yn(Ve,Me,_e,Pe),ge)}else{let _e;const{el:J,props:ue}=E,{bm:Me,m:Pe,parent:We,root:Ve,type:ut}=L,dt=ha(E);Yo(L,!1),Me&&zs(Me),!dt&&(_e=ue&&ue.onVnodeBeforeMount)&&Yn(_e,We,E),Yo(L,!0);{Ve.ce&&Ve.ce._def.shadowRoot!==!1&&Ve.ce._injectChildStyle(ut);const jt=L.subTree=zc(L);b(null,jt,B,ne,L,ge,ve),E.el=jt.el}if(Pe&&un(Pe,ge),!dt&&(_e=ue&&ue.onVnodeMounted)){const jt=E;un(()=>Yn(_e,We,jt),ge)}(E.shapeFlag&256||We&&ha(We.vnode)&&We.vnode.shapeFlag&256)&&L.a&&un(L.a,ge),L.isMounted=!0,E=B=ne=null}};L.scope.on();const N=L.effect=new $u(y);L.scope.off();const j=L.update=N.run.bind(N),xe=L.job=N.runIfDirty.bind(N);xe.i=L,xe.id=L.uid,N.scheduler=()=>Fr(xe),Yo(L,!0),j()},se=(L,E,B)=>{E.component=L;const ne=L.vnode.props;L.vnode=E,L.next=null,Ph(L,E.props,ne,B),Hh(L,E.children,B),zn(),Zu(L),qn()},P=(L,E,B,ne,ge,ve,S,y,N=!1)=>{const j=L&&L.children,xe=L?L.shapeFlag:0,_e=E.children,{patchFlag:J,shapeFlag:ue}=E;if(J>0){if(J&128){K(j,_e,B,ne,ge,ve,S,y,N);return}else if(J&256){F(j,_e,B,ne,ge,ve,S,y,N);return}}ue&8?(xe&16&&de(j,ge,ve),_e!==j&&c(B,_e)):xe&16?ue&16?K(j,_e,B,ne,ge,ve,S,y,N):de(j,ge,ve,!0):(xe&8&&c(B,""),ue&16&&H(_e,B,ne,ge,ve,S,y,N))},F=(L,E,B,ne,ge,ve,S,y,N)=>{L=L||ua,E=E||ua;const j=L.length,xe=E.length,_e=Math.min(j,xe);let J;for(J=0;J<_e;J++){const ue=E[J]=N?$o(E[J]):Qn(E[J]);b(L[J],ue,B,null,ge,ve,S,y,N)}j>xe?de(L,ge,ve,!0,!1,_e):H(E,B,ne,ge,ve,S,y,N,_e)},K=(L,E,B,ne,ge,ve,S,y,N)=>{let j=0;const xe=E.length;let _e=L.length-1,J=xe-1;for(;j<=_e&&j<=J;){const ue=L[j],Me=E[j]=N?$o(E[j]):Qn(E[j]);if(Ko(ue,Me))b(ue,Me,B,null,ge,ve,S,y,N);else break;j++}for(;j<=_e&&j<=J;){const ue=L[_e],Me=E[J]=N?$o(E[J]):Qn(E[J]);if(Ko(ue,Me))b(ue,Me,B,null,ge,ve,S,y,N);else break;_e--,J--}if(j>_e){if(j<=J){const ue=J+1,Me=ue<xe?E[ue].el:ne;for(;j<=J;)b(null,E[j]=N?$o(E[j]):Qn(E[j]),B,Me,ge,ve,S,y,N),j++}}else if(j>J)for(;j<=_e;)Q(L[j],ge,ve,!0),j++;else{const ue=j,Me=j,Pe=new Map;for(j=Me;j<=J;j++){const Ce=E[j]=N?$o(E[j]):Qn(E[j]);Ce.key!=null&&Pe.set(Ce.key,j)}let We,Ve=0;const ut=J-Me+1;let dt=!1,jt=0;const Fe=new Array(ut);for(j=0;j<ut;j++)Fe[j]=0;for(j=ue;j<=_e;j++){const Ce=L[j];if(Ve>=ut){Q(Ce,ge,ve,!0);continue}let at;if(Ce.key!=null)at=Pe.get(Ce.key);else for(We=Me;We<=J;We++)if(Fe[We-Me]===0&&Ko(Ce,E[We])){at=We;break}at===void 0?Q(Ce,ge,ve,!0):(Fe[at-Me]=j+1,at>=jt?jt=at:dt=!0,b(Ce,E[at],B,null,ge,ve,S,y,N),Ve++)}const Le=dt?zh(Fe):ua;for(We=Le.length-1,j=ut-1;j>=0;j--){const Ce=Me+j,at=E[Ce],pn=E[Ce+1],aa=Ce+1<xe?pn.el||pn.placeholder:ne;Fe[j]===0?b(null,at,B,aa,ge,ve,S,y,N):dt&&(We<0||j!==Le[We]?oe(at,B,aa,2):We--)}}},oe=(L,E,B,ne,ge=null)=>{const{el:ve,type:S,transition:y,children:N,shapeFlag:j}=L;if(j&6){oe(L.component.subTree,E,B,ne);return}if(j&128){L.suspense.move(E,B,ne);return}if(j&64){S.move(L,E,B,D);return}if(S===Oe){n(ve,E,B);for(let _e=0;_e<N.length;_e++)oe(N[_e],E,B,ne);n(L.anchor,E,B);return}if(S===Jr){U(L,E,B);return}if(ne!==2&&j&1&&y)if(ne===0)y.beforeEnter(ve),n(ve,E,B),un(()=>y.enter(ve),ge);else{const{leave:_e,delayLeave:J,afterLeave:ue}=y,Me=()=>{L.ctx.isUnmounted?a(ve):n(ve,E,B)},Pe=()=>{ve._isLeaving&&ve[lo](!0),_e(ve,()=>{Me(),ue&&ue()})};J?J(ve,Me,Pe):Pe()}else n(ve,E,B)},Q=(L,E,B,ne=!1,ge=!1)=>{const{type:ve,props:S,ref:y,children:N,dynamicChildren:j,shapeFlag:xe,patchFlag:_e,dirs:J,cacheIndex:ue}=L;if(_e===-2&&(ge=!1),y!=null&&(zn(),ts(y,null,B,L,!0),qn()),ue!=null&&(E.renderCache[ue]=void 0),xe&256){E.ctx.deactivate(L);return}const Me=xe&1&&J,Pe=!ha(L);let We;if(Pe&&(We=S&&S.onVnodeBeforeUnmount)&&Yn(We,E,L),xe&6)ye(L.component,B,ne);else{if(xe&128){L.suspense.unmount(B,ne);return}Me&&qo(L,null,E,"beforeUnmount"),xe&64?L.type.remove(L,E,B,D,ne):j&&!j.hasOnce&&(ve!==Oe||_e>0&&_e&64)?de(j,E,B,!1,!0):(ve===Oe&&_e&384||!ge&&xe&16)&&de(N,E,B),ne&&ie(L)}(Pe&&(We=S&&S.onVnodeUnmounted)||Me)&&un(()=>{We&&Yn(We,E,L),Me&&qo(L,null,E,"unmounted")},B)},ie=L=>{const{type:E,el:B,anchor:ne,transition:ge}=L;if(E===Oe){re(B,ne);return}if(E===Jr){w(L);return}const ve=()=>{a(B),ge&&!ge.persisted&&ge.afterLeave&&ge.afterLeave()};if(L.shapeFlag&1&&ge&&!ge.persisted){const{leave:S,delayLeave:y}=ge,N=()=>S(B,ve);y?y(L.el,ve,N):N()}else ve()},re=(L,E)=>{let B;for(;L!==E;)B=g(L),a(L),L=B;a(E)},ye=(L,E,B)=>{const{bum:ne,scope:ge,job:ve,subTree:S,um:y,m:N,a:j}=L;Hc(N),Hc(j),ne&&zs(ne),ge.stop(),ve&&(ve.flags|=8,Q(S,L,E,B)),y&&un(y,E),un(()=>{L.isUnmounted=!0},E)},de=(L,E,B,ne=!1,ge=!1,ve=0)=>{for(let S=ve;S<L.length;S++)Q(L[S],E,B,ne,ge)},M=L=>{if(L.shapeFlag&6)return M(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const E=g(L.anchor||L.el),B=E&&E[oc];return B?g(B):E};let G=!1;const ae=(L,E,B)=>{L==null?E._vnode&&Q(E._vnode,null,null,!0):b(E._vnode||null,L,E,null,null,null,B),E._vnode=L,G||(G=!0,Zu(),ec(),G=!1)},D={p:b,um:Q,m:oe,r:ie,mt:X,mc:H,pc:P,pbc:he,n:M,o:e};return{render:ae,hydrate:void 0,createApp:Rh(ae)}}function Yr({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function Yo({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Vh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Kr(e,t,o=!1){const n=e.children,a=t.children;if(He(n)&&He(a))for(let s=0;s<n.length;s++){const l=n[s];let r=a[s];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=a[s]=$o(a[s]),r.el=l.el),!o&&r.patchFlag!==-2&&Kr(l,r)),r.type===ss&&r.patchFlag!==-1&&(r.el=l.el),r.type===Zt&&!r.el&&(r.el=l.el)}}function zh(e){const t=e.slice(),o=[0];let n,a,s,l,r;const u=e.length;for(n=0;n<u;n++){const d=e[n];if(d!==0){if(a=o[o.length-1],e[a]<d){t[n]=a,o.push(n);continue}for(s=0,l=o.length-1;s<l;)r=s+l>>1,e[o[r]]<d?s=r+1:l=r;d<e[o[s]]&&(s>0&&(t[n]=o[s-1]),o[s]=n)}}for(s=o.length,l=o[s-1];s-- >0;)o[s]=l,l=t[l];return o}function Uc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Uc(t)}function Hc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const qh=Symbol.for("v-scx"),Gh=()=>io(qh);function Ze(e,t,o){return Wc(e,t,o)}function Wc(e,t,o=Ct){const{immediate:n,deep:a,flush:s,once:l}=o,r=Vt({},o),u=t&&n||!t&&s!=="post";let d;if(cs){if(s==="sync"){const p=Gh();d=p.__watcherHandles||(p.__watcherHandles=[])}else if(!u){const p=()=>{};return p.stop=Vn,p.resume=Vn,p.pause=Vn,p}}const c=en;r.call=(p,v,b)=>Nn(p,c,v,b);let f=!1;s==="post"?r.scheduler=p=>{un(p,c&&c.suspense)}:s!=="sync"&&(f=!0,r.scheduler=(p,v)=>{v?p():Fr(p)}),r.augmentJob=p=>{t&&(p.flags|=4),f&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const g=ah(e,t,r);return cs&&(d?d.push(g):u&&g()),g}function Qh(e,t,o){const n=this.proxy,a=Mt(e)?e.includes(".")?jc(n,e):()=>n[e]:e.bind(n,n);let s;Ge(t)?s=t:(s=t.handler,o=t);const l=us(this),r=Wc(a,s.bind(n),o);return l(),r}function jc(e,t){const o=t.split(".");return()=>{let n=e;for(let a=0;a<o.length&&n;a++)n=n[o[a]];return n}}const Yh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${kn(t)}Modifiers`]||e[`${xo(t)}Modifiers`];function Kh(e,t,...o){if(e.isUnmounted)return;const n=e.vnode.props||Ct;let a=o;const s=t.startsWith("update:"),l=s&&Yh(n,t.slice(7));l&&(l.trim&&(a=o.map(c=>Mt(c)?c.trim():c)),l.number&&(a=o.map(qs)));let r,u=n[r=wr(t)]||n[r=wr(kn(t))];!u&&s&&(u=n[r=wr(xo(t))]),u&&Nn(u,e,6,a);const d=n[r+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,Nn(d,e,6,a)}}const Jh=new WeakMap;function Vc(e,t,o=!1){const n=o?Jh:t.emitsCache,a=n.get(e);if(a!==void 0)return a;const s=e.emits;let l={},r=!1;if(!Ge(e)){const u=d=>{const c=Vc(d,t,!0);c&&(r=!0,Vt(l,c))};!o&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!r?(Et(e)&&n.set(e,null),null):(He(s)?s.forEach(u=>l[u]=null):Vt(l,s),Et(e)&&n.set(e,l),l)}function ml(e,t){return!e||!Ws(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,xo(t))||gt(e,t))}function fI(){}function zc(e){const{type:t,vnode:o,proxy:n,withProxy:a,propsOptions:[s],slots:l,attrs:r,emit:u,render:d,renderCache:c,props:f,data:g,setupState:p,ctx:v,inheritAttrs:b}=e,x=ll(e);let k,A;try{if(o.shapeFlag&4){const w=a||n,O=w;k=Qn(d.call(O,w,c,f,p,g,v)),A=r}else{const w=t;k=Qn(w.length>1?w(f,{attrs:r,slots:l,emit:u}):w(f,null)),A=t.props?r:Xh(r)}}catch(w){ls.length=0,al(w,e,1),k=ze(Zt)}let U=k;if(A&&b!==!1){const w=Object.keys(A),{shapeFlag:O}=U;w.length&&O&7&&(s&&w.some(_r)&&(A=Zh(A,s)),U=Lo(U,A,!1,!0))}return o.dirs&&(U=Lo(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(o.dirs):o.dirs),o.transition&&Go(U,o.transition),k=U,ll(x),k}const Xh=e=>{let t;for(const o in e)(o==="class"||o==="style"||Ws(o))&&((t||(t={}))[o]=e[o]);return t},Zh=(e,t)=>{const o={};for(const n in e)(!_r(n)||!(n.slice(9)in t))&&(o[n]=e[n]);return o};function ev(e,t,o){const{props:n,children:a,component:s}=e,{props:l,children:r,patchFlag:u}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&u>=0){if(u&1024)return!0;if(u&16)return n?qc(n,l,d):!!l;if(u&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const g=c[f];if(l[g]!==n[g]&&!ml(d,g))return!0}}}else return(a||r)&&(!r||!r.$stable)?!0:n===l?!1:n?l?qc(n,l,d):!0:!!l;return!1}function qc(e,t,o){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let a=0;a<n.length;a++){const s=n[a];if(t[s]!==e[s]&&!ml(o,s))return!0}return!1}function tv({vnode:e,parent:t},o){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=o,t=t.parent;else break}}const Gc=e=>e.__isSuspense;function nv(e,t){t&&t.pendingBranch?He(e)?t.effects.push(...e):t.effects.push(e):dh(e)}const Oe=Symbol.for("v-fgt"),ss=Symbol.for("v-txt"),Zt=Symbol.for("v-cmt"),Jr=Symbol.for("v-stc"),ls=[];let bn=null;function T(e=!1){ls.push(bn=e?null:[])}function ov(){ls.pop(),bn=ls[ls.length-1]||null}let rs=1;function hl(e,t=!1){rs+=e,e<0&&bn&&t&&(bn.hasOnce=!0)}function Qc(e){return e.dynamicChildren=rs>0?bn||ua:null,ov(),rs>0&&bn&&bn.push(e),e}function C(e,t,o,n,a,s){return Qc(i(e,t,o,n,a,s,!0))}function yt(e,t,o,n,a){return Qc(ze(e,t,o,n,a,!0))}function is(e){return e?e.__v_isVNode===!0:!1}function Ko(e,t){return e.type===t.type&&e.key===t.key}const Yc=({key:e})=>e??null,vl=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?Mt(e)||Ot(e)||Ge(e)?{i:Yt,r:e,k:t,f:!!o}:e:null);function i(e,t=null,o=null,n=0,a=null,s=e===Oe?0:1,l=!1,r=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Yc(t),ref:t&&vl(t),scopeId:nc,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Yt};return r?(Xr(u,o),s&128&&e.normalize(u)):o&&(u.shapeFlag|=Mt(o)?8:16),rs>0&&!l&&bn&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&bn.push(u),u}const ze=av;function av(e,t=null,o=null,n=0,a=null,s=!1){if((!e||e===kh)&&(e=Zt),is(e)){const r=Lo(e,t,!0);return o&&Xr(r,o),rs>0&&!s&&bn&&(r.shapeFlag&6?bn[bn.indexOf(e)]=r:bn.push(r)),r.patchFlag=-2,r}if(hv(e)&&(e=e.__vccOpts),t){t=sv(t);let{class:r,style:u}=t;r&&!Mt(r)&&(t.class=Ee(r)),Et(u)&&(Nr(u)&&!He(u)&&(u=Vt({},u)),t.style=mt(u))}const l=Mt(e)?1:Gc(e)?128:ac(e)?64:Et(e)?4:Ge(e)?2:0;return i(e,t,o,n,a,l,s,!0)}function sv(e){return e?Nr(e)||Oc(e)?Vt({},e):e:null}function Lo(e,t,o=!1,n=!1){const{props:a,ref:s,patchFlag:l,children:r,transition:u}=e,d=t?lv(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Yc(d),ref:t&&t.ref?o&&s?He(s)?s.concat(vl(t)):[s,vl(t)]:vl(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Oe?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Lo(e.ssContent),ssFallback:e.ssFallback&&Lo(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Go(c,u.clone(c)),c}function qe(e=" ",t=0){return ze(ss,null,e,t)}function me(e="",t=!1){return t?(T(),yt(Zt,null,e)):ze(Zt,null,e)}function Qn(e){return e==null||typeof e=="boolean"?ze(Zt):He(e)?ze(Oe,null,e.slice()):is(e)?$o(e):ze(ss,null,String(e))}function $o(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Lo(e)}function Xr(e,t){let o=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(He(t))o=16;else if(typeof t=="object")if(n&65){const a=t.default;a&&(a._c&&(a._d=!1),Xr(e,a()),a._c&&(a._d=!0));return}else{o=32;const a=t._;!a&&!Oc(t)?t._ctx=Yt:a===3&&Yt&&(Yt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ge(t)?(t={default:t,_ctx:Yt},o=32):(t=String(t),n&64?(o=16,t=[qe(t)]):o=8);e.children=t,e.shapeFlag|=o}function lv(...e){const t={};for(let o=0;o<e.length;o++){const n=e[o];for(const a in n)if(a==="class")t.class!==n.class&&(t.class=Ee([t.class,n.class]));else if(a==="style")t.style=mt([t.style,n.style]);else if(Ws(a)){const s=t[a],l=n[a];l&&s!==l&&!(He(s)&&s.includes(l))&&(t[a]=s?[].concat(s,l):l)}else a!==""&&(t[a]=n[a])}return t}function Yn(e,t,o,n=null){Nn(e,t,7,[o,n])}const rv=Ac();let iv=0;function uv(e,t,o){const n=e.type,a=(t?t.appContext:e.appContext)||rv,s={uid:iv++,vnode:e,type:n,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Eu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nc(n,a),emitsOptions:Vc(n,a),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:n.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Kh.bind(null,s),e.ce&&e.ce(s),s}let en=null;const uo=()=>en||Yt;let _l,Zr;{const e=Gs(),t=(o,n)=>{let a;return(a=e[o])||(a=e[o]=[]),a.push(n),s=>{a.length>1?a.forEach(l=>l(s)):a[0](s)}};_l=t("__VUE_INSTANCE_SETTERS__",o=>en=o),Zr=t("__VUE_SSR_SETTERS__",o=>cs=o)}const us=e=>{const t=en;return _l(e),e.scope.on(),()=>{e.scope.off(),_l(t)}},Kc=()=>{en&&en.scope.off(),_l(null)};function Jc(e){return e.vnode.shapeFlag&4}let cs=!1;function cv(e,t=!1,o=!1){t&&Zr(t);const{props:n,children:a}=e.vnode,s=Jc(e);Dh(e,n,s,t),Uh(e,a,o||t);const l=s?dv(e,t):void 0;return t&&Zr(!1),l}function dv(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Eh);const{setup:n}=o;if(n){zn();const a=e.setupContext=n.length>1?pv(e):null,s=us(e),l=pa(n,e,0,[e.props,a]),r=yu(l);if(qn(),s(),(r||e.sp)&&!ha(e)&&vc(e),r){if(l.then(Kc,Kc),t)return l.then(u=>{Xc(e,u)}).catch(u=>{al(u,e,0)});e.asyncDep=l}else Xc(e,l)}else Zc(e)}function Xc(e,t,o){Ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=Yu(t)),Zc(e)}function Zc(e,t,o){const n=e.type;e.render||(e.render=n.render||Vn);{const a=us(e);zn();try{Lh(e)}finally{qn(),a()}}}const fv={get(e,t){return Xt(e,"get",""),e[t]}};function pv(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,fv),slots:e.slots,emit:e.emit,expose:t}}function yl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Yu(Dr(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in os)return os[o](e)},has(t,o){return o in t||o in os}})):e.proxy}const gv=/(?:^|[-_])\w/g,mv=e=>e.replace(gv,t=>t.toUpperCase()).replace(/[-_]/g,"");function ed(e,t=!0){return Ge(e)?e.displayName||e.name:e.name||t&&e.__name}function td(e,t,o=!1){let n=ed(t);if(!n&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(n=a[1])}if(!n&&e&&e.parent){const a=s=>{for(const l in s)if(s[l]===t)return l};n=a(e.components||e.parent.type.components)||a(e.appContext.components)}return n?mv(n):o?"App":"Anonymous"}function hv(e){return Ge(e)&&"__vccOpts"in e}const ot=(e,t)=>nh(e,t,cs);function Lt(e,t,o){const n=(s,l,r)=>{hl(-1);try{return ze(s,l,r)}finally{hl(1)}},a=arguments.length;return a===2?Et(t)&&!He(t)?is(t)?n(e,null,[t]):n(e,t):n(e,null,t):(a>3?o=Array.prototype.slice.call(arguments,2):a===3&&is(o)&&(o=[o]),n(e,t,o))}const vv="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ei;const nd=typeof window<"u"&&window.trustedTypes;if(nd)try{ei=nd.createPolicy("vue",{createHTML:e=>e})}catch{}const od=ei?e=>ei.createHTML(e):e=>e,_v="http://www.w3.org/2000/svg",yv="http://www.w3.org/1998/Math/MathML",co=typeof document<"u"?document:null,ad=co&&co.createElement("template"),bv={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,n)=>{const a=t==="svg"?co.createElementNS(_v,e):t==="mathml"?co.createElementNS(yv,e):o?co.createElement(e,{is:o}):co.createElement(e);return e==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:e=>co.createTextNode(e),createComment:e=>co.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>co.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,n,a,s){const l=o?o.previousSibling:t.lastChild;if(a&&(a===s||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),o),!(a===s||!(a=a.nextSibling)););else{ad.innerHTML=od(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const r=ad.content;if(n==="svg"||n==="mathml"){const u=r.firstChild;for(;u.firstChild;)r.appendChild(u.firstChild);r.removeChild(u)}t.insertBefore(r,o)}return[l?l.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},Ao="transition",ds="animation",va=Symbol("_vtc"),sd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ld=Vt({},fc,sd),bl=(e=>(e.displayName="Transition",e.props=ld,e))((e,{slots:t})=>Lt(gh,id(e),t)),Jo=(e,t=[])=>{He(e)?e.forEach(o=>o(...t)):e&&e(...t)},rd=e=>e?He(e)?e.some(t=>t.length>1):e.length>1:!1;function id(e){const t={};for(const R in e)R in sd||(t[R]=e[R]);if(e.css===!1)return t;const{name:o="v",type:n,duration:a,enterFromClass:s=`${o}-enter-from`,enterActiveClass:l=`${o}-enter-active`,enterToClass:r=`${o}-enter-to`,appearFromClass:u=s,appearActiveClass:d=l,appearToClass:c=r,leaveFromClass:f=`${o}-leave-from`,leaveActiveClass:g=`${o}-leave-active`,leaveToClass:p=`${o}-leave-to`}=e,v=wv(a),b=v&&v[0],x=v&&v[1],{onBeforeEnter:k,onEnter:A,onEnterCancelled:U,onLeave:w,onLeaveCancelled:O,onBeforeAppear:W=k,onAppear:V=A,onAppearCancelled:H=U}=t,q=(R,Y,X,z)=>{R._enterCancelled=z,Io(R,Y?c:r),Io(R,Y?d:l),X&&X()},he=(R,Y)=>{R._isLeaving=!1,Io(R,f),Io(R,p),Io(R,g),Y&&Y()},le=R=>(Y,X)=>{const z=R?V:A,Z=()=>q(Y,R,X);Jo(z,[Y,Z]),ud(()=>{Io(Y,R?u:s),Kn(Y,R?c:r),rd(z)||cd(Y,n,b,Z)})};return Vt(t,{onBeforeEnter(R){Jo(k,[R]),Kn(R,s),Kn(R,l)},onBeforeAppear(R){Jo(W,[R]),Kn(R,u),Kn(R,d)},onEnter:le(!1),onAppear:le(!0),onLeave(R,Y){R._isLeaving=!0;const X=()=>he(R,Y);Kn(R,f),R._enterCancelled?(Kn(R,g),ni()):(ni(),Kn(R,g)),ud(()=>{R._isLeaving&&(Io(R,f),Kn(R,p),rd(w)||cd(R,n,x,X))}),Jo(w,[R,X])},onEnterCancelled(R){q(R,!1,void 0,!0),Jo(U,[R])},onAppearCancelled(R){q(R,!0,void 0,!0),Jo(H,[R])},onLeaveCancelled(R){he(R),Jo(O,[R])}})}function wv(e){if(e==null)return null;if(Et(e))return[ti(e.enter),ti(e.leave)];{const t=ti(e);return[t,t]}}function ti(e){return wm(e)}function Kn(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[va]||(e[va]=new Set)).add(t)}function Io(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const o=e[va];o&&(o.delete(t),o.size||(e[va]=void 0))}function ud(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let xv=0;function cd(e,t,o,n){const a=e._endId=++xv,s=()=>{a===e._endId&&n()};if(o!=null)return setTimeout(s,o);const{type:l,timeout:r,propCount:u}=dd(e,t);if(!l)return n();const d=l+"end";let c=0;const f=()=>{e.removeEventListener(d,g),s()},g=p=>{p.target===e&&++c>=u&&f()};setTimeout(()=>{c<u&&f()},r+1),e.addEventListener(d,g)}function dd(e,t){const o=window.getComputedStyle(e),n=v=>(o[v]||"").split(", "),a=n(`${Ao}Delay`),s=n(`${Ao}Duration`),l=fd(a,s),r=n(`${ds}Delay`),u=n(`${ds}Duration`),d=fd(r,u);let c=null,f=0,g=0;t===Ao?l>0&&(c=Ao,f=l,g=s.length):t===ds?d>0&&(c=ds,f=d,g=u.length):(f=Math.max(l,d),c=f>0?l>d?Ao:ds:null,g=c?c===Ao?s.length:u.length:0);const p=c===Ao&&/\b(?:transform|all)(?:,|$)/.test(n(`${Ao}Property`).toString());return{type:c,timeout:f,propCount:g,hasTransform:p}}function fd(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,n)=>pd(o)+pd(e[n])))}function pd(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ni(){return document.body.offsetHeight}function Tv(e,t,o){const n=e[va];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const wl=Symbol("_vod"),gd=Symbol("_vsh"),fs={name:"show",beforeMount(e,{value:t},{transition:o}){e[wl]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):ps(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:n}){!t!=!o&&(n?t?(n.beforeEnter(e),ps(e,!0),n.enter(e)):n.leave(e,()=>{ps(e,!1)}):ps(e,t))},beforeUnmount(e,{value:t}){ps(e,t)}};function ps(e,t){e.style.display=t?e[wl]:"none",e[gd]=!t}const Sv=Symbol(""),kv=/(?:^|;)\s*display\s*:/;function Cv(e,t,o){const n=e.style,a=Mt(o);let s=!1;if(o&&!a){if(t)if(Mt(t))for(const l of t.split(";")){const r=l.slice(0,l.indexOf(":")).trim();o[r]==null&&xl(n,r,"")}else for(const l in t)o[l]==null&&xl(n,l,"");for(const l in o)l==="display"&&(s=!0),xl(n,l,o[l])}else if(a){if(t!==o){const l=n[Sv];l&&(o+=";"+l),n.cssText=o,s=kv.test(o)}}else t&&e.removeAttribute("style");wl in e&&(e[wl]=s?n.display:"",e[gd]&&(n.display="none"))}const md=/\s*!important$/;function xl(e,t,o){if(He(o))o.forEach(n=>xl(e,t,n));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const n=Ev(e,t);md.test(o)?e.setProperty(xo(n),o.replace(md,""),"important"):e[n]=o}}const hd=["Webkit","Moz","ms"],oi={};function Ev(e,t){const o=oi[t];if(o)return o;let n=kn(t);if(n!=="filter"&&n in e)return oi[t]=n;n=Vs(n);for(let a=0;a<hd.length;a++){const s=hd[a]+n;if(s in e)return oi[t]=s}return t}const vd="http://www.w3.org/1999/xlink";function _d(e,t,o,n,a,s=Cm(t)){n&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(vd,t.slice(6,t.length)):e.setAttributeNS(vd,t,o):o==null||s&&!Su(o)?e.removeAttribute(t):e.setAttribute(t,s?"":On(o)?String(o):o)}function yd(e,t,o,n,a){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?od(o):o);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const r=s==="OPTION"?e.getAttribute("value")||"":e.value,u=o==null?e.type==="checkbox"?"on":"":String(o);(r!==u||!("_value"in e))&&(e.value=u),o==null&&e.removeAttribute(t),e._value=o;return}let l=!1;if(o===""||o==null){const r=typeof e[t];r==="boolean"?o=Su(o):o==null&&r==="string"?(o="",l=!0):r==="number"&&(o=0,l=!0)}try{e[t]=o}catch{}l&&e.removeAttribute(a||t)}function fo(e,t,o,n){e.addEventListener(t,o,n)}function Lv(e,t,o,n){e.removeEventListener(t,o,n)}const bd=Symbol("_vei");function $v(e,t,o,n,a=null){const s=e[bd]||(e[bd]={}),l=s[t];if(n&&l)l.value=n;else{const[r,u]=Av(t);if(n){const d=s[t]=Ov(n,a);fo(e,r,d,u)}else l&&(Lv(e,r,l,u),s[t]=void 0)}}const wd=/(?:Once|Passive|Capture)$/;function Av(e){let t;if(wd.test(e)){t={};let n;for(;n=e.match(wd);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xo(e.slice(2)),t]}let ai=0;const Iv=Promise.resolve(),Mv=()=>ai||(Iv.then(()=>ai=0),ai=Date.now());function Ov(e,t){const o=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=o.attached)return;Nn(Rv(n,o.value),t,5,[n])};return o.value=e,o.attached=Mv(),o}function Rv(e,t){if(He(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(n=>a=>!a._stopped&&n&&n(a))}else return t}const xd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Nv=(e,t,o,n,a,s)=>{const l=a==="svg";t==="class"?Tv(e,n,l):t==="style"?Cv(e,o,n):Ws(t)?_r(t)||$v(e,t,o,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Dv(e,t,n,l))?(yd(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&_d(e,t,n,l,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Mt(n))?yd(e,kn(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),_d(e,t,n,l))};function Dv(e,t,o,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&xd(t)&&Ge(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return xd(t)&&Mt(o)?!1:t in e}const Td=new WeakMap,Sd=new WeakMap,Tl=Symbol("_moveCb"),kd=Symbol("_enterCb"),Pv=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:Vt({},ld,{tag:String,moveClass:String}),setup(e,{slots:t}){const o=uo(),n=dc();let a,s;return wc(()=>{if(!a.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!Hv(a[0].el,o.vnode.el,l)){a=[];return}a.forEach(Fv),a.forEach(Bv);const r=a.filter(Uv);ni(),r.forEach(u=>{const d=u.el,c=d.style;Kn(d,l),c.transform=c.webkitTransform=c.transitionDuration="";const f=d[Tl]=g=>{g&&g.target!==d||(!g||g.propertyName.endsWith("transform"))&&(d.removeEventListener("transitionend",f),d[Tl]=null,Io(d,l))};d.addEventListener("transitionend",f)}),a=[]}),()=>{const l=nt(e),r=id(l);let u=l.tag||Oe;if(a=[],s)for(let d=0;d<s.length;d++){const c=s[d];c.el&&c.el instanceof Element&&(a.push(c),Go(c,es(c,r,n,o)),Td.set(c,c.el.getBoundingClientRect()))}s=t.default?Hr(t.default()):[];for(let d=0;d<s.length;d++){const c=s[d];c.key!=null&&Go(c,es(c,r,n,o))}return ze(u,null,s)}}});function Fv(e){const t=e.el;t[Tl]&&t[Tl](),t[kd]&&t[kd]()}function Bv(e){Sd.set(e,e.el.getBoundingClientRect())}function Uv(e){const t=Td.get(e),o=Sd.get(e),n=t.left-o.left,a=t.top-o.top;if(n||a){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${a}px)`,s.transitionDuration="0s",e}}function Hv(e,t,o){const n=e.cloneNode(),a=e[va];a&&a.forEach(r=>{r.split(/\s+/).forEach(u=>u&&n.classList.remove(u))}),o.split(/\s+/).forEach(r=>r&&n.classList.add(r)),n.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(n);const{hasTransform:l}=dd(n);return s.removeChild(n),l}const Mo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return He(t)?o=>zs(t,o):t};function Wv(e){e.target.composing=!0}function Cd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ln=Symbol("_assign"),Ae={created(e,{modifiers:{lazy:t,trim:o,number:n}},a){e[Ln]=Mo(a);const s=n||a.props&&a.props.type==="number";fo(e,t?"change":"input",l=>{if(l.target.composing)return;let r=e.value;o&&(r=r.trim()),s&&(r=qs(r)),e[Ln](r)}),o&&fo(e,"change",()=>{e.value=e.value.trim()}),t||(fo(e,"compositionstart",Wv),fo(e,"compositionend",Cd),fo(e,"change",Cd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:n,trim:a,number:s}},l){if(e[Ln]=Mo(l),e.composing)return;const r=(s||e.type==="number")&&!/^0\d/.test(e.value)?qs(e.value):e.value,u=t??"";r!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===o||a&&e.value.trim()===u)||(e.value=u))}},Bt={deep:!0,created(e,t,o){e[Ln]=Mo(o),fo(e,"change",()=>{const n=e._modelValue,a=_a(e),s=e.checked,l=e[Ln];if(He(n)){const r=xr(n,a),u=r!==-1;if(s&&!u)l(n.concat(a));else if(!s&&u){const d=[...n];d.splice(r,1),l(d)}}else if(da(n)){const r=new Set(n);s?r.add(a):r.delete(a),l(r)}else l($d(e,s))})},mounted:Ed,beforeUpdate(e,t,o){e[Ln]=Mo(o),Ed(e,t,o)}};function Ed(e,{value:t,oldValue:o},n){e._modelValue=t;let a;if(He(t))a=xr(t,n.props.value)>-1;else if(da(t))a=t.has(n.props.value);else{if(t===o)return;a=jo(t,$d(e,!0))}e.checked!==a&&(e.checked=a)}const po={created(e,{value:t},o){e.checked=jo(t,o.props.value),e[Ln]=Mo(o),fo(e,"change",()=>{e[Ln](_a(e))})},beforeUpdate(e,{value:t,oldValue:o},n){e[Ln]=Mo(n),t!==o&&(e.checked=jo(t,n.props.value))}},cn={deep:!0,created(e,{value:t,modifiers:{number:o}},n){const a=da(t);fo(e,"change",()=>{const s=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>o?qs(_a(l)):_a(l));e[Ln](e.multiple?a?new Set(s):s:s[0]),e._assigning=!0,Qe(()=>{e._assigning=!1})}),e[Ln]=Mo(n)},mounted(e,{value:t}){Ld(e,t)},beforeUpdate(e,t,o){e[Ln]=Mo(o)},updated(e,{value:t}){e._assigning||Ld(e,t)}};function Ld(e,t){const o=e.multiple,n=He(t);if(!(o&&!n&&!da(t))){for(let a=0,s=e.options.length;a<s;a++){const l=e.options[a],r=_a(l);if(o)if(n){const u=typeof r;u==="string"||u==="number"?l.selected=t.some(d=>String(d)===String(r)):l.selected=xr(t,r)>-1}else l.selected=t.has(r);else if(jo(_a(l),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function _a(e){return"_value"in e?e._value:e.value}function $d(e,t){const o=t?"_trueValue":"_falseValue";return o in e?e[o]:t}const Ad={created(e,t,o){Sl(e,t,o,null,"created")},mounted(e,t,o){Sl(e,t,o,null,"mounted")},beforeUpdate(e,t,o,n){Sl(e,t,o,n,"beforeUpdate")},updated(e,t,o,n){Sl(e,t,o,n,"updated")}};function jv(e,t){switch(e){case"SELECT":return cn;case"TEXTAREA":return Ae;default:switch(t){case"checkbox":return Bt;case"radio":return po;default:return Ae}}}function Sl(e,t,o,n,a){const l=jv(e.tagName,o.props&&o.props.type)[a];l&&l(e,t,o,n)}const Vv=["ctrl","shift","alt","meta"],zv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Vv.some(o=>e[`${o}Key`]&&!t.includes(o))},Je=(e,t)=>{const o=e._withMods||(e._withMods={}),n=t.join(".");return o[n]||(o[n]=((a,...s)=>{for(let l=0;l<t.length;l++){const r=zv[t[l]];if(r&&r(a,t))return}return e(a,...s)}))},qv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},tn=(e,t)=>{const o=e._withKeys||(e._withKeys={}),n=t.join(".");return o[n]||(o[n]=(a=>{if(!("key"in a))return;const s=xo(a.key);if(t.some(l=>l===s||qv[l]===s))return e(a)}))},Gv=Vt({patchProp:Nv},bv);let Id;function Md(){return Id||(Id=Wh(Gv))}const Od=((...e)=>{Md().render(...e)}),Qv=((...e)=>{const t=Md().createApp(...e),{mount:o}=t;return t.mount=n=>{const a=Kv(n);if(!a)return;const s=t._component;!Ge(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=o(a,!1,Yv(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t});function Yv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kv(e){return Mt(e)?document.querySelector(e):e}/*!
  * shared v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Jv(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const kl=typeof window<"u",Oo=(e,t=!1)=>t?Symbol.for(e):Symbol(e),Xv=(e,t,o)=>Zv({l:e,k:t,s:o}),Zv=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ut=e=>typeof e=="number"&&isFinite(e),e1=e=>si(e)==="[object Date]",ya=e=>si(e)==="[object RegExp]",Cl=e=>et(e)&&Object.keys(e).length===0,zt=Object.assign,t1=Object.create,bt=(e=null)=>t1(e);let Rd;const Xo=()=>Rd||(Rd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:bt());function Nd(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Dd(e){return e.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n1(e){return e=e.replace(/(\w+)\s*=\s*"([^"]*)"/g,(n,a,s)=>`${a}="${Dd(s)}"`),e=e.replace(/(\w+)\s*=\s*'([^']*)'/g,(n,a,s)=>`${a}='${Dd(s)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(e)&&(e=e.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(n=>{e=e.replace(n,"$1javascript&#58;")}),e}const o1=Object.prototype.hasOwnProperty;function Pn(e,t){return o1.call(e,t)}const Nt=Array.isArray,It=e=>typeof e=="function",De=e=>typeof e=="string",ct=e=>typeof e=="boolean",ft=e=>e!==null&&typeof e=="object",a1=e=>ft(e)&&It(e.then)&&It(e.catch),Pd=Object.prototype.toString,si=e=>Pd.call(e),et=e=>si(e)==="[object Object]",s1=e=>e==null?"":Nt(e)||et(e)&&e.toString===Pd?JSON.stringify(e,null,2):String(e);function li(e,t=""){return e.reduce((o,n,a)=>a===0?o+n:o+t+n,"")}const El=e=>!ft(e)||Nt(e);function Ll(e,t){if(El(e)||El(t))throw new Error("Invalid value");const o=[{src:e,des:t}];for(;o.length;){const{src:n,des:a}=o.pop();Object.keys(n).forEach(s=>{s!=="__proto__"&&(ft(n[s])&&!ft(a[s])&&(a[s]=Array.isArray(n[s])?[]:bt()),El(a[s])||El(n[s])?a[s]=n[s]:o.push({src:n[s],des:a[s]}))})}}/*!
  * message-compiler v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function l1(e,t,o){return{line:e,column:t,offset:o}}function ri(e,t,o){return{start:e,end:t}}const _t={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},r1=17;function $l(e,t,o={}){const{domain:n,messages:a,args:s}=o,l=e,r=new SyntaxError(String(l));return r.code=e,t&&(r.location=t),r.domain=n,r}function i1(e){throw e}const Jn=" ",u1="\r",nn=`
`,c1="\u2028",d1="\u2029";function f1(e){const t=e;let o=0,n=1,a=1,s=0;const l=V=>t[V]===u1&&t[V+1]===nn,r=V=>t[V]===nn,u=V=>t[V]===d1,d=V=>t[V]===c1,c=V=>l(V)||r(V)||u(V)||d(V),f=()=>o,g=()=>n,p=()=>a,v=()=>s,b=V=>l(V)||u(V)||d(V)?nn:t[V],x=()=>b(o),k=()=>b(o+s);function A(){return s=0,c(o)&&(n++,a=0),l(o)&&o++,o++,a++,t[o]}function U(){return l(o+s)&&s++,s++,t[o+s]}function w(){o=0,n=1,a=1,s=0}function O(V=0){s=V}function W(){const V=o+s;for(;V!==o;)A();s=0}return{index:f,line:g,column:p,peekOffset:v,charAt:b,currentChar:x,currentPeek:k,next:A,peek:U,reset:w,resetPeek:O,skipToPeek:W}}const go=void 0,p1=".",Fd="'",g1="tokenizer";function m1(e,t={}){const o=t.location!==!1,n=f1(e),a=()=>n.index(),s=()=>l1(n.line(),n.column(),n.index()),l=s(),r=a(),u={currentType:13,offset:r,startLoc:l,endLoc:l,lastType:13,lastOffset:r,lastStartLoc:l,lastEndLoc:l,braceNest:0,inLinked:!1,text:""},d=()=>u,{onError:c}=t;function f(S,y,N,...j){const xe=d();if(y.column+=N,y.offset+=N,c){const _e=o?ri(xe.startLoc,y):null,J=$l(S,_e,{domain:g1,args:j});c(J)}}function g(S,y,N){S.endLoc=s(),S.currentType=y;const j={type:y};return o&&(j.loc=ri(S.startLoc,S.endLoc)),N!=null&&(j.value=N),j}const p=S=>g(S,13);function v(S,y){return S.currentChar()===y?(S.next(),y):(f(_t.EXPECTED_TOKEN,s(),0,y),"")}function b(S){let y="";for(;S.currentPeek()===Jn||S.currentPeek()===nn;)y+=S.currentPeek(),S.peek();return y}function x(S){const y=b(S);return S.skipToPeek(),y}function k(S){if(S===go)return!1;const y=S.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y===95}function A(S){if(S===go)return!1;const y=S.charCodeAt(0);return y>=48&&y<=57}function U(S,y){const{currentType:N}=y;if(N!==2)return!1;b(S);const j=k(S.currentPeek());return S.resetPeek(),j}function w(S,y){const{currentType:N}=y;if(N!==2)return!1;b(S);const j=S.currentPeek()==="-"?S.peek():S.currentPeek(),xe=A(j);return S.resetPeek(),xe}function O(S,y){const{currentType:N}=y;if(N!==2)return!1;b(S);const j=S.currentPeek()===Fd;return S.resetPeek(),j}function W(S,y){const{currentType:N}=y;if(N!==7)return!1;b(S);const j=S.currentPeek()===".";return S.resetPeek(),j}function V(S,y){const{currentType:N}=y;if(N!==8)return!1;b(S);const j=k(S.currentPeek());return S.resetPeek(),j}function H(S,y){const{currentType:N}=y;if(!(N===7||N===11))return!1;b(S);const j=S.currentPeek()===":";return S.resetPeek(),j}function q(S,y){const{currentType:N}=y;if(N!==9)return!1;const j=()=>{const _e=S.currentPeek();return _e==="{"?k(S.peek()):_e==="@"||_e==="|"||_e===":"||_e==="."||_e===Jn||!_e?!1:_e===nn?(S.peek(),j()):le(S,!1)},xe=j();return S.resetPeek(),xe}function he(S){b(S);const y=S.currentPeek()==="|";return S.resetPeek(),y}function le(S,y=!0){const N=(xe=!1,_e="")=>{const J=S.currentPeek();return J==="{"||J==="@"||!J?xe:J==="|"?!(_e===Jn||_e===nn):J===Jn?(S.peek(),N(!0,Jn)):J===nn?(S.peek(),N(!0,nn)):!0},j=N();return y&&S.resetPeek(),j}function R(S,y){const N=S.currentChar();return N===go?go:y(N)?(S.next(),N):null}function Y(S){const y=S.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y>=48&&y<=57||y===95||y===36}function X(S){return R(S,Y)}function z(S){const y=S.charCodeAt(0);return y>=97&&y<=122||y>=65&&y<=90||y>=48&&y<=57||y===95||y===36||y===45}function Z(S){return R(S,z)}function se(S){const y=S.charCodeAt(0);return y>=48&&y<=57}function P(S){return R(S,se)}function F(S){const y=S.charCodeAt(0);return y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102}function K(S){return R(S,F)}function oe(S){let y="",N="";for(;y=P(S);)N+=y;return N}function Q(S){let y="";for(;;){const N=S.currentChar();if(N==="{"||N==="}"||N==="@"||N==="|"||!N)break;if(N===Jn||N===nn)if(le(S))y+=N,S.next();else{if(he(S))break;y+=N,S.next()}else y+=N,S.next()}return y}function ie(S){x(S);let y="",N="";for(;y=Z(S);)N+=y;const j=S.currentChar();if(j&&j!=="}"&&j!==go&&j!==Jn&&j!==nn&&j!=="　"){const xe=D(S);return f(_t.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,N+xe),N+xe}return S.currentChar()===go&&f(_t.UNTERMINATED_CLOSING_BRACE,s(),0),N}function re(S){x(S);let y="";return S.currentChar()==="-"?(S.next(),y+=`-${oe(S)}`):y+=oe(S),S.currentChar()===go&&f(_t.UNTERMINATED_CLOSING_BRACE,s(),0),y}function ye(S){return S!==Fd&&S!==nn}function de(S){x(S),v(S,"'");let y="",N="";for(;y=R(S,ye);)y==="\\"?N+=M(S):N+=y;const j=S.currentChar();return j===nn||j===go?(f(_t.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),j===nn&&(S.next(),v(S,"'")),N):(v(S,"'"),N)}function M(S){const y=S.currentChar();switch(y){case"\\":case"'":return S.next(),`\\${y}`;case"u":return G(S,y,4);case"U":return G(S,y,6);default:return f(_t.UNKNOWN_ESCAPE_SEQUENCE,s(),0,y),""}}function G(S,y,N){v(S,y);let j="";for(let xe=0;xe<N;xe++){const _e=K(S);if(!_e){f(_t.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${y}${j}${S.currentChar()}`);break}j+=_e}return`\\${y}${j}`}function ae(S){return S!=="{"&&S!=="}"&&S!==Jn&&S!==nn}function D(S){x(S);let y="",N="";for(;y=R(S,ae);)N+=y;return N}function ee(S){let y="",N="";for(;y=X(S);)N+=y;return N}function L(S){const y=N=>{const j=S.currentChar();return j==="{"||j==="@"||j==="|"||j==="("||j===")"||!j||j===Jn?N:(N+=j,S.next(),y(N))};return y("")}function E(S){x(S);const y=v(S,"|");return x(S),y}function B(S,y){let N=null;switch(S.currentChar()){case"{":return y.braceNest>=1&&f(_t.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),S.next(),N=g(y,2,"{"),x(S),y.braceNest++,N;case"}":return y.braceNest>0&&y.currentType===2&&f(_t.EMPTY_PLACEHOLDER,s(),0),S.next(),N=g(y,3,"}"),y.braceNest--,y.braceNest>0&&x(S),y.inLinked&&y.braceNest===0&&(y.inLinked=!1),N;case"@":return y.braceNest>0&&f(_t.UNTERMINATED_CLOSING_BRACE,s(),0),N=ne(S,y)||p(y),y.braceNest=0,N;default:{let xe=!0,_e=!0,J=!0;if(he(S))return y.braceNest>0&&f(_t.UNTERMINATED_CLOSING_BRACE,s(),0),N=g(y,1,E(S)),y.braceNest=0,y.inLinked=!1,N;if(y.braceNest>0&&(y.currentType===4||y.currentType===5||y.currentType===6))return f(_t.UNTERMINATED_CLOSING_BRACE,s(),0),y.braceNest=0,ge(S,y);if(xe=U(S,y))return N=g(y,4,ie(S)),x(S),N;if(_e=w(S,y))return N=g(y,5,re(S)),x(S),N;if(J=O(S,y))return N=g(y,6,de(S)),x(S),N;if(!xe&&!_e&&!J)return N=g(y,12,D(S)),f(_t.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,N.value),x(S),N;break}}return N}function ne(S,y){const{currentType:N}=y;let j=null;const xe=S.currentChar();switch((N===7||N===8||N===11||N===9)&&(xe===nn||xe===Jn)&&f(_t.INVALID_LINKED_FORMAT,s(),0),xe){case"@":return S.next(),j=g(y,7,"@"),y.inLinked=!0,j;case".":return x(S),S.next(),g(y,8,".");case":":return x(S),S.next(),g(y,9,":");default:return he(S)?(j=g(y,1,E(S)),y.braceNest=0,y.inLinked=!1,j):W(S,y)||H(S,y)?(x(S),ne(S,y)):V(S,y)?(x(S),g(y,11,ee(S))):q(S,y)?(x(S),xe==="{"?B(S,y)||j:g(y,10,L(S))):(N===7&&f(_t.INVALID_LINKED_FORMAT,s(),0),y.braceNest=0,y.inLinked=!1,ge(S,y))}}function ge(S,y){let N={type:13};if(y.braceNest>0)return B(S,y)||p(y);if(y.inLinked)return ne(S,y)||p(y);switch(S.currentChar()){case"{":return B(S,y)||p(y);case"}":return f(_t.UNBALANCED_CLOSING_BRACE,s(),0),S.next(),g(y,3,"}");case"@":return ne(S,y)||p(y);default:{if(he(S))return N=g(y,1,E(S)),y.braceNest=0,y.inLinked=!1,N;if(le(S))return g(y,0,Q(S));break}}return N}function ve(){const{currentType:S,offset:y,startLoc:N,endLoc:j}=u;return u.lastType=S,u.lastOffset=y,u.lastStartLoc=N,u.lastEndLoc=j,u.offset=a(),u.startLoc=s(),n.currentChar()===go?g(u,13):ge(n,u)}return{nextToken:ve,currentOffset:a,currentPosition:s,context:d}}const h1="parser",v1=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function _1(e,t,o){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(t||o,16);return n<=55295||n>=57344?String.fromCodePoint(n):"�"}}}function y1(e={}){const t=e.location!==!1,{onError:o}=e;function n(k,A,U,w,...O){const W=k.currentPosition();if(W.offset+=w,W.column+=w,o){const V=t?ri(U,W):null,H=$l(A,V,{domain:h1,args:O});o(H)}}function a(k,A,U){const w={type:k};return t&&(w.start=A,w.end=A,w.loc={start:U,end:U}),w}function s(k,A,U,w){t&&(k.end=A,k.loc&&(k.loc.end=U))}function l(k,A){const U=k.context(),w=a(3,U.offset,U.startLoc);return w.value=A,s(w,k.currentOffset(),k.currentPosition()),w}function r(k,A){const U=k.context(),{lastOffset:w,lastStartLoc:O}=U,W=a(5,w,O);return W.index=parseInt(A,10),k.nextToken(),s(W,k.currentOffset(),k.currentPosition()),W}function u(k,A){const U=k.context(),{lastOffset:w,lastStartLoc:O}=U,W=a(4,w,O);return W.key=A,k.nextToken(),s(W,k.currentOffset(),k.currentPosition()),W}function d(k,A){const U=k.context(),{lastOffset:w,lastStartLoc:O}=U,W=a(9,w,O);return W.value=A.replace(v1,_1),k.nextToken(),s(W,k.currentOffset(),k.currentPosition()),W}function c(k){const A=k.nextToken(),U=k.context(),{lastOffset:w,lastStartLoc:O}=U,W=a(8,w,O);return A.type!==11?(n(k,_t.UNEXPECTED_EMPTY_LINKED_MODIFIER,U.lastStartLoc,0),W.value="",s(W,w,O),{nextConsumeToken:A,node:W}):(A.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,U.lastStartLoc,0,Xn(A)),W.value=A.value||"",s(W,k.currentOffset(),k.currentPosition()),{node:W})}function f(k,A){const U=k.context(),w=a(7,U.offset,U.startLoc);return w.value=A,s(w,k.currentOffset(),k.currentPosition()),w}function g(k){const A=k.context(),U=a(6,A.offset,A.startLoc);let w=k.nextToken();if(w.type===8){const O=c(k);U.modifier=O.node,w=O.nextConsumeToken||k.nextToken()}switch(w.type!==9&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(w)),w=k.nextToken(),w.type===2&&(w=k.nextToken()),w.type){case 10:w.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(w)),U.key=f(k,w.value||"");break;case 4:w.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(w)),U.key=u(k,w.value||"");break;case 5:w.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(w)),U.key=r(k,w.value||"");break;case 6:w.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(w)),U.key=d(k,w.value||"");break;default:{n(k,_t.UNEXPECTED_EMPTY_LINKED_KEY,A.lastStartLoc,0);const O=k.context(),W=a(7,O.offset,O.startLoc);return W.value="",s(W,O.offset,O.startLoc),U.key=W,s(U,O.offset,O.startLoc),{nextConsumeToken:w,node:U}}}return s(U,k.currentOffset(),k.currentPosition()),{node:U}}function p(k){const A=k.context(),U=A.currentType===1?k.currentOffset():A.offset,w=A.currentType===1?A.endLoc:A.startLoc,O=a(2,U,w);O.items=[];let W=null;do{const q=W||k.nextToken();switch(W=null,q.type){case 0:q.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(q)),O.items.push(l(k,q.value||""));break;case 5:q.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(q)),O.items.push(r(k,q.value||""));break;case 4:q.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(q)),O.items.push(u(k,q.value||""));break;case 6:q.value==null&&n(k,_t.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(q)),O.items.push(d(k,q.value||""));break;case 7:{const he=g(k);O.items.push(he.node),W=he.nextConsumeToken||null;break}}}while(A.currentType!==13&&A.currentType!==1);const V=A.currentType===1?A.lastOffset:k.currentOffset(),H=A.currentType===1?A.lastEndLoc:k.currentPosition();return s(O,V,H),O}function v(k,A,U,w){const O=k.context();let W=w.items.length===0;const V=a(1,A,U);V.cases=[],V.cases.push(w);do{const H=p(k);W||(W=H.items.length===0),V.cases.push(H)}while(O.currentType!==13);return W&&n(k,_t.MUST_HAVE_MESSAGES_IN_PLURAL,U,0),s(V,k.currentOffset(),k.currentPosition()),V}function b(k){const A=k.context(),{offset:U,startLoc:w}=A,O=p(k);return A.currentType===13?O:v(k,U,w,O)}function x(k){const A=m1(k,zt({},e)),U=A.context(),w=a(0,U.offset,U.startLoc);return t&&w.loc&&(w.loc.source=k),w.body=b(A),e.onCacheKey&&(w.cacheKey=e.onCacheKey(k)),U.currentType!==13&&n(A,_t.UNEXPECTED_LEXICAL_ANALYSIS,U.lastStartLoc,0,k[U.offset]||""),s(w,A.currentOffset(),A.currentPosition()),w}return{parse:x}}function Xn(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function b1(e,t={}){const o={ast:e,helpers:new Set};return{context:()=>o,helper:s=>(o.helpers.add(s),s)}}function Bd(e,t){for(let o=0;o<e.length;o++)ii(e[o],t)}function ii(e,t){switch(e.type){case 1:Bd(e.cases,t),t.helper("plural");break;case 2:Bd(e.items,t);break;case 6:{ii(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function w1(e,t={}){const o=b1(e);o.helper("normalize"),e.body&&ii(e.body,o);const n=o.context();e.helpers=Array.from(n.helpers)}function x1(e){const t=e.body;return t.type===2?Ud(t):t.cases.forEach(o=>Ud(o)),e}function Ud(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let o=0;o<e.items.length;o++){const n=e.items[o];if(!(n.type===3||n.type===9)||n.value==null)break;t.push(n.value)}if(t.length===e.items.length){e.static=li(t);for(let o=0;o<e.items.length;o++){const n=e.items[o];(n.type===3||n.type===9)&&delete n.value}}}}function ba(e){switch(e.t=e.type,e.type){case 0:{const t=e;ba(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,o=t.cases;for(let n=0;n<o.length;n++)ba(o[n]);t.c=o,delete t.cases;break}case 2:{const t=e,o=t.items;for(let n=0;n<o.length;n++)ba(o[n]);t.i=o,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;ba(t.key),t.k=t.key,delete t.key,t.modifier&&(ba(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function T1(e,t){const{filename:o,breakLineCode:n,needIndent:a}=t,s=t.location!==!1,l={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:a,indentLevel:0};s&&e.loc&&(l.source=e.loc.source);const r=()=>l;function u(b,x){l.code+=b}function d(b,x=!0){const k=x?n:"";u(a?k+"  ".repeat(b):k)}function c(b=!0){const x=++l.indentLevel;b&&d(x)}function f(b=!0){const x=--l.indentLevel;b&&d(x)}function g(){d(l.indentLevel)}return{context:r,push:u,indent:c,deindent:f,newline:g,helper:b=>`_${b}`,needIndent:()=>l.needIndent}}function S1(e,t){const{helper:o}=e;e.push(`${o("linked")}(`),wa(e,t.key),t.modifier?(e.push(", "),wa(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function k1(e,t){const{helper:o,needIndent:n}=e;e.push(`${o("normalize")}([`),e.indent(n());const a=t.items.length;for(let s=0;s<a&&(wa(e,t.items[s]),s!==a-1);s++)e.push(", ");e.deindent(n()),e.push("])")}function C1(e,t){const{helper:o,needIndent:n}=e;if(t.cases.length>1){e.push(`${o("plural")}([`),e.indent(n());const a=t.cases.length;for(let s=0;s<a&&(wa(e,t.cases[s]),s!==a-1);s++)e.push(", ");e.deindent(n()),e.push("])")}}function E1(e,t){t.body?wa(e,t.body):e.push("null")}function wa(e,t){const{helper:o}=e;switch(t.type){case 0:E1(e,t);break;case 1:C1(e,t);break;case 2:k1(e,t);break;case 6:S1(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${o("interpolate")}(${o("list")}(${t.index}))`,t);break;case 4:e.push(`${o("interpolate")}(${o("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const L1=(e,t={})=>{const o=De(t.mode)?t.mode:"normal",n=De(t.filename)?t.filename:"message.intl";t.sourceMap;const a=t.breakLineCode!=null?t.breakLineCode:o==="arrow"?";":`
`,s=t.needIndent?t.needIndent:o!=="arrow",l=e.helpers||[],r=T1(e,{filename:n,breakLineCode:a,needIndent:s});r.push(o==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),r.indent(s),l.length>0&&(r.push(`const { ${li(l.map(c=>`${c}: _${c}`),", ")} } = ctx`),r.newline()),r.push("return "),wa(r,e),r.deindent(s),r.push("}"),delete e.helpers;const{code:u,map:d}=r.context();return{ast:e,code:u,map:d?d.toJSON():void 0}};function $1(e,t={}){const o=zt({},t),n=!!o.jit,a=!!o.minify,s=o.optimize==null?!0:o.optimize,r=y1(o).parse(e);return n?(s&&x1(r),a&&ba(r),{ast:r,code:""}):(w1(r,o),L1(r,o))}/*!
  * core-base v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function A1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Xo().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Xo().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Zn(e){return ft(e)&&ui(e)===0&&(Pn(e,"b")||Pn(e,"body"))}const Hd=["b","body"];function I1(e){return Ro(e,Hd)}const Wd=["c","cases"];function M1(e){return Ro(e,Wd,[])}const jd=["s","static"];function O1(e){return Ro(e,jd)}const Vd=["i","items"];function R1(e){return Ro(e,Vd,[])}const zd=["t","type"];function ui(e){return Ro(e,zd)}const qd=["v","value"];function Al(e,t){const o=Ro(e,qd);if(o!=null)return o;throw gs(t)}const Gd=["m","modifier"];function N1(e){return Ro(e,Gd)}const Qd=["k","key"];function D1(e){const t=Ro(e,Qd);if(t)return t;throw gs(6)}function Ro(e,t,o){for(let n=0;n<t.length;n++){const a=t[n];if(Pn(e,a)&&e[a]!=null)return e[a]}return o}const Yd=[...Hd,...Wd,...jd,...Vd,...Qd,...Gd,...qd,...zd];function gs(e){return new Error(`unhandled node type: ${e}`)}function ci(e){return o=>P1(o,e)}function P1(e,t){const o=I1(t);if(o==null)throw gs(0);if(ui(o)===1){const s=M1(o);return e.plural(s.reduce((l,r)=>[...l,Kd(e,r)],[]))}else return Kd(e,o)}function Kd(e,t){const o=O1(t);if(o!=null)return e.type==="text"?o:e.normalize([o]);{const n=R1(t).reduce((a,s)=>[...a,di(e,s)],[]);return e.normalize(n)}}function di(e,t){const o=ui(t);switch(o){case 3:return Al(t,o);case 9:return Al(t,o);case 4:{const n=t;if(Pn(n,"k")&&n.k)return e.interpolate(e.named(n.k));if(Pn(n,"key")&&n.key)return e.interpolate(e.named(n.key));throw gs(o)}case 5:{const n=t;if(Pn(n,"i")&&Ut(n.i))return e.interpolate(e.list(n.i));if(Pn(n,"index")&&Ut(n.index))return e.interpolate(e.list(n.index));throw gs(o)}case 6:{const n=t,a=N1(n),s=D1(n);return e.linked(di(e,s),a?di(e,a):void 0,e.type)}case 7:return Al(t,o);case 8:return Al(t,o);default:throw new Error(`unhandled node on format message part: ${o}`)}}const F1=e=>e;let Il=bt();function B1(e,t={}){let o=!1;const n=t.onError||i1;return t.onError=a=>{o=!0,n(a)},{...$1(e,t),detectError:o}}function U1(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&De(e)){ct(t.warnHtmlMessage)&&t.warnHtmlMessage;const n=(t.onCacheKey||F1)(e),a=Il[n];if(a)return a;const{ast:s,detectError:l}=B1(e,{...t,location:!1,jit:!0}),r=ci(s);return l?r:Il[n]=r}else{const o=e.cacheKey;if(o){const n=Il[o];return n||(Il[o]=ci(e))}else return ci(e)}}let ms=null;function H1(e){ms=e}function W1(e,t,o){ms&&ms.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:o})}const j1=V1("function:translate");function V1(e){return t=>ms&&ms.emit(e,t)}const mo={INVALID_ARGUMENT:r1,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},z1=24;function ho(e){return $l(e,null,void 0)}function fi(e,t){return t.locale!=null?Jd(t.locale):Jd(e.locale)}let pi;function Jd(e){if(De(e))return e;if(It(e)){if(e.resolvedOnce&&pi!=null)return pi;if(e.constructor.name==="Function"){const t=e();if(a1(t))throw ho(mo.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return pi=t}else throw ho(mo.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ho(mo.NOT_SUPPORT_LOCALE_TYPE)}function q1(e,t,o){return[...new Set([o,...Nt(t)?t:ft(t)?Object.keys(t):De(t)?[t]:[o]])]}function Xd(e,t,o){const n=De(o)?o:hs,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let s=a.__localeChainCache.get(n);if(!s){s=[];let l=[o];for(;Nt(l);)l=Zd(s,l,t);const r=Nt(t)||!et(t)?t:t.default?t.default:null;l=De(r)?[r]:r,Nt(l)&&Zd(s,l,!1),a.__localeChainCache.set(n,s)}return s}function Zd(e,t,o){let n=!0;for(let a=0;a<t.length&&ct(n);a++){const s=t[a];De(s)&&(n=G1(e,t[a],o))}return n}function G1(e,t,o){let n;const a=t.split("-");do{const s=a.join("-");n=Q1(e,s,o),a.splice(-1,1)}while(a.length&&n===!0);return n}function Q1(e,t,o){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(Nt(o)||et(o))&&o[a]&&(n=o[a])}return n}const No=[];No[0]={w:[0],i:[3,0],"[":[4],o:[7]},No[1]={w:[1],".":[2],"[":[4],o:[7]},No[2]={w:[2],i:[3,0],0:[3,0]},No[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},No[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},No[5]={"'":[4,0],o:8,l:[5,0]},No[6]={'"':[4,0],o:8,l:[6,0]};const Y1=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function K1(e){return Y1.test(e)}function J1(e){const t=e.charCodeAt(0),o=e.charCodeAt(e.length-1);return t===o&&(t===34||t===39)?e.slice(1,-1):e}function X1(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Z1(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:K1(t)?J1(t):"*"+t}function e0(e){const t=[];let o=-1,n=0,a=0,s,l,r,u,d,c,f;const g=[];g[0]=()=>{l===void 0?l=r:l+=r},g[1]=()=>{l!==void 0&&(t.push(l),l=void 0)},g[2]=()=>{g[0](),a++},g[3]=()=>{if(a>0)a--,n=4,g[0]();else{if(a=0,l===void 0||(l=Z1(l),l===!1))return!1;g[1]()}};function p(){const v=e[o+1];if(n===5&&v==="'"||n===6&&v==='"')return o++,r="\\"+v,g[0](),!0}for(;n!==null;)if(o++,s=e[o],!(s==="\\"&&p())){if(u=X1(s),f=No[n],d=f[u]||f.l||8,d===8||(n=d[0],d[1]!==void 0&&(c=g[d[1]],c&&(r=s,c()===!1))))return;if(n===7)return t}}const ef=new Map;function t0(e,t){return ft(e)?e[t]:null}function n0(e,t){if(!ft(e))return null;let o=ef.get(t);if(o||(o=e0(t),o&&ef.set(t,o)),!o)return null;const n=o.length;let a=e,s=0;for(;s<n;){const l=o[s];if(Yd.includes(l)&&Zn(a))return null;const r=a[l];if(r===void 0||It(a))return null;a=r,s++}return a}const o0="11.1.12",Ml=-1,hs="en-US",tf="",nf=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function a0(){return{upper:(e,t)=>t==="text"&&De(e)?e.toUpperCase():t==="vnode"&&ft(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&De(e)?e.toLowerCase():t==="vnode"&&ft(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&De(e)?nf(e):t==="vnode"&&ft(e)&&"__v_isVNode"in e?nf(e.children):e}}let of;function s0(e){of=e}let af;function l0(e){af=e}let sf;function r0(e){sf=e}let lf=null;const i0=e=>{lf=e},u0=()=>lf;let rf=null;const uf=e=>{rf=e},c0=()=>rf;let cf=0;function d0(e={}){const t=It(e.onWarn)?e.onWarn:Jv,o=De(e.version)?e.version:o0,n=De(e.locale)||It(e.locale)?e.locale:hs,a=It(n)?hs:n,s=Nt(e.fallbackLocale)||et(e.fallbackLocale)||De(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,l=et(e.messages)?e.messages:gi(a),r=et(e.datetimeFormats)?e.datetimeFormats:gi(a),u=et(e.numberFormats)?e.numberFormats:gi(a),d=zt(bt(),e.modifiers,a0()),c=e.pluralRules||bt(),f=It(e.missing)?e.missing:null,g=ct(e.missingWarn)||ya(e.missingWarn)?e.missingWarn:!0,p=ct(e.fallbackWarn)||ya(e.fallbackWarn)?e.fallbackWarn:!0,v=!!e.fallbackFormat,b=!!e.unresolving,x=It(e.postTranslation)?e.postTranslation:null,k=et(e.processor)?e.processor:null,A=ct(e.warnHtmlMessage)?e.warnHtmlMessage:!0,U=!!e.escapeParameter,w=It(e.messageCompiler)?e.messageCompiler:of,O=It(e.messageResolver)?e.messageResolver:af||t0,W=It(e.localeFallbacker)?e.localeFallbacker:sf||q1,V=ft(e.fallbackContext)?e.fallbackContext:void 0,H=e,q=ft(H.__datetimeFormatters)?H.__datetimeFormatters:new Map,he=ft(H.__numberFormatters)?H.__numberFormatters:new Map,le=ft(H.__meta)?H.__meta:{};cf++;const R={version:o,cid:cf,locale:n,fallbackLocale:s,messages:l,modifiers:d,pluralRules:c,missing:f,missingWarn:g,fallbackWarn:p,fallbackFormat:v,unresolving:b,postTranslation:x,processor:k,warnHtmlMessage:A,escapeParameter:U,messageCompiler:w,messageResolver:O,localeFallbacker:W,fallbackContext:V,onWarn:t,__meta:le};return R.datetimeFormats=r,R.numberFormats=u,R.__datetimeFormatters=q,R.__numberFormatters=he,__INTLIFY_PROD_DEVTOOLS__&&W1(R,o,le),R}const gi=e=>({[e]:bt()});function mi(e,t,o,n,a){const{missing:s,onWarn:l}=e;if(s!==null){const r=s(e,o,t,a);return De(r)?r:t}else return t}function vs(e,t,o){const n=e;n.__localeChainCache=new Map,e.localeFallbacker(e,o,t)}function f0(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function p0(e,t){const o=t.indexOf(e);if(o===-1)return!1;for(let n=o+1;n<t.length;n++)if(f0(e,t[n]))return!0;return!1}function df(e,...t){const{datetimeFormats:o,unresolving:n,fallbackLocale:a,onWarn:s,localeFallbacker:l}=e,{__datetimeFormatters:r}=e,[u,d,c,f]=hi(...t),g=ct(c.missingWarn)?c.missingWarn:e.missingWarn;ct(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const p=!!c.part,v=fi(e,c),b=l(e,a,v);if(!De(u)||u==="")return new Intl.DateTimeFormat(v,f).format(d);let x={},k,A=null;const U="datetime format";for(let W=0;W<b.length&&(k=b[W],x=o[k]||{},A=x[u],!et(A));W++)mi(e,u,k,g,U);if(!et(A)||!De(k))return n?Ml:u;let w=`${k}__${u}`;Cl(f)||(w=`${w}__${JSON.stringify(f)}`);let O=r.get(w);return O||(O=new Intl.DateTimeFormat(k,zt({},A,f)),r.set(w,O)),p?O.formatToParts(d):O.format(d)}const ff=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function hi(...e){const[t,o,n,a]=e,s=bt();let l=bt(),r;if(De(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw ho(mo.INVALID_ISO_DATE_ARGUMENT);const d=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();r=new Date(d);try{r.toISOString()}catch{throw ho(mo.INVALID_ISO_DATE_ARGUMENT)}}else if(e1(t)){if(isNaN(t.getTime()))throw ho(mo.INVALID_DATE_ARGUMENT);r=t}else if(Ut(t))r=t;else throw ho(mo.INVALID_ARGUMENT);return De(o)?s.key=o:et(o)&&Object.keys(o).forEach(u=>{ff.includes(u)?l[u]=o[u]:s[u]=o[u]}),De(n)?s.locale=n:et(n)&&(l=n),et(a)&&(l=a),[s.key||"",r,s,l]}function pf(e,t,o){const n=e;for(const a in o){const s=`${t}__${a}`;n.__datetimeFormatters.has(s)&&n.__datetimeFormatters.delete(s)}}function gf(e,...t){const{numberFormats:o,unresolving:n,fallbackLocale:a,onWarn:s,localeFallbacker:l}=e,{__numberFormatters:r}=e,[u,d,c,f]=vi(...t),g=ct(c.missingWarn)?c.missingWarn:e.missingWarn;ct(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const p=!!c.part,v=fi(e,c),b=l(e,a,v);if(!De(u)||u==="")return new Intl.NumberFormat(v,f).format(d);let x={},k,A=null;const U="number format";for(let W=0;W<b.length&&(k=b[W],x=o[k]||{},A=x[u],!et(A));W++)mi(e,u,k,g,U);if(!et(A)||!De(k))return n?Ml:u;let w=`${k}__${u}`;Cl(f)||(w=`${w}__${JSON.stringify(f)}`);let O=r.get(w);return O||(O=new Intl.NumberFormat(k,zt({},A,f)),r.set(w,O)),p?O.formatToParts(d):O.format(d)}const mf=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function vi(...e){const[t,o,n,a]=e,s=bt();let l=bt();if(!Ut(t))throw ho(mo.INVALID_ARGUMENT);const r=t;return De(o)?s.key=o:et(o)&&Object.keys(o).forEach(u=>{mf.includes(u)?l[u]=o[u]:s[u]=o[u]}),De(n)?s.locale=n:et(n)&&(l=n),et(a)&&(l=a),[s.key||"",r,s,l]}function hf(e,t,o){const n=e;for(const a in o){const s=`${t}__${a}`;n.__numberFormatters.has(s)&&n.__numberFormatters.delete(s)}}const g0=e=>e,m0=e=>"",h0="text",v0=e=>e.length===0?"":li(e),_0=s1;function vf(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function y0(e){const t=Ut(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Ut(e.named.count)||Ut(e.named.n))?Ut(e.named.count)?e.named.count:Ut(e.named.n)?e.named.n:t:t}function b0(e,t){t.count||(t.count=e),t.n||(t.n=e)}function w0(e={}){const t=e.locale,o=y0(e),n=ft(e.pluralRules)&&De(t)&&It(e.pluralRules[t])?e.pluralRules[t]:vf,a=ft(e.pluralRules)&&De(t)&&It(e.pluralRules[t])?vf:void 0,s=k=>k[n(o,k.length,a)],l=e.list||[],r=k=>l[k],u=e.named||bt();Ut(e.pluralIndex)&&b0(o,u);const d=k=>u[k];function c(k,A){const U=It(e.messages)?e.messages(k,!!A):ft(e.messages)?e.messages[k]:!1;return U||(e.parent?e.parent.message(k):m0)}const f=k=>e.modifiers?e.modifiers[k]:g0,g=et(e.processor)&&It(e.processor.normalize)?e.processor.normalize:v0,p=et(e.processor)&&It(e.processor.interpolate)?e.processor.interpolate:_0,v=et(e.processor)&&De(e.processor.type)?e.processor.type:h0,x={list:r,named:d,plural:s,linked:(k,...A)=>{const[U,w]=A;let O="text",W="";A.length===1?ft(U)?(W=U.modifier||W,O=U.type||O):De(U)&&(W=U||W):A.length===2&&(De(U)&&(W=U||W),De(w)&&(O=w||O));const V=c(k,!0)(x),H=O==="vnode"&&Nt(V)&&W?V[0]:V;return W?f(W)(H,O):H},message:c,type:v,interpolate:p,normalize:g,values:zt(bt(),l,u)};return x}const _f=()=>"",$n=e=>It(e);function yf(e,...t){const{fallbackFormat:o,postTranslation:n,unresolving:a,messageCompiler:s,fallbackLocale:l,messages:r}=e,[u,d]=_i(...t),c=ct(d.missingWarn)?d.missingWarn:e.missingWarn,f=ct(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn,g=ct(d.escapeParameter)?d.escapeParameter:e.escapeParameter,p=!!d.resolvedMessage,v=De(d.default)||ct(d.default)?ct(d.default)?s?u:()=>u:d.default:o?s?u:()=>u:null,b=o||v!=null&&(De(v)||It(v)),x=fi(e,d);g&&x0(d);let[k,A,U]=p?[u,x,r[x]||bt()]:bf(e,u,x,l,f,c),w=k,O=u;if(!p&&!(De(w)||Zn(w)||$n(w))&&b&&(w=v,O=w),!p&&(!(De(w)||Zn(w)||$n(w))||!De(A)))return a?Ml:u;let W=!1;const V=()=>{W=!0},H=$n(w)?w:wf(e,u,A,w,O,V);if(W)return w;const q=k0(e,A,U,d),he=w0(q),le=T0(e,H,he);let R=n?n(le,u):le;if(g&&De(R)&&(R=n1(R)),__INTLIFY_PROD_DEVTOOLS__){const Y={timestamp:Date.now(),key:De(u)?u:$n(w)?w.key:"",locale:A||($n(w)?w.locale:""),format:De(w)?w:$n(w)?w.source:"",message:R};Y.meta=zt({},e.__meta,u0()||{}),j1(Y)}return R}function x0(e){Nt(e.list)?e.list=e.list.map(t=>De(t)?Nd(t):t):ft(e.named)&&Object.keys(e.named).forEach(t=>{De(e.named[t])&&(e.named[t]=Nd(e.named[t]))})}function bf(e,t,o,n,a,s){const{messages:l,onWarn:r,messageResolver:u,localeFallbacker:d}=e,c=d(e,n,o);let f=bt(),g,p=null;const v="translate";for(let b=0;b<c.length&&(g=c[b],f=l[g]||bt(),(p=u(f,t))===null&&(p=f[t]),!(De(p)||Zn(p)||$n(p)));b++)if(!p0(g,c)){const x=mi(e,t,g,s,v);x!==t&&(p=x)}return[p,g,f]}function wf(e,t,o,n,a,s){const{messageCompiler:l,warnHtmlMessage:r}=e;if($n(n)){const d=n;return d.locale=d.locale||o,d.key=d.key||t,d}if(l==null){const d=(()=>n);return d.locale=o,d.key=t,d}const u=l(n,S0(e,o,a,n,r,s));return u.locale=o,u.key=t,u.source=n,u}function T0(e,t,o){return t(o)}function _i(...e){const[t,o,n]=e,a=bt();if(!De(t)&&!Ut(t)&&!$n(t)&&!Zn(t))throw ho(mo.INVALID_ARGUMENT);const s=Ut(t)?String(t):($n(t),t);return Ut(o)?a.plural=o:De(o)?a.default=o:et(o)&&!Cl(o)?a.named=o:Nt(o)&&(a.list=o),Ut(n)?a.plural=n:De(n)?a.default=n:et(n)&&zt(a,n),[s,a]}function S0(e,t,o,n,a,s){return{locale:t,key:o,warnHtmlMessage:a,onError:l=>{throw s&&s(l),l},onCacheKey:l=>Xv(t,o,l)}}function k0(e,t,o,n){const{modifiers:a,pluralRules:s,messageResolver:l,fallbackLocale:r,fallbackWarn:u,missingWarn:d,fallbackContext:c}=e,g={locale:t,modifiers:a,pluralRules:s,messages:(p,v)=>{let b=l(o,p);if(b==null&&(c||v)){const[,,x]=bf(c||e,p,t,r,u,d);b=l(x,p)}if(De(b)||Zn(b)){let x=!1;const A=wf(e,p,t,b,p,()=>{x=!0});return x?_f:A}else return $n(b)?b:_f}};return e.processor&&(g.processor=e.processor),n.list&&(g.list=n.list),n.named&&(g.named=n.named),Ut(n.plural)&&(g.pluralIndex=n.plural),g}A1();/*!
  * vue-i18n v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const C0="11.1.12";function E0(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Xo().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Xo().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Xo().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Xo().__INTLIFY_PROD_DEVTOOLS__=!1)}const mn={UNEXPECTED_RETURN_TYPE:z1,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function wn(e,...t){return $l(e,null,void 0)}const yi=Oo("__translateVNode"),bi=Oo("__datetimeParts"),wi=Oo("__numberParts"),xf=Oo("__setPluralRules"),Tf=Oo("__injectWithOption"),xi=Oo("__dispose");function _s(e){if(!ft(e)||Zn(e))return e;for(const t in e)if(Pn(e,t))if(!t.includes("."))ft(e[t])&&_s(e[t]);else{const o=t.split("."),n=o.length-1;let a=e,s=!1;for(let l=0;l<n;l++){if(o[l]==="__proto__")throw new Error(`unsafe key: ${o[l]}`);if(o[l]in a||(a[o[l]]=bt()),!ft(a[o[l]])){s=!0;break}a=a[o[l]]}if(s||(Zn(a)?Yd.includes(o[n])||delete e[t]:(a[o[n]]=e[t],delete e[t])),!Zn(a)){const l=a[o[n]];ft(l)&&_s(l)}}return e}function Ti(e,t){const{messages:o,__i18n:n,messageResolver:a,flatJson:s}=t,l=et(o)?o:Nt(n)?bt():{[e]:bt()};if(Nt(n)&&n.forEach(r=>{if("locale"in r&&"resource"in r){const{locale:u,resource:d}=r;u?(l[u]=l[u]||bt(),Ll(d,l[u])):Ll(d,l)}else De(r)&&Ll(JSON.parse(r),l)}),a==null&&s)for(const r in l)Pn(l,r)&&_s(l[r]);return l}function Sf(e){return e.type}function kf(e,t,o){let n=ft(t.messages)?t.messages:bt();"__i18nGlobal"in o&&(n=Ti(e.locale.value,{messages:n,__i18n:o.__i18nGlobal}));const a=Object.keys(n);a.length&&a.forEach(s=>{e.mergeLocaleMessage(s,n[s])});{if(ft(t.datetimeFormats)){const s=Object.keys(t.datetimeFormats);s.length&&s.forEach(l=>{e.mergeDateTimeFormat(l,t.datetimeFormats[l])})}if(ft(t.numberFormats)){const s=Object.keys(t.numberFormats);s.length&&s.forEach(l=>{e.mergeNumberFormat(l,t.numberFormats[l])})}}}function Cf(e){return ze(ss,null,e,0)}const Ef="__INTLIFY_META__",Lf=()=>[],L0=()=>!1;let $f=0;function Af(e){return((t,o,n,a)=>e(o,n,uo()||void 0,a))}const $0=()=>{const e=uo();let t=null;return e&&(t=Sf(e)[Ef])?{[Ef]:t}:null};function Si(e={}){const{__root:t,__injectWithOption:o}=e,n=t===void 0,a=e.flatJson,s=kl?_:Ym;let l=ct(e.inheritLocale)?e.inheritLocale:!0;const r=s(t&&l?t.locale.value:De(e.locale)?e.locale:hs),u=s(t&&l?t.fallbackLocale.value:De(e.fallbackLocale)||Nt(e.fallbackLocale)||et(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r.value),d=s(Ti(r.value,e)),c=s(et(e.datetimeFormats)?e.datetimeFormats:{[r.value]:{}}),f=s(et(e.numberFormats)?e.numberFormats:{[r.value]:{}});let g=t?t.missingWarn:ct(e.missingWarn)||ya(e.missingWarn)?e.missingWarn:!0,p=t?t.fallbackWarn:ct(e.fallbackWarn)||ya(e.fallbackWarn)?e.fallbackWarn:!0,v=t?t.fallbackRoot:ct(e.fallbackRoot)?e.fallbackRoot:!0,b=!!e.fallbackFormat,x=It(e.missing)?e.missing:null,k=It(e.missing)?Af(e.missing):null,A=It(e.postTranslation)?e.postTranslation:null,U=t?t.warnHtmlMessage:ct(e.warnHtmlMessage)?e.warnHtmlMessage:!0,w=!!e.escapeParameter;const O=t?t.modifiers:et(e.modifiers)?e.modifiers:{};let W=e.pluralRules||t&&t.pluralRules,V;V=(()=>{n&&uf(null);const J={version:C0,locale:r.value,fallbackLocale:u.value,messages:d.value,modifiers:O,pluralRules:W,missing:k===null?void 0:k,missingWarn:g,fallbackWarn:p,fallbackFormat:b,unresolving:!0,postTranslation:A===null?void 0:A,warnHtmlMessage:U,escapeParameter:w,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};J.datetimeFormats=c.value,J.numberFormats=f.value,J.__datetimeFormatters=et(V)?V.__datetimeFormatters:void 0,J.__numberFormatters=et(V)?V.__numberFormatters:void 0;const ue=d0(J);return n&&uf(ue),ue})(),vs(V,r.value,u.value);function q(){return[r.value,u.value,d.value,c.value,f.value]}const he=ot({get:()=>r.value,set:J=>{V.locale=J,r.value=J}}),le=ot({get:()=>u.value,set:J=>{V.fallbackLocale=J,u.value=J,vs(V,r.value,J)}}),R=ot(()=>d.value),Y=ot(()=>c.value),X=ot(()=>f.value);function z(){return It(A)?A:null}function Z(J){A=J,V.postTranslation=J}function se(){return x}function P(J){J!==null&&(k=Af(J)),x=J,V.missing=k}const F=(J,ue,Me,Pe,We,Ve)=>{q();let ut;try{__INTLIFY_PROD_DEVTOOLS__,n||(V.fallbackContext=t?c0():void 0),ut=J(V)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(V.fallbackContext=void 0)}if(Me!=="translate exists"&&Ut(ut)&&ut===Ml||Me==="translate exists"&&!ut){const[dt,jt]=ue();return t&&v?Pe(t):We(dt)}else{if(Ve(ut))return ut;throw wn(mn.UNEXPECTED_RETURN_TYPE)}};function K(...J){return F(ue=>Reflect.apply(yf,null,[ue,...J]),()=>_i(...J),"translate",ue=>Reflect.apply(ue.t,ue,[...J]),ue=>ue,ue=>De(ue))}function oe(...J){const[ue,Me,Pe]=J;if(Pe&&!ft(Pe))throw wn(mn.INVALID_ARGUMENT);return K(ue,Me,zt({resolvedMessage:!0},Pe||{}))}function Q(...J){return F(ue=>Reflect.apply(df,null,[ue,...J]),()=>hi(...J),"datetime format",ue=>Reflect.apply(ue.d,ue,[...J]),()=>tf,ue=>De(ue)||Nt(ue))}function ie(...J){return F(ue=>Reflect.apply(gf,null,[ue,...J]),()=>vi(...J),"number format",ue=>Reflect.apply(ue.n,ue,[...J]),()=>tf,ue=>De(ue)||Nt(ue))}function re(J){return J.map(ue=>De(ue)||Ut(ue)||ct(ue)?Cf(String(ue)):ue)}const de={normalize:re,interpolate:J=>J,type:"vnode"};function M(...J){return F(ue=>{let Me;const Pe=ue;try{Pe.processor=de,Me=Reflect.apply(yf,null,[Pe,...J])}finally{Pe.processor=null}return Me},()=>_i(...J),"translate",ue=>ue[yi](...J),ue=>[Cf(ue)],ue=>Nt(ue))}function G(...J){return F(ue=>Reflect.apply(gf,null,[ue,...J]),()=>vi(...J),"number format",ue=>ue[wi](...J),Lf,ue=>De(ue)||Nt(ue))}function ae(...J){return F(ue=>Reflect.apply(df,null,[ue,...J]),()=>hi(...J),"datetime format",ue=>ue[bi](...J),Lf,ue=>De(ue)||Nt(ue))}function D(J){W=J,V.pluralRules=W}function ee(J,ue){return F(()=>{if(!J)return!1;const Me=De(ue)?ue:r.value,Pe=B(Me),We=V.messageResolver(Pe,J);return Zn(We)||$n(We)||De(We)},()=>[J],"translate exists",Me=>Reflect.apply(Me.te,Me,[J,ue]),L0,Me=>ct(Me))}function L(J){let ue=null;const Me=Xd(V,u.value,r.value);for(let Pe=0;Pe<Me.length;Pe++){const We=d.value[Me[Pe]]||{},Ve=V.messageResolver(We,J);if(Ve!=null){ue=Ve;break}}return ue}function E(J){const ue=L(J);return ue??(t?t.tm(J)||{}:{})}function B(J){return d.value[J]||{}}function ne(J,ue){if(a){const Me={[J]:ue};for(const Pe in Me)Pn(Me,Pe)&&_s(Me[Pe]);ue=Me[J]}d.value[J]=ue,V.messages=d.value}function ge(J,ue){d.value[J]=d.value[J]||{};const Me={[J]:ue};if(a)for(const Pe in Me)Pn(Me,Pe)&&_s(Me[Pe]);ue=Me[J],Ll(ue,d.value[J]),V.messages=d.value}function ve(J){return c.value[J]||{}}function S(J,ue){c.value[J]=ue,V.datetimeFormats=c.value,pf(V,J,ue)}function y(J,ue){c.value[J]=zt(c.value[J]||{},ue),V.datetimeFormats=c.value,pf(V,J,ue)}function N(J){return f.value[J]||{}}function j(J,ue){f.value[J]=ue,V.numberFormats=f.value,hf(V,J,ue)}function xe(J,ue){f.value[J]=zt(f.value[J]||{},ue),V.numberFormats=f.value,hf(V,J,ue)}$f++,t&&kl&&(Ze(t.locale,J=>{l&&(r.value=J,V.locale=J,vs(V,r.value,u.value))}),Ze(t.fallbackLocale,J=>{l&&(u.value=J,V.fallbackLocale=J,vs(V,r.value,u.value))}));const _e={id:$f,locale:he,fallbackLocale:le,get inheritLocale(){return l},set inheritLocale(J){l=J,J&&t&&(r.value=t.locale.value,u.value=t.fallbackLocale.value,vs(V,r.value,u.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:R,get modifiers(){return O},get pluralRules(){return W||{}},get isGlobal(){return n},get missingWarn(){return g},set missingWarn(J){g=J,V.missingWarn=g},get fallbackWarn(){return p},set fallbackWarn(J){p=J,V.fallbackWarn=p},get fallbackRoot(){return v},set fallbackRoot(J){v=J},get fallbackFormat(){return b},set fallbackFormat(J){b=J,V.fallbackFormat=b},get warnHtmlMessage(){return U},set warnHtmlMessage(J){U=J,V.warnHtmlMessage=J},get escapeParameter(){return w},set escapeParameter(J){w=J,V.escapeParameter=J},t:K,getLocaleMessage:B,setLocaleMessage:ne,mergeLocaleMessage:ge,getPostTranslationHandler:z,setPostTranslationHandler:Z,getMissingHandler:se,setMissingHandler:P,[xf]:D};return _e.datetimeFormats=Y,_e.numberFormats=X,_e.rt=oe,_e.te=ee,_e.tm=E,_e.d=Q,_e.n=ie,_e.getDateTimeFormat=ve,_e.setDateTimeFormat=S,_e.mergeDateTimeFormat=y,_e.getNumberFormat=N,_e.setNumberFormat=j,_e.mergeNumberFormat=xe,_e[Tf]=o,_e[yi]=M,_e[bi]=ae,_e[wi]=G,_e}function A0(e){const t=De(e.locale)?e.locale:hs,o=De(e.fallbackLocale)||Nt(e.fallbackLocale)||et(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,n=It(e.missing)?e.missing:void 0,a=ct(e.silentTranslationWarn)||ya(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=ct(e.silentFallbackWarn)||ya(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,l=ct(e.fallbackRoot)?e.fallbackRoot:!0,r=!!e.formatFallbackMessages,u=et(e.modifiers)?e.modifiers:{},d=e.pluralizationRules,c=It(e.postTranslation)?e.postTranslation:void 0,f=De(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,g=!!e.escapeParameterHtml,p=ct(e.sync)?e.sync:!0;let v=e.messages;if(et(e.sharedMessages)){const O=e.sharedMessages;v=Object.keys(O).reduce((V,H)=>{const q=V[H]||(V[H]={});return zt(q,O[H]),V},v||{})}const{__i18n:b,__root:x,__injectWithOption:k}=e,A=e.datetimeFormats,U=e.numberFormats,w=e.flatJson;return{locale:t,fallbackLocale:o,messages:v,flatJson:w,datetimeFormats:A,numberFormats:U,missing:n,missingWarn:a,fallbackWarn:s,fallbackRoot:l,fallbackFormat:r,modifiers:u,pluralRules:d,postTranslation:c,warnHtmlMessage:f,escapeParameter:g,messageResolver:e.messageResolver,inheritLocale:p,__i18n:b,__root:x,__injectWithOption:k}}function ki(e={}){const t=Si(A0(e)),{__extender:o}=e,n={id:t.id,get locale(){return t.locale.value},set locale(a){t.locale.value=a},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(a){t.fallbackLocale.value=a},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(a){t.setMissingHandler(a)},get silentTranslationWarn(){return ct(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(a){t.missingWarn=ct(a)?!a:a},get silentFallbackWarn(){return ct(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(a){t.fallbackWarn=ct(a)?!a:a},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(a){t.fallbackFormat=a},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(a){t.setPostTranslationHandler(a)},get sync(){return t.inheritLocale},set sync(a){t.inheritLocale=a},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){t.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(a){t.escapeParameter=a},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...a){return Reflect.apply(t.t,t,[...a])},rt(...a){return Reflect.apply(t.rt,t,[...a])},te(a,s){return t.te(a,s)},tm(a){return t.tm(a)},getLocaleMessage(a){return t.getLocaleMessage(a)},setLocaleMessage(a,s){t.setLocaleMessage(a,s)},mergeLocaleMessage(a,s){t.mergeLocaleMessage(a,s)},d(...a){return Reflect.apply(t.d,t,[...a])},getDateTimeFormat(a){return t.getDateTimeFormat(a)},setDateTimeFormat(a,s){t.setDateTimeFormat(a,s)},mergeDateTimeFormat(a,s){t.mergeDateTimeFormat(a,s)},n(...a){return Reflect.apply(t.n,t,[...a])},getNumberFormat(a){return t.getNumberFormat(a)},setNumberFormat(a,s){t.setNumberFormat(a,s)},mergeNumberFormat(a,s){t.mergeNumberFormat(a,s)}};return n.__extender=o,n}function I0(e,t,o){return{beforeCreate(){const n=uo();if(!n)throw wn(mn.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const s=a.i18n;if(a.__i18n&&(s.__i18n=a.__i18n),s.__root=t,this===this.$root)this.$i18n=If(e,s);else{s.__injectWithOption=!0,s.__extender=o.__vueI18nExtend,this.$i18n=ki(s);const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=If(e,a);else{this.$i18n=ki({__i18n:a.__i18n,__injectWithOption:!0,__extender:o.__vueI18nExtend,__root:t});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&kf(t,a,a),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$te=(s,l)=>this.$i18n.te(s,l),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),o.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const n=uo();if(!n)throw wn(mn.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),o.__deleteInstance(n),delete this.$i18n}}}function If(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[xf](t.pluralizationRules||e.pluralizationRules);const o=Ti(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(o).forEach(n=>e.mergeLocaleMessage(n,o[n])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n])),t.numberFormats&&Object.keys(t.numberFormats).forEach(n=>e.mergeNumberFormat(n,t.numberFormats[n])),e}const Ci={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function M0({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((n,a)=>[...n,...a.type===Oe?a.children:[a]],[]):t.reduce((o,n)=>{const a=e[n];return a&&(o[n]=a()),o},bt())}function Mf(){return Oe}const Of=gn({name:"i18n-t",props:zt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Ut(e)||!isNaN(e)}},Ci),setup(e,t){const{slots:o,attrs:n}=t,a=e.i18n||wt({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(o).filter(f=>f[0]!=="_"),l=bt();e.locale&&(l.locale=e.locale),e.plural!==void 0&&(l.plural=De(e.plural)?+e.plural:e.plural);const r=M0(t,s),u=a[yi](e.keypath,r,l),d=zt(bt(),n),c=De(e.tag)||ft(e.tag)?e.tag:Mf();return Lt(c,d,u)}}});function O0(e){return Nt(e)&&!De(e[0])}function Rf(e,t,o,n){const{slots:a,attrs:s}=t;return()=>{const l={part:!0};let r=bt();e.locale&&(l.locale=e.locale),De(e.format)?l.key=e.format:ft(e.format)&&(De(e.format.key)&&(l.key=e.format.key),r=Object.keys(e.format).reduce((g,p)=>o.includes(p)?zt(bt(),g,{[p]:e.format[p]}):g,bt()));const u=n(e.value,l,r);let d=[l.key];Nt(u)?d=u.map((g,p)=>{const v=a[g.type],b=v?v({[g.type]:g.value,index:p,parts:u}):[g.value];return O0(b)&&(b[0].key=`${g.type}-${p}`),b}):De(u)&&(d=[u]);const c=zt(bt(),s),f=De(e.tag)||ft(e.tag)?e.tag:Mf();return Lt(f,c,d)}}const Nf=gn({name:"i18n-n",props:zt({value:{type:Number,required:!0},format:{type:[String,Object]}},Ci),setup(e,t){const o=e.i18n||wt({useScope:e.scope,__useComponent:!0});return Rf(e,t,mf,(...n)=>o[wi](...n))}});function R0(e,t){const o=e;if(e.mode==="composition")return o.__getInstance(t)||e.global;{const n=o.__getInstance(t);return n!=null?n.__composer:e.global.__composer}}function N0(e){const t=l=>{const{instance:r,value:u}=l;if(!r||!r.$)throw wn(mn.UNEXPECTED_ERROR);const d=R0(e,r.$),c=Df(u);return[Reflect.apply(d.t,d,[...Pf(c)]),d]};return{created:(l,r)=>{const[u,d]=t(r);kl&&e.global===d&&(l.__i18nWatcher=Ze(d.locale,()=>{r.instance&&r.instance.$forceUpdate()})),l.__composer=d,l.textContent=u},unmounted:l=>{kl&&l.__i18nWatcher&&(l.__i18nWatcher(),l.__i18nWatcher=void 0,delete l.__i18nWatcher),l.__composer&&(l.__composer=void 0,delete l.__composer)},beforeUpdate:(l,{value:r})=>{if(l.__composer){const u=l.__composer,d=Df(r);l.textContent=Reflect.apply(u.t,u,[...Pf(d)])}},getSSRProps:l=>{const[r]=t(l);return{textContent:r}}}}function Df(e){if(De(e))return{path:e};if(et(e)){if(!("path"in e))throw wn(mn.REQUIRED_VALUE,"path");return e}else throw wn(mn.INVALID_VALUE)}function Pf(e){const{path:t,locale:o,args:n,choice:a,plural:s}=e,l={},r=n||{};return De(o)&&(l.locale=o),Ut(a)&&(l.plural=a),Ut(s)&&(l.plural=s),[t,r,l]}function D0(e,t,...o){const n=et(o[0])?o[0]:{};(ct(n.globalInstall)?n.globalInstall:!0)&&([Of.name,"I18nT"].forEach(s=>e.component(s,Of)),[Nf.name,"I18nN"].forEach(s=>e.component(s,Nf)),[Bf.name,"I18nD"].forEach(s=>e.component(s,Bf))),e.directive("t",N0(t))}const P0=Oo("global-vue-i18n");function F0(e={}){const t=__VUE_I18N_LEGACY_API__&&ct(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=ct(e.globalInjection)?e.globalInjection:!0,n=new Map,[a,s]=B0(e,t),l=Oo("");function r(f){return n.get(f)||null}function u(f,g){n.set(f,g)}function d(f){n.delete(f)}const c={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(f,...g){if(f.__VUE_I18N_SYMBOL__=l,f.provide(f.__VUE_I18N_SYMBOL__,c),et(g[0])){const b=g[0];c.__composerExtend=b.__composerExtend,c.__vueI18nExtend=b.__vueI18nExtend}let p=null;!t&&o&&(p=G0(f,c.global)),__VUE_I18N_FULL_INSTALL__&&D0(f,c,...g),__VUE_I18N_LEGACY_API__&&t&&f.mixin(I0(s,s.__composer,c));const v=f.unmount;f.unmount=()=>{p&&p(),c.dispose(),v()}},get global(){return s},dispose(){a.stop()},__instances:n,__getInstance:r,__setInstance:u,__deleteInstance:d};return c}function wt(e={}){const t=uo();if(t==null)throw wn(mn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw wn(mn.NOT_INSTALLED);const o=U0(t),n=W0(o),a=Sf(t),s=H0(e,a);if(s==="global")return kf(n,e,a),n;if(s==="parent"){let u=j0(o,t,e.__useComponent);return u==null&&(u=n),u}const l=o;let r=l.__getInstance(t);if(r==null){const u=zt({},e);"__i18n"in a&&(u.__i18n=a.__i18n),n&&(u.__root=n),r=Si(u),l.__composerExtend&&(r[xi]=l.__composerExtend(r)),z0(l,t,r),l.__setInstance(t,r)}return r}function B0(e,t){const o=Sr(),n=__VUE_I18N_LEGACY_API__&&t?o.run(()=>ki(e)):o.run(()=>Si(e));if(n==null)throw wn(mn.UNEXPECTED_ERROR);return[o,n]}function U0(e){const t=io(e.isCE?P0:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw wn(e.isCE?mn.NOT_INSTALLED_WITH_PROVIDE:mn.UNEXPECTED_ERROR);return t}function H0(e,t){return Cl(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function W0(e){return e.mode==="composition"?e.global:e.global.__composer}function j0(e,t,o=!1){let n=null;const a=t.root;let s=V0(t,o);for(;s!=null;){const l=e;if(e.mode==="composition")n=l.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const r=l.__getInstance(s);r!=null&&(n=r.__composer,o&&n&&!n[Tf]&&(n=null))}if(n!=null||a===s)break;s=s.parent}return n}function V0(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function z0(e,t,o){vt(()=>{},t),Dn(()=>{const n=o;e.__deleteInstance(t);const a=n[xi];a&&(a(),delete n[xi])},t)}const q0=["locale","fallbackLocale","availableLocales"],Ff=["t","rt","d","n","tm","te"];function G0(e,t){const o=Object.create(null);return q0.forEach(a=>{const s=Object.getOwnPropertyDescriptor(t,a);if(!s)throw wn(mn.UNEXPECTED_ERROR);const l=Ot(s.value)?{get(){return s.value.value},set(r){s.value.value=r}}:{get(){return s.get&&s.get()}};Object.defineProperty(o,a,l)}),e.config.globalProperties.$i18n=o,Ff.forEach(a=>{const s=Object.getOwnPropertyDescriptor(t,a);if(!s||!s.value)throw wn(mn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,s)}),()=>{delete e.config.globalProperties.$i18n,Ff.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}const Bf=gn({name:"i18n-d",props:zt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Ci),setup(e,t){const o=e.i18n||wt({useScope:e.scope,__useComponent:!0});return Rf(e,t,ff,(...n)=>o[bi](...n))}});if(E0(),s0(U1),l0(n0),r0(Xd),__INTLIFY_PROD_DEVTOOLS__){const e=Xo();e.__INTLIFY__=!0,H1(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const xt=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o},Q0={class:"weilin_prompt_ui_window-title"},Y0=["title"],xn=xt({__name:"DraggableWindow",props:{title:{type:String,required:!0},position:{type:Object,required:!0},size:{type:Object,required:!0},zIndex:{type:Number,default:1},name:{type:String,default:"default_window_name"}},emits:["update:position","update:size","active","close"],setup(e,{emit:t}){const o=e,{t:n}=wt(),a=t,s=_({x:0,y:0}),l=_({width:600,height:400});Ze(()=>o.position,W=>{W&&(s.value={...W},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${o.name}_position`},"*"))},{immediate:!0,deep:!0}),Ze(()=>o.size,W=>{W&&(l.value={...W},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${o.name}_size`},"*"))},{immediate:!0,deep:!0});const r=()=>{window.parent.postMessage({type:`weilin_prompt_ui_window_change_${o.name}_scroll`},"*")};vt(()=>{var W;if(o.position){const V=window.innerWidth,H=window.innerHeight,q=100;let he=o.position.x,le=o.position.y;he=Math.max(q-(((W=o.size)==null?void 0:W.width)||l.value.width),he),he=Math.min(he,V-100),le=Math.max(50,le),le=Math.min(le,H-100),s.value={x:he,y:le}}o.size&&(l.value={...o.size})});const u=_(!1),d=_({x:0,y:0}),c=W=>{u.value=!0,d.value={x:W.clientX-s.value.x,y:W.clientY-s.value.y},document.addEventListener("mousemove",f),document.addEventListener("mouseup",g)},f=W=>{if(u.value){const V=window.innerWidth,H=window.innerHeight,q=100;let he=W.clientX-d.value.x,le=W.clientY-d.value.y;he=Math.max(q-l.value.width,he),he=Math.min(he,V-100),le=Math.max(50,le),le=Math.min(le,H-100);const R={x:he,y:le};s.value=R,a("update:position",R)}},g=()=>{u.value=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g)},p=_(!1),v=_({x:0,y:0}),b=_({width:0,height:0}),x=W=>{p.value=!0,v.value={x:W.clientX,y:W.clientY},b.value={...l.value},document.addEventListener("mousemove",k),document.addEventListener("mouseup",A)},k=W=>{if(p.value){const V=W.clientX-v.value.x,H=W.clientY-v.value.y,q={width:Math.max(200,b.value.width+V),height:Math.max(200,b.value.height+H)};l.value=q,a("update:size",q)}},A=()=>{p.value=!1,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",A)},U=()=>{a("active")},w=()=>{a("close")},O=W=>{U(),c(W)};return(W,V)=>(T(),yt(uc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[i("div",{class:"weilin_prompt_ui_draggable-window",style:mt({left:`${s.value.x}px`,top:`${s.value.y}px`,width:`${l.value.width}px`,height:`${l.value.height}px`,zIndex:e.zIndex}),onMousedown:U},[i("div",{class:"weilin_prompt_ui_window-header",onMousedown:Je(O,["stop"])},[i("div",Q0,h(e.title),1),i("button",{class:"weilin_prompt_ui_close-btn",onClick:w},"×")],32),i("div",{class:"weilin_prompt_ui_window-content",onScroll:r},[ns(W.$slots,"default",{},void 0,!0)],32),i("div",{class:"weilin_prompt_ui_resize-handle",title:m(n)("common.windowSize"),onMousedown:Je(x,["stop"])},null,40,Y0)],36)]))}},[["__scopeId","data-v-90f3c2ae"]]),vo="v0.0.65",K0={promptBox:{placeholder:"请输入文本...",delete:"删除",newline:"换行",tab:"制表符",windowTitle:"WeiLin提示词UI窗口 "+vo,windowTitleGlobal:"WeiLin全局提示词UI窗口 "+vo,translate:"翻译",translatePlaceholder:"请输入要翻译的文本,回车即可",weight:"权重",weightPlaceholder:"请输入权重",addBracket:"添加括号",removeLayer:"减去括号",hiddenHint:"双击显示提示词",tagTips:"鼠标左键双击屏蔽Tag<br>鼠标左键单击Tag可以编辑<br>鼠标左键拖动可以拖动Tag",oneClickRandomTag:"一键随机Tag",randomTagSettings:"设置随机Tag规则",oneClickTranslate:"一键翻译Tag",modelWeight:"模型权重",textWeight:"文本权重",settings:{title:"设置",cancel:"取消",save:"保存",translator:"翻译设置",sourceLanguage:"源语言",targetLanguage:"目标语言",chinese_simplified:"简体中文",english:"英语",close:"关闭",auto_detect:"自动检测",setting_floating_ball:"悬浮球设置",setting_prompt_box:"提示词设置",enablePromptCommaShow:"显示提示词逗号",floatingBallCount:"悬浮球数量",floatingBallCountPlaceholder:"请输入悬浮球数量",floatingBallSize:"悬浮球宽度",floatingBallSizePlaceholder:"请输入悬浮球宽度",floatingBallHeight:"悬浮球高度",floatingBallHeightPlaceholder:"请输入悬浮球高度",enableFloatingBall:"启用悬浮球",enableCommaConversion:"启用逗号转换，全角逗号转为半角逗号",enablePeriodConversion:"启用句号转换，全角句号转为半角句号",enableBracketConversion:"启用括号转换，全角括号转为半角括号",enableAngleBracketConversion:"启用尖括号转换，全角尖括号转为半角尖括号",enableUnderscoreToBracket:"启用下划线转换，下划线转换为空格",enableBracketEscape:"启用括号转义，自动添加\\转义括号",enableCommaCloseAutocomplete:"启动逗号关闭补全，输入逗号立即关闭补全列表",setting_openai_box:"OpenAI设置",openai_api_key:"API Key",openai_api_key_placeholder:"请输入API Key",openai_api_key_save:"保存",openaiSettings:"OpenAI设置",openai_base_url:"Base URL",openai_base_url_placeholder:"请输入Base URL",openai_model:"模型",openai_model_placeholder:"请输入模型",not_set:"未设置",edit:"编辑",delete:"删除",selectedOpenaiConfig:"当前选择的OpenAI配置",addNewConfig:"添加OpenAI配置",setting_sponsor_me:"赞助我",sponsorMe:"赞助我",sponsorMeTip:"赞助我，支持我继续开发",sponsorMeLink:"唯一赞助链接 https://afdian.com/a/weilin9999",setting_start_panel:"启动面板",startPanel:"启动面板",startPanelTip:"点击启动面板，启动成功后会自动打开面板页面",selectTranslater:"选择翻译器",selectOptionNetworkTranslater:"三方网络翻译",selectOptionPythonTranslater:"翻译库翻译",apply:"应用",selectOptionNetworkTranslaterTitle:"三方网络翻译设置",selectOptionPythonTranslaterTitle:"翻译库设置",selectOptionNetworkTranslaterInfo:"使用的三方工具是（仅网络翻译）",selectOptionPythonTranslaterInfo:"使用的翻译包为translators",install:"安装",nowTranlaterPackageState:"当前翻译包状态：",tranlaterPackageStateTrue:"已安装",tranlaterPackageStateFlase:"未安装",installed:"正在安装中...",installTranslaterPackageInfo:"当前正在安装翻译库中，请不要关闭窗口！等待安装完成",translaterSetting:"翻译设置",chooseTranslaterSetting:"选择翻译服务：",translaterLangSourceSetting:"翻译语言：",translaterLangTargeSetting:"翻译目标语言：",saveTranslaterSetting:"保存设置",testTranslaterTitle:"测试翻译",inputTestTranslater:"输入翻译内容：",outPutTestTranslater:"翻译结果：",testingTranslater:"测试翻译",inputTestTranslaterPlaceholder:"请输入要翻译的内容",outPutTestTranslaterPlaceholder:"翻译结果将显示在这里",errorPrompt:"读取节点提示词失败！",setting_auto_complete_limit:"补全提示设置",show_auto_limit:"显示补全提示数量",showAutoLimitPlaceholder:"请输入要显示的数量",settingAutoCompleteWidth:"设置补全提示框宽度",settingAutoCompleteWidthPlaceholder:"请输入宽度",settingAutoCompleteHeight:"设置补全提示框最大高度",settingAutoCompleteHeightPlaceholder:"请输入最大高度",skinSetting:"皮肤设置",defaultSkin:"默认皮肤",customSkin:"自定义皮肤",uploadSkin:"上传皮肤",bgSetting:"背景设置",gradientBg:"渐变颜色",transparentBg:"透明",gradientColor:"渐变颜色选择",borderRadius:"圆角设置",resetToDefault:"恢复默认"}},controls:{language:"语言",settings:"设置",switchTheme:"切换主题",darkMode:"夜间模式",lightMode:"日间模式",tagManager:"标签管理",loraStack:"Lora堆",loraManager:"Lora管理",history:"历史记录",addLora:"添加Lora",removeLora:"移除Lora",lookOnLora:"查看Lora",aiChat:"AI对话",github:"Github主页",shareCloudData:"共享云数据",tutorialVideo:"教程视频",sponsor:"赞助我",danbooruManager:"Danbooru管理器"},theme:{toggle:"切换主题"},common:{confirmDelete:"确认删除",delete:"删除",cancel:"取消",confirm:"确定",edit:"编辑",save:"保存",refresh:"刷新",copy:"复制",copySuccess:"复制成功",copyFailed:"复制失败",windowSize:"调节窗口大小",showMore:"显示更多",showLess:"收起"},cloudWindow:{windowTitle:"共享云仓库",back:"返回上一级",currentPath:"当前路径",tagDatabase:"Tag 数据库",danbooruDatabase:"Danbooru 数据库",open:"打开文件夹",installed:"已安装",install:"安装",installing:"正在安装..."},nodeListWindow:{windowTitle:"节点列表",openPromptUI:"打开提示词编辑器"},lora:{title:"Lora 信息",rawTitle:"LoraRaw",file:"文件",hash:"Hash值",civitai:"Civitai",viewOnCivitai:"在 Civitai 上查看",fetchFromCivitai:"从 Civitai 获取信息",modelNotFound:"模型未找到",modelNotFoundTip:"该模型在 Civitai 上未找到，可能是私有模型或已被删除",name:"名称",nameTip:"模型的显示名称",type:"类型",baseModel:"基础模型",trainedWords:"训练词",trainedWordsTip:"模型训练时使用的关键词，点击可选择复制",selectedWords:"已选择 {count} 个词",strengthMin:"最小强度",strengthMinTip:"推荐的最小强度值",strengthMax:"最大强度",strengthMaxTip:"推荐的最大强度值",promptWords:"提示词",promptWordsTip:"使用该模型时的推荐提示词",loraWorks:"Lora提示词",strWeight:"文本强度权重",hideLora:"禁用Lora",showLora:"启用Lora",baseModel:"基础模型",skipClip:"跳过层",seeLoraRaw:"查看LoraRaw",addDiyFiled:"添加自定义字段",getCivitData:"获取Civitai信息",copy:"复制"},tagManager:{deletePrimaryCategoryConfirm:"确定要删除分类 {name} 吗？",deleteGroupConfirm:"确定要删除分组 {name} 吗？",deleteTagConfirm:"确定要删除标签 {name} 吗？",windowTitle:"标签管理器",categories:"分类管理",groups:"分组管理",selectCategory:"请选择分类",selectGroup:"请选择分组",addPrimaryCategory:"添加分类",addGroup:"添加分组",editPrimaryCategory:"编辑分类",editGroup:"编辑分组",editTag:"编辑标签",categoryName:"分类名称",categoryNamePlaceholder:"请输入分类名称",categoryNameRequired:"分类名称不能为空",groupName:"分组名称",groupNamePlaceholder:"请输入分组名称",groupNameRequired:"分组名称不能为空",addTag:"添加Tag",text:"Tag描述",textPlaceholder:"请输入Tag描述",description:"Tag",descriptionPlaceholder:"请输入Tag",textRequired:"Tag和Tag描述不能为空",backgroundColor:"背景颜色",colorPickerTitle:"选择颜色",opacity:"透明度",searchPlaceholder:"搜索Tag...",noResults:"未找到相关结果",searchInCategory:"在分类中",searchInTag:"在Tag中",save:"保存",cancel:"取消",confirm:"确定",delete:"删除",addSubCategory:"添加子分类",editSubCategory:"编辑子分类",subCategoryName:"子分类名称",subCategoryNamePlaceholder:"请输入子分类名称",subCategoryNameRequired:"子分类名称不能为空",deleteConfirmTitle:"确认删除",deleteConfirmMessage:"此操作将永久删除该{type}，是否继续？",deleteSuccess:"删除成功",deleteFailed:"删除失败",saveSuccess:"保存成功",saveFailed:"保存失败",colorPickerAlpha:"透明度",colorPickerHex:"十六进制颜色值",colorPreview:"颜色预览",dragToSort:"拖动排序",searchTags:"搜索标签",noTagsFound:"未找到标签",noGroupsFound:"未找到分组",noCategoriesFound:"未找到分类",refresh:"刷新",refreshing:"刷新中...",refreshSuccess:"刷新成功",refreshFailed:"刷新失败",search:"搜索",searching:"搜索中...",searchResult:"搜索结果",searchInPath:"位于: {path}",category:"分类",group:"分组",tag:"标签",resultType:{category:"分类",group:"分组",tag:"标签"},hasDeleteAction:"批量删除",deleteSelected:"删除选中",confirmDeleteSelected:"确定要删除选中标签吗？",cancelDelete:"取消删除",moveTag:"移动标签",targetTag:"目标标签",movePosition:"移动位置",moveBefore:"移动到目标标签之前",moveAfter:"移动到目标标签之后",editTag:"编辑标签",deleteTag:"删除标签",editGroupMode:"编辑模式",exitEditMode:"退出编辑模式",autoAddSearchTag:"搜索的Tag自动添加到提示词中",importTags:"批量导入Tag",share:"分享",delete:"删除",edit:"编辑",outputSuccess:"分享成功",noTagsSelected:"没有选择要分享的Tag",shareSelected:"分享选择的Tag",batchShare:"批量分享Tag",cancelShare:"取消分享",moveGroup:"移动分组",targetGroup:"目标分组",moveGroupBefore:"移动到目标分组之前",moveGroupAfter:"移动到目标分组之后",importDanbooru:"批量导入",modifyTabSize:"修改标签尺寸",tabSizeConfig:"标签尺寸配置",primaryTabConfig:"一级分类标签配置",groupTabConfig:"二级分类标签配置",tabWidth:"标签宽度",tabHeight:"标签高度",fontSize:"字体大小",fitContent:"自适应内容",customWidth:"自定义宽度",resetDefault:"重置为默认值",tabSizeConfigSaved:"标签尺寸配置已保存",tabSizeConfigSaveFailed:"标签尺寸配置保存失败"},loraManager:{windowTitle:"Lora管理",modelWeight:"模型权重",textEncoderWeight:"文本权重",all:"全部",root:"根目录",refresh:"刷新",cacheAll:"缓存全部Lora信息",searchPlaceholder:"搜索Lora...",prevPage:"上一页",nextPage:"下一页",noResults:"未找到相关结果",loadingMore:"正在加载更多...",noMoreData:"没有更多结果了"},message:{copySuccess:"复制成功",copyFailed:"复制失败",saveSuccess:"保存成功",saveFailed:"保存失败",deleteSuccess:"删除成功",deleteFailed:"删除失败",operationSuccess:"操作成功",operationFailed:"操作失败",networkError:"网络错误",unknownError:"未知错误",refreshSuccess:"刷新成功",refreshFailed:"刷新失败",loadingData:"加载数据中...",dataLoaded:"数据加载完成",editSuccess:"编辑成功",editFailed:"编辑失败",addSuccess:"添加成功",addFailed:"添加失败",addFavoriteSuccess:"已添加到收藏夹",addFavoriteIsExist:"已添加到收藏夹",error:"错误",editNameExist:"名称已存在",moveSuccess:"移动成功",moveFailed:"移动失败",setLanguageSuccess:"设置语言成功",setLanguageFailed:"设置语言失败",startPanelSuccess:"启动面板成功",startPanelFailed:"启动面板失败",isLoading:"已在执行中请等待",loaddingPrc:"执行进度 {name}%",loaddingSuccess:"已全部加载成功",noFinishKuo:"括号不完整，请检查输入",getTranslaterFail:"获取翻译设置失败",applyTranslaterFail:"应用翻译设置失败",applyToTranslaterFail:"切换翻译库翻译需要安装翻译库，请先安装翻译库再应用设置",applyTranslaterSuccess:"应用翻译设置成功",tranlaterPackageInstallFail:"等待安装超时，请查看后台安装情况，若安装成功再次点击安装即可验证",tranlaterPackageInstallSuccess:"安装翻译包成功",translaterTestFail:"翻译失败，请使用其它的翻译服务进行尝试",installPackageSuccess:"安装共享数据成功！",installPackageFail:"安装共享数据失败，请查看后台错误",loadFailed:"加载失败",jsonErrorMesg:"JSON文件格式错误",pleaseAddSub:"请先添加二级分类",pleaseAddMainCeb:"请先添加一级分类",pleaseSelectGroup:"请选择完整的分组路径",isLoadingPleaseWait:"正在执行中，请查看后台进度",shareGroupError:"分享失败，获取分组信息失败",shareTagError:"分享失败，获取组Tag信息失败"},history:{title:"历史记录",search_placeholder:"搜索历史记录...",search:"搜索",windowTitle:"历史记录",favorites:"收藏夹",history:"历史记录",refresh:"刷新",refresh_history:"刷新历史记录",refresh_favorites:"刷新收藏夹",add_to_favorites:"添加到收藏夹",delete_history:"删除历史记录",use_item:"使用",add_new:"添加收藏",bulk_delete:"批量删除",deleteHistoryConfirm:"确定要删除历史记录 {name} 吗？",deleteFavoriteConfirm:"确定要删除收藏夹 {name} 吗？",confirmDeleteSelected:"确定要删除选中的信息吗？",cancel_delete:"取消删除",sure_delete:"确定删除",deleteSelected:"删除选中",dialog:{add_tag:"添加收藏",edit_tag:"编辑收藏",name:"名称",name_placeholder:"请输入名称",tag:"标签",tag_placeholder:"请输入标签",background_color:"背景颜色",background_color_placeholder:"请选择背景颜色",edit_favorite:"编辑收藏",delete_favorite:"删除收藏"},edit_favorite:"编辑收藏",delete_favorite:"删除收藏",use_favorite:"使用收藏"},floatingBall:{promptBox:"打开全局提示词",tagManager:"打开标签管理",loraManager:"打开Lora管理",aiWindow:"打开AI对话",restoreWindow:"重置所有窗口",openNodeListWindow:"打开节点列表",tranToWeb:"图片转换工具",openSetting:"打开设置"},aiWindow:{windowTitle:"AI对话窗口",newChat:"新建对话",chatName:"对话",thinking:"思考中...",send:"发送",inputMessage:"输入你的消息..."},translaterService:{niutrans:"小牛翻译",mymemory:"MyMemory",alibaba:"阿里巴巴翻译",baidu:"百度翻译",modernmt:"ModernMT",volcengine:"火山翻译",iciba:"金山词霸",iflytek:"科大讯飞翻译",google:"谷歌翻译",bing:"必应翻译",lingvanex:"Lingvanex",yandex:"Yandex翻译",itranslate:"iTranslate",systran:"SYSTRAN",argos:"Argos翻译",apertium:"Apertium",reverso:"Reverso翻译",deepl:"DeepL翻译",cloudtranslation:"云翻译",qqtransmart:"腾讯翻译君",translatecom:"Translate.com",sogou:"搜狗翻译",tilde:"Tilde翻译",caiyun:"彩云小译",qqfanyi:"腾讯翻译",translateme:"TranslateMe",papago:"Papago翻译",mirai:"未来翻译",youdao:"有道翻译",iflyrec:"讯飞听见翻译",hujiang:"沪江翻译",yeekit:"译库翻译",languagewire:"LanguageWire",elia:"Elia翻译",judic:"Judic翻译",mglip:"蒙古语翻译",utibet:"藏语翻译"},translaterLanguage:{english:"英语",chinese:"中文",arabic:"阿拉伯语",russian:"俄语",french:"法语",german:"德语",spanish:"西班牙语",portuguese:"葡萄牙语",italian:"意大利语",japanese:"日语",korean:"韩语",greek:"希腊语",dutch:"荷兰语",hindi:"印地语",turkish:"土耳其语",malay:"马来语",thai:"泰语",vietnamese:"越南语",indonesian:"印度尼西亚语",hebrew:"希伯来语",polish:"波兰语",mongolian:"蒙古语",czech:"捷克语",hungarian:"匈牙利语",estonian:"爱沙尼亚语",bulgarian:"保加利亚语",danish:"丹麦语",finnish:"芬兰语",romanian:"罗马尼亚语",swedish:"瑞典语",slovenian:"斯洛文尼亚语","persian/farsi":"波斯语/波斯语",bosnian:"波斯尼亚语",serbian:"塞尔维亚语",fijian:"斐济语",filipino:"菲律宾语",haitiancreole:"海地克里奥尔语",catalan:"加泰罗尼亚语",croatian:"克罗地亚语",latvian:"拉脱维亚语",lithuanian:"立陶宛语",urdu:"乌尔都语",ukrainian:"乌克兰语",welsh:"威尔士语",tahiti:"塔希提语",tongan:"汤加语",swahili:"斯瓦希里语",samoan:"萨摩亚语",slovak:"斯洛伐克语",afrikaans:"南非荷兰语",norwegian:"挪威语",bengali:"孟加拉语",malagasy:"马达加斯加语",maltese:"马耳他语","queretaro otomi":"克雷塔罗奥托米语","klingon/tlhingan hol":"克林贡语",gujarati:"古吉拉特语",tamil:"泰米尔语",telugu:"泰卢固语",punjabi:"旁遮普语",amharic:"阿姆哈拉语",azerbaijani:"阿塞拜疆语",bashkir:"巴什基尔语",belarusian:"白俄罗斯语",cebuano:"宿务语",chuvash:"楚瓦什语",esperanto:"世界语",basque:"巴斯克语",irish:"爱尔兰语"},utils:{tranToWeb:"转换图片为HTML",dropOrPasteImage:"点击本区域可以上传文件也可以拖动图片或粘贴图片到此处",downloadHtml:"下载HTML",copyHtml:"复制HTML",copySuccess:"HTML已复制",copyFailed:"复制HTML失败",clear:"清空内容"},importDialog:{title:"批量导入Tag",sure:"确认并导入",cleanAll:"清空所有",dumpSQL:"导出所有SQL",uploadSQL:"上传原始SQL文件",setMainCeb:"设置一级分类",setSubCeb:"设置二级分类",addTag:"添加Tag",fromJSONImput:"从JSON文件批量导入Tag",fromTxtInput:"从TXT文件批量导入Tag",fromYmalInput:"从YAML文件批量导入Tag",selectMainCeb:"选择一级分类",selectSubCeb:"选择二级分类",selectGroup:"选择已有分类",sureSelect:"确认选择",pleaseAddGroupName:"请填写一级分类名称",pleaseAddSubGroupName:"请填写二级分类名称",pleaseFullRequest:"请填写完整一级分类和二级分类信息",successImport:"导入成功",importFail:"导入失败",dumpOnlySQL:"仅导出Tag的SQL",settingOutputName:"设置导出文件名称",sureYes:"确认",cancel:"取消",edit:"编辑",delete:"删除",add:"添加Tag",pleaseMainCebUuid:"一级分原UUID，增量更新才需要",pleaseSubGroupUuid:"二级分原UUID，增量更新才需要",pleaseSubGroup:"二级分类名称",pleaseMainCeb:"一级分类名称",translater:"描述",tips1:"使用教程：",tips1text:"B站视频教程",tips2:"Tag云仓库：",tips2text:"GitHub仓库",tips3:"在线批量编辑：",tips3text:"在线编辑器",selectTitle:"选择分类",selectedCategories:"已选择的分类",clearAll:"清除全部",primaryCategories:"一级分类",subCategories:"二级分类",noSelectedCategories:"暂无选择的分类",selectCategory:"选择此分类",selectSubcategory:"选择此子分类",sureSelect:"确认选择"},randomUtils:{title:"随机Tag规则设置",generalSettings:"通用设置",totalTags:"随机Tag总数量（规则范围超过总数量按总数量算最大范围）",rules:"规则",addRule:"添加规则",rule:"规则",range:"范围",tagType:"标签类型",category:"Tag数据",specificTags:"特定标签",selectCategory:"选择分类",addTagPlaceholder:"输入标签并按回车",addTag:"添加标签",testRandom:"测试随机",generatedTags:"生成的标签",selectTagGroup:"选择Tag分组",ruleTemplates:"规则模板",saveAsTemplate:"保存为模板",selectTemplate:"选择模板",applyTemplate:"应用模板",templateNamePlaceholder:"输入模板名称",templateNameRequired:"请输入模板名称",templateSaved:"模板已保存",templateApplied:"模板已应用",errorSavingTemplates:"保存模板时出错",save:"保存",cancel:"取消",editTemplate:"修改名称",deleteTemplate:"删除模板",confirmDeleteTemplate:"确定要删除此模板吗？",templateDeleted:"模板已删除",templateUpdated:"模板名称已更新",errorUpdatingTemplate:"更新模板失败",errorLoadingTemplate:"加载模板失败",errorDeletingTemplate:"删除模板失败",errorApplyingTemplate:"应用模板失败",pleaseChooseTemplate:"请选择模板",errorSavingTemplate:"保存模板失败",newTemplate:"新建模板",rulesReminder:"提醒：第一个规则的范围必须从1开始！如果范围区间超过了随机的总数则直接显示全部不会随机！"},danbooruManager:{title:"Danbooru管理器",controle:"操作",translatePlaceholder:"请输入对应的翻译文本",searchPlaceholder:"输入需要搜索的Danbooru标签...",pageShow:"每页显示:",pageLimit:"条",hot:"热度",aliases:"分区",sureBatchDelete:"批量删除确认",sureBatchDeleteTips1:"您确定要删除选中的",sureBatchDeleteTips2:"个标签吗？此操作不可撤销。",sureDelete:"确认删除",import:"Danbooru格式导入",importBatchTitle:"批量导入Danbooru数据",importTitle:"Danbooru 导入数据展示",add:"添加Danbooru标签",edit:"编辑Danbooru标签"}},J0={promptBox:{placeholder:"Please enter text...",delete:"Delete",newline:"New Line",tab:"Tab",windowTitle:"WeiLin Prompt UI Window "+vo,windowTitleGlobal:"WeiLin Global Prompt UI Window "+vo,translate:"Translate",translatePlaceholder:"Please enter the text to be translated",weight:"Weight",weightPlaceholder:"Please enter the weight",addBracket:"Add Bracket",removeLayer:"Remove Bracket",hiddenHint:"Double-click to show",tagTips:"Double-click the left mouse button to mask the Tag<br>click the Tag to edit<br>and drag the Tag to drag",oneClickRandomTag:"one Click Random Tag",randomTagSettings:"setting Random Tag",oneClickTranslate:"one Click Translate Tag",modelWeight:"Model Weight",textWeight:"Text Weight",settings:{title:"Settings",cancel:"Cancel",save:"Save",translator:"Translator",sourceLanguage:"Source Language",targetLanguage:"Target Language",chinese_simplified:"Chinese Simplified",english:"English",close:"Close",auto_detect:"Auto Detect",setting_floating_ball:"Setting Floating Ball",setting_prompt_box:"Setting Prompt Box",enablePromptCommaShow:"Show Prompt Comma",floatingBallCount:"Floating Ball Count",floatingBallCountPlaceholder:"Please enter the number of floating balls",floatingBallSize:"Width of suspended ball",floatingBallSizePlaceholder:"Please enter the width of the suspension ball",floatingBallHeight:"Height of suspended ball",floatingBallHeightPlaceholder:"Please input the height of the suspension ball",enableFloatingBall:"Enable Floating Ball",enableCommaConversion:"Enable Comma Conversion",enablePeriodConversion:"Enable Period Conversion",enableBracketConversion:"Enable Bracket Conversion",enableAngleBracketConversion:"Enable Angle Bracket Conversion",enableUnderscoreToBracket:"Enable Underscore to Bracket",setting_openai_box:"OpenAI Settings",openai_api_key:"API Key",openai_api_key_placeholder:"Please enter API Key",openai_api_key_save:"Save",openaiSettings:"OpenAI Settings",openaiSettings_api_key:"API Key",openaiSettings_api_key_placeholder:"Please enter API Key",openaiSettings_api_key_save:"Save",openai_base_url:"Base URL",openai_base_url_placeholder:"Please enter Base URL",openai_model:"Model",openai_model_placeholder:"Please enter Model",not_set:"Not Set",edit:"Edit",delete:"Delete",selectedOpenaiConfig:"Selected OpenAI Config",addNewConfig:"Add New Config",setting_sponsor_me:"Sponsor Me",sponsorMe:"Sponsor Me",sponsorMeTip:"Sponsor Me, Support Me to Continue Development",sponsorMeLink:"Unique Sponsor Link https://afdian.com/a/weilin9999",setting_start_panel:"Start Panel",startPanel:"Start Panel",startPanelTip:"Click Start Panel, after successful startup, the panel page will be automatically opened",selectTranslater:"select translater",selectOptionNetworkTranslater:"Three party online translation",selectOptionPythonTranslater:"Translation Library Translation",apply:"Apply",selectOptionNetworkTranslaterTitle:"Three party network translation settings",selectOptionPythonTranslaterTitle:"Translation library settings",selectOptionNetworkTranslaterInfo:"The third-party tool used is (only for online translation)",selectOptionPythonTranslaterInfo:"The translation package used is translators",install:"Install",nowTranlaterPackageState:"now transtler package state:",tranlaterPackageStateTrue:"installed",tranlaterPackageStateFlase:"not installed",installed:"is installed ....",installTranslaterPackageInfo:"Currently installing translation library, please do not close the window! Wait for installation to complete",translaterSetting:"Translation Settings",chooseTranslaterSetting:"Choose a translation service:",translaterLangSourceSetting:"Translation language:",translaterLangTargeSetting:"Translation target language:",saveTranslaterSetting:"Save Settings",testTranslaterTitle:"Test translation",inputTestTranslater:"Enter translation content:",outPutTestTranslater:"Translation result:",testingTranslater:"Test translation",inputTestTranslaterPlaceholder:"Please enter the content to be translated",outPutTestTranslaterPlaceholder:"The translation result will be displayed here",errorPrompt:"Read the prompt node failed",skinSetting:"skin setting",defaultSkin:"default skin",customSkin:"custom skin",uploadSkin:"upload skin",bgSetting:"background setting",gradientBg:"gradient color",transparentBg:"transparent",gradientColor:"gradient color select",borderRadius:"border radius",resetToDefault:"reset to default"}},controls:{language:"Language",settings:"Settings",switchTheme:"Switch Theme",darkMode:"Dark Mode",lightMode:"Light Mode",tagManager:"Tag Manager",loraStack:"Lora Stack",loraManager:"Lora Manager",history:"History",addLora:"Add Lora",removeLora:"Remove Lora",lookOnLora:"Look On Lora",aiChat:"AI Chat",github:"Github Home",shareCloudData:"Share Cloud Data",tutorialVideo:"Tutorial Video",sponsor:"Sponsor Me",danbooruManager:"danbooru Manager"},theme:{toggle:"Switch Theme"},lora:{title:"Lora Information",rawTitle:"LoraRaw",file:"File",hash:"Hash",civitai:"Civitai",viewOnCivitai:"View on Civitai",fetchFromCivitai:"Fetch from Civitai",modelNotFound:"Model not found",modelNotFoundTip:"The model was not found on Civitai. It might be private or deleted",name:"Name",nameTip:"Display name of the model",type:"Type",baseModel:"Base Model",trainedWords:"Trained Words",trainedWordsTip:"Keywords used in model training, click to select for copying",selectedWords:"{count} words selected",strengthMin:"Min Strength",strengthMinTip:"Recommended minimum strength value",strengthMax:"Max Strength",strengthMaxTip:"Recommended maximum strength value",promptWords:"Prompt Words",promptWordsTip:"Recommended prompt words when using this model",loraWorks:"Lora Prompt Words",strWeight:"Text Strength Weight",hideLora:"Disable Lora",showLora:"Enable Lora",baseModel:"Base Model",skipClip:"Clip Skip",seeLoraRaw:"LoraRaw",addDiyFiled:"Add DIY Filed",getCivitData:"Get Civitai Data",copy:"Copy"},common:{confirmDelete:"Confirm Delete",delete:"Delete",cancel:"Cancel",confirm:"Confirm",edit:"Edit",save:"Save",refresh:"Refresh",copy:"Copy",copySuccess:"Copied successfully",copyFailed:"Copy failed",windowSize:"Adjust window size",showMore:"show more",showLess:"show less"},nodeListWindow:{windowTitle:"Node List",openPromptUI:"Open Prompt UI"},tagManager:{deletePrimaryCategoryConfirm:"Are you sure you want to delete category {name}?",deleteGroupConfirm:"Are you sure you want to delete group {name}?",deleteTagConfirm:"Are you sure you want to delete tag {name}?",windowTitle:"Tag Manager",categories:"Categories",groups:"Groups",selectCategory:"Please select a category",selectGroup:"Please select a group",addPrimaryCategory:"Add Category",addGroup:"Add Group",editPrimaryCategory:"Edit Category",editGroup:"Edit Group",editTag:"Edit Tag",categoryName:"Category Name",categoryNamePlaceholder:"Enter category name",categoryNameRequired:"Category name is required",groupName:"Group Name",groupNamePlaceholder:"Enter group name",groupNameRequired:"Group name is required",addTag:"Add Tag",text:"Tag Description",textPlaceholder:"Enter tag Description",description:"Tag",descriptionPlaceholder:"Enter tag",textRequired:"Tag and Tag description cannot be empty",backgroundColor:"Background Color",colorPickerTitle:"Select Color",opacity:"Opacity",searchPlaceholder:"Search tags...",noResults:"No results found",searchInCategory:"in category",searchInTag:"in tag",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",addSubCategory:"Add Sub-category",editSubCategory:"Edit Sub-category",subCategoryName:"Sub-category Name",subCategoryNamePlaceholder:"Enter sub-category name",subCategoryNameRequired:"Sub-category name is required",deleteConfirmTitle:"Confirm Delete",deleteConfirmMessage:"This action will permanently delete this {type}. Continue?",deleteSuccess:"Deleted successfully",deleteFailed:"Delete failed",saveSuccess:"Saved successfully",saveFailed:"Save failed",colorPickerAlpha:"Opacity",colorPickerHex:"Hex Color Value",colorPreview:"Color Preview",dragToSort:"Drag to Sort",searchTags:"Search Tags",noTagsFound:"No tags found",noGroupsFound:"No groups found",noCategoriesFound:"No categories found",refresh:"Refresh",refreshing:"Refreshing...",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",search:"Search",searching:"Searching...",searchResult:"Search Result",searchInPath:"Located in: {path}",category:"Category",group:"Group",tag:"Tag",resultType:{category:"Category",group:"Group",tag:"Tag"},hasDeleteAction:"Batch Delete",deleteSelected:"Delete Selected",confirmDeleteSelected:"Are you sure you want to delete the selected tags?",cancelDelete:"Cancel Delete",moveTag:"Move Tag",targetTag:"Target Tag",movePosition:"Move Position",moveBefore:"Move Before",moveAfter:"Move After",editTag:"Edit Tag",deleteTag:"Delete Tag",editGroupMode:"Edit Group Mode",exitEditMode:"Exit Edit Mode",autoAddSearchTag:"Auto Add Search Tag With Prompt",importTags:"Import Tags",share:"Share",delete:"Delete",edit:"Edit",outputSuccess:"Share successfully",noTagsSelected:"No share tags selected",shareSelected:"Share selected Tag",batchShare:"Batch Share Tag",cancelShare:"Cancel Share",moveGroup:"Move Group",targetGroup:"Target Group",moveGroupBefore:"Move Before",moveGroupAfter:"Move After",importDanbooru:"Batch import",modifyTabSize:"Modify Tag Size",tabSizeConfig:"Tag Size Configuration",primaryTabConfig:"Primary Category Tab Configuration",groupTabConfig:"Group Category Tab Configuration",tabWidth:"Tab Width",tabHeight:"Tab Height",fontSize:"Font Size",fitContent:"Fit Content",customWidth:"Custom Width",resetDefault:"Reset to Default",tabSizeConfigSaved:"Tag size configuration saved",tabSizeConfigSaveFailed:"Failed to save tag size configuration"},loraManager:{windowTitle:"Lora Manager",modelWeight:"Model Weight",textEncoderWeight:"Text Encoder Weight",all:"All",root:"Root",refresh:"Refresh",cacheAll:"Cache all Lora information",searchPlaceholder:"Search Lora...",noResults:"No results found",prevPage:"prev page",nextPage:"next page",loadingMore:"Loadding more ...",noMoreData:"No more data"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",saveSuccess:"Save successful",saveFailed:"Save failed",deleteSuccess:"Delete successful",deleteFailed:"Delete failed",operationSuccess:"Operation successful",operationFailed:"Operation failed",networkError:"Network error",unknownError:"Unknown error",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",loadingData:"Loading data...",dataLoaded:"Data loaded",editSuccess:"Edit successful",editFailed:"Edit failed",addSuccess:"Add successful",addFailed:"Add failed",addFavoriteSuccess:"Added to favorites",addFavoriteIsExist:"Added to favorites",error:"Error",moveSuccess:"Move successful",moveFailed:"Move failed",setLanguageSuccess:"Set language successful",setLanguageFailed:"Set language failed",startPanelSuccess:"Start panel successful",startPanelFailed:"Start panel failed",isLoading:"Loading...",loaddingPrc:"Execution progress {name}%",loaddingSuccess:"All loaded successfully",noFinishKuo:"The parentheses are incomplete. Please check the input",getTranslaterFail:"Get translator failed",applyTranslaterFail:"Apply translator failed",applyToTranslaterFail:"Switching to a translation library requires installing a translation library. Please install the translation library first and then apply the settings",applyTranslaterSuccess:"Apply translator successful",tranlaterPackageInstallFail:"Waiting for installation timeout, please check the background installation status. If the installation is successful, click install again to verify",tranlaterPackageInstallSuccess:"Successfully installed translation package",translaterTestFail:"Translation failed, please try using another translation service",installPackageSuccess:"Successfully installed translation package",installPackageFail:"Failed to install translation package, please check the background installation status",loadFailed:"load failed",jsonErrorMesg:"The format of the JSON file is incorrect",pleaseAddSub:"Please add the secondary classification first",pleaseAddMainCeb:"Please add the first-level category first",pleaseSelectGroup:"Please select the complete grouping path",isLoadingPleaseWait:"It is being executed. Please check the progress in the background",shareGroupError:"Failed to share and failed to obtain group information",shareTagError:"Failed to share and failed to obtain group tag information"},cloudWindow:{windowTitle:"Share Cloud Window",back:"Back",currentPath:"Current Path",tagDatabase:"Tag Database",danbooruDatabase:"Danbooru Database",open:"Open Folder",installed:"Installed",install:"Install",installing:"Installing..."},history:{title:"History",search_placeholder:"Search history...",windowTitle:"History",search:"Search",favorites:"Favorites",history:"History",refresh:"Refresh",refresh_history:"Refresh history",refresh_favorites:"Refresh favorites",add_to_favorites:"Add to favorites",delete_history:"Delete history",use_item:"Use",add_new:"Add new",bulk_delete:"Bulk delete",deleteHistoryConfirm:"Are you sure you want to delete history {name}?",deleteFavoriteConfirm:"Are you sure you want to delete favorite {name}?",confirmDeleteSelected:"Are you sure you want to delete selected information?",cancel_delete:"Cancel delete",sure_delete:"Sure delete",deleteSelected:"Delete selected",dialog:{add_tag:"Add favorite",edit_tag:"Edit favorite",name:"Name",name_placeholder:"Please enter name",tag:"Tag",tag_placeholder:"Please enter tag",background_color:"Background color",background_color_placeholder:"Please select background color",edit_favorite:"Edit favorite",delete_favorite:"Delete favorite"},edit_favorite:"Edit favorite",delete_favorite:"Delete favorite",use_favorite:"Use favorite"},floatingBall:{promptBox:"open Global Prompt Box",tagManager:"open Tag Manager",loraManager:"open Lora Manager",aiWindow:"open AI Chat",restoreWindow:"reset all windows",openNodeListWindow:"open Node List",tranToWeb:"Image to Web Utils",openSetting:"open Setting"},aiWindow:{windowTitle:"AI Chat Window",newChat:"New Chat",chatName:"Chat",thinking:"Thinking...",send:"Send",inputMessage:"Enter your message..."},translaterService:{niutrans:"niutrans",mymemory:"mymemory",alibaba:"alibaba",baidu:"baidu",modernmt:"modernmt",volcengine:"volcengine",iciba:"iciba",iflytek:"iflytek",google:"google",bing:"bing",lingvanex:"lingvanex",yandex:"yandex",itranslate:"itranslate",systran:"systran",argos:"argos",apertium:"apertium",reverso:"reverso",deepl:"deepl",cloudtranslation:"cloudtranslation",qqtransmart:"qqtransmart",translatecom:"translatecom",sogou:"sogou",tilde:"tilde",caiyun:"caiyun",qqfanyi:"qqfanyi",translateme:"translateme",papago:"papago",mirai:"mirai",youdao:"youdao",iflyrec:"iflyrec",hujiang:"hujiang",yeekit:"yeekit",languagewire:"languagewire",elia:"elia",judic:"judic",mglip:"mglip",utibet:"utibet"},translaterLanguage:{english:"english",chinese:"chinese",arabic:"arabic",russian:"russian",french:"french",german:"german",spanish:"spanish",portuguese:"portuguese",italian:"italian",japanese:"japanese",korean:"korean",greek:"greek",dutch:"dutch",hindi:"hindi",turkish:"turkish",malay:"malay",thai:"thai",vietnamese:"vietnamese",indonesian:"indonesian",hebrew:"hebrew",polish:"polish",mongolian:"mongolian",czech:"czech",hungarian:"hungarian",estonian:"estonian",bulgarian:"bulgarian",danish:"danish",finnish:"finnish",romanian:"romanian",swedish:"swedish",slovenian:"slovenian","persian/farsi":"persian/farsi",bosnian:"bosnian",serbian:"serbian",fijian:"fijian",filipino:"filipino",haitiancreole:"haitiancreole",catalan:"catalan",croatian:"croatian",latvian:"latvian",lithuanian:"lithuanian",urdu:"urdu",ukrainian:"ukrainian",welsh:"welsh",tahiti:"tahiti",tongan:"tongan",swahili:"swahili",samoan:"samoan",slovak:"slovak",afrikaans:"afrikaans",norwegian:"norwegian",bengali:"bengali",malagasy:"malagasy",maltese:"maltese","queretaro otomi":"queretaro otomi","klingon/tlhingan hol":"klingon/tlhingan hol",gujarati:"gujarati",tamil:"tamil",telugu:"telugu",punjabi:"punjabi",amharic:"amharic",azerbaijani:"azerbaijani",bashkir:"bashkir",belarusian:"belarusian",cebuano:"cebuano",chuvash:"chuvash",esperanto:"esperanto",basque:"basque",irish:"irish"},utils:{tranToWeb:"Image to HTML",dropOrPasteImage:"Drop or paste image here",downloadHtml:"Download HTML",copyHtml:"Copy HTML",copySuccess:"HTML copied to clipboard",copyFailed:"Failed to copy HTML",clear:"Clear"},importDialog:{title:"Batch import of Tags",sure:"Confirm and import",cleanAll:"Empty all",dumpSQL:"Export All SQL",uploadSQL:"Upload the original SQL file",setMainCeb:"Set up a first-level classification",setSubCeb:"Set up secondary classification",addTag:"Add Tag",fromJSONImput:"Import tags from the JSON file",fromTxtInput:"Batch import tags from TXT files",fromYmalInput:"Batch import tags from YMAL files",selectMainCeb:"Select the first-level classification",selectSubCeb:"Select the secondary classification",selectGroup:"Select the existing classification",sureSelect:"Confirm the selection",pleaseAddGroupName:"Please fill in the name of the first-level classification",pleaseAddSubGroupName:"Please fill in the name of the secondary classification",pleaseFullRequest:"Please fill in the information of the first-level and second-level classifications completely",successImport:"Import successful",importFail:"Import failed",dumpOnlySQL:"Only export the SQL of the Tag",settingOutputName:"Set the name of the export file",sureYes:"Sure",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add Tag",pleaseMainCebUuid:"The original UUID of the first-level division is only required for incremental updates and cannot be modified",pleaseSubGroupUuid:"The secondary division of the original UUID is only required for incremental updates and cannot be modified",pleaseSubGroup:"Secondary classification name",pleaseMainCeb:"First-level classification name",translater:"Description",tips1:"Usage Tutorial:",tips1text:"Bilibili video tutorial",tips2:"Tag Cloud Warehouse:",tips2text:"GitHub repository",tips3:"Online batch editing:",tips3text:"Online editor",selectTitle:"Select Category",selectedCategories:"Selected Categories",clearAll:"Clear All",primaryCategories:"Primary Categories",subCategories:"Sub Categories",noSelectedCategories:"No categories selected",selectCategory:"Select this category",selectSubcategory:"Select this subcategory",sureSelect:"Confirm Selection"},randomUtils:{title:"Random Tag Rules Settings",generalSettings:"General Settings",totalTags:"Random Tag Total Number (If the rule range exceeds the total quantity, the maximum range is calculated by the total quantity)",rules:"Rules",addRule:"Add Rule",rule:"Rule",range:"Range",tagType:"Tag Type",category:"Tag Category",specificTags:"Specific Tags",selectCategory:"Select Category",addTagPlaceholder:"Enter tag and press Enter",addTag:"Add Tag",testRandom:"Test Random",generatedTags:"Generated Tags",selectTagGroup:"Select Tag Group",ruleTemplates:"Rule Templates",saveAsTemplate:"Save as Template",selectTemplate:"Select Template",applyTemplate:"Apply Template",templateNamePlaceholder:"Enter template name",templateNameRequired:"Template name is required",templateSaved:"Template saved",templateApplied:"Template applied",errorSavingTemplates:"Error saving templates",save:"Save",cancel:"Cancel",editTemplate:"Edit Name",deleteTemplate:"Delete",confirmDeleteTemplate:"Are you sure you want to delete this template?",templateDeleted:"Template deleted",templateUpdated:"Template name updated",errorUpdatingTemplate:"Update template failed",errorLoadingTemplate:"Load template failed",errorDeletingTemplate:"Delete template failed",pleaseChooseTemplate:"Please choose a template",errorApplyingTemplate:"Apply template failed",errorSavingTemplate:"Save template failed",newTemplate:"New Template",rulesReminder:"Reminder: The range of the first rule must start at 1! If the range exceeds the total number of random, it will simply display all not random!"},danbooruManager:{title:"Danbooru Manager",controle:"Controle",translatePlaceholder:"Please enter the tag to be translated",searchPlaceholder:"Input need search danbooru tag",pageShow:"Display per page:",pageLimit:"article",hot:"hot",aliases:"aliases",sureBatchDelete:"Batch deletion confirmation",sureBatchDeleteTips1:"You are sure you want to delete the selected one",sureBatchDeleteTips2:"A label? This operation is irrevocable.",sureDelete:"Confirm deletion",import:"Import in Danbooru format",importBatchTitle:"Batch import Danbooru data",importTitle:"Danbooru Import data display",add:"Add Danbooru Tag",edit:"Edit Danbooru Tag"}};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Uf;const Ol=e=>Uf=e,Hf=Symbol();function Ei(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ys;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ys||(ys={}));function X0(){const e=Sr(!0),t=e.run(()=>_({}));let o=[],n=[];const a=Dr({install(s){Ol(a),a._a=s,s.provide(Hf,a),s.config.globalProperties.$pinia=a,n.forEach(l=>o.push(l)),n=[]},use(s){return this._a?o.push(s):n.push(s),this},_p:o,_a:null,_e:e,_s:new Map,state:t});return a}const Wf=()=>{};function jf(e,t,o,n=Wf){e.push(t);const a=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),n())};return!o&&Lu()&&Lm(a),a}function xa(e,...t){e.slice().forEach(o=>{o(...t)})}const Z0=e=>e(),Vf=Symbol(),Li=Symbol();function $i(e,t){e instanceof Map&&t instanceof Map?t.forEach((o,n)=>e.set(n,o)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const o in t){if(!t.hasOwnProperty(o))continue;const n=t[o],a=e[o];Ei(a)&&Ei(n)&&e.hasOwnProperty(o)&&!Ot(n)&&!So(n)?e[o]=$i(a,n):e[o]=n}return e}const e_=Symbol();function t_(e){return!Ei(e)||!Object.prototype.hasOwnProperty.call(e,e_)}const{assign:Do}=Object;function n_(e){return!!(Ot(e)&&e.effect)}function o_(e,t,o,n){const{state:a,actions:s,getters:l}=t,r=o.state.value[e];let u;function d(){r||(o.state.value[e]=a?a():{});const c=Xm(o.state.value[e]);return Do(c,s,Object.keys(l||{}).reduce((f,g)=>(f[g]=Dr(ot(()=>{Ol(o);const p=o._s.get(e);return l[g].call(p,p)})),f),{}))}return u=zf(e,d,t,o,n,!0),u}function zf(e,t,o={},n,a,s){let l;const r=Do({actions:{}},o),u={deep:!0};let d,c,f=[],g=[],p;const v=n.state.value[e];!s&&!v&&(n.state.value[e]={}),_({});let b;function x(H){let q;d=c=!1,typeof H=="function"?(H(n.state.value[e]),q={type:ys.patchFunction,storeId:e,events:p}):($i(n.state.value[e],H),q={type:ys.patchObject,payload:H,storeId:e,events:p});const he=b=Symbol();Qe().then(()=>{b===he&&(d=!0)}),c=!0,xa(f,q,n.state.value[e])}const k=s?function(){const{state:q}=o,he=q?q():{};this.$patch(le=>{Do(le,he)})}:Wf;function A(){l.stop(),f=[],g=[],n._s.delete(e)}const U=(H,q="")=>{if(Vf in H)return H[Li]=q,H;const he=function(){Ol(n);const le=Array.from(arguments),R=[],Y=[];function X(se){R.push(se)}function z(se){Y.push(se)}xa(g,{args:le,name:he[Li],store:O,after:X,onError:z});let Z;try{Z=H.apply(this&&this.$id===e?this:O,le)}catch(se){throw xa(Y,se),se}return Z instanceof Promise?Z.then(se=>(xa(R,se),se)).catch(se=>(xa(Y,se),Promise.reject(se))):(xa(R,Z),Z)};return he[Vf]=!0,he[Li]=q,he},w={_p:n,$id:e,$onAction:jf.bind(null,g),$patch:x,$reset:k,$subscribe(H,q={}){const he=jf(f,H,q.detached,()=>le()),le=l.run(()=>Ze(()=>n.state.value[e],R=>{(q.flush==="sync"?c:d)&&H({storeId:e,type:ys.direct,events:p},R)},Do({},u,q)));return he},$dispose:A},O=Zs(w);n._s.set(e,O);const V=(n._a&&n._a.runWithContext||Z0)(()=>n._e.run(()=>(l=Sr()).run(()=>t({action:U}))));for(const H in V){const q=V[H];if(Ot(q)&&!n_(q)||So(q))s||(v&&t_(q)&&(Ot(q)?q.value=v[H]:$i(q,v[H])),n.state.value[e][H]=q);else if(typeof q=="function"){const he=U(q,H);V[H]=he,r.actions[H]=q}}return Do(O,V),Do(nt(O),V),Object.defineProperty(O,"$state",{get:()=>n.state.value[e],set:H=>{x(q=>{Do(q,H)})}}),n._p.forEach(H=>{Do(O,l.run(()=>H({store:O,app:n._a,pinia:n,options:r})))}),v&&s&&o.hydrate&&o.hydrate(O.$state,v),d=!0,c=!0,O}/*! #__NO_SIDE_EFFECTS__ */function a_(e,t,o){let n;const a=typeof t=="function";n=a?o:t;function s(l,r){const u=Nh();return l=l||(u?io(Hf,null):null),l&&Ol(l),l=Uf,l._s.has(e)||(a?zf(e,t,n,l):o_(e,n,l)),l._s.get(e)}return s.$id=e,s}const Rl=a_("tag",()=>{const e=_([]),t=_({user_lang:"zh_CN"}),o=_(0);return{categories:e,setCategories:l=>{e.value=l},userSetting:t,setUserSetting:l=>{t.value=l},isFirstLoading:o,setisFirstLoading:l=>{o.value=l}}});function qf(e,t){return function(){return e.apply(t,arguments)}}const{toString:s_}=Object.prototype,{getPrototypeOf:Ai}=Object,{iterator:Nl,toStringTag:Gf}=Symbol,Dl=(e=>t=>{const o=s_.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Fn=e=>(e=e.toLowerCase(),t=>Dl(t)===e),Pl=e=>t=>typeof t===e,{isArray:Ta}=Array,bs=Pl("undefined");function ws(e){return e!==null&&!bs(e)&&e.constructor!==null&&!bs(e.constructor)&&hn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qf=Fn("ArrayBuffer");function l_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Qf(e.buffer),t}const r_=Pl("string"),hn=Pl("function"),Yf=Pl("number"),xs=e=>e!==null&&typeof e=="object",i_=e=>e===!0||e===!1,Fl=e=>{if(Dl(e)!=="object")return!1;const t=Ai(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Gf in e)&&!(Nl in e)},u_=e=>{if(!xs(e)||ws(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},c_=Fn("Date"),d_=Fn("File"),f_=Fn("Blob"),p_=Fn("FileList"),g_=e=>xs(e)&&hn(e.pipe),m_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hn(e.append)&&((t=Dl(e))==="formdata"||t==="object"&&hn(e.toString)&&e.toString()==="[object FormData]"))},h_=Fn("URLSearchParams"),[v_,__,y_,b_]=["ReadableStream","Request","Response","Headers"].map(Fn),w_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ts(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Ta(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(ws(e))return;const s=o?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;let r;for(n=0;n<l;n++)r=s[n],t.call(null,e[r],r,e)}}function Kf(e,t){if(ws(e))return null;t=t.toLowerCase();const o=Object.keys(e);let n=o.length,a;for(;n-- >0;)if(a=o[n],t===a.toLowerCase())return a;return null}const Zo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jf=e=>!bs(e)&&e!==Zo;function Ii(){const{caseless:e}=Jf(this)&&this||{},t={},o=(n,a)=>{const s=e&&Kf(t,a)||a;Fl(t[s])&&Fl(n)?t[s]=Ii(t[s],n):Fl(n)?t[s]=Ii({},n):Ta(n)?t[s]=n.slice():t[s]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Ts(arguments[n],o);return t}const x_=(e,t,o,{allOwnKeys:n}={})=>(Ts(t,(a,s)=>{o&&hn(a)?e[s]=qf(a,o):e[s]=a},{allOwnKeys:n}),e),T_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),S_=(e,t,o,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},k_=(e,t,o,n)=>{let a,s,l;const r={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)l=a[s],(!n||n(l,e,t))&&!r[l]&&(t[l]=e[l],r[l]=!0);e=o!==!1&&Ai(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},C_=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const n=e.indexOf(t,o);return n!==-1&&n===o},E_=e=>{if(!e)return null;if(Ta(e))return e;let t=e.length;if(!Yf(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},L_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ai(Uint8Array)),$_=(e,t)=>{const n=(e&&e[Nl]).call(e);let a;for(;(a=n.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},A_=(e,t)=>{let o;const n=[];for(;(o=e.exec(t))!==null;)n.push(o);return n},I_=Fn("HTMLFormElement"),M_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,n,a){return n.toUpperCase()+a}),Xf=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),O_=Fn("RegExp"),Zf=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),n={};Ts(o,(a,s)=>{let l;(l=t(a,s,e))!==!1&&(n[s]=l||a)}),Object.defineProperties(e,n)},R_=e=>{Zf(e,(t,o)=>{if(hn(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=e[o];if(hn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},N_=(e,t)=>{const o={},n=a=>{a.forEach(s=>{o[s]=!0})};return Ta(e)?n(e):n(String(e).split(t)),o},D_=()=>{},P_=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function F_(e){return!!(e&&hn(e.append)&&e[Gf]==="FormData"&&e[Nl])}const B_=e=>{const t=new Array(10),o=(n,a)=>{if(xs(n)){if(t.indexOf(n)>=0)return;if(ws(n))return n;if(!("toJSON"in n)){t[a]=n;const s=Ta(n)?[]:{};return Ts(n,(l,r)=>{const u=o(l,a+1);!bs(u)&&(s[r]=u)}),t[a]=void 0,s}}return n};return o(e,0)},U_=Fn("AsyncFunction"),H_=e=>e&&(xs(e)||hn(e))&&hn(e.then)&&hn(e.catch),ep=((e,t)=>e?setImmediate:t?((o,n)=>(Zo.addEventListener("message",({source:a,data:s})=>{a===Zo&&s===o&&n.length&&n.shift()()},!1),a=>{n.push(a),Zo.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",hn(Zo.postMessage)),W_=typeof queueMicrotask<"u"?queueMicrotask.bind(Zo):typeof process<"u"&&process.nextTick||ep,Se={isArray:Ta,isArrayBuffer:Qf,isBuffer:ws,isFormData:m_,isArrayBufferView:l_,isString:r_,isNumber:Yf,isBoolean:i_,isObject:xs,isPlainObject:Fl,isEmptyObject:u_,isReadableStream:v_,isRequest:__,isResponse:y_,isHeaders:b_,isUndefined:bs,isDate:c_,isFile:d_,isBlob:f_,isRegExp:O_,isFunction:hn,isStream:g_,isURLSearchParams:h_,isTypedArray:L_,isFileList:p_,forEach:Ts,merge:Ii,extend:x_,trim:w_,stripBOM:T_,inherits:S_,toFlatObject:k_,kindOf:Dl,kindOfTest:Fn,endsWith:C_,toArray:E_,forEachEntry:$_,matchAll:A_,isHTMLForm:I_,hasOwnProperty:Xf,hasOwnProp:Xf,reduceDescriptors:Zf,freezeMethods:R_,toObjectSet:N_,toCamelCase:M_,noop:D_,toFiniteNumber:P_,findKey:Kf,global:Zo,isContextDefined:Jf,isSpecCompliantForm:F_,toJSONObject:B_,isAsyncFn:U_,isThenable:H_,setImmediate:ep,asap:W_,isIterable:e=>e!=null&&hn(e[Nl])};function Ke(e,t,o,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Se.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const tp=Ke.prototype,np={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{np[e]={value:e}}),Object.defineProperties(Ke,np),Object.defineProperty(tp,"isAxiosError",{value:!0}),Ke.from=(e,t,o,n,a,s)=>{const l=Object.create(tp);return Se.toFlatObject(e,l,function(u){return u!==Error.prototype},r=>r!=="isAxiosError"),Ke.call(l,e.message,t,o,n,a),l.cause=e,l.name=e.name,s&&Object.assign(l,s),l};const j_=null;function Mi(e){return Se.isPlainObject(e)||Se.isArray(e)}function op(e){return Se.endsWith(e,"[]")?e.slice(0,-2):e}function ap(e,t,o){return e?e.concat(t).map(function(a,s){return a=op(a),!o&&s?"["+a+"]":a}).join(o?".":""):t}function V_(e){return Se.isArray(e)&&!e.some(Mi)}const z_=Se.toFlatObject(Se,{},null,function(t){return/^is[A-Z]/.test(t)});function Bl(e,t,o){if(!Se.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=Se.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,x){return!Se.isUndefined(x[b])});const n=o.metaTokens,a=o.visitor||c,s=o.dots,l=o.indexes,u=(o.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(t);if(!Se.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Se.isDate(v))return v.toISOString();if(Se.isBoolean(v))return v.toString();if(!u&&Se.isBlob(v))throw new Ke("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(v)||Se.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,b,x){let k=v;if(v&&!x&&typeof v=="object"){if(Se.endsWith(b,"{}"))b=n?b:b.slice(0,-2),v=JSON.stringify(v);else if(Se.isArray(v)&&V_(v)||(Se.isFileList(v)||Se.endsWith(b,"[]"))&&(k=Se.toArray(v)))return b=op(b),k.forEach(function(U,w){!(Se.isUndefined(U)||U===null)&&t.append(l===!0?ap([b],w,s):l===null?b:b+"[]",d(U))}),!1}return Mi(v)?!0:(t.append(ap(x,b,s),d(v)),!1)}const f=[],g=Object.assign(z_,{defaultVisitor:c,convertValue:d,isVisitable:Mi});function p(v,b){if(!Se.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(v),Se.forEach(v,function(k,A){(!(Se.isUndefined(k)||k===null)&&a.call(t,k,Se.isString(A)?A.trim():A,b,g))===!0&&p(k,b?b.concat(A):[A])}),f.pop()}}if(!Se.isObject(e))throw new TypeError("data must be an object");return p(e),t}function sp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Oi(e,t){this._pairs=[],e&&Bl(e,this,t)}const lp=Oi.prototype;lp.append=function(t,o){this._pairs.push([t,o])},lp.toString=function(t){const o=t?function(n){return t.call(this,n,sp)}:sp;return this._pairs.map(function(a){return o(a[0])+"="+o(a[1])},"").join("&")};function q_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rp(e,t,o){if(!t)return e;const n=o&&o.encode||q_;Se.isFunction(o)&&(o={serialize:o});const a=o&&o.serialize;let s;if(a?s=a(t,o):s=Se.isURLSearchParams(t)?t.toString():new Oi(t,o).toString(n),s){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class ip{constructor(){this.handlers=[]}use(t,o,n){return this.handlers.push({fulfilled:t,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Se.forEach(this.handlers,function(n){n!==null&&t(n)})}}const up={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},G_={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Oi,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Ri=typeof window<"u"&&typeof document<"u",Ni=typeof navigator=="object"&&navigator||void 0,Q_=Ri&&(!Ni||["ReactNative","NativeScript","NS"].indexOf(Ni.product)<0),Y_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",K_=Ri&&window.location.href||"http://localhost",on={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ri,hasStandardBrowserEnv:Q_,hasStandardBrowserWebWorkerEnv:Y_,navigator:Ni,origin:K_},Symbol.toStringTag,{value:"Module"})),...G_};function J_(e,t){return Bl(e,new on.classes.URLSearchParams,{visitor:function(o,n,a,s){return on.isNode&&Se.isBuffer(o)?(this.append(n,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function X_(e){return Se.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Z_(e){const t={},o=Object.keys(e);let n;const a=o.length;let s;for(n=0;n<a;n++)s=o[n],t[s]=e[s];return t}function cp(e){function t(o,n,a,s){let l=o[s++];if(l==="__proto__")return!0;const r=Number.isFinite(+l),u=s>=o.length;return l=!l&&Se.isArray(a)?a.length:l,u?(Se.hasOwnProp(a,l)?a[l]=[a[l],n]:a[l]=n,!r):((!a[l]||!Se.isObject(a[l]))&&(a[l]=[]),t(o,n,a[l],s)&&Se.isArray(a[l])&&(a[l]=Z_(a[l])),!r)}if(Se.isFormData(e)&&Se.isFunction(e.entries)){const o={};return Se.forEachEntry(e,(n,a)=>{t(X_(n),a,o,0)}),o}return null}function e2(e,t,o){if(Se.isString(e))try{return(t||JSON.parse)(e),Se.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(e)}const Ss={transitional:up,adapter:["xhr","http","fetch"],transformRequest:[function(t,o){const n=o.getContentType()||"",a=n.indexOf("application/json")>-1,s=Se.isObject(t);if(s&&Se.isHTMLForm(t)&&(t=new FormData(t)),Se.isFormData(t))return a?JSON.stringify(cp(t)):t;if(Se.isArrayBuffer(t)||Se.isBuffer(t)||Se.isStream(t)||Se.isFile(t)||Se.isBlob(t)||Se.isReadableStream(t))return t;if(Se.isArrayBufferView(t))return t.buffer;if(Se.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return J_(t,this.formSerializer).toString();if((r=Se.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Bl(r?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||a?(o.setContentType("application/json",!1),e2(t)):t}],transformResponse:[function(t){const o=this.transitional||Ss.transitional,n=o&&o.forcedJSONParsing,a=this.responseType==="json";if(Se.isResponse(t)||Se.isReadableStream(t))return t;if(t&&Se.isString(t)&&(n&&!this.responseType||a)){const l=!(o&&o.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(r){if(l)throw r.name==="SyntaxError"?Ke.from(r,Ke.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:on.classes.FormData,Blob:on.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],e=>{Ss.headers[e]={}});const t2=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n2=e=>{const t={};let o,n,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),o=l.substring(0,a).trim().toLowerCase(),n=l.substring(a+1).trim(),!(!o||t[o]&&t2[o])&&(o==="set-cookie"?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)}),t},dp=Symbol("internals");function ks(e){return e&&String(e).trim().toLowerCase()}function Ul(e){return e===!1||e==null?e:Se.isArray(e)?e.map(Ul):String(e)}function o2(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(e);)t[n[1]]=n[2];return t}const a2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Di(e,t,o,n,a){if(Se.isFunction(n))return n.call(this,t,o);if(a&&(t=o),!!Se.isString(t)){if(Se.isString(n))return t.indexOf(n)!==-1;if(Se.isRegExp(n))return n.test(t)}}function s2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,n)=>o.toUpperCase()+n)}function l2(e,t){const o=Se.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+o,{value:function(a,s,l){return this[n].call(this,t,a,s,l)},configurable:!0})})}let vn=class{constructor(t){t&&this.set(t)}set(t,o,n){const a=this;function s(r,u,d){const c=ks(u);if(!c)throw new Error("header name must be a non-empty string");const f=Se.findKey(a,c);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||u]=Ul(r))}const l=(r,u)=>Se.forEach(r,(d,c)=>s(d,c,u));if(Se.isPlainObject(t)||t instanceof this.constructor)l(t,o);else if(Se.isString(t)&&(t=t.trim())&&!a2(t))l(n2(t),o);else if(Se.isObject(t)&&Se.isIterable(t)){let r={},u,d;for(const c of t){if(!Se.isArray(c))throw TypeError("Object iterator must return a key-value pair");r[d=c[0]]=(u=r[d])?Se.isArray(u)?[...u,c[1]]:[u,c[1]]:c[1]}l(r,o)}else t!=null&&s(o,t,n);return this}get(t,o){if(t=ks(t),t){const n=Se.findKey(this,t);if(n){const a=this[n];if(!o)return a;if(o===!0)return o2(a);if(Se.isFunction(o))return o.call(this,a,n);if(Se.isRegExp(o))return o.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=ks(t),t){const n=Se.findKey(this,t);return!!(n&&this[n]!==void 0&&(!o||Di(this,this[n],n,o)))}return!1}delete(t,o){const n=this;let a=!1;function s(l){if(l=ks(l),l){const r=Se.findKey(n,l);r&&(!o||Di(n,n[r],r,o))&&(delete n[r],a=!0)}}return Se.isArray(t)?t.forEach(s):s(t),a}clear(t){const o=Object.keys(this);let n=o.length,a=!1;for(;n--;){const s=o[n];(!t||Di(this,this[s],s,t,!0))&&(delete this[s],a=!0)}return a}normalize(t){const o=this,n={};return Se.forEach(this,(a,s)=>{const l=Se.findKey(n,s);if(l){o[l]=Ul(a),delete o[s];return}const r=t?s2(s):String(s).trim();r!==s&&delete o[s],o[r]=Ul(a),n[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return Se.forEach(this,(n,a)=>{n!=null&&n!==!1&&(o[a]=t&&Se.isArray(n)?n.join(", "):n)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const n=new this(t);return o.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[dp]=this[dp]={accessors:{}}).accessors,a=this.prototype;function s(l){const r=ks(l);n[r]||(l2(a,l),n[r]=!0)}return Se.isArray(t)?t.forEach(s):s(t),this}};vn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Se.reduceDescriptors(vn.prototype,({value:e},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[o]=n}}}),Se.freezeMethods(vn);function Pi(e,t){const o=this||Ss,n=t||o,a=vn.from(n.headers);let s=n.data;return Se.forEach(e,function(r){s=r.call(o,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function fp(e){return!!(e&&e.__CANCEL__)}function Sa(e,t,o){Ke.call(this,e??"canceled",Ke.ERR_CANCELED,t,o),this.name="CanceledError"}Se.inherits(Sa,Ke,{__CANCEL__:!0});function pp(e,t,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?e(o):t(new Ke("Request failed with status code "+o.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function r2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function i2(e,t){e=e||10;const o=new Array(e),n=new Array(e);let a=0,s=0,l;return t=t!==void 0?t:1e3,function(u){const d=Date.now(),c=n[s];l||(l=d),o[a]=u,n[a]=d;let f=s,g=0;for(;f!==a;)g+=o[f++],f=f%e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),d-l<t)return;const p=c&&d-c;return p?Math.round(g*1e3/p):void 0}}function u2(e,t){let o=0,n=1e3/t,a,s;const l=(d,c=Date.now())=>{o=c,a=null,s&&(clearTimeout(s),s=null),e(...d)};return[(...d)=>{const c=Date.now(),f=c-o;f>=n?l(d,c):(a=d,s||(s=setTimeout(()=>{s=null,l(a)},n-f)))},()=>a&&l(a)]}const Hl=(e,t,o=3)=>{let n=0;const a=i2(50,250);return u2(s=>{const l=s.loaded,r=s.lengthComputable?s.total:void 0,u=l-n,d=a(u),c=l<=r;n=l;const f={loaded:l,total:r,progress:r?l/r:void 0,bytes:u,rate:d||void 0,estimated:d&&r&&c?(r-l)/d:void 0,event:s,lengthComputable:r!=null,[t?"download":"upload"]:!0};e(f)},o)},gp=(e,t)=>{const o=e!=null;return[n=>t[0]({lengthComputable:o,total:e,loaded:n}),t[1]]},mp=e=>(...t)=>Se.asap(()=>e(...t)),c2=on.hasStandardBrowserEnv?((e,t)=>o=>(o=new URL(o,on.origin),e.protocol===o.protocol&&e.host===o.host&&(t||e.port===o.port)))(new URL(on.origin),on.navigator&&/(msie|trident)/i.test(on.navigator.userAgent)):()=>!0,d2=on.hasStandardBrowserEnv?{write(e,t,o,n,a,s){const l=[e+"="+encodeURIComponent(t)];Se.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),Se.isString(n)&&l.push("path="+n),Se.isString(a)&&l.push("domain="+a),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function f2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function p2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function hp(e,t,o){let n=!f2(t);return e&&(n||o==!1)?p2(e,t):t}const vp=e=>e instanceof vn?{...e}:e;function ea(e,t){t=t||{};const o={};function n(d,c,f,g){return Se.isPlainObject(d)&&Se.isPlainObject(c)?Se.merge.call({caseless:g},d,c):Se.isPlainObject(c)?Se.merge({},c):Se.isArray(c)?c.slice():c}function a(d,c,f,g){if(Se.isUndefined(c)){if(!Se.isUndefined(d))return n(void 0,d,f,g)}else return n(d,c,f,g)}function s(d,c){if(!Se.isUndefined(c))return n(void 0,c)}function l(d,c){if(Se.isUndefined(c)){if(!Se.isUndefined(d))return n(void 0,d)}else return n(void 0,c)}function r(d,c,f){if(f in t)return n(d,c);if(f in e)return n(void 0,d)}const u={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:r,headers:(d,c,f)=>a(vp(d),vp(c),f,!0)};return Se.forEach(Object.keys({...e,...t}),function(c){const f=u[c]||a,g=f(e[c],t[c],c);Se.isUndefined(g)&&f!==r||(o[c]=g)}),o}const _p=e=>{const t=ea({},e);let{data:o,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:l,auth:r}=t;t.headers=l=vn.from(l),t.url=rp(hp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),r&&l.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):"")));let u;if(Se.isFormData(o)){if(on.hasStandardBrowserEnv||on.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[d,...c]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...c].join("; "))}}if(on.hasStandardBrowserEnv&&(n&&Se.isFunction(n)&&(n=n(t)),n||n!==!1&&c2(t.url))){const d=a&&s&&d2.read(s);d&&l.set(a,d)}return t},g2=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(o,n){const a=_p(e);let s=a.data;const l=vn.from(a.headers).normalize();let{responseType:r,onUploadProgress:u,onDownloadProgress:d}=a,c,f,g,p,v;function b(){p&&p(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout;function k(){if(!x)return;const U=vn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),O={data:!r||r==="text"||r==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:U,config:e,request:x};pp(function(V){o(V),b()},function(V){n(V),b()},O),x=null}"onloadend"in x?x.onloadend=k:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(k)},x.onabort=function(){x&&(n(new Ke("Request aborted",Ke.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new Ke("Network Error",Ke.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const O=a.transitional||up;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),n(new Ke(w,O.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,e,x)),x=null},s===void 0&&l.setContentType(null),"setRequestHeader"in x&&Se.forEach(l.toJSON(),function(w,O){x.setRequestHeader(O,w)}),Se.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),r&&r!=="json"&&(x.responseType=a.responseType),d&&([g,v]=Hl(d,!0),x.addEventListener("progress",g)),u&&x.upload&&([f,p]=Hl(u),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",p)),(a.cancelToken||a.signal)&&(c=U=>{x&&(n(!U||U.type?new Sa(null,e,x):U),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const A=r2(a.url);if(A&&on.protocols.indexOf(A)===-1){n(new Ke("Unsupported protocol "+A+":",Ke.ERR_BAD_REQUEST,e));return}x.send(s||null)})},m2=(e,t)=>{const{length:o}=e=e?e.filter(Boolean):[];if(t||o){let n=new AbortController,a;const s=function(d){if(!a){a=!0,r();const c=d instanceof Error?d:this.reason;n.abort(c instanceof Ke?c:new Sa(c instanceof Error?c.message:c))}};let l=t&&setTimeout(()=>{l=null,s(new Ke(`timeout ${t} of ms exceeded`,Ke.ETIMEDOUT))},t);const r=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:u}=n;return u.unsubscribe=()=>Se.asap(r),u}},h2=function*(e,t){let o=e.byteLength;if(o<t){yield e;return}let n=0,a;for(;n<o;)a=n+t,yield e.slice(n,a),n=a},v2=async function*(e,t){for await(const o of _2(e))yield*h2(o,t)},_2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:o,value:n}=await t.read();if(o)break;yield n}}finally{await t.cancel()}},yp=(e,t,o,n)=>{const a=v2(e,t);let s=0,l,r=u=>{l||(l=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:d,value:c}=await a.next();if(d){r(),u.close();return}let f=c.byteLength;if(o){let g=s+=f;o(g)}u.enqueue(new Uint8Array(c))}catch(d){throw r(d),d}},cancel(u){return r(u),a.return()}},{highWaterMark:2})},Wl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bp=Wl&&typeof ReadableStream=="function",y2=Wl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),wp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},b2=bp&&wp(()=>{let e=!1;const t=new Request(on.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),xp=64*1024,Fi=bp&&wp(()=>Se.isReadableStream(new Response("").body)),jl={stream:Fi&&(e=>e.body)};Wl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!jl[t]&&(jl[t]=Se.isFunction(e[t])?o=>o[t]():(o,n)=>{throw new Ke(`Response type '${t}' is not supported`,Ke.ERR_NOT_SUPPORT,n)})})})(new Response);const w2=async e=>{if(e==null)return 0;if(Se.isBlob(e))return e.size;if(Se.isSpecCompliantForm(e))return(await new Request(on.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(e)||Se.isArrayBuffer(e))return e.byteLength;if(Se.isURLSearchParams(e)&&(e=e+""),Se.isString(e))return(await y2(e)).byteLength},x2=async(e,t)=>{const o=Se.toFiniteNumber(e.getContentLength());return o??w2(t)},Bi={http:j_,xhr:g2,fetch:Wl&&(async e=>{let{url:t,method:o,data:n,signal:a,cancelToken:s,timeout:l,onDownloadProgress:r,onUploadProgress:u,responseType:d,headers:c,withCredentials:f="same-origin",fetchOptions:g}=_p(e);d=d?(d+"").toLowerCase():"text";let p=m2([a,s&&s.toAbortSignal()],l),v;const b=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let x;try{if(u&&b2&&o!=="get"&&o!=="head"&&(x=await x2(c,n))!==0){let O=new Request(t,{method:"POST",body:n,duplex:"half"}),W;if(Se.isFormData(n)&&(W=O.headers.get("content-type"))&&c.setContentType(W),O.body){const[V,H]=gp(x,Hl(mp(u)));n=yp(O.body,xp,V,H)}}Se.isString(f)||(f=f?"include":"omit");const k="credentials"in Request.prototype;v=new Request(t,{...g,signal:p,method:o.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:k?f:void 0});let A=await fetch(v,g);const U=Fi&&(d==="stream"||d==="response");if(Fi&&(r||U&&b)){const O={};["status","statusText","headers"].forEach(q=>{O[q]=A[q]});const W=Se.toFiniteNumber(A.headers.get("content-length")),[V,H]=r&&gp(W,Hl(mp(r),!0))||[];A=new Response(yp(A.body,xp,V,()=>{H&&H(),b&&b()}),O)}d=d||"text";let w=await jl[Se.findKey(jl,d)||"text"](A,e);return!U&&b&&b(),await new Promise((O,W)=>{pp(O,W,{data:w,headers:vn.from(A.headers),status:A.status,statusText:A.statusText,config:e,request:v})})}catch(k){throw b&&b(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,e,v),{cause:k.cause||k}):Ke.from(k,k&&k.code,e,v)}})};Se.forEach(Bi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Tp=e=>`- ${e}`,T2=e=>Se.isFunction(e)||e===null||e===!1,Sp={getAdapter:e=>{e=Se.isArray(e)?e:[e];const{length:t}=e;let o,n;const a={};for(let s=0;s<t;s++){o=e[s];let l;if(n=o,!T2(o)&&(n=Bi[(l=String(o)).toLowerCase()],n===void 0))throw new Ke(`Unknown adapter '${l}'`);if(n)break;a[l||"#"+s]=n}if(!n){const s=Object.entries(a).map(([r,u])=>`adapter ${r} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?s.length>1?`since :
`+s.map(Tp).join(`
`):" "+Tp(s[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Bi};function Ui(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Sa(null,e)}function kp(e){return Ui(e),e.headers=vn.from(e.headers),e.data=Pi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Sp.getAdapter(e.adapter||Ss.adapter)(e).then(function(n){return Ui(e),n.data=Pi.call(e,e.transformResponse,n),n.headers=vn.from(n.headers),n},function(n){return fp(n)||(Ui(e),n&&n.response&&(n.response.data=Pi.call(e,e.transformResponse,n.response),n.response.headers=vn.from(n.response.headers))),Promise.reject(n)})}const Cp="1.11.0",Vl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Vl[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ep={};Vl.transitional=function(t,o,n){function a(s,l){return"[Axios v"+Cp+"] Transitional option '"+s+"'"+l+(n?". "+n:"")}return(s,l,r)=>{if(t===!1)throw new Ke(a(l," has been removed"+(o?" in "+o:"")),Ke.ERR_DEPRECATED);return o&&!Ep[l]&&(Ep[l]=!0,console.warn(a(l," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(s,l,r):!0}},Vl.spelling=function(t){return(o,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function S2(e,t,o){if(typeof e!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],l=t[s];if(l){const r=e[s],u=r===void 0||l(r,s,e);if(u!==!0)throw new Ke("option "+s+" must be "+u,Ke.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Ke("Unknown option "+s,Ke.ERR_BAD_OPTION)}}const zl={assertOptions:S2,validators:Vl},eo=zl.validators;let ta=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ip,response:new ip}}async request(t,o){try{return await this._request(t,o)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=ea(this.defaults,o);const{transitional:n,paramsSerializer:a,headers:s}=o;n!==void 0&&zl.assertOptions(n,{silentJSONParsing:eo.transitional(eo.boolean),forcedJSONParsing:eo.transitional(eo.boolean),clarifyTimeoutError:eo.transitional(eo.boolean)},!1),a!=null&&(Se.isFunction(a)?o.paramsSerializer={serialize:a}:zl.assertOptions(a,{encode:eo.function,serialize:eo.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),zl.assertOptions(o,{baseUrl:eo.spelling("baseURL"),withXsrfToken:eo.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let l=s&&Se.merge(s.common,s[o.method]);s&&Se.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),o.headers=vn.concat(l,s);const r=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(o)===!1||(u=u&&b.synchronous,r.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let c,f=0,g;if(!u){const v=[kp.bind(this),void 0];for(v.unshift(...r),v.push(...d),g=v.length,c=Promise.resolve(o);f<g;)c=c.then(v[f++],v[f++]);return c}g=r.length;let p=o;for(f=0;f<g;){const v=r[f++],b=r[f++];try{p=v(p)}catch(x){b.call(this,x);break}}try{c=kp.call(this,p)}catch(v){return Promise.reject(v)}for(f=0,g=d.length;f<g;)c=c.then(d[f++],d[f++]);return c}getUri(t){t=ea(this.defaults,t);const o=hp(t.baseURL,t.url,t.allowAbsoluteUrls);return rp(o,t.params,t.paramsSerializer)}};Se.forEach(["delete","get","head","options"],function(t){ta.prototype[t]=function(o,n){return this.request(ea(n||{},{method:t,url:o,data:(n||{}).data}))}}),Se.forEach(["post","put","patch"],function(t){function o(n){return function(s,l,r){return this.request(ea(r||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}ta.prototype[t]=o(),ta.prototype[t+"Form"]=o(!0)});let k2=class hm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(s){o=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const l=new Promise(r=>{n.subscribe(r),s=r}).then(a);return l.cancel=function(){n.unsubscribe(s)},l},t(function(s,l,r){n.reason||(n.reason=new Sa(s,l,r),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const t=new AbortController,o=n=>{t.abort(n)};return this.subscribe(o),t.signal.unsubscribe=()=>this.unsubscribe(o),t.signal}static source(){let t;return{token:new hm(function(a){t=a}),cancel:t}}};function C2(e){return function(o){return e.apply(null,o)}}function E2(e){return Se.isObject(e)&&e.isAxiosError===!0}const Hi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hi).forEach(([e,t])=>{Hi[t]=e});function Lp(e){const t=new ta(e),o=qf(ta.prototype.request,t);return Se.extend(o,ta.prototype,t,{allOwnKeys:!0}),Se.extend(o,t,null,{allOwnKeys:!0}),o.create=function(a){return Lp(ea(e,a))},o}const Dt=Lp(Ss);Dt.Axios=ta,Dt.CanceledError=Sa,Dt.CancelToken=k2,Dt.isCancel=fp,Dt.VERSION=Cp,Dt.toFormData=Bl,Dt.AxiosError=Ke,Dt.Cancel=Dt.CanceledError,Dt.all=function(t){return Promise.all(t)},Dt.spread=C2,Dt.isAxiosError=E2,Dt.mergeConfig=ea,Dt.AxiosHeaders=vn,Dt.formToJSON=e=>cp(Se.isHTMLForm(e)?new FormData(e):e),Dt.getAdapter=Sp.getAdapter,Dt.HttpStatusCode=Hi,Dt.default=Dt;const{Axios:EI,AxiosError:LI,CanceledError:$I,isCancel:AI,CancelToken:II,VERSION:MI,all:OI,Cancel:RI,isAxiosError:NI,spread:DI,toFormData:PI,AxiosHeaders:FI,HttpStatusCode:BI,formToJSON:UI,getAdapter:HI,mergeConfig:WI}=Dt,Ie=Dt.create({baseURL:"/weilin/prompt_ui/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(e=>e,e=>Promise.reject(e)),Ie.interceptors.response.use(e=>e.data,e=>Promise.reject(e));const ql={getUserSetting:async()=>await Ie({url:"/user_init/get_settings",method:"get"}),setUserLanguage:async e=>await Ie({url:"/user_init/set_user_lang",method:"post",data:{user_lang:e}}),startPanel:async()=>await Ie({url:"/panel/start",method:"post"})},$p=()=>Rl(),Cs=F0({legacy:!1,locale:"zh_CN",fallbackLocale:"zh_CN",messages:{zh_CN:K0,en_US:J0}}),L2=()=>{const e=$p();ql.getUserSetting().then(t=>{var n;e.setUserSetting(t.data);const o=((n=e.userSetting)==null?void 0:n.user_lang)||"zh_CN";Cs.global.locale.value=o})},$2=e=>{Cs.global.locale.value=e,$p().setUserSetting({user_lang:e})},A2=()=>{L2()},I2={name:"popmessage",props:{type:{type:String,default:"success"},str:{type:String,default:"登陆成功"}},setup(){const e={warn:{color:"#E6A23C",backgroundColor:"rgb(253, 246, 236)",borderColor:"rgb(250, 236, 216)"},error:{color:"#F56C6C",backgroundColor:"rgb(254, 240, 240)",borderColor:"rgb(253, 226, 226)"},success:{color:"#67C23A",backgroundColor:"rgb(240, 249, 235)",borderColor:"rgb(225, 243, 216)"}},t=_(!1);return vt(()=>{t.value=!0}),{style:e,visible:t}}},M2={class:"text"};function O2(e,t,o,n,a,s){return Te((T(),C("div",{class:"pop-message",style:mt(n.style[o.type])},[i("i",{class:Ee(["icon",[n.style[o.type].icon]])},null,2),i("span",M2,h(o.str),1)],4)),[[fs,n.visible]])}const R2=xt(I2,[["render",O2],["__scopeId","data-v-7ee59bf2"]]),Wi=document.createElement("div");document.body.appendChild(Wi);let ji=null;const te=({str:e,type:t,name:o=""})=>{let n=Cs.global.t(e);o.length>0&&(n=Cs.global.t(e,{name:o}));const a=ze(R2,{str:n,type:t});Od(a,Wi),ji&&clearTimeout(ji),ji=setTimeout(()=>{Od(null,Wi)},2e3)},N2={class:"language-selector-content"},D2=["onClick"],P2={class:"lang-name"},F2=xt({__name:"LanguageSwitcher",emits:["close"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_(null),s=Rl(),l=ot(()=>s.userSetting.user_lang),r=[{code:"zh_CN",name:"简体中文"},{code:"en_US",name:"English"}],u=o,d=g=>{c(g),u("close",{})},c=g=>{ql.setUserLanguage(g).then(p=>{$2(g),window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*"),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.setLanguageSuccess"})}).catch(p=>{te({type:"warn",str:"message.setLanguageFailed"})})};return t({setPosition:g=>{if(!a.value)return;const p=a.value;p.style.position="fixed",p.style.top=`${g.bottom}px`}}),(g,p)=>(T(),C("div",{class:"language-selector",ref_key:"selectorRef",ref:a},[i("div",N2,[(T(),C(Oe,null,je(r,(v,b)=>i("div",{style:mt({"margin-top":b===0?"0":"2px"}),key:v.code,class:Ee(["language-option",{active:l.value===v.code}]),onClick:x=>d(v.code)},[i("span",P2,h(v.name),1)],14,D2)),64))])],512))}},[["__scopeId","data-v-b77d604b"]]),_o="weilin_prompt_ui_",Es=xt({__name:"Dialog",props:{modelValue:Boolean,title:{type:String,default:"标题"},closeOnClickOverlay:{type:Boolean,default:!1},width:{type:String,default:"60%"}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,n=t,a=()=>{n("update:modelValue",!1)},s=()=>{o.closeOnClickOverlay&&a()};return(l,r)=>(T(),yt(uc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[ze(bl,{name:`${_o}dialog-fade`},{default:ht(()=>[e.modelValue?(T(),C("div",{key:0,class:Ee(`${_o}dialog-overlay`),onClick:s},[ze(bl,{name:`${_o}dialog-slide`},{default:ht(()=>[i("div",{style:mt({width:e.width}),class:Ee(`${_o}dialog`),onClick:r[0]||(r[0]=Je(()=>{},["stop"]))},[i("div",{class:Ee(`${_o}dialog-header`)},[i("h3",{class:Ee(`${_o}dialog-title`)},h(e.title),3),i("button",{class:Ee(`${_o}dialog-close`),onClick:a},[...r[1]||(r[1]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],2)],2),i("div",{class:Ee(`${_o}dialog-content`)},[ns(l.$slots,"default")],2),l.$slots.footer?(T(),C("div",{key:0,class:Ee(`${_o}dialog-footer`)},[ns(l.$slots,"footer")],2)):me("",!0)],6)]),_:3},8,["name"])],2)):me("",!0)]),_:3},8,["name"])]))}},[["__scopeId","data-v-d2e9c495"]]),An={getTranslateLocal:async e=>await Ie({url:"/prompt/local/translate",method:"post",data:{phrase:e}}),getTranslatePackagesState:async()=>await Ie({url:"/translate/get/packages/state",method:"post",data:{}}),getTranslateSetting:async()=>await Ie({url:"/translate/get/setting",method:"post",data:{}}),applyTranslateSetting:async e=>await Ie({url:"/translate/apply_setting",method:"post",data:{setting:e}}),installTranslatePackage:async()=>await Ie({url:"/translate/install/translaterpackage",method:"post",timeout:0,data:{}}),getTranslateBuktSetting:async()=>await Ie({url:"/translate/get/tran_setting",method:"post",data:{}}),saveTranslateSetting:async(e,t,o)=>await Ie({url:"/translate/save_tran/setting",method:"post",data:{service:e,source_lang:t,target_lang:o}}),translaterText:async e=>await Ie({url:"/translate/tran/text",method:"post",timeout:0,data:{text:e}}),translaterInputText:async e=>await Ie({url:"/translate/tran/input",method:"post",timeout:0,data:{text:e}})},Vi={getAutocomplete:async e=>await Ie({url:"/prompt/fast/autocomplete",method:"post",data:{query:e}}),getAutocompleteLimit:async()=>await Ie({url:"/get/setting/get_auto_limit_setting",method:"post"}),updateAutocompleteLimit:async e=>await Ie({url:"/update/setting/update_auto_limit_setting",method:"post",data:{limit:e}})},Ls={updateOpenAiSetting:async e=>await Ie({url:"/prompt/openai/update_settings",method:"post",data:e}),addOpenAiSetting:async e=>await Ie({url:"/prompt/openai/add_setting",method:"post",data:e}),deleteOpenAiSetting:async e=>await Ie({url:"/prompt/openai/delete_setting",method:"post",data:e}),setOpenAiSelect:async e=>await Ie({url:"/prompt/openai/set_select",method:"post",data:e}),getOpenAiSetting:async()=>await Ie({url:"/prompt/openai/get_settings",method:"get"})},B2=["alibaba","baidu","bing","deepl","youdao","qqtransmart","sogou","niutrans","mymemory","modernmt","volcengine","iciba","iflytek","google","lingvanex","yandex","itranslate","systran","argos","apertium","reverso","cloudtranslation","translatecom","tilde","caiyun","qqfanyi","translateme","papago","mirai","iflyrec","hujiang","yeekit","languagewire","elia","judic","mglip","utibet"],Ap=[{language:"chinese",translator:"zh"},{language:"english",translator:"en"},{language:"arabic",translator:"ar"},{language:"russian",translator:"ru"},{language:"french",translator:"fr"},{language:"german",translator:"de"},{language:"spanish",translator:"es"},{language:"portuguese",translator:"pt"},{language:"italian",translator:"it"},{language:"japanese",translator:"ja"},{language:"korean",translator:"ko"},{language:"greek",translator:"el"},{language:"dutch",translator:"nl"},{language:"hindi",translator:"hi"},{language:"turkish",translator:"tr"},{language:"malay",translator:"ms"},{language:"thai",translator:"th"},{language:"vietnamese",translator:"vi"},{language:"indonesian",translator:"id"},{language:"hebrew",translator:"he"},{language:"polish",translator:"pl"},{language:"mongolian",translator:"mn"},{language:"czech",translator:"cs"},{language:"hungarian",translator:"hu"},{language:"estonian",translator:"et"},{language:"bulgarian",translator:"bg"},{language:"danish",translator:"da"},{language:"finnish",translator:"fi"},{language:"romanian",translator:"ro"},{language:"swedish",translator:"sv"},{language:"slovenian",translator:"sl"},{language:"persian/farsi",translator:"fa"},{language:"bosnian",translator:"bs"},{language:"serbian",translator:"sr"},{language:"fijian",translator:"fj"},{language:"filipino",translator:"tl"},{language:"haitiancreole",translator:"ht"},{language:"catalan",translator:"ca"},{language:"croatian",translator:"hr"},{language:"latvian",translator:"lv"},{language:"lithuanian",translator:"lt"},{language:"urdu",translator:"ur"},{language:"ukrainian",translator:"uk"},{language:"welsh",translator:"cy"},{language:"tahiti",translator:"ty"},{language:"tongan",translator:"to"},{language:"swahili",translator:"sw"},{language:"samoan",translator:"sm"},{language:"slovak",translator:"sk"},{language:"afrikaans",translator:"af"},{language:"norwegian",translator:"no"},{language:"bengali",translator:"bn"},{language:"malagasy",translator:"mg"},{language:"maltese",translator:"mt"},{language:"queretaro otomi",translator:"otq"},{language:"klingon/tlhingan hol",translator:"tlh"},{language:"gujarati",translator:"gu"},{language:"tamil",translator:"ta"},{language:"telugu",translator:"te"},{language:"punjabi",translator:"pa"},{language:"amharic",translator:"am"},{language:"azerbaijani",translator:"az"},{language:"bashkir",translator:"ba"},{language:"belarusian",translator:"be"},{language:"cebuano",translator:"ceb"},{language:"chuvash",translator:"cv"},{language:"esperanto",translator:"eo"},{language:"basque",translator:"eu"},{language:"irish",translator:"ga"}],U2={class:"weilin-comfyui-settings-content"},H2={class:"weilin-comfyui-settings-sidebar"},W2={class:"weilin-comfyui-settings-main"},j2={key:0},V2={class:"weilin-comfyui-setting-select"},z2={value:"network"},q2={value:"translater"},G2={class:"weilin-comfyui-translator-settings"},Q2={key:0,class:"weilin-comfyui-group-box"},Y2={class:"weilin-comfyui-group-title"},K2={class:"weilin-comfyui-note-top"},J2={class:"weilin-comfyui-setting-item"},X2={value:"auto"},Z2={value:"chinese_simplified"},ey={value:"english"},ty={class:"weilin-comfyui-setting-item"},ny={value:"chinese_simplified"},oy={value:"english"},ay={key:1,class:"weilin-comfyui-group-box"},sy={class:"weilin-comfyui-group-title"},ly={class:"weilin-comfyui-note-top"},ry={class:"weilin-comfyui-translater-innstall-status"},iy={class:"weilin-comfyui-translater-install-label"},uy={key:0,class:"weilin-comfyui-translater-install-label"},cy={key:1,class:"weilin-comfyui-translater-install-control"},dy=["disabled"],fy={key:0,class:"weilin-comfyui-translater-setting-box"},py={class:"weilin-comfyui-setting-small-titile"},gy={class:"weilin-comfyui-setting-item"},my=["index","value"],hy={class:"weilin-comfyui-language-selectors"},vy={class:"weilin-comfyui-setting-item"},_y=["index","value"],yy={class:"weilin-comfyui-setting-item"},by=["index","value"],wy={key:1,class:"weilin-comfyui-tranlater-text-box"},xy={class:"weilin-comfyui-setting-small-titile"},Ty={class:"weilin-comfyui-setting-item"},Sy=["placeholder"],ky={class:"weilin-comfyui-setting-item"},Cy=["placeholder"],Ey={key:1},Ly={class:"weilin-comfyui-floating-ball-settings"},$y={class:"weilin-comfyui-setting-item"},Ay=["placeholder"],Iy={class:"weilin-comfyui-setting-item"},My=["placeholder"],Oy={class:"weilin-comfyui-setting-item"},Ry=["placeholder"],Ny={key:2},Dy={class:"weilin-comfyui-floating-ball-settings",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"15px"}},Py={class:"weilin-comfyui-settings-column"},Fy={class:"weilin-comfyui-setting-item"},By={class:"weilin-comfyui-setting-item"},Uy=["placeholder"],Hy={class:"weilin-comfyui-setting-item"},Wy=["placeholder"],jy={class:"weilin-comfyui-setting-item"},Vy=["placeholder"],zy={class:"weilin-comfyui-settings-column"},qy={class:"weilin-comfyui-setting-item"},Gy={value:"default"},Qy={value:"custom"},Yy={key:0,class:"weilin-comfyui-setting-item"},Ky={key:0,class:"weilin-comfyui-skin-preview"},Jy=["src"],Xy={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Zy={value:"gradient"},eb={value:"transparent"},tb={key:0,class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},nb={style:{display:"flex",gap:"10px","align-items":"center"}},ob={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},ab={key:3},sb={class:"weilin-comfyui-floating-ball-settings"},lb={class:"weilin-comfyui-setting-item"},rb={class:"weilin-comfyui-setting-item"},ib={class:"weilin-comfyui-setting-item"},ub={class:"weilin-comfyui-setting-item"},cb={class:"weilin-comfyui-setting-item"},db={class:"weilin-comfyui-setting-item"},fb={class:"weilin-comfyui-setting-item"},pb={key:4},gb={class:"weilin-comfyui-openai-settings"},mb={class:"weilin-comfyui-setting-item"},hb=["value"],vb={class:"weilin-comfyui-config-list"},_b={class:"weilin-comfyui-config-header"},yb={class:"weilin-comfyui-config-actions"},bb=["onClick"],wb=["onClick"],xb={key:0,class:"weilin-comfyui-config-form"},Tb={class:"weilin-comfyui-form-group"},Sb=["placeholder"],kb={class:"weilin-comfyui-form-group"},Cb=["placeholder"],Eb={class:"weilin-comfyui-form-group"},Lb=["placeholder"],$b={class:"weilin-comfyui-form-actions"},Ab=["onClick"],Ib={key:1,class:"weilin-comfyui-config-details"},Mb={key:0,class:"weilin-comfyui-config-form"},Ob={class:"weilin-comfyui-form-group"},Rb=["placeholder"],Nb={class:"weilin-comfyui-form-group"},Db=["placeholder"],Pb={class:"weilin-comfyui-form-group"},Fb=["placeholder"],Bb={class:"weilin-comfyui-form-actions"},Ub={key:5},Hb={class:"weilin-comfyui-sponsor-me-settings"},Wb={key:6},jb={class:"weilin-comfyui-start-panel-settings"},Ip=xt({__name:"setting_dialog",setup(e,{expose:t}){const{t:o}=wt(),n=_(!1),a=_("translator"),s=_("baidu"),l=_(""),r=_(localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english"),u=_(localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified"),d=_(localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1),c=_(localStorage.getItem("weilin_prompt_ui_floatingBallSize")||66),f=_(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||c.value),g=_(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true"),p=_(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),v=_(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),b=_(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),x=_(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),k=_(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),A=_(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50),U=_(localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true"),w=_(localStorage.getItem("weilin_prompt_ui_period_conversion")==="true"),O=_(localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true"),W=_(localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true"),V=_(localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"),H=_(localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true"),q=_(localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"),he=_(""),le=_(""),R=_(""),Y=_(0),X=_([]),z=_(!1),Z=_({api_key:"",base_url:"https://api.openai.com/v1",model:""}),se=_(!1),P=_(-1),F=_(""),K=_(!1),oe=_(!1),Q=_(""),ie=_(""),re=_(25),ye=_(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),de=_(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),M=Fe=>{a.value=Fe,Fe=="setting_auto_complete_limit"&&dt()},G=()=>{localStorage.setItem("weilin_prompt_ui_sourceLanguage",r.value),localStorage.setItem("weilin_prompt_ui_targetLanguage",u.value),window.parent.postMessage({type:"weilin_prompt_ui_translate_setting"},"*"),te({type:"success",str:"message.saveSuccess"})},ae=Fe=>{const Le=Fe.target.files[0];if(Le){const Ce=new FileReader;Ce.onload=at=>{v.value=at.target.result,localStorage.setItem("weilin_prompt_ui_customSkinUrl",at.target.result)},Ce.readAsDataURL(Le)}},D=()=>{x.value="#6a11cb",k.value="#2575fc"},ee=()=>{if(d.value<1||c.value<5||f.value<5){te({type:"warn",str:"message.error"});return}localStorage.setItem("weilin_prompt_ui_floatingBallEnabled",g.value),localStorage.setItem("weilin_prompt_ui_floatingBallCount",d.value),localStorage.setItem("weilin_prompt_ui_floatingBallSize",c.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",f.value),localStorage.setItem("weilin_prompt_ui_ballSkinType",p.value),localStorage.setItem("weilin_prompt_ui_bgType",b.value),localStorage.setItem("weilin_prompt_ui_gradientColor1",x.value),localStorage.setItem("weilin_prompt_ui_gradientColor2",k.value),localStorage.setItem("weilin_prompt_ui_ballBorderRadius",A.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",f.value),window.parent.postMessage({type:"weilin_prompt_ui_floating_ball_setting"},"*"),te({type:"success",str:"message.saveSuccess"})},L=()=>{localStorage.setItem("weilin_prompt_ui_comma_conversion",U.value),localStorage.setItem("weilin_prompt_ui_period_conversion",w.value),localStorage.setItem("weilin_prompt_ui_bracket_conversion",O.value),localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion",W.value),localStorage.setItem("weilin_prompt_ui_underscore_to_bracket",V.value),localStorage.setItem("weilin_prompt_ui_comma_close_autocomplete",H.value),localStorage.setItem("weilin_prompt_ui_bracket_escape",q.value),te({type:"success",str:"message.saveSuccess"})},E=()=>{ql.getUserSetting().then(Fe=>{X.value=Fe.data.openai_settings,Y.value=Fe.data.select_openai})},B=()=>{Z.value={api_key:"",base_url:"https://api.openai.com/v1",model:""},se.value=!1,z.value=!0},ne=Fe=>{Ls.deleteOpenAiSetting({index:Fe}).then(Le=>{E(),te({type:"success",str:"message.deleteSuccess"})}).catch(Le=>{te({type:"warn",str:"message.networkError"})})},ge=Fe=>{P.value===Fe?P.value=-1:(Z.value={...X.value[Fe]},P.value=Fe)},ve=Fe=>{Ls.updateOpenAiSetting({index:Fe,...Z.value}).then(Le=>{E(),P.value=-1,te({type:"success",str:"message.saveSuccess"})}).catch(Le=>{te({type:"warn",str:"message.networkError"})})},S=()=>{Ls.addOpenAiSetting({...Z.value}).then(Fe=>{E(),z.value=!1,P.value=-1,te({type:"success",str:"message.saveSuccess"})}).catch(Fe=>{te({type:"warn",str:"message.networkError"})})},y=()=>{z.value=!1,P.value=-1},N=()=>{Ls.setOpenAiSelect({index:Y.value}).then(Fe=>{te({type:"success",str:"message.saveSuccess"})}).catch(Fe=>{te({type:"warn",str:"message.networkError"})})},j=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},xe=()=>{ql.startPanel().then(Fe=>{te({type:"success",str:"message.startPanelSuccess"})}).catch(Fe=>{te({type:"warn",str:"message.startPanelFailed"})})},_e=()=>{An.getTranslatePackagesState().then(Fe=>{Fe.info=="ok"?oe.value=!0:oe.value=!1}).catch(Fe=>{te({type:"warn",str:"message.getTranslaterFail"})})},J=()=>{An.getTranslateSetting().then(Fe=>{localStorage.setItem("weilin_prompt_ui_translater_setting",Fe.data),F.value=Fe.data}).catch(Fe=>{te({type:"warn",str:"message.getTranslaterFail"})})},ue=()=>{An.applyTranslateSetting(F.value).then(Fe=>{Fe.info=="ok"?(localStorage.setItem("weilin_prompt_ui_translater_setting",F.value),te({type:"success",str:"message.applyTranslaterSuccess"})):te({type:"warn",str:"message.applyToTranslaterFail"})}).catch(Fe=>{te({type:"warn",str:"message.applyTranslaterFail"})})},Me=()=>{An.getTranslateBuktSetting().then(Fe=>{he.value=Fe.data.translate_service,le.value=Fe.data.translate_source_lang,R.value=Fe.data.translate_target_lang}).catch(Fe=>{te({type:"warn",str:"message.getTranslaterFail"})})},Pe=()=>{An.saveTranslateSetting(he.value,le.value,R.value).then(Fe=>{Fe.info=="ok"?te({type:"success",str:"message.saveSuccess"}):te({type:"warn",str:"message.saveFailed"})}).catch(Fe=>{te({type:"warn",str:"message.saveFailed"})})},We=()=>{An.translaterInputText(Q.value).then(Fe=>{ie.value=Fe.text}).catch(Fe=>{te({type:"warn",str:"message.translaterTestFail"})})},Ve=_(null),ut=()=>{K.value=!0,An.installTranslatePackage().then(Fe=>{K.value=!1,oe.value=!0,te({type:"success",str:"message.tranlaterPackageInstallSuccess"})}).catch(Fe=>{K.value=!1,te({type:"warn",str:"message.tranlaterPackageInstallFail"})})},dt=async()=>{await Vi.getAutocompleteLimit().then(Fe=>{re.value=Fe.data}).catch(Fe=>{console.error(Fe),te({type:"warn",str:"message.networkError"})})},jt=async()=>{await Vi.updateAutocompleteLimit(re.value).then(Fe=>{te({type:"success",str:"message.saveSuccess"}),localStorage.setItem("weilin_prompt_ui_auto_box_width",ye.value),localStorage.setItem("weilin_prompt_ui_auto_box_height",de.value)}).catch(Fe=>{console.error(Fe),te({type:"warn",str:"message.networkError"})})};return vt(()=>{Me(),_e(),J(),E()}),Dn(()=>{Ve.value&&clearInterval(Ve.value)}),t({open:()=>{a.value="translator",s.value="baidu",l.value="",r.value=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",u.value=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified",d.value=localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1,c.value=localStorage.getItem("weilin_prompt_ui_floatingBallSize")||5,g.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true",U.value=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",w.value=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",O.value=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",W.value=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true",V.value=localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true",H.value=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",n.value=!0}}),(Fe,Le)=>(T(),yt(Es,{modelValue:n.value,"onUpdate:modelValue":Le[41]||(Le[41]=Ce=>n.value=Ce),title:m(o)("promptBox.settings.title")},{footer:ht(()=>[i("button",{onClick:Le[40]||(Le[40]=Ce=>n.value=!1)},h(m(o)("promptBox.settings.close")),1)]),default:ht(()=>[i("div",U2,[i("div",H2,[i("ul",null,[i("li",{class:Ee({"weilin-comfyui-active":a.value==="translator"}),onClick:Le[0]||(Le[0]=Ce=>M("translator"))},h(m(o)("promptBox.settings.translator")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_auto_complete_limit"}),onClick:Le[1]||(Le[1]=Ce=>M("setting_auto_complete_limit"))},h(m(o)("promptBox.settings.setting_auto_complete_limit")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_floating_ball"}),onClick:Le[2]||(Le[2]=Ce=>M("setting_floating_ball"))},h(m(o)("promptBox.settings.setting_floating_ball")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_prompt_box"}),onClick:Le[3]||(Le[3]=Ce=>M("setting_prompt_box"))},h(m(o)("promptBox.settings.setting_prompt_box")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_openai_box"}),onClick:Le[4]||(Le[4]=Ce=>M("setting_openai_box"))},h(m(o)("promptBox.settings.setting_openai_box")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_sponsor_me"}),onClick:Le[5]||(Le[5]=Ce=>M("setting_sponsor_me"))},h(m(o)("promptBox.settings.setting_sponsor_me")),3)])]),i("div",W2,[a.value==="translator"?(T(),C("div",j2,[i("h3",null,h(m(o)("promptBox.settings.translator")),1),i("div",V2,[i("label",null,h(m(o)("promptBox.settings.selectTranslater")),1),Te(i("select",{style:{"margin-left":"10px"},"onUpdate:modelValue":Le[6]||(Le[6]=Ce=>F.value=Ce),class:"weilin-comfyui-common-select"},[i("option",z2,h(m(o)("promptBox.settings.selectOptionNetworkTranslater")),1),i("option",q2,h(m(o)("promptBox.settings.selectOptionPythonTranslater")),1),Le[42]||(Le[42]=i("option",{value:"openai"},"OpenAI API 翻译",-1))],512),[[cn,F.value]]),i("button",{class:"weilin-comfyui-install-button",onClick:ue},h(m(o)("promptBox.settings.apply")),1)]),i("div",G2,[F.value=="network"?(T(),C("div",Q2,[i("div",Y2,h(m(o)("promptBox.settings.selectOptionNetworkTranslaterTitle")),1),i("div",K2,h(m(o)("promptBox.settings.selectOptionNetworkTranslaterInfo"))+"：https://github.com/xnx3/translate",1),i("div",J2,[i("label",null,h(m(o)("promptBox.settings.sourceLanguage")),1),Te(i("select",{"onUpdate:modelValue":Le[7]||(Le[7]=Ce=>r.value=Ce),class:"weilin-comfyui-common-select"},[i("option",X2,h(m(o)("promptBox.settings.auto_detect")),1),i("option",Z2,h(m(o)("promptBox.settings.chinese_simplified")),1),i("option",ey,h(m(o)("promptBox.settings.english")),1)],512),[[cn,r.value]])]),i("div",ty,[i("label",null,h(m(o)("promptBox.settings.targetLanguage")),1),Te(i("select",{"onUpdate:modelValue":Le[8]||(Le[8]=Ce=>u.value=Ce),class:"weilin-comfyui-common-select"},[i("option",ny,h(m(o)("promptBox.settings.chinese_simplified")),1),i("option",oy,h(m(o)("promptBox.settings.english")),1)],512),[[cn,u.value]])]),i("button",{class:"weilin-comfyui-save-button",onClick:G},h(m(o)("promptBox.settings.save")),1)])):me("",!0),F.value=="translater"?(T(),C("div",ay,[i("div",sy,h(m(o)("promptBox.settings.selectOptionPythonTranslaterTitle")),1),i("div",ly,h(m(o)("promptBox.settings.selectOptionPythonTranslaterInfo"))+"：https://github.com/UlionTse/translators",1),i("div",ry,[i("div",iy,h(m(o)("promptBox.settings.nowTranlaterPackageState"))+" "+h(oe.value?m(o)("promptBox.settings.tranlaterPackageStateTrue"):m(o)("promptBox.settings.tranlaterPackageStateFlase")),1),K.value?(T(),C("div",uy,h(m(o)("promptBox.settings.installTranslaterPackageInfo")),1)):me("",!0),oe.value?me("",!0):(T(),C("div",cy,[i("button",{disabled:K.value,class:"weilin-comfyui-install-button",onClick:ut},h(K.value?m(o)("promptBox.settings.installed"):m(o)("promptBox.settings.install")),9,dy)]))]),oe.value?(T(),C("div",fy,[i("div",py,h(m(o)("promptBox.settings.translaterSetting")),1),i("div",gy,[i("label",null,h(m(o)("promptBox.settings.chooseTranslaterSetting")),1),Te(i("select",{"onUpdate:modelValue":Le[9]||(Le[9]=Ce=>he.value=Ce)},[(T(!0),C(Oe,null,je(m(B2),(Ce,at)=>(T(),C("option",{index:at,key:"tran-item_"+at,value:Ce},h(m(o)("translaterService."+Ce)),9,my))),128))],512),[[cn,he.value]])]),i("div",hy,[i("div",vy,[i("label",null,h(m(o)("promptBox.settings.translaterLangSourceSetting")),1),Te(i("select",{"onUpdate:modelValue":Le[10]||(Le[10]=Ce=>le.value=Ce)},[(T(!0),C(Oe,null,je(m(Ap),(Ce,at)=>(T(),C("option",{index:at,key:"lan-item_"+at,value:Ce.translator},h(m(o)("translaterLanguage."+Ce.language)),9,_y))),128))],512),[[cn,le.value]])]),i("div",yy,[i("label",null,h(m(o)("promptBox.settings.translaterLangTargeSetting")),1),Te(i("select",{"onUpdate:modelValue":Le[11]||(Le[11]=Ce=>R.value=Ce)},[(T(!0),C(Oe,null,je(m(Ap),(Ce,at)=>(T(),C("option",{index:at,key:"lan-mu-item_"+at,value:Ce.translator},h(m(o)("translaterLanguage."+Ce.language)),9,by))),128))],512),[[cn,R.value]])])]),i("button",{class:"weilin-comfyui-install-button",onClick:Pe},h(m(o)("promptBox.settings.saveTranslaterSetting")),1)])):me("",!0),oe.value?(T(),C("div",wy,[i("div",xy,h(m(o)("promptBox.settings.testTranslaterTitle")),1),i("div",Ty,[i("label",null,h(m(o)("promptBox.settings.inputTestTranslater")),1),Te(i("input",{type:"text","onUpdate:modelValue":Le[12]||(Le[12]=Ce=>Q.value=Ce),placeholder:m(o)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,Sy),[[Ae,Q.value]])]),i("div",ky,[i("label",null,h(m(o)("promptBox.settings.outPutTestTranslater")),1),Te(i("input",{type:"text","onUpdate:modelValue":Le[13]||(Le[13]=Ce=>ie.value=Ce),readonly:"",placeholder:m(o)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,Cy),[[Ae,ie.value]])]),i("button",{class:"weilin-comfyui-install-button",onClick:We},h(m(o)("promptBox.settings.testingTranslater")),1)])):me("",!0)])):me("",!0)])])):me("",!0),a.value==="setting_auto_complete_limit"?(T(),C("div",Ey,[i("h3",null,h(m(o)("promptBox.settings.setting_auto_complete_limit")),1),i("div",Ly,[i("div",$y,[i("label",null,h(m(o)("promptBox.settings.show_auto_limit")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[14]||(Le[14]=Ce=>re.value=Ce),min:"1",max:"99999999",style:{width:"100px"},placeholder:m(o)("promptBox.settings.showAutoLimitPlaceholder")},null,8,Ay),[[Ae,re.value,void 0,{number:!0}]])]),i("div",Iy,[i("label",null,h(m(o)("promptBox.settings.settingAutoCompleteWidth")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[15]||(Le[15]=Ce=>ye.value=Ce),min:"5",style:{width:"100px"},placeholder:m(o)("promptBox.settings.settingAutoCompleteWidthPlaceholder")},null,8,My),[[Ae,ye.value,void 0,{number:!0}]])]),i("div",Oy,[i("label",null,h(m(o)("promptBox.settings.settingAutoCompleteHeight")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[16]||(Le[16]=Ce=>de.value=Ce),min:"5",style:{width:"100px"},placeholder:m(o)("promptBox.settings.settingAutoCompleteHeightPlaceholder")},null,8,Ry),[[Ae,de.value,void 0,{number:!0}]])]),i("button",{class:"weilin-comfyui-save-button",onClick:jt},h(m(o)("promptBox.settings.save")),1)])])):me("",!0),a.value==="setting_floating_ball"?(T(),C("div",Ny,[i("h3",null,h(m(o)("promptBox.settings.setting_floating_ball")),1),i("div",Dy,[i("div",Py,[i("div",Fy,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[17]||(Le[17]=Ce=>g.value=Ce)},null,512),[[Bt,g.value]]),qe(" "+h(m(o)("promptBox.settings.enableFloatingBall")),1)])]),i("div",By,[i("label",null,h(m(o)("promptBox.settings.floatingBallCount")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[18]||(Le[18]=Ce=>d.value=Ce),min:"1",max:"100",placeholder:m(o)("promptBox.settings.floatingBallCountPlaceholder")},null,8,Uy),[[Ae,d.value,void 0,{number:!0}]])]),i("div",Hy,[i("label",null,h(m(o)("promptBox.settings.floatingBallSize")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[19]||(Le[19]=Ce=>c.value=Ce),min:"5",max:"999999",placeholder:m(o)("promptBox.settings.floatingBallSizePlaceholder")},null,8,Wy),[[Ae,c.value,void 0,{number:!0}]])]),i("div",jy,[i("label",null,h(m(o)("promptBox.settings.floatingBallHeight")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[20]||(Le[20]=Ce=>f.value=Ce),min:"5",max:"999999",placeholder:m(o)("promptBox.settings.floatingBallHeightPlaceholder")},null,8,Vy),[[Ae,f.value,void 0,{number:!0}]])])]),i("div",zy,[i("div",qy,[i("label",null,h(m(o)("promptBox.settings.skinSetting")),1),Te(i("select",{"onUpdate:modelValue":Le[21]||(Le[21]=Ce=>p.value=Ce)},[i("option",Gy,h(m(o)("promptBox.settings.defaultSkin")),1),i("option",Qy,h(m(o)("promptBox.settings.customSkin")),1)],512),[[cn,p.value]])]),p.value==="custom"?(T(),C("div",Yy,[i("label",null,h(m(o)("promptBox.settings.uploadSkin")),1),i("input",{type:"file",accept:"image/*",onChange:ae,ref:"skinUploader"},null,544),v.value?(T(),C("div",Ky,[i("img",{src:v.value,alt:"Custom Skin Preview"},null,8,Jy)])):me("",!0)])):me("",!0)]),i("div",Xy,[i("label",null,h(m(o)("promptBox.settings.bgSetting")),1),Te(i("select",{"onUpdate:modelValue":Le[22]||(Le[22]=Ce=>b.value=Ce)},[i("option",Zy,h(m(o)("promptBox.settings.gradientBg")),1),i("option",eb,h(m(o)("promptBox.settings.transparentBg")),1)],512),[[cn,b.value]])]),b.value==="gradient"?(T(),C("div",tb,[i("label",null,h(m(o)("promptBox.settings.gradientColor")),1),i("div",nb,[Te(i("input",{type:"color","onUpdate:modelValue":Le[23]||(Le[23]=Ce=>x.value=Ce)},null,512),[[Ae,x.value]]),Te(i("input",{type:"color","onUpdate:modelValue":Le[24]||(Le[24]=Ce=>k.value=Ce)},null,512),[[Ae,k.value]]),i("button",{onClick:D,style:{"margin-left":"10px",width:"200px"}},h(m(o)("promptBox.settings.resetToDefault")),1)])])):me("",!0),i("div",ob,[i("label",null,h(m(o)("promptBox.settings.borderRadius")),1),Te(i("input",{type:"number","onUpdate:modelValue":Le[25]||(Le[25]=Ce=>A.value=Ce),min:"0",max:"50"},null,512),[[Ae,A.value,void 0,{number:!0}]])]),i("button",{class:"weilin-comfyui-save-button",style:{"grid-column":"span 2"},onClick:ee},h(m(o)("promptBox.settings.save")),1)])])):me("",!0),a.value==="setting_prompt_box"?(T(),C("div",ab,[i("h3",null,h(m(o)("promptBox.settings.setting_prompt_box")),1),i("div",sb,[i("div",lb,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[26]||(Le[26]=Ce=>U.value=Ce)},null,512),[[Bt,U.value]]),qe(" "+h(m(o)("promptBox.settings.enableCommaConversion")),1)])]),i("div",rb,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[27]||(Le[27]=Ce=>w.value=Ce)},null,512),[[Bt,w.value]]),qe(" "+h(m(o)("promptBox.settings.enablePeriodConversion")),1)])]),i("div",ib,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[28]||(Le[28]=Ce=>O.value=Ce)},null,512),[[Bt,O.value]]),qe(" "+h(m(o)("promptBox.settings.enableBracketConversion")),1)])]),i("div",ub,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[29]||(Le[29]=Ce=>W.value=Ce)},null,512),[[Bt,W.value]]),qe(" "+h(m(o)("promptBox.settings.enableAngleBracketConversion")),1)])]),i("div",cb,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[30]||(Le[30]=Ce=>V.value=Ce)},null,512),[[Bt,V.value]]),qe(" "+h(m(o)("promptBox.settings.enableUnderscoreToBracket")),1)])]),i("div",db,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[31]||(Le[31]=Ce=>H.value=Ce)},null,512),[[Bt,H.value]]),qe(" "+h(m(o)("promptBox.settings.enableCommaCloseAutocomplete")),1)])]),i("div",fb,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":Le[32]||(Le[32]=Ce=>q.value=Ce)},null,512),[[Bt,q.value]]),qe(" "+h(m(o)("promptBox.settings.enableBracketEscape")),1)])]),i("button",{class:"weilin-comfyui-save-button",onClick:L},h(m(o)("promptBox.settings.save")),1)])])):me("",!0),a.value==="setting_openai_box"?(T(),C("div",pb,[i("h3",null,h(m(o)("promptBox.settings.openaiSettings")),1),i("div",gb,[i("div",mb,[i("label",null,h(m(o)("promptBox.settings.selectedOpenaiConfig")),1),Te(i("select",{"onUpdate:modelValue":Le[33]||(Le[33]=Ce=>Y.value=Ce),onChange:N},[(T(!0),C(Oe,null,je(X.value,(Ce,at)=>(T(),C("option",{key:at,value:at},h(Ce.model)+" ("+h(Ce.base_url)+") ",9,hb))),128))],544),[[cn,Y.value]])]),i("div",vb,[(T(!0),C(Oe,null,je(X.value,(Ce,at)=>(T(),C("div",{key:at,class:"weilin-comfyui-config-item"},[i("div",_b,[i("span",null,h(Ce.model),1),i("div",yb,[i("button",{onClick:pn=>ge(at)},h(P.value===at?m(o)("promptBox.settings.cancel"):m(o)("promptBox.settings.edit")),9,bb),i("button",{onClick:pn=>ne(at)},h(m(o)("promptBox.settings.delete")),9,wb)])]),P.value===at?(T(),C("div",xb,[i("div",Tb,[i("label",null,h(m(o)("promptBox.settings.openai_api_key"))+":",1),Te(i("input",{type:"text","onUpdate:modelValue":Le[34]||(Le[34]=pn=>Z.value.api_key=pn),placeholder:m(o)("promptBox.settings.openai_api_key_placeholder")},null,8,Sb),[[Ae,Z.value.api_key]])]),i("div",kb,[i("label",null,h(m(o)("promptBox.settings.openai_base_url"))+":",1),Te(i("input",{type:"text","onUpdate:modelValue":Le[35]||(Le[35]=pn=>Z.value.base_url=pn),placeholder:m(o)("promptBox.settings.openai_base_url_placeholder")},null,8,Cb),[[Ae,Z.value.base_url]])]),i("div",Eb,[i("label",null,h(m(o)("promptBox.settings.openai_model"))+":",1),Te(i("input",{type:"text","onUpdate:modelValue":Le[36]||(Le[36]=pn=>Z.value.model=pn),placeholder:m(o)("promptBox.settings.openai_model_placeholder")},null,8,Lb),[[Ae,Z.value.model]])]),i("div",$b,[i("button",{onClick:pn=>ve(at)},h(m(o)("promptBox.settings.save")),9,Ab)])])):(T(),C("div",Ib,[i("div",null,h(m(o)("promptBox.settings.openai_api_key"))+": "+h(Ce.api_key?"******":m(o)("promptBox.settings.not_set")),1),i("div",null,h(m(o)("promptBox.settings.openai_base_url"))+": "+h(Ce.base_url),1)]))]))),128))]),z.value?(T(),C("div",Mb,[i("div",Ob,[i("label",null,h(m(o)("promptBox.settings.openai_api_key"))+":",1),Te(i("input",{type:"text","onUpdate:modelValue":Le[37]||(Le[37]=Ce=>Z.value.api_key=Ce),placeholder:m(o)("promptBox.settings.openai_api_key_placeholder")},null,8,Rb),[[Ae,Z.value.api_key]])]),i("div",Nb,[i("label",null,h(m(o)("promptBox.settings.openai_base_url"))+":",1),Te(i("input",{type:"text","onUpdate:modelValue":Le[38]||(Le[38]=Ce=>Z.value.base_url=Ce),placeholder:m(o)("promptBox.settings.openai_base_url_placeholder")},null,8,Db),[[Ae,Z.value.base_url]])]),i("div",Pb,[i("label",null,h(m(o)("promptBox.settings.openai_model"))+":",1),Te(i("input",{type:"text","onUpdate:modelValue":Le[39]||(Le[39]=Ce=>Z.value.model=Ce),placeholder:m(o)("promptBox.settings.openai_model_placeholder")},null,8,Fb),[[Ae,Z.value.model]])]),i("div",Bb,[i("button",{onClick:y},h(m(o)("promptBox.settings.cancel")),1),i("button",{onClick:S},h(m(o)("promptBox.settings.save")),1)])])):me("",!0),z.value?me("",!0):(T(),C("button",{key:1,class:"weilin-comfyui-add-button",onClick:B},h(m(o)("promptBox.settings.addNewConfig")),1))])])):me("",!0),a.value==="setting_sponsor_me"?(T(),C("div",Ub,[i("h3",null,h(m(o)("promptBox.settings.setting_sponsor_me")),1),i("div",Hb,[i("h1",null,h(m(o)("promptBox.settings.sponsorMeTip")),1),i("h2",null,h(m(o)("promptBox.settings.sponsorMeLink")),1),i("button",{class:"weilin-comfyui-sponsor-me-button",onClick:j},h(m(o)("promptBox.settings.sponsorMe")),1)])])):me("",!0),a.value==="setting_start_panel"?(T(),C("div",Wb,[i("h3",null,h(m(o)("promptBox.settings.setting_start_panel")),1),i("div",jb,[i("h4",null,h(m(o)("promptBox.settings.startPanelTip")),1),i("button",{class:"weilin-comfyui-start-panel-button",onClick:xe},h(m(o)("promptBox.settings.startPanel")),1)])])):me("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-d4dda6aa"]]),Vb=["title"],zb={class:"switch-icon"},qb={key:0,class:"moon",viewBox:"0 0 24 24"},Gb={key:1,class:"sun",viewBox:"0 0 24 24"},Qb="weilin_tools_",Yb=xt({__name:"ThemeSwitch",setup(e){const{t}=wt(),o=`${Qb}theme`,n=_(localStorage.getItem(o)==="dark"),a=()=>{n.value=!n.value;const s=document.getElementById("weilin_comfyui_tools_prompt_ui_div");s&&s.setAttribute("data-theme",n.value?"dark":"light"),localStorage.setItem(o,n.value?"dark":"light")};return(s,l)=>(T(),C("button",{class:"theme-switch",onClick:a,title:m(t)("theme.toggle")},[i("div",zb,[n.value?(T(),C("svg",qb,[...l[0]||(l[0]=[i("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(T(),C("svg",Gb,[...l[1]||(l[1]=[i("circle",{cx:"12",cy:"12",r:"5"},null,-1),i("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])]))]),ns(s.$slots,"default",{isDark:n.value},void 0,!0)],8,Vb))}},[["__scopeId","data-v-e8b2125f"]]),_n="weilin_tools_",Rt={getTagsList:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/get_group_tags",method:"get",params:{...e,lang:t}})},addPrimaryCategory:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/add_new_f_group",method:"post",data:{...e,lang:t}})},editPrimaryCategory:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_f_group",method:"post",data:{...e,lang:t}})},deletePrimaryCategory:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_f_group",method:"post",data:{...e,lang:t}})},addSubCategory:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/add_new_s_group",method:"post",data:{...e,lang:t}})},editSubCategory:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_s_group",method:"post",data:{...e,lang:t}})},deleteSubCategory:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_s_group",method:"post",data:{...e,lang:t}})},addNewTags:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/new_tags",method:"post",data:{...e,lang:t}})},editTags:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/edit_tags",method:"post",data:{...e,lang:t}})},deleteTags:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/delete_tags",method:"post",data:{...e,lang:t}})},batchDeleteTags:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/batch_delete_tags",method:"post",data:{...e,lang:t}})},moveTag:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_tag",method:"post",data:{...e,lang:t}})},getTagsGroupList:async()=>await Ie({url:"/prompt/get_groups_list",method:"post"}),runSQLToServer:async e=>await Ie({url:"/prompt/run_sql_text",method:"post",timeout:0,data:{sql:e}}),moveMainGroup:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_group",method:"post",data:{...e,lang:t}})},moveSubGroup:async e=>{const t=localStorage.getItem(`${_n}userLocale`)||"zh_CN";return await Ie({url:"/prompt/move_subgroup",method:"post",data:{...e,lang:t}})},getTagMainGroup:async()=>await Ie({url:"/prompt/get_tag_groups",method:"post"}),getTagSubGroup:async e=>await Ie({url:"/prompt/get_tag_subgroups",method:"post",data:{p_uuid:e}}),getTagList:async e=>await Ie({url:"/prompt/get_tag_tags",method:"post",data:{g_uuid:e}}),searchTag:async e=>await Ie({url:"/prompt/search_tags",method:"post",data:{keyword:e}})};/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * Copyright 2021-2024 LiosK
 *
 * @license Apache-2.0
 * @packageDocumentation
 */const Gl="0123456789abcdef";class na{constructor(t){this.bytes=t}static ofInner(t){if(t.length!==16)throw new TypeError("not 128-bit length");return new na(t)}static fromFieldsV7(t,o,n,a){if(!Number.isInteger(t)||!Number.isInteger(o)||!Number.isInteger(n)||!Number.isInteger(a)||t<0||o<0||n<0||a<0||t>0xffffffffffff||o>4095||n>1073741823||a>4294967295)throw new RangeError("invalid field value");const s=new Uint8Array(16);return s[0]=t/2**40,s[1]=t/2**32,s[2]=t/2**24,s[3]=t/2**16,s[4]=t/2**8,s[5]=t,s[6]=112|o>>>8,s[7]=o,s[8]=128|n>>>24,s[9]=n>>>16,s[10]=n>>>8,s[11]=n,s[12]=a>>>24,s[13]=a>>>16,s[14]=a>>>8,s[15]=a,new na(s)}static parse(t){var o,n,a,s;let l;switch(t.length){case 32:l=(o=/^[0-9a-f]{32}$/i.exec(t))===null||o===void 0?void 0:o[0];break;case 36:l=(n=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||n===void 0?void 0:n.slice(1,6).join("");break;case 38:l=(a=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t))===null||a===void 0?void 0:a.slice(1,6).join("");break;case 45:l=(s=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||s===void 0?void 0:s.slice(1,6).join("");break}if(l){const r=new Uint8Array(16);for(let u=0;u<16;u+=4){const d=parseInt(l.substring(2*u,2*u+8),16);r[u+0]=d>>>24,r[u+1]=d>>>16,r[u+2]=d>>>8,r[u+3]=d}return new na(r)}else throw new SyntaxError("could not parse UUID string")}toString(){let t="";for(let o=0;o<this.bytes.length;o++)t+=Gl.charAt(this.bytes[o]>>>4),t+=Gl.charAt(this.bytes[o]&15),(o===3||o===5||o===7||o===9)&&(t+="-");return t}toHex(){let t="";for(let o=0;o<this.bytes.length;o++)t+=Gl.charAt(this.bytes[o]>>>4),t+=Gl.charAt(this.bytes[o]&15);return t}toJSON(){return this.toString()}getVariant(){const t=this.bytes[8]>>>4;if(t<0)throw new Error("unreachable");if(t<=7)return this.bytes.every(o=>o===0)?"NIL":"VAR_0";if(t<=11)return"VAR_10";if(t<=13)return"VAR_110";if(t<=15)return this.bytes.every(o=>o===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new na(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let o=0;o<16;o++){const n=this.bytes[o]-t.bytes[o];if(n!==0)return Math.sign(n)}return 0}}class Kb{constructor(t){this.timestamp=0,this.counter=0,this.random=t??Jb()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(t,o){let n=this.generateOrAbortCore(t,o);return n===void 0&&(this.timestamp=0,n=this.generateOrAbortCore(t,o)),n}generateOrAbortCore(t,o){if(!Number.isInteger(t)||t<1||t>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(o<0||o>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(t>this.timestamp)this.timestamp=t,this.resetCounter();else if(t+o>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return na.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const t=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return t[6]=64|t[6]>>>4,t[8]=128|t[8]>>>2,na.ofInner(t)}}const Jb=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new Xb;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class Xb{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Mp;const Po=()=>Zb().toString(),Zb=()=>(Mp||(Mp=new Kb)).generate(),e4={class:"tag-manager"},t4={class:"category-tabs"},n4={class:"tabs-wrapper primary-tabs"},o4={class:"tabs-scroll"},a4=["onClick"],s4={class:"tab-text"},l4={key:0,class:"tabs-wrapper group-tabs"},r4={class:"tabs-scroll"},i4=["onClick"],u4={class:"tab-text"},c4=xt({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=o,s=_([]),l=_(null),r=_(null),u=_([]),d=_(!1),c=_(!1),f=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},g=async()=>{try{const A=await Rt.getTagsGroupList();if(s.value=A.info,r.value){const U=s.value.flatMap(w=>w.groups).find(w=>w.p_uuid===r.value.p_uuid);U?r.value=U:r.value=null}if(l.value){const U=s.value.find(w=>w.p_uuid===l.value.p_uuid);U?l.value=U:l.value=null}}catch(A){console.error("获取标签列表失败:",A)}},p=A=>{if(!A||A==="transparent")return"var(--primary-text)";let U,w,O,W=1;if(A.startsWith("rgba")){const H=A.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);H&&([,U,w,O,W]=H.map(Number))}else if(A.startsWith("rgb")){const H=A.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);H&&([,U,w,O]=H.map(Number))}return W<.5?"var(--primary-text)":(U*299+w*587+O*114)/1e3>128?"#000000":"#ffffff"};vt(()=>{window.addEventListener("message",x)}),Eo(()=>{window.removeEventListener("message",x)});const v=A=>{l.value=A,r.value=null,d.value=!1,u.value=[]},b=A=>{r.value=A,d.value=!1,u.value=[]},x=A=>{A.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&g()},k=()=>{if(r.value==null||l.value==null){te({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{group:l.value,sub:r.value}),c.value=!1};return t({open:()=>{f(),c.value=!0}}),(A,U)=>(T(),yt(Es,{modelValue:c.value,"onUpdate:modelValue":U[1]||(U[1]=w=>c.value=w),title:m(n)("importDialog.selectTitle")},{footer:ht(()=>[i("button",{onClick:U[0]||(U[0]=w=>c.value=!1)},h(m(n)("promptBox.settings.close")),1),i("button",{onClick:k},h(m(n)("importDialog.sureSelect")),1)]),default:ht(()=>[i("div",e4,[i("div",t4,[i("div",n4,[i("div",o4,[(T(!0),C(Oe,null,je(s.value,(w,O)=>{var W,V,H;return T(),C("div",{key:"Tabss-"+O,class:Ee(["tab-item",{active:((W=l.value)==null?void 0:W.name)===w.name}]),style:mt({backgroundColor:((V=l.value)==null?void 0:V.name)===w.name?"var(--primary-color)":w.color,color:((H=l.value)==null?void 0:H.name)===w.name?"#ffffff":p(w.color)}),onClick:q=>v(w)},[i("span",s4,h(w.name),1)],14,a4)}),128))])]),l.value?(T(),C("div",l4,[i("div",r4,[(T(!0),C(Oe,null,je(l.value.groups,(w,O)=>{var W,V,H;return T(),C("div",{key:"TabsSw-"+O,class:Ee(["tab-item",{active:((W=r.value)==null?void 0:W.name)===w.name}]),style:mt({backgroundColor:((V=r.value)==null?void 0:V.name)===w.name?"var(--primary-color)":w.color,color:((H=r.value)==null?void 0:H.name)===w.name?"#ffffff":p(w.color)}),onClick:q=>b(w)},[i("span",u4,h(w.name),1)],14,i4)}),128))])])):me("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-6031c9d4"]]);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Op(e){return typeof e>"u"||e===null}function d4(e){return typeof e=="object"&&e!==null}function f4(e){return Array.isArray(e)?e:Op(e)?[]:[e]}function p4(e,t){var o,n,a,s;if(t)for(s=Object.keys(t),o=0,n=s.length;o<n;o+=1)a=s[o],e[a]=t[a];return e}function g4(e,t){var o="",n;for(n=0;n<t;n+=1)o+=e;return o}function m4(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var h4=Op,v4=d4,_4=f4,y4=g4,b4=m4,w4=p4,qt={isNothing:h4,isObject:v4,toArray:_4,repeat:y4,isNegativeZero:b4,extend:w4};function Rp(e,t){var o="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(o+='in "'+e.mark.name+'" '),o+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(o+=`

`+e.mark.snippet),n+" "+o):n}function $s(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Rp(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}$s.prototype=Object.create(Error.prototype),$s.prototype.constructor=$s,$s.prototype.toString=function(t){return this.name+": "+Rp(this,t)};var dn=$s;function zi(e,t,o,n,a){var s="",l="",r=Math.floor(a/2)-1;return n-t>r&&(s=" ... ",t=n-r+s.length),o-n>r&&(l=" ...",o=n+r-l.length),{str:s+e.slice(t,o).replace(/\t/g,"→")+l,pos:n-t+s.length}}function qi(e,t){return qt.repeat(" ",t-e.length)+e}function x4(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var o=/\r?\n|\r|\0/g,n=[0],a=[],s,l=-1;s=o.exec(e.buffer);)a.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var r="",u,d,c=Math.min(e.line+t.linesAfter,a.length).toString().length,f=t.maxLength-(t.indent+c+3);for(u=1;u<=t.linesBefore&&!(l-u<0);u++)d=zi(e.buffer,n[l-u],a[l-u],e.position-(n[l]-n[l-u]),f),r=qt.repeat(" ",t.indent)+qi((e.line-u+1).toString(),c)+" | "+d.str+`
`+r;for(d=zi(e.buffer,n[l],a[l],e.position,f),r+=qt.repeat(" ",t.indent)+qi((e.line+1).toString(),c)+" | "+d.str+`
`,r+=qt.repeat("-",t.indent+c+3+d.pos)+`^
`,u=1;u<=t.linesAfter&&!(l+u>=a.length);u++)d=zi(e.buffer,n[l+u],a[l+u],e.position-(n[l]-n[l+u]),f),r+=qt.repeat(" ",t.indent)+qi((e.line+u+1).toString(),c)+" | "+d.str+`
`;return r.replace(/\n$/,"")}var T4=x4,S4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],k4=["scalar","sequence","mapping"];function C4(e){var t={};return e!==null&&Object.keys(e).forEach(function(o){e[o].forEach(function(n){t[String(n)]=o})}),t}function E4(e,t){if(t=t||{},Object.keys(t).forEach(function(o){if(S4.indexOf(o)===-1)throw new dn('Unknown option "'+o+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(o){return o},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=C4(t.styleAliases||null),k4.indexOf(this.kind)===-1)throw new dn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Kt=E4;function Np(e,t){var o=[];return e[t].forEach(function(n){var a=o.length;o.forEach(function(s,l){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(a=l)}),o[a]=n}),o}function L4(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,o;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,o=arguments.length;t<o;t+=1)arguments[t].forEach(n);return e}function Gi(e){return this.extend(e)}Gi.prototype.extend=function(t){var o=[],n=[];if(t instanceof Kt)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(o=o.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new dn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");o.forEach(function(s){if(!(s instanceof Kt))throw new dn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new dn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new dn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Kt))throw new dn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Gi.prototype);return a.implicit=(this.implicit||[]).concat(o),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=Np(a,"implicit"),a.compiledExplicit=Np(a,"explicit"),a.compiledTypeMap=L4(a.compiledImplicit,a.compiledExplicit),a};var Dp=Gi,Pp=new Kt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Fp=new Kt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Bp=new Kt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Up=new Dp({explicit:[Pp,Fp,Bp]});function $4(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function A4(){return null}function I4(e){return e===null}var Hp=new Kt("tag:yaml.org,2002:null",{kind:"scalar",resolve:$4,construct:A4,predicate:I4,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function M4(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function O4(e){return e==="true"||e==="True"||e==="TRUE"}function R4(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Wp=new Kt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:M4,construct:O4,predicate:R4,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function N4(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function D4(e){return 48<=e&&e<=55}function P4(e){return 48<=e&&e<=57}function F4(e){if(e===null)return!1;var t=e.length,o=0,n=!1,a;if(!t)return!1;if(a=e[o],(a==="-"||a==="+")&&(a=e[++o]),a==="0"){if(o+1===t)return!0;if(a=e[++o],a==="b"){for(o++;o<t;o++)if(a=e[o],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(o++;o<t;o++)if(a=e[o],a!=="_"){if(!N4(e.charCodeAt(o)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(o++;o<t;o++)if(a=e[o],a!=="_"){if(!D4(e.charCodeAt(o)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;o<t;o++)if(a=e[o],a!=="_"){if(!P4(e.charCodeAt(o)))return!1;n=!0}return!(!n||a==="_")}function B4(e){var t=e,o=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(o=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return o*parseInt(t.slice(2),2);if(t[1]==="x")return o*parseInt(t.slice(2),16);if(t[1]==="o")return o*parseInt(t.slice(2),8)}return o*parseInt(t,10)}function U4(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!qt.isNegativeZero(e)}var jp=new Kt("tag:yaml.org,2002:int",{kind:"scalar",resolve:F4,construct:B4,predicate:U4,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),H4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function W4(e){return!(e===null||!H4.test(e)||e[e.length-1]==="_")}function j4(e){var t,o;return t=e.replace(/_/g,"").toLowerCase(),o=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?o===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:o*parseFloat(t,10)}var V4=/^[-+]?[0-9]+e/;function z4(e,t){var o;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qt.isNegativeZero(e))return"-0.0";return o=e.toString(10),V4.test(o)?o.replace("e",".e"):o}function q4(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||qt.isNegativeZero(e))}var Vp=new Kt("tag:yaml.org,2002:float",{kind:"scalar",resolve:W4,construct:j4,predicate:q4,represent:z4,defaultStyle:"lowercase"}),zp=Up.extend({implicit:[Hp,Wp,jp,Vp]}),qp=zp,Gp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Qp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function G4(e){return e===null?!1:Gp.exec(e)!==null||Qp.exec(e)!==null}function Q4(e){var t,o,n,a,s,l,r,u=0,d=null,c,f,g;if(t=Gp.exec(e),t===null&&(t=Qp.exec(e)),t===null)throw new Error("Date resolve error");if(o=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(o,n,a));if(s=+t[4],l=+t[5],r=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(c=+t[10],f=+(t[11]||0),d=(c*60+f)*6e4,t[9]==="-"&&(d=-d)),g=new Date(Date.UTC(o,n,a,s,l,r,u)),d&&g.setTime(g.getTime()-d),g}function Y4(e){return e.toISOString()}var Yp=new Kt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:G4,construct:Q4,instanceOf:Date,represent:Y4});function K4(e){return e==="<<"||e===null}var Kp=new Kt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:K4}),Qi=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function J4(e){if(e===null)return!1;var t,o,n=0,a=e.length,s=Qi;for(o=0;o<a;o++)if(t=s.indexOf(e.charAt(o)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function X4(e){var t,o,n=e.replace(/[\r\n=]/g,""),a=n.length,s=Qi,l=0,r=[];for(t=0;t<a;t++)t%4===0&&t&&(r.push(l>>16&255),r.push(l>>8&255),r.push(l&255)),l=l<<6|s.indexOf(n.charAt(t));return o=a%4*6,o===0?(r.push(l>>16&255),r.push(l>>8&255),r.push(l&255)):o===18?(r.push(l>>10&255),r.push(l>>2&255)):o===12&&r.push(l>>4&255),new Uint8Array(r)}function Z4(e){var t="",o=0,n,a,s=e.length,l=Qi;for(n=0;n<s;n++)n%3===0&&n&&(t+=l[o>>18&63],t+=l[o>>12&63],t+=l[o>>6&63],t+=l[o&63]),o=(o<<8)+e[n];return a=s%3,a===0?(t+=l[o>>18&63],t+=l[o>>12&63],t+=l[o>>6&63],t+=l[o&63]):a===2?(t+=l[o>>10&63],t+=l[o>>4&63],t+=l[o<<2&63],t+=l[64]):a===1&&(t+=l[o>>2&63],t+=l[o<<4&63],t+=l[64],t+=l[64]),t}function e3(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Jp=new Kt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:J4,construct:X4,predicate:e3,represent:Z4}),t3=Object.prototype.hasOwnProperty,n3=Object.prototype.toString;function o3(e){if(e===null)return!0;var t=[],o,n,a,s,l,r=e;for(o=0,n=r.length;o<n;o+=1){if(a=r[o],l=!1,n3.call(a)!=="[object Object]")return!1;for(s in a)if(t3.call(a,s))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function a3(e){return e!==null?e:[]}var Xp=new Kt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:o3,construct:a3}),s3=Object.prototype.toString;function l3(e){if(e===null)return!0;var t,o,n,a,s,l=e;for(s=new Array(l.length),t=0,o=l.length;t<o;t+=1){if(n=l[t],s3.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;s[t]=[a[0],n[a[0]]]}return!0}function r3(e){if(e===null)return[];var t,o,n,a,s,l=e;for(s=new Array(l.length),t=0,o=l.length;t<o;t+=1)n=l[t],a=Object.keys(n),s[t]=[a[0],n[a[0]]];return s}var Zp=new Kt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:l3,construct:r3}),i3=Object.prototype.hasOwnProperty;function u3(e){if(e===null)return!0;var t,o=e;for(t in o)if(i3.call(o,t)&&o[t]!==null)return!1;return!0}function c3(e){return e!==null?e:{}}var eg=new Kt("tag:yaml.org,2002:set",{kind:"mapping",resolve:u3,construct:c3}),Yi=qp.extend({implicit:[Yp,Kp],explicit:[Jp,Xp,Zp,eg]}),Fo=Object.prototype.hasOwnProperty,Ql=1,tg=2,ng=3,Yl=4,Ki=1,d3=2,og=3,f3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p3=/[\x85\u2028\u2029]/,g3=/[,\[\]\{\}]/,ag=/^(?:!|!!|![a-z\-]+!)$/i,sg=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function lg(e){return Object.prototype.toString.call(e)}function to(e){return e===10||e===13}function oa(e){return e===9||e===32}function yn(e){return e===9||e===32||e===10||e===13}function ka(e){return e===44||e===91||e===93||e===123||e===125}function m3(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function h3(e){return e===120?2:e===117?4:e===85?8:0}function v3(e){return 48<=e&&e<=57?e-48:-1}function rg(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function _3(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var ig=new Array(256),ug=new Array(256),Ca=0;Ca<256;Ca++)ig[Ca]=rg(Ca)?1:0,ug[Ca]=rg(Ca);function y3(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Yi,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function cg(e,t){var o={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return o.snippet=T4(o),new dn(t,o)}function Be(e,t){throw cg(e,t)}function Kl(e,t){e.onWarning&&e.onWarning.call(null,cg(e,t))}var dg={YAML:function(t,o,n){var a,s,l;t.version!==null&&Be(t,"duplication of %YAML directive"),n.length!==1&&Be(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&Be(t,"ill-formed argument of the YAML directive"),s=parseInt(a[1],10),l=parseInt(a[2],10),s!==1&&Be(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&Kl(t,"unsupported YAML version of the document")},TAG:function(t,o,n){var a,s;n.length!==2&&Be(t,"TAG directive accepts exactly two arguments"),a=n[0],s=n[1],ag.test(a)||Be(t,"ill-formed tag handle (first argument) of the TAG directive"),Fo.call(t.tagMap,a)&&Be(t,'there is a previously declared suffix for "'+a+'" tag handle'),sg.test(s)||Be(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Be(t,"tag prefix is malformed: "+s)}t.tagMap[a]=s}};function Bo(e,t,o,n){var a,s,l,r;if(t<o){if(r=e.input.slice(t,o),n)for(a=0,s=r.length;a<s;a+=1)l=r.charCodeAt(a),l===9||32<=l&&l<=1114111||Be(e,"expected valid JSON character");else f3.test(r)&&Be(e,"the stream contains non-printable characters");e.result+=r}}function fg(e,t,o,n){var a,s,l,r;for(qt.isObject(o)||Be(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(o),l=0,r=a.length;l<r;l+=1)s=a[l],Fo.call(t,s)||(t[s]=o[s],n[s]=!0)}function Ea(e,t,o,n,a,s,l,r,u){var d,c;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),d=0,c=a.length;d<c;d+=1)Array.isArray(a[d])&&Be(e,"nested arrays are not supported inside keys"),typeof a=="object"&&lg(a[d])==="[object Object]"&&(a[d]="[object Object]");if(typeof a=="object"&&lg(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,c=s.length;d<c;d+=1)fg(e,t,s[d],o);else fg(e,t,s,o);else!e.json&&!Fo.call(o,a)&&Fo.call(t,a)&&(e.line=l||e.line,e.lineStart=r||e.lineStart,e.position=u||e.position,Be(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[a]=s,delete o[a];return t}function Ji(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Be(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ht(e,t,o){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;oa(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(to(a))for(Ji(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return o!==-1&&n!==0&&e.lineIndent<o&&Kl(e,"deficient indentation"),n}function Jl(e){var t=e.position,o;return o=e.input.charCodeAt(t),!!((o===45||o===46)&&o===e.input.charCodeAt(t+1)&&o===e.input.charCodeAt(t+2)&&(t+=3,o=e.input.charCodeAt(t),o===0||yn(o)))}function Xi(e,t){t===1?e.result+=" ":t>1&&(e.result+=qt.repeat(`
`,t-1))}function b3(e,t,o){var n,a,s,l,r,u,d,c,f=e.kind,g=e.result,p;if(p=e.input.charCodeAt(e.position),yn(p)||ka(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(a=e.input.charCodeAt(e.position+1),yn(a)||o&&ka(a)))return!1;for(e.kind="scalar",e.result="",s=l=e.position,r=!1;p!==0;){if(p===58){if(a=e.input.charCodeAt(e.position+1),yn(a)||o&&ka(a))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),yn(n))break}else{if(e.position===e.lineStart&&Jl(e)||o&&ka(p))break;if(to(p))if(u=e.line,d=e.lineStart,c=e.lineIndent,Ht(e,!1,-1),e.lineIndent>=t){r=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=u,e.lineStart=d,e.lineIndent=c;break}}r&&(Bo(e,s,l,!1),Xi(e,e.line-u),s=l=e.position,r=!1),oa(p)||(l=e.position+1),p=e.input.charCodeAt(++e.position)}return Bo(e,s,l,!1),e.result?!0:(e.kind=f,e.result=g,!1)}function w3(e,t){var o,n,a;if(o=e.input.charCodeAt(e.position),o!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(o=e.input.charCodeAt(e.position))!==0;)if(o===39)if(Bo(e,n,e.position,!0),o=e.input.charCodeAt(++e.position),o===39)n=e.position,e.position++,a=e.position;else return!0;else to(o)?(Bo(e,n,a,!0),Xi(e,Ht(e,!1,t)),n=a=e.position):e.position===e.lineStart&&Jl(e)?Be(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Be(e,"unexpected end of the stream within a single quoted scalar")}function x3(e,t){var o,n,a,s,l,r;if(r=e.input.charCodeAt(e.position),r!==34)return!1;for(e.kind="scalar",e.result="",e.position++,o=n=e.position;(r=e.input.charCodeAt(e.position))!==0;){if(r===34)return Bo(e,o,e.position,!0),e.position++,!0;if(r===92){if(Bo(e,o,e.position,!0),r=e.input.charCodeAt(++e.position),to(r))Ht(e,!1,t);else if(r<256&&ig[r])e.result+=ug[r],e.position++;else if((l=h3(r))>0){for(a=l,s=0;a>0;a--)r=e.input.charCodeAt(++e.position),(l=m3(r))>=0?s=(s<<4)+l:Be(e,"expected hexadecimal character");e.result+=_3(s),e.position++}else Be(e,"unknown escape sequence");o=n=e.position}else to(r)?(Bo(e,o,n,!0),Xi(e,Ht(e,!1,t)),o=n=e.position):e.position===e.lineStart&&Jl(e)?Be(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Be(e,"unexpected end of the stream within a double quoted scalar")}function T3(e,t){var o=!0,n,a,s,l=e.tag,r,u=e.anchor,d,c,f,g,p,v=Object.create(null),b,x,k,A;if(A=e.input.charCodeAt(e.position),A===91)c=93,p=!1,r=[];else if(A===123)c=125,p=!0,r={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),A=e.input.charCodeAt(++e.position);A!==0;){if(Ht(e,!0,t),A=e.input.charCodeAt(e.position),A===c)return e.position++,e.tag=l,e.anchor=u,e.kind=p?"mapping":"sequence",e.result=r,!0;o?A===44&&Be(e,"expected the node content, but found ','"):Be(e,"missed comma between flow collection entries"),x=b=k=null,f=g=!1,A===63&&(d=e.input.charCodeAt(e.position+1),yn(d)&&(f=g=!0,e.position++,Ht(e,!0,t))),n=e.line,a=e.lineStart,s=e.position,La(e,t,Ql,!1,!0),x=e.tag,b=e.result,Ht(e,!0,t),A=e.input.charCodeAt(e.position),(g||e.line===n)&&A===58&&(f=!0,A=e.input.charCodeAt(++e.position),Ht(e,!0,t),La(e,t,Ql,!1,!0),k=e.result),p?Ea(e,r,v,x,b,k,n,a,s):f?r.push(Ea(e,null,v,x,b,k,n,a,s)):r.push(b),Ht(e,!0,t),A=e.input.charCodeAt(e.position),A===44?(o=!0,A=e.input.charCodeAt(++e.position)):o=!1}Be(e,"unexpected end of the stream within a flow collection")}function S3(e,t){var o,n,a=Ki,s=!1,l=!1,r=t,u=0,d=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Ki===a?a=f===43?og:d3:Be(e,"repeat of a chomping mode identifier");else if((c=v3(f))>=0)c===0?Be(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Be(e,"repeat of an indentation width identifier"):(r=t+c-1,l=!0);else break;if(oa(f)){do f=e.input.charCodeAt(++e.position);while(oa(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!to(f)&&f!==0)}for(;f!==0;){for(Ji(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!l||e.lineIndent<r)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>r&&(r=e.lineIndent),to(f)){u++;continue}if(e.lineIndent<r){a===og?e.result+=qt.repeat(`
`,s?1+u:u):a===Ki&&s&&(e.result+=`
`);break}for(n?oa(f)?(d=!0,e.result+=qt.repeat(`
`,s?1+u:u)):d?(d=!1,e.result+=qt.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=qt.repeat(`
`,u):e.result+=qt.repeat(`
`,s?1+u:u),s=!0,l=!0,u=0,o=e.position;!to(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Bo(e,o,e.position,!1)}return!0}function pg(e,t){var o,n=e.tag,a=e.anchor,s=[],l,r=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Be(e,"tab characters must not be used in indentation")),!(u!==45||(l=e.input.charCodeAt(e.position+1),!yn(l))));){if(r=!0,e.position++,Ht(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(o=e.line,La(e,t,ng,!1,!0),s.push(e.result),Ht(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>t)&&u!==0)Be(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return r?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=s,!0):!1}function k3(e,t,o){var n,a,s,l,r,u,d=e.tag,c=e.anchor,f={},g=Object.create(null),p=null,v=null,b=null,x=!1,k=!1,A;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),A=e.input.charCodeAt(e.position);A!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Be(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(A===63||A===58)&&yn(n))A===63?(x&&(Ea(e,f,g,p,v,null,l,r,u),p=v=b=null),k=!0,x=!0,a=!0):x?(x=!1,a=!0):Be(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,A=n;else{if(l=e.line,r=e.lineStart,u=e.position,!La(e,o,tg,!1,!0))break;if(e.line===s){for(A=e.input.charCodeAt(e.position);oa(A);)A=e.input.charCodeAt(++e.position);if(A===58)A=e.input.charCodeAt(++e.position),yn(A)||Be(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(Ea(e,f,g,p,v,null,l,r,u),p=v=b=null),k=!0,x=!1,a=!1,p=e.tag,v=e.result;else if(k)Be(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=c,!0}else if(k)Be(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=c,!0}if((e.line===s||e.lineIndent>t)&&(x&&(l=e.line,r=e.lineStart,u=e.position),La(e,t,Yl,!0,a)&&(x?v=e.result:b=e.result),x||(Ea(e,f,g,p,v,b,l,r,u),p=v=b=null),Ht(e,!0,-1),A=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&A!==0)Be(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&Ea(e,f,g,p,v,null,l,r,u),k&&(e.tag=d,e.anchor=c,e.kind="mapping",e.result=f),k}function C3(e){var t,o=!1,n=!1,a,s,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&Be(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(o=!0,l=e.input.charCodeAt(++e.position)):l===33?(n=!0,a="!!",l=e.input.charCodeAt(++e.position)):a="!",t=e.position,o){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(s=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):Be(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!yn(l);)l===33&&(n?Be(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),ag.test(a)||Be(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),g3.test(s)&&Be(e,"tag suffix cannot contain flow indicator characters")}s&&!sg.test(s)&&Be(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Be(e,"tag name is malformed: "+s)}return o?e.tag=s:Fo.call(e.tagMap,a)?e.tag=e.tagMap[a]+s:a==="!"?e.tag="!"+s:a==="!!"?e.tag="tag:yaml.org,2002:"+s:Be(e,'undeclared tag handle "'+a+'"'),!0}function E3(e){var t,o;if(o=e.input.charCodeAt(e.position),o!==38)return!1;for(e.anchor!==null&&Be(e,"duplication of an anchor property"),o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!yn(o)&&!ka(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function L3(e){var t,o,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!yn(n)&&!ka(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an alias node must contain at least one character"),o=e.input.slice(t,e.position),Fo.call(e.anchorMap,o)||Be(e,'unidentified alias "'+o+'"'),e.result=e.anchorMap[o],Ht(e,!0,-1),!0}function La(e,t,o,n,a){var s,l,r,u=1,d=!1,c=!1,f,g,p,v,b,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=l=r=Yl===o||ng===o,n&&Ht(e,!0,-1)&&(d=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;C3(e)||E3(e);)Ht(e,!0,-1)?(d=!0,r=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):r=!1;if(r&&(r=d||a),(u===1||Yl===o)&&(Ql===o||tg===o?b=t:b=t+1,x=e.position-e.lineStart,u===1?r&&(pg(e,x)||k3(e,x,b))||T3(e,b)?c=!0:(l&&S3(e,b)||w3(e,b)||x3(e,b)?c=!0:L3(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&Be(e,"alias node should not have any properties")):b3(e,b,Ql===o)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(c=r&&pg(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Be(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,g=e.implicitTypes.length;f<g;f+=1)if(v=e.implicitTypes[f],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Fo.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,p=e.typeMap.multi[e.kind||"fallback"],f=0,g=p.length;f<g;f+=1)if(e.tag.slice(0,p[f].tag.length)===p[f].tag){v=p[f];break}v||Be(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&Be(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Be(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function $3(e){var t=e.position,o,n,a,s=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(Ht(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(s=!0,l=e.input.charCodeAt(++e.position),o=e.position;l!==0&&!yn(l);)l=e.input.charCodeAt(++e.position);for(n=e.input.slice(o,e.position),a=[],n.length<1&&Be(e,"directive name must not be less than one character in length");l!==0;){for(;oa(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!to(l));break}if(to(l))break;for(o=e.position;l!==0&&!yn(l);)l=e.input.charCodeAt(++e.position);a.push(e.input.slice(o,e.position))}l!==0&&Ji(e),Fo.call(dg,n)?dg[n](e,n,a):Kl(e,'unknown document directive "'+n+'"')}if(Ht(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ht(e,!0,-1)):s&&Be(e,"directives end mark is expected"),La(e,e.lineIndent-1,Yl,!1,!0),Ht(e,!0,-1),e.checkLineBreaks&&p3.test(e.input.slice(t,e.position))&&Kl(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Jl(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ht(e,!0,-1));return}if(e.position<e.length-1)Be(e,"end of the stream or a document separator is expected");else return}function gg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var o=new y3(e,t),n=e.indexOf("\0");for(n!==-1&&(o.position=n,Be(o,"null byte is not allowed in input")),o.input+="\0";o.input.charCodeAt(o.position)===32;)o.lineIndent+=1,o.position+=1;for(;o.position<o.length-1;)$3(o);return o.documents}function A3(e,t,o){t!==null&&typeof t=="object"&&typeof o>"u"&&(o=t,t=null);var n=gg(e,o);if(typeof t!="function")return n;for(var a=0,s=n.length;a<s;a+=1)t(n[a])}function I3(e,t){var o=gg(e,t);if(o.length!==0){if(o.length===1)return o[0];throw new dn("expected a single document in the stream, but found more")}}var M3=A3,O3=I3,mg={loadAll:M3,load:O3},hg=Object.prototype.toString,vg=Object.prototype.hasOwnProperty,Zi=65279,R3=9,As=10,N3=13,D3=32,P3=33,F3=34,eu=35,B3=37,U3=38,H3=39,W3=42,_g=44,j3=45,Xl=58,V3=61,z3=62,q3=63,G3=64,yg=91,bg=93,Q3=96,wg=123,Y3=124,xg=125,an={};an[0]="\\0",an[7]="\\a",an[8]="\\b",an[9]="\\t",an[10]="\\n",an[11]="\\v",an[12]="\\f",an[13]="\\r",an[27]="\\e",an[34]='\\"',an[92]="\\\\",an[133]="\\N",an[160]="\\_",an[8232]="\\L",an[8233]="\\P";var K3=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],J3=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function X3(e,t){var o,n,a,s,l,r,u;if(t===null)return{};for(o={},n=Object.keys(t),a=0,s=n.length;a<s;a+=1)l=n[a],r=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),u=e.compiledTypeMap.fallback[l],u&&vg.call(u.styleAliases,r)&&(r=u.styleAliases[r]),o[l]=r;return o}function Z3(e){var t,o,n;if(t=e.toString(16).toUpperCase(),e<=255)o="x",n=2;else if(e<=65535)o="u",n=4;else if(e<=4294967295)o="U",n=8;else throw new dn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+o+qt.repeat("0",n-t.length)+t}var ew=1,Is=2;function tw(e){this.schema=e.schema||Yi,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=qt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=X3(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Is:ew,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Tg(e,t){for(var o=qt.repeat(" ",t),n=0,a=-1,s="",l,r=e.length;n<r;)a=e.indexOf(`
`,n),a===-1?(l=e.slice(n),n=r):(l=e.slice(n,a+1),n=a+1),l.length&&l!==`
`&&(s+=o),s+=l;return s}function tu(e,t){return`
`+qt.repeat(" ",e.indent*t)}function nw(e,t){var o,n,a;for(o=0,n=e.implicitTypes.length;o<n;o+=1)if(a=e.implicitTypes[o],a.resolve(t))return!0;return!1}function Zl(e){return e===D3||e===R3}function Ms(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Zi||65536<=e&&e<=1114111}function Sg(e){return Ms(e)&&e!==Zi&&e!==N3&&e!==As}function kg(e,t,o){var n=Sg(e),a=n&&!Zl(e);return(o?n:n&&e!==_g&&e!==yg&&e!==bg&&e!==wg&&e!==xg)&&e!==eu&&!(t===Xl&&!a)||Sg(t)&&!Zl(t)&&e===eu||t===Xl&&a}function ow(e){return Ms(e)&&e!==Zi&&!Zl(e)&&e!==j3&&e!==q3&&e!==Xl&&e!==_g&&e!==yg&&e!==bg&&e!==wg&&e!==xg&&e!==eu&&e!==U3&&e!==W3&&e!==P3&&e!==Y3&&e!==V3&&e!==z3&&e!==H3&&e!==F3&&e!==B3&&e!==G3&&e!==Q3}function aw(e){return!Zl(e)&&e!==Xl}function Os(e,t){var o=e.charCodeAt(t),n;return o>=55296&&o<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(o-55296)*1024+n-56320+65536:o}function Cg(e){var t=/^\n* /;return t.test(e)}var Eg=1,nu=2,Lg=3,$g=4,$a=5;function sw(e,t,o,n,a,s,l,r){var u,d=0,c=null,f=!1,g=!1,p=n!==-1,v=-1,b=ow(Os(e,0))&&aw(Os(e,e.length-1));if(t||l)for(u=0;u<e.length;d>=65536?u+=2:u++){if(d=Os(e,u),!Ms(d))return $a;b=b&&kg(d,c,r),c=d}else{for(u=0;u<e.length;d>=65536?u+=2:u++){if(d=Os(e,u),d===As)f=!0,p&&(g=g||u-v-1>n&&e[v+1]!==" ",v=u);else if(!Ms(d))return $a;b=b&&kg(d,c,r),c=d}g=g||p&&u-v-1>n&&e[v+1]!==" "}return!f&&!g?b&&!l&&!a(e)?Eg:s===Is?$a:nu:o>9&&Cg(e)?$a:l?s===Is?$a:nu:g?$g:Lg}function lw(e,t,o,n,a){e.dump=(function(){if(t.length===0)return e.quotingType===Is?'""':"''";if(!e.noCompatMode&&(K3.indexOf(t)!==-1||J3.test(t)))return e.quotingType===Is?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,o),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),r=n||e.flowLevel>-1&&o>=e.flowLevel;function u(d){return nw(e,d)}switch(sw(t,r,e.indent,l,u,e.quotingType,e.forceQuotes&&!n,a)){case Eg:return t;case nu:return"'"+t.replace(/'/g,"''")+"'";case Lg:return"|"+Ag(t,e.indent)+Ig(Tg(t,s));case $g:return">"+Ag(t,e.indent)+Ig(Tg(rw(t,l),s));case $a:return'"'+iw(t)+'"';default:throw new dn("impossible error: invalid scalar style")}})()}function Ag(e,t){var o=Cg(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),s=a?"+":n?"":"-";return o+s+`
`}function Ig(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function rw(e,t){for(var o=/(\n+)([^\n]*)/g,n=(function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,o.lastIndex=d,Mg(e.slice(0,d),t)})(),a=e[0]===`
`||e[0]===" ",s,l;l=o.exec(e);){var r=l[1],u=l[2];s=u[0]===" ",n+=r+(!a&&!s&&u!==""?`
`:"")+Mg(u,t),a=s}return n}function Mg(e,t){if(e===""||e[0]===" ")return e;for(var o=/ [^ ]/g,n,a=0,s,l=0,r=0,u="";n=o.exec(e);)r=n.index,r-a>t&&(s=l>a?l:r,u+=`
`+e.slice(a,s),a=s+1),l=r;return u+=`
`,e.length-a>t&&l>a?u+=e.slice(a,l)+`
`+e.slice(l+1):u+=e.slice(a),u.slice(1)}function iw(e){for(var t="",o=0,n,a=0;a<e.length;o>=65536?a+=2:a++)o=Os(e,a),n=an[o],!n&&Ms(o)?(t+=e[a],o>=65536&&(t+=e[a+1])):t+=n||Z3(o);return t}function uw(e,t,o){var n="",a=e.tag,s,l,r;for(s=0,l=o.length;s<l;s+=1)r=o[s],e.replacer&&(r=e.replacer.call(o,String(s),r)),(yo(e,t,r,!1,!1)||typeof r>"u"&&yo(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}function Og(e,t,o,n){var a="",s=e.tag,l,r,u;for(l=0,r=o.length;l<r;l+=1)u=o[l],e.replacer&&(u=e.replacer.call(o,String(l),u)),(yo(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&yo(e,t+1,null,!0,!0,!1,!0))&&((!n||a!=="")&&(a+=tu(e,t)),e.dump&&As===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=s,e.dump=a||"[]"}function cw(e,t,o){var n="",a=e.tag,s=Object.keys(o),l,r,u,d,c;for(l=0,r=s.length;l<r;l+=1)c="",n!==""&&(c+=", "),e.condenseFlow&&(c+='"'),u=s[l],d=o[u],e.replacer&&(d=e.replacer.call(o,u,d)),yo(e,t,u,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),yo(e,t,d,!1,!1)&&(c+=e.dump,n+=c));e.tag=a,e.dump="{"+n+"}"}function dw(e,t,o,n){var a="",s=e.tag,l=Object.keys(o),r,u,d,c,f,g;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new dn("sortKeys must be a boolean or a function");for(r=0,u=l.length;r<u;r+=1)g="",(!n||a!=="")&&(g+=tu(e,t)),d=l[r],c=o[d],e.replacer&&(c=e.replacer.call(o,d,c)),yo(e,t+1,d,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&As===e.dump.charCodeAt(0)?g+="?":g+="? "),g+=e.dump,f&&(g+=tu(e,t)),yo(e,t+1,c,!0,f)&&(e.dump&&As===e.dump.charCodeAt(0)?g+=":":g+=": ",g+=e.dump,a+=g));e.tag=s,e.dump=a||"{}"}function Rg(e,t,o){var n,a,s,l,r,u;for(a=o?e.explicitTypes:e.implicitTypes,s=0,l=a.length;s<l;s+=1)if(r=a[s],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(o?r.multi&&r.representName?e.tag=r.representName(t):e.tag=r.tag:e.tag="?",r.represent){if(u=e.styleMap[r.tag]||r.defaultStyle,hg.call(r.represent)==="[object Function]")n=r.represent(t,u);else if(vg.call(r.represent,u))n=r.represent[u](t,u);else throw new dn("!<"+r.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function yo(e,t,o,n,a,s,l){e.tag=null,e.dump=o,Rg(e,o,!1)||Rg(e,o,!0);var r=hg.call(e.dump),u=n,d;n&&(n=e.flowLevel<0||e.flowLevel>t);var c=r==="[object Object]"||r==="[object Array]",f,g;if(c&&(f=e.duplicates.indexOf(o),g=f!==-1),(e.tag!==null&&e.tag!=="?"||g||e.indent!==2&&t>0)&&(a=!1),g&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&g&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),r==="[object Object]")n&&Object.keys(e.dump).length!==0?(dw(e,t,e.dump,a),g&&(e.dump="&ref_"+f+e.dump)):(cw(e,t,e.dump),g&&(e.dump="&ref_"+f+" "+e.dump));else if(r==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?Og(e,t-1,e.dump,a):Og(e,t,e.dump,a),g&&(e.dump="&ref_"+f+e.dump)):(uw(e,t,e.dump),g&&(e.dump="&ref_"+f+" "+e.dump));else if(r==="[object String]")e.tag!=="?"&&lw(e,e.dump,t,s,u);else{if(r==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new dn("unacceptable kind of an object to dump "+r)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function fw(e,t){var o=[],n=[],a,s;for(ou(e,o,n),a=0,s=n.length;a<s;a+=1)t.duplicates.push(o[n[a]]);t.usedDuplicates=new Array(s)}function ou(e,t,o){var n,a,s;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)o.indexOf(a)===-1&&o.push(a);else if(t.push(e),Array.isArray(e))for(a=0,s=e.length;a<s;a+=1)ou(e[a],t,o);else for(n=Object.keys(e),a=0,s=n.length;a<s;a+=1)ou(e[n[a]],t,o)}function pw(e,t){t=t||{};var o=new tw(t);o.noRefs||fw(e,o);var n=e;return o.replacer&&(n=o.replacer.call({"":n},"",n)),yo(o,0,n,!0,!0)?o.dump+`
`:""}var gw=pw,mw={dump:gw};function au(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var hw=Kt,vw=Dp,_w=Up,yw=zp,bw=qp,ww=Yi,xw=mg.load,Tw=mg.loadAll,Sw=mw.dump,kw=dn,Cw={binary:Jp,float:Vp,map:Bp,null:Hp,pairs:Zp,set:eg,timestamp:Yp,bool:Wp,int:jp,merge:Kp,omap:Xp,seq:Fp,str:Pp},Ew=au("safeLoad","load"),Lw=au("safeLoadAll","loadAll"),$w=au("safeDump","dump"),Ng={Type:hw,Schema:vw,FAILSAFE_SCHEMA:_w,JSON_SCHEMA:yw,CORE_SCHEMA:bw,DEFAULT_SCHEMA:ww,load:xw,loadAll:Tw,dump:Sw,YAMLException:kw,types:Cw,safeLoad:Ew,safeLoadAll:Lw,safeDump:$w};const Aw={key:0,class:"loading-overlay"},Iw={class:"settings-content"},Mw={class:"info-links"},Ow={class:"info-link-item"},Rw={class:"info-link-label"},Nw={href:"https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X",target:"_blank",class:"info-link"},Dw={class:"info-link-item"},Pw={class:"info-link-label"},Fw={href:"https://github.com/weilin9999/WeiLin-Comfyui-Tools-Prompt",target:"_blank",class:"info-link"},Bw={class:"info-link-item"},Uw={class:"info-link-label"},Hw={href:"https://weilin9999.github.io/WeiLin-Share-Prompt-Web/#/",target:"_blank",class:"info-link"},Ww={style:{"margin-bottom":"16px"}},jw=["placeholder"],Vw={style:{"margin-bottom":"16px"}},zw=["placeholder"],qw=["placeholder"],Gw={style:{"margin-bottom":"16px"}},Qw=["placeholder"],Yw=["placeholder"],Kw={style:{"margin-bottom":"16px"}},Jw=["placeholder"],Xw={class:"data-container"},Zw={key:0},e5={key:0},t5={class:"tag-group-container"},n5={style:{display:"flex","align-items":"center"}},o5={key:0},a5=["placeholder"],s5=["onClick"],l5=["onClick"],r5=["onClick"],i5=xt({__name:"import_tag",setup(e,{expose:t}){const{t:o}=wt(),n=_(!1),a=_(""),s=_(""),l=_(""),r=_(""),u=_(""),d=_(""),c=_(""),f=_(""),g=_(""),p=_([]),v=_(-1),b=_(""),x=_(""),k=_(null),A=_(null),U=_(null),w=_(!1),O=_(""),W=_(null);function V(){if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}W.value.click()}function H(){a.value="",s.value="",l.value="",r.value="",u.value="",d.value="",c.value="",f.value="",g.value="",p.value=[],v.value=-1,b.value="",x.value="",w.value=!1}function q(E){const B=E.target.files[0];if(B){const ne=new FileReader;ne.onload=ge=>{const S=ge.target.result.split(`
`).filter(N=>N.trim());let y=0;S.forEach(N=>{const[j,xe]=N.split(",");if(j&&xe){const _e=j.trim().replace(/'/g,"''"),J=xe.trim().replace(/'/g,"''"),ue=Po();y=y+1;const Me=parseInt(new Date().getTime()/1e3)+y,Pe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${_e}', '${J}', 'rgba(255, 123, 2, .4)', ${Me}, '${g.value}', '${ue}');`;p.value.push(Pe)}})},ne.readAsText(B)}E.target.value=""}function he(E){const B=E.target.files[0];if(B){const ne=new FileReader;ne.onload=ge=>{try{const ve=JSON.parse(ge.target.result);let S=0;Object.entries(ve).forEach(([y,N])=>{const j=y.replace(/'/g,"''"),xe=N.replace(/'/g,"''"),_e=Po();S=S+1;const J=parseInt(new Date().getTime()/1e3)+S,ue=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${j}', '${xe}', 'rgba(255, 123, 2, .4)', ${J}, '${g.value}', '${_e}');`;p.value.push(ue)})}catch{te({type:"warn",str:"message.jsonErrorMesg"})}},ne.readAsText(B)}E.target.value=""}function le(E){const B=E.target.files[0];if(B){const ne=new FileReader;ne.onload=ge=>{try{const ve=Ng.load(ge.target.result);let S=0;Object.entries(ve).forEach(([y,N])=>{const j=y.replace(/'/g,"''"),xe=String(N).replace(/'/g,"''"),_e=Po();S=S+1;const J=parseInt(new Date().getTime()/1e3)+S,ue=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${j}', '${xe}', 'rgba(255, 123, 2, .4)', ${J}, '${g.value}', '${_e}');`;p.value.push(ue)})}catch{te({type:"warn",str:"message.yamlErrorMesg"})}},ne.readAsText(B)}E.target.value=""}function R(E){H();const B=E.target.files[0];if(B){const ne=new FileReader;ne.onload=ge=>{ge.target.result.split(";").filter(y=>y.trim()).forEach(y=>{if((y.includes("tag_groups")||y.includes("tag_subgroups"))&&y.includes("p_uuid"))if(y.includes("g_uuid")){u.value=y+";";const j=y.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);j&&(g.value=j[1]);const xe=y.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);xe&&(c.value=xe[1].replace(/''/g,"'"))}else{r.value=y+";";const j=y.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);j&&(f.value=j[1]);const xe=y.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);xe&&(d.value=xe[1].replace(/''/g,"'"))}else y.includes("tag_tags")&&p.value.push(y+";")})},ne.readAsText(B)}E.target.value=""}function Y(){if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}U.value.click()}function X(){if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}A.value.click()}function z(){k.value.click()}function Z(){const E=[r.value,u.value,...p.value].join(`
`),B=new Blob([E],{type:"text/sql"}),ne=document.createElement("a");if(ne.href=URL.createObjectURL(B),O.value.length<=0){const ge=parseInt(new Date().getTime()/1e3);ne.download="export_"+ge+".sql"}else ne.download=O.value+".sql";ne.click()}const se=()=>{const E=[...p.value].join(`
`),B=new Blob([E],{type:"text/sql"}),ne=document.createElement("a");if(ne.href=URL.createObjectURL(B),O.value.length<=0){const ge=parseInt(new Date().getTime()/1e3);ne.download="export_tags_"+ge+".sql"}else ne.download=O.value+".sql";ne.click()};function P(E){const B=E.match(/VALUES\s*\([^']*'([^']+)'/),ne=E.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:B?B[1].replace(/''/g,"'"):"",desc:ne?ne[1].replace(/''/g,"'"):""}}function F(E){p.value.splice(E,1)}function K(E){const B=p.value[E],ne=P(B);b.value=ne.text,x.value=ne.desc,v.value=E}function oe(E){const B=b.value.replace(/'/g,"''"),ne=x.value.replace(/'/g,"''");p.value[E]=p.value[E].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${B}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${ne}'`),v.value=-1}function Q(){v.value=-1}function ie(){if(!g.value){te({type:"warn",str:"message.pleaseAddSub"});return}const E=a.value.replace(/'/g,"''"),B=s.value.replace(/'/g,"''"),ne=Po(),ge=parseInt(new Date().getTime()/1e3);l.value=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${E}', '${B}', 'rgba(255, 123, 2, .4)', ${ge}, '${g.value}', '${ne}');`,p.value.push(l.value)}function re(){if(d.value.length<=0){te({type:"warn",str:"importDialog.pleaseAddGroupName"});return}const E=d.value.replace(/'/g,"''");f.value.length<=0&&(f.value=Po());const B=parseInt(new Date().getTime()/1e3);r.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${E}', 'rgba(255, 123, 2, .4)', ${B}, '${f.value}');`}function ye(){if(c.value.length<=0){te({type:"warn",str:"importDialog.pleaseAddSubGroupName"});return}if(!f.value){te({type:"warn",str:"message.pleaseAddMainCeb"});return}const E=c.value.replace(/'/g,"''");g.value.length<=0&&(g.value=Po());const B=parseInt(new Date().getTime()/1e3);u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${E}', 'rgba(255, 123, 2, .4)', ${B}, '${f.value}', '${g.value}');`}const de=_(null),M=()=>{de.value.open()},G=E=>{w.value=!0,d.value=E.group.name,c.value=E.sub.name,f.value=E.group.p_uuid,g.value=E.sub.g_uuid;const B=E.group.name.replace(/'/g,"''"),ne=E.sub.name.replace(/'/g,"''");r.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${B}', '${E.group.color}', ${E.group.create_time}, '${E.group.p_uuid}');`,u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${ne}', '${E.sub.color}', ${E.sub.create_time}, '${E.group.p_uuid}', '${E.sub.g_uuid}');`},ae=_(!1),D=async E=>{ae.value=!0;try{await Rt.runSQLToServer(E).then(B=>{if(B.code!=200){te({type:"warn",str:B.message});return}else ee(),te({type:"success",str:"importDialog.successImport"})}).catch(B=>{console.error(B),te({type:"warn",str:"importDialog.importFail"})})}catch(B){console.error(B),te({type:"warn",str:"importDialog.importFail"})}finally{ae.value=!1}},ee=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},L=async()=>{if(w.value){if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}const E=[...p.value];await D(E)}else{if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}const E=[r.value,u.value,...p.value];await D(E)}};return Ze(r,(E,B)=>{var ve,S;if(!E||E===B)return;const ne=(ve=E.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:ve[1],ge=(S=B==null?void 0:B.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:S[1];ne&&ge&&u.value&&(u.value=u.value.replace(new RegExp(`'${ge}'`,"g"),`'${ne}'`))}),Ze(u,(E,B)=>{var ve,S;if(!E||E===B)return;const ne=(ve=E.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:ve[1],ge=(S=B==null?void 0:B.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:S[1];ne&&ge&&p.value.length>0&&(p.value=p.value.map(y=>y.replace(new RegExp(`'${ge}'`,"g"),`'${ne}'`)))}),t({open:()=>{n.value=!0}}),(E,B)=>(T(),C(Oe,null,[ae.value?(T(),C("div",Aw,[...B[11]||(B[11]=[i("div",{class:"loading-spinner"},null,-1)])])):me("",!0),ze(Es,{modelValue:n.value,"onUpdate:modelValue":B[10]||(B[10]=ne=>n.value=ne),title:m(o)("importDialog.title")},{footer:ht(()=>[i("button",{onClick:B[9]||(B[9]=ne=>n.value=!1)},h(m(o)("promptBox.settings.close")),1),i("button",{onClick:L},h(m(o)("importDialog.sure")),1)]),default:ht(()=>[i("div",Iw,[i("div",Mw,[i("div",Ow,[i("span",Rw,h(m(o)("importDialog.tips1")),1),i("a",Nw,h(m(o)("importDialog.tips1text")),1)]),i("div",Dw,[i("span",Pw,h(m(o)("importDialog.tips2")),1),i("a",Fw,h(m(o)("importDialog.tips2text")),1)]),i("div",Bw,[i("span",Uw,h(m(o)("importDialog.tips3")),1),i("a",Hw,h(m(o)("importDialog.tips3text")),1)])]),i("div",Ww,[i("button",{onClick:H,class:"upload-btn"},h(m(o)("importDialog.cleanAll")),1),i("button",{style:{"margin-left":"10px"},onClick:z,class:"upload-btn"},h(m(o)("importDialog.uploadSQL")),1),i("button",{style:{"margin-left":"10px"},onClick:M},h(m(o)("importDialog.selectGroup")),1),i("button",{style:{"margin-left":"10px"},onClick:Z},h(m(o)("importDialog.dumpSQL")),1),i("button",{style:{"margin-left":"10px"},onClick:se},h(m(o)("importDialog.dumpOnlySQL")),1),Te(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":B[0]||(B[0]=ne=>O.value=ne),placeholder:m(o)("importDialog.settingOutputName")},null,8,jw),[[Ae,O.value]]),i("input",{type:"file",ref_key:"fileInput",ref:k,onChange:R,accept:".sql",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"jsonFileInput",ref:A,onChange:he,accept:".json",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"txtFileInput",ref:U,onChange:q,accept:".txt",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"yamlFileInput",ref:W,onChange:le,accept:".yaml,.yml",style:{display:"none"}},null,544)]),i("div",Vw,[Te(i("input",{"onUpdate:modelValue":B[1]||(B[1]=ne=>d.value=ne),placeholder:m(o)("importDialog.pleaseMainCeb")},null,8,zw),[[Ae,d.value]]),i("button",{onClick:re},h(m(o)("importDialog.setMainCeb")),1),Te(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":B[2]||(B[2]=ne=>f.value=ne),placeholder:m(o)("importDialog.pleaseMainCebUuid")},null,8,qw),[[Ae,f.value]])]),i("div",Gw,[Te(i("input",{"onUpdate:modelValue":B[3]||(B[3]=ne=>c.value=ne),placeholder:m(o)("importDialog.pleaseSubGroup")},null,8,Qw),[[Ae,c.value]]),i("button",{onClick:ye},h(m(o)("importDialog.setSubCeb")),1),Te(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":B[4]||(B[4]=ne=>g.value=ne),placeholder:m(o)("importDialog.pleaseSubGroupUuid")},null,8,Yw),[[Ae,g.value]])]),i("div",Kw,[Te(i("input",{"onUpdate:modelValue":B[5]||(B[5]=ne=>a.value=ne),placeholder:"Tag"},null,512),[[Ae,a.value]]),Te(i("input",{"onUpdate:modelValue":B[6]||(B[6]=ne=>s.value=ne),placeholder:m(o)("importDialog.translater")},null,8,Jw),[[Ae,s.value]]),i("button",{onClick:ie},h(m(o)("importDialog.add")),1),i("button",{style:{"margin-left":"10px"},onClick:X,class:"upload-btn"},h(m(o)("importDialog.fromJSONImput")),1),i("button",{style:{"margin-left":"10px"},onClick:Y,class:"upload-btn"},h(m(o)("importDialog.fromTxtInput")),1),i("button",{style:{"margin-left":"10px"},onClick:V,class:"upload-btn"},h(m(o)("importDialog.fromYmalInput")),1)]),i("div",Xw,[r.value?(T(),C("div",Zw,[i("h3",null,h(P(r.value).text),1),u.value?(T(),C("div",e5,[i("h4",null,h(P(u.value).text),1),i("div",t5,[(T(!0),C(Oe,null,je(p.value,(ne,ge)=>(T(),C("div",{key:ge,style:{display:"flex","flex-direction":"column","align-items":"center"}},[i("p",null,h(P(ne).text)+" - "+h(P(ne).desc),1),i("div",n5,[v.value===ge?(T(),C("div",o5,[Te(i("input",{"onUpdate:modelValue":B[7]||(B[7]=ve=>b.value=ve),placeholder:"Tag"},null,512),[[Ae,b.value]]),Te(i("input",{"onUpdate:modelValue":B[8]||(B[8]=ve=>x.value=ve),placeholder:m(o)("importDialog.translater")},null,8,a5),[[Ae,x.value]]),i("button",{onClick:ve=>oe(ge)},h(m(o)("importDialog.sureYes")),9,s5),i("button",{style:{"margin-left":"10px"},onClick:Q},h(m(o)("importDialog.cancel")),1)])):(T(),C("button",{key:1,onClick:ve=>K(ge)},h(m(o)("importDialog.edit")),9,l5)),i("button",{style:{"margin-left":"10px"},onClick:ve=>F(ge)},h(m(o)("importDialog.delete")),9,r5)])]))),128))])])):me("",!0)])):me("",!0)])])]),_:1},8,["modelValue","title"]),ze(c4,{ref_key:"tagGroupSelectDialogItem",ref:de,onSureSelect:G},null,512)],64))}},[["__scopeId","data-v-98758c86"]]),u5={class:"tag-manager"},c5={class:"toolbar"},d5={class:"toolbar-top"},f5={class:"search-container"},p5=["placeholder"],g5={key:0,class:"no-results"},m5=["onClick"],h5={class:"result-content"},v5={class:"result-text"},_5={class:"result-path"},y5={class:"toolbar-bottom"},b5={class:"group-edit-mode"},w5={class:"category-tabs"},x5={class:"tabs-wrapper primary-tabs"},T5={class:"tabs-scroll"},S5=["onClick","onMouseenter","onMouseleave"],k5={class:"tab-text"},C5={key:0,class:"tab-actions"},E5=["onClick","title"],L5=["onClick","title"],$5=["onClick","title"],A5=["onClick","title"],I5={class:"group-edit-mode"},M5={key:0,class:"tabs-wrapper group-tabs"},O5={class:"tabs-scroll"},R5=["onClick","onMouseenter","onMouseleave"],N5={class:"tab-text"},D5={key:0,class:"tab-actions"},P5=["onClick","title"],F5=["onClick","title"],B5=["onClick","title"],U5=["onClick","title"],H5={class:"group-edit-mode"},W5={class:"tags-content"},j5={class:"tags-header"},V5={class:"tags-title"},z5={class:"tags-actions"},q5=["disabled"],G5=["disabled"],Q5=["disabled"],Y5=["disabled"],K5=["disabled"],J5={key:0,class:"tags-grid"},X5=["onClick"],Z5={class:"tag-actions"},e8=["onClick","title"],t8=["onClick","title"],n8=["onClick","title"],o8={class:"tag-desc"},a8=["value"],s8={key:0,class:"weilin-tools-dialog-overlay"},l8={class:"weilin-tools-dialog-header"},r8={class:"weilin-tools-dialog-body"},i8={key:0,class:"form-group"},u8=["placeholder"],c8={key:1,class:"form-group"},d8=["placeholder"],f8={class:"form-group"},p8={class:"color-picker"},g8={class:"color-controls"},m8={class:"alpha-control"},h8={class:"alpha-value"},v8={class:"weilin-tools-dialog-footer"},_8={key:1,class:"weilin-tools-dialog-overlay"},y8={class:"weilin-tools-dialog-header"},b8={class:"weilin-tools-dialog-body"},w8={class:"form-group"},x8=["placeholder"],T8={class:"form-group"},S8=["placeholder"],k8={class:"form-group"},C8={class:"color-picker"},E8={class:"color-controls"},L8={class:"alpha-control"},$8={class:"alpha-value"},A8={class:"weilin-tools-dialog-footer"},I8={key:2,class:"weilin-tools-dialog-overlay"},M8={class:"weilin-tools-dialog-header"},O8={class:"weilin-tools-dialog-body"},R8={class:"confirm-message"},N8={class:"weilin-tools-dialog-footer"},D8={key:3,class:"weilin-tools-dialog-overlay"},P8={class:"weilin-tools-dialog-content"},F8={class:"weilin-tools-dialog-header"},B8={class:"weilin-tools-dialog-body"},U8={class:"form-group"},H8=["value"],W8={class:"form-group"},j8={class:"radio-group"},V8={class:"weilin-tools-dialog-footer"},z8={key:4,class:"weilin-tools-dialog-overlay"},q8={class:"weilin-tools-dialog-content"},G8={class:"weilin-tools-dialog-header"},Q8={class:"weilin-tools-dialog-body"},Y8={class:"form-group"},K8=["value"],J8={class:"form-group"},X8={class:"radio-group"},Z8={class:"weilin-tools-dialog-footer"},e7={key:5,class:"weilin-tools-dialog-overlay"},t7={class:"weilin-tools-dialog-header"},n7={class:"weilin-tools-dialog-body"},o7={class:"config-section"},a7={class:"form-group"},s7={class:"width-control"},l7={class:"radio-label"},r7={class:"radio-label"},i7={class:"form-group"},u7={class:"form-group"},c7={class:"config-section"},d7={class:"form-group"},f7={class:"width-control"},p7={class:"radio-label"},g7={class:"radio-label"},m7={class:"form-group"},h7={class:"form-group"},v7={class:"weilin-tools-dialog-footer"},Dg=xt({__name:"tag_index",props:{tagManager:{type:String,default:"prompt"}},setup(e){Rl();const{t}=wt(),o=_([]),n=_(null),a=_([]),s=_([]),l=_(null),r=_(!1),u=_(!1),d=_(!1),c=_(!1),f=_("primary"),g=_([]),p=_(!1),v=_(!1),b=_("None"),x=_("None"),k=_(0),A=_(0),U=_(null),w=_(0),O=_(!1),W=_(null),V=_("before"),H=_(null),q=_("before"),he=_(null),le=_(null),R=_(!1),Y=_(!1),X=_(!1),z=_({primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}}),Z={primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}},se=e,P=_({name:"",color:"rgba(255, 123, 2, .4)",id_index:"",groups:[]}),F=_({name:"",id_index:"",color:"rgba(255, 123, 2, .4)",tags:[]}),K=_({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),oe=pe=>{const fe=pe.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(fe){const[,we,Ye,Pt,Ft]=fe,st=`#${((1<<24)+(parseInt(we)<<16)+(parseInt(Ye)<<8)+parseInt(Pt)).toString(16).slice(1)}`,Tt=Ft?Math.round(parseFloat(Ft)*100):100;return{hex:st,alpha:Tt}}return{hex:"#FFFFFF",alpha:100}},Q=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ie=async()=>{try{await Rt.getTagMainGroup().then(pe=>{o.value=pe}).catch(pe=>{console.error(pe),te({type:"warn",str:"message.networkError"})}),n.value&&await re(n.value.p_uuid),l.value&&await ye(l.value.g_uuid)}catch(pe){console.error("Tag管理器列表失败:",pe)}},re=async pe=>{try{await Rt.getTagSubGroup(pe).then(fe=>{a.value=fe}).catch(fe=>{console.error(fe),te({type:"warn",str:"message.networkError"})})}catch(fe){console.error("二级分类列表失败:",fe)}},ye=async pe=>{try{await Rt.getTagList(pe).then(fe=>{s.value=fe}).catch(fe=>{console.error(fe),te({type:"warn",str:"message.networkError"})})}catch(fe){console.error("Tag列表失败:",fe)}};vt(()=>{Wn(),window.addEventListener("click",cr),window.addEventListener("resize",Wn),window.addEventListener("message",ur),window.addEventListener("keydown",dr),mr(),Q()}),Eo(()=>{window.removeEventListener("click",cr),window.removeEventListener("resize",Wn),window.removeEventListener("message",ur),window.removeEventListener("keydown",dr)});const de=async pe=>{n.value=pe,l.value=null,p.value=!1,g.value=[],await re(pe.p_uuid)},M=async pe=>{l.value=pe,p.value=!1,g.value=[],await ye(pe.g_uuid)},G=pe=>{f.value=pe,d.value=!1,S.value=oe("rgba(255, 123, 2, .4)"),pe==="primary"?P.value={name:"",color:"rgba(255, 123, 2, .4)",groups:[]}:F.value={name:"",color:"rgba(255, 123, 2, .4)",tags:[]},r.value=!0},ae=pe=>{d.value=!0,f.value="primary",P.value={...pe},S.value=oe(pe.color),r.value=!0},D=pe=>{d.value=!0,f.value="group",F.value={...pe},S.value=oe(pe.color),r.value=!0},ee=()=>{if(f.value==="primary"){if(!P.value.name){te({type:"warn",str:"tagManager.categoryNameRequired"});return}d.value?o.value.findIndex(fe=>fe.id_index===P.value.id_index)!==-1&&Rt.editPrimaryCategory({id_index:P.value.id_index,name:P.value.name,color:P.value.color}).then(fe=>{fe.code===200?(Q(),te({type:"success",str:"message.editSuccess"})):fe.code===201?te({type:"error",str:"message.editNameExist"}):te({type:"error",str:"message.editFailed"})}).catch(fe=>{te({type:"warn",str:"message.networkError"})}):Rt.addPrimaryCategory({name:P.value.name,color:P.value.color}).then(pe=>{pe.code===200?(Q(),te({type:"success",str:"message.addSuccess"})):pe.code===201?te({type:"error",str:"message.editNameExist"}):te({type:"error",str:"message.addFailed"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})})}else{if(!F.value.name){te({type:"warn",str:"tagManager.groupNameRequired"});return}d.value?Rt.editSubCategory({id_index:F.value.id_index,name:F.value.name,color:F.value.color}).then(pe=>{pe.code===200?(Q(),te({type:"success",str:"message.editSuccess"})):pe.code===201?te({type:"error",str:"message.editNameExist"}):te({type:"error",str:"message.editFailed"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})}):Rt.addSubCategory({name:F.value.name,color:F.value.color,key:n.value.id_index,p_uuid:n.value.p_uuid}).then(pe=>{pe.code===200?(Q(),te({type:"success",str:"message.addSuccess"})):pe.code===201?te({type:"error",str:"message.editNameExist"}):te({type:"error",str:"message.editFailed"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})})}E()},L=()=>d.value?f.value==="primary"?t("tagManager.editPrimaryCategory"):t("tagManager.editSubCategory"):f.value==="primary"?t("tagManager.addPrimaryCategory"):t("tagManager.addSubCategory"),E=()=>{r.value=!1,P.value={id:"",name:"",parentId:null,subCategories:[],backgroundColor:"transparent"},S.value={hex:"#FFFFFF",alpha:0}},B=()=>{l.value&&(c.value=!1,K.value={id:"",text:"",desc:"",categoryId:l.value.id,g_uuid:l.value.g_uuid,backgroundColor:F.value.color},S.value=oe(F.value.color),u.value=!0)},ne=pe=>{c.value=!0,K.value={...pe},S.value=oe(pe.color),u.value=!0},ge=()=>{if(!K.value.text||!K.value.desc){te({type:"warn",str:"tagManager.textRequired"});return}c.value&&l.value?Rt.editTags({id_index:K.value.id_index,text:K.value.text,desc:K.value.desc,color:K.value.color}).then(pe=>{Q(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.editSuccess"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})}):l.value&&Rt.addNewTags({id_index:l.value.id_index,g_uuid:l.value.g_uuid,text:K.value.text,desc:K.value.desc,color:K.value.color?K.value.color:"rgba(255, 123, 2, .4)"}).then(pe=>{Q(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.addSuccess"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})}),ve()},ve=()=>{u.value=!1,K.value={text:"",desc:"",color:"rgba(255, 123, 2, .4)"},c.value=!1},S=_({hex:"#FFFFFF",alpha:100}),y=ot(()=>j(S.value.hex,S.value.alpha)),N=()=>{const pe=j(S.value.hex,S.value.alpha);r.value?f.value==="primary"?P.value.color=pe:F.value.color=pe:u.value&&(K.value.color=pe)},j=(pe,fe)=>{const we=parseInt(pe.slice(1,3),16),Ye=parseInt(pe.slice(3,5),16),Pt=parseInt(pe.slice(5,7),16);return`rgba(${we}, ${Ye}, ${Pt}, ${fe/100})`},xe=_(""),_e=_([]),J=_(!1),ue=async()=>{J.value=xe.value.trim().length>0;const pe=xe.value.trim().toLowerCase();if(!pe){_e.value=[];return}_e.value=[],await Rt.searchTag(pe).then(fe=>{_e.value=fe}).catch(fe=>{te({type:"warn",str:"message.networkError"})})};Ze(xe,()=>{ue()});const Me=async pe=>{const fe=o.value.find(we=>we.p_uuid===pe.p_uuid);fe&&await de(fe).then(async()=>{await Qe(async()=>{const we=a.value.find(Ye=>Ye.g_uuid===pe.g_uuid);we&&await M(we).then(async()=>{await Qe(()=>{w.value==1&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:pe.text},"*"),U.value=pe.id_index,setTimeout(()=>{const Ye=document.querySelector(".tag-wrapper.highlight");Ye&&Ye.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{U.value=null},5e3)})})})}),xe.value=""},Pe=pe=>{if(!pe||pe==="transparent")return"var(--primary-text)";let fe,we,Ye,Pt=1;if(pe.startsWith("rgba")){const st=pe.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);st&&([,fe,we,Ye,Pt]=st.map(Number))}else if(pe.startsWith("rgb")){const st=pe.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);st&&([,fe,we,Ye]=st.map(Number))}return Pt<.5?"var(--primary-text)":(fe*299+we*587+Ye*114)/1e3>128?"#000000":"#ffffff"},We=pe=>{se.tagManager==="prompt"&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:pe.text},"*")},Ve=_(!1),ut=_(""),dt=_(null),jt=ot(()=>{if(!dt.value)return"";switch(ut.value){case"category":return t("tagManager.deletePrimaryCategoryConfirm",{name:dt.value.name});case"group":return t("tagManager.deleteGroupConfirm",{name:dt.value.name});case"tag":return t("tagManager.deleteTagConfirm",{name:dt.value.text});case"deleteSelected":return t("tagManager.confirmDeleteSelected");default:return""}}),Fe=pe=>{ut.value="category",dt.value=pe,Ve.value=!0},Le=pe=>{ut.value="group",dt.value=pe,Ve.value=!0},Ce=pe=>{ut.value="tag",dt.value=pe,Ve.value=!0},at=async()=>{try{switch(ut.value){case"category":Rt.deletePrimaryCategory({p_uuid:dt.value.p_uuid}).then(pe=>{Q(),te({type:"success",str:"message.deleteSuccess"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})});break;case"group":Rt.deleteSubCategory({g_uuid:dt.value.g_uuid}).then(pe=>{Q(),te({type:"success",str:"message.deleteSuccess"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})});break;case"tag":Rt.deleteTags({id_index:dt.value.id_index}).then(pe=>{Q(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.deleteSuccess"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Rt.batchDeleteTags({id_indexs:g.value}).then(pe=>{Q(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.deleteSuccess"})}).catch(pe=>{te({type:"warn",str:"message.networkError"})});break}Hn()}catch(pe){console.error("删除失败:",pe)}},pn=async pe=>{const fe=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${pe.name.replace(/'/g,"''")}', '${pe.color}', ${pe.create_time}, '${pe.p_uuid}');`;try{const we=await Rt.getTagSubGroup(pe.p_uuid);let Ye=[];Ye.push(fe);for(const st of we){const Tt=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${st.name.replace(/'/g,"''")}', '${st.color}', ${st.create_time}, '${st.p_uuid}', '${st.g_uuid}');`;Ye.push(Tt);try{(await Rt.getTagList(st.g_uuid)).forEach(Mn=>{const Ps=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${Mn.text!=null&&Mn.text.length>0?Mn.text.replace(/'/g,"''"):""}', '${Mn.desc!=null&&Mn.desc.length>0?Mn.desc.replace(/'/g,"''"):""}', '${Mn.color}', ${Mn.create_time}, '${Mn.g_uuid}', '${Po()}');`;Ye.push(Ps)})}catch(Ds){console.error("Tag列表失败:",Ds),te({type:"warn",str:"message.shareTagError"})}}const Pt=new Blob([Ye.join(`
`)],{type:"text/sql"}),Ft=document.createElement("a");Ft.href=URL.createObjectURL(Pt),Ft.download=`${pe.name}_export_${Date.now()}.sql`,Ft.click(),te({type:"success",str:"tagManager.outputSuccess"})}catch(we){console.error("二级分类列表失败:",we),te({type:"warn",str:"message.shareGroupError"})}},aa=async pe=>{try{let fe=[];const we=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${pe.name.replace(/'/g,"''")}', '${pe.color}', ${pe.create_time}, '${pe.p_uuid}', '${pe.g_uuid}');`;fe.push(we);try{(await Rt.getTagList(pe.g_uuid)).forEach(st=>{const Tt=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${st.text!=null&&st.text.length>0?st.text.replace(/'/g,"''"):""}', '${st.desc!=null&&st.desc.length>0?st.desc.replace(/'/g,"''"):""}', '${st.color}', ${st.create_time}, '${st.g_uuid}', '${Po()}');`;fe.push(Tt)})}catch(Ft){console.error("Tag列表失败:",Ft),te({type:"warn",str:"message.shareTagError"})}const Ye=new Blob([fe.join(`
`)],{type:"text/sql"}),Pt=document.createElement("a");Pt.href=URL.createObjectURL(Ye),Pt.download=`${pe.name}_export_${Date.now()}.sql`,Pt.click(),te({type:"success",str:"tagManager.outputSuccess"})}catch(fe){console.error("二级分类列表失败:",fe),te({type:"warn",str:"message.shareGroupError"})}},Na=pe=>{H.value=pe.id_index,O.value=!0},lr=async()=>{try{Rt.moveTag({id_index:H.value,reference_id_index:W.value,position:V.value}).then(pe=>{Q(),O.value=!1,te({type:"success",str:t("message.moveSuccess")})}).catch(pe=>{te({type:"error",str:t("message.moveFailed")})})}catch(pe){console.error("移动标签失败:",pe),te({type:"error",str:t("message.moveFailed")})}},Da=_([]),sa=_(1),Pa=(pe,fe)=>{sa.value=fe,fe===1?(Da.value=o.value,he.value=pe.id_index,v.value=!0):(Da.value=a.value,he.value=pe.id_index,v.value=!0)},Un=async()=>{if(sa.value===1)try{Rt.moveMainGroup({id_index:he.value,reference_id_index:le.value,position:q.value}).then(pe=>{Q(),v.value=!1,te({type:"success",str:t("message.moveSuccess")})}).catch(pe=>{te({type:"error",str:t("message.moveFailed")})})}catch(pe){console.error("移动标签失败:",pe),te({type:"error",str:t("message.moveFailed")})}else try{Rt.moveSubGroup({id_index:he.value,reference_id_index:le.value,position:q.value}).then(pe=>{Q(),v.value=!1,te({type:"success",str:t("message.moveSuccess")})}).catch(pe=>{te({type:"error",str:t("message.moveFailed")})})}catch(pe){console.error("移动标签失败:",pe),te({type:"error",str:t("message.moveFailed")})}},fu=()=>{p.value=!0,R.value=!0},Ho=()=>{p.value=!1,R.value=!1,g.value=[]},In=()=>{g.value.length!==0&&(ut.value="deleteSelected",dt.value={},Ve.value=!0)},la=()=>{p.value=!0,Y.value=!0},Fa=()=>{p.value=!1,Y.value=!1,g.value=[]},rr=()=>{if(g.value.length===0){te({type:"warn",str:"tagManager.noTagsSelected"});return}const pe={};g.value.forEach(Ye=>{pe[Ye.text]=Ye.desc});const fe=new Blob([Ng.dump(pe)],{type:"text/yaml"}),we=document.createElement("a");we.href=URL.createObjectURL(fe),we.download=`selected_tags_export_${Date.now()}.yaml`,we.click(),te({type:"success",str:"tagManager.outputSuccess"}),Fa()},Hn=()=>{Ve.value=!1,ut.value="",dt.value=null},Ba=async()=>{try{await Q()}catch(pe){console.error("刷新标签列表失败:",pe)}},ra=_(),ir=_({}),Wn=()=>{if(ra.value){const pe=ra.value.getBoundingClientRect();ir.value={position:"fixed",top:`${pe.bottom}px`,left:`${pe.left}px`,width:`${pe.width}px`,zIndex:1e3}}},ur=pe=>{pe.data.type==="weilin_prompt_ui_window_change_tagManager_position"||pe.data.type==="weilin_prompt_ui_window_change_tagManager_size"||pe.data.type==="weilin_prompt_ui_window_change_tagManager_scroll"||pe.data.type==="weilin_prompt_ui_window_change_promptBox_position"||pe.data.type==="weilin_prompt_ui_window_change_promptBox_size"||pe.data.type==="weilin_prompt_ui_window_change_promptBox_scroll"?Wn():pe.data.type==="weilin_prompt_ui_window_change_click_outside"||pe.data.type==="weilin_prompt_ui_tag_manager_refresh"&&ie()},cr=pe=>{J.value&&!ra.value.contains(pe.target)&&(J.value=!1)},dr=pe=>{pe.key==="Escape"&&(J.value=!1)},fr=pe=>{A.value==1&&(b.value="TabID-"+pe)},pr=pe=>{b.value="None"},pu=pe=>{k.value==1&&(x.value="TabID-"+pe)},gr=pe=>{x.value="None"},Ns=_(),gu=()=>{Ns.value.open()},mr=()=>{const pe=JSON.parse(JSON.stringify(Z));try{const fe=localStorage.getItem("weilin_tag_manager_tab_size_config");if(fe){const we=JSON.parse(fe);z.value={...pe,...we}}else z.value={...pe}}catch(fe){console.error("读取标签尺寸配置失败:",fe),z.value={...pe}}},mu=()=>{try{localStorage.setItem("weilin_tag_manager_tab_size_config",JSON.stringify(z.value)),te({type:"success",str:"tagManager.tabSizeConfigSaved"}),X.value=!1}catch(pe){console.error("保存标签尺寸配置失败:",pe),te({type:"error",str:"tagManager.tabSizeConfigSaveFailed"})}},Ua=()=>{X.value=!0},hr=()=>{X.value=!1,mr()},Ha=()=>{const pe=JSON.parse(JSON.stringify(Z));z.value={...pe}};return(pe,fe)=>(T(),C("div",u5,[i("div",c5,[i("div",d5,[i("button",{class:"refresh-btn",onClick:Ba},[...fe[40]||(fe[40]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),i("div",f5,[Te(i("input",{type:"text","onUpdate:modelValue":fe[0]||(fe[0]=we=>xe.value=we),placeholder:m(t)("tagManager.searchPlaceholder"),class:"search-input",ref_key:"searchInput",ref:ra,onInput:fe[1]||(fe[1]=we=>J.value=xe.value.trim().length>0)},null,40,p5),[[Ae,xe.value]]),J.value?(T(),C("div",{key:0,class:"search-results",style:mt(ir.value)},[_e.value.length===0?(T(),C("div",g5,h(m(t)("tagManager.noResults")),1)):(T(!0),C(Oe,{key:1},je(_e.value,(we,Ye)=>(T(),C("div",{key:`${Ye}-search_item`,class:"search-result-item",onClick:Pt=>Me(we)},[i("div",h5,[i("span",v5,h(we.name||we.text),1),i("span",_5,h(we.where),1)])],8,m5))),128))],4)):me("",!0)]),i("button",{class:"import-btn",onClick:gu},h(m(t)("tagManager.importTags")),1)]),i("div",y5,[i("div",b5,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":fe[2]||(fe[2]=we=>w.value=we),"true-value":1,"false-value":0},null,512),[[Bt,w.value]]),qe(" "+h(m(t)("tagManager.autoAddSearchTag")),1)])]),i("button",{class:"tab-size-btn",onClick:Ua},h(m(t)("tagManager.modifyTabSize")),1)])]),i("div",w5,[i("div",x5,[i("div",T5,[(T(!0),C(Oe,null,je(o.value,(we,Ye)=>{var Pt,Ft,st;return T(),C("div",{key:"Tabss-"+Ye,class:Ee(["tab-item",{active:((Pt=n.value)==null?void 0:Pt.name)===we.name}]),style:mt({backgroundColor:((Ft=n.value)==null?void 0:Ft.name)===we.name?"var(--primary-color)":we.color,color:((st=n.value)==null?void 0:st.name)===we.name?"#ffffff":Pe(we.color),width:z.value.primaryTab.width==="fit-content"?"fit-content":z.value.primaryTab.width+"px",height:z.value.primaryTab.height+"px",fontSize:z.value.primaryTab.fontSize+"px"}),onClick:Tt=>de(we),onMouseenter:Tt=>fr(Ye),onMouseleave:Tt=>pr()},[i("span",k5,h(we.name),1),b.value=="TabID-"+Ye?(T(),C("div",C5,[i("button",{class:"action-btn move",onClick:Je(Tt=>Pa(we,1),["stop"]),title:m(t)("tagManager.moveGroup")},[...fe[41]||(fe[41]=[i("svg",{viewBox:"0 0 24 24",class:"move-icon"},[i("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,E5),i("button",{class:"action-btn edit",onClick:Je(Tt=>ae(we),["stop"]),title:m(t)("tagManager.edit")},[...fe[42]||(fe[42]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,L5),i("button",{class:"action-btn share",onClick:Je(Tt=>pn(we),["stop"]),title:m(t)("tagManager.share")},[...fe[43]||(fe[43]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)])],8,$5),i("button",{class:"action-btn delete",onClick:Je(Tt=>Fe(we),["stop"]),title:m(t)("tagManager.delete")},[...fe[44]||(fe[44]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,A5)])):me("",!0)],46,S5)}),128)),i("button",{class:"add-tab",onClick:fe[3]||(fe[3]=we=>G("primary"))},[fe[45]||(fe[45]=i("span",{class:"plus-icon"},"+",-1)),qe(" "+h(m(t)("tagManager.addPrimaryCategory")),1)]),i("div",I5,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":fe[4]||(fe[4]=we=>A.value=we),"true-value":1,"false-value":0},null,512),[[Bt,A.value]]),qe(" "+h(A.value==1?m(t)("tagManager.exitEditMode"):m(t)("tagManager.editGroupMode")),1)])])])]),n.value?(T(),C("div",M5,[i("div",O5,[(T(!0),C(Oe,null,je(a.value,(we,Ye)=>{var Pt,Ft,st;return T(),C("div",{key:"TabsSw-"+Ye,class:Ee(["tab-item",{active:((Pt=l.value)==null?void 0:Pt.name)===we.name}]),style:mt({backgroundColor:((Ft=l.value)==null?void 0:Ft.name)===we.name?"var(--primary-color)":we.color,color:((st=l.value)==null?void 0:st.name)===we.name?"#ffffff":Pe(we.color),width:z.value.groupTab.width==="fit-content"?"fit-content":z.value.groupTab.width+"px",height:z.value.groupTab.height+"px",fontSize:z.value.groupTab.fontSize+"px"}),onClick:Tt=>M(we),onMouseenter:Tt=>pu(Ye),onMouseleave:Tt=>gr()},[i("span",N5,h(we.name),1),x.value=="TabID-"+Ye?(T(),C("div",D5,[i("button",{class:"action-btn move",onClick:Je(Tt=>Pa(we,2),["stop"]),title:m(t)("tagManager.moveGroup")},[...fe[46]||(fe[46]=[i("svg",{viewBox:"0 0 24 24",class:"move-icon"},[i("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,P5),i("button",{class:"action-btn edit",onClick:Je(Tt=>D(we),["stop"]),title:m(t)("tagManager.edit")},[...fe[47]||(fe[47]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,F5),i("button",{class:"action-btn delete",onClick:Je(Tt=>Le(we),["stop"]),title:m(t)("tagManager.delete")},[...fe[48]||(fe[48]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,B5),i("button",{class:"action-btn share",onClick:Je(Tt=>aa(we),["stop"]),title:m(t)("tagManager.share")},[...fe[49]||(fe[49]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)])],8,U5)])):me("",!0)],46,R5)}),128)),n.value?(T(),C("button",{key:0,class:"add-tab",onClick:fe[5]||(fe[5]=we=>G("group"))},[fe[50]||(fe[50]=i("span",{class:"plus-icon"},"+",-1)),qe(" "+h(m(t)("tagManager.addGroup")),1)])):me("",!0),i("div",H5,[i("label",null,[Te(i("input",{type:"checkbox","onUpdate:modelValue":fe[6]||(fe[6]=we=>k.value=we),"true-value":1,"false-value":0},null,512),[[Bt,k.value]]),qe(" "+h(k.value==1?m(t)("tagManager.exitEditMode"):m(t)("tagManager.editGroupMode")),1)])])])])):me("",!0)]),i("div",W5,[i("div",j5,[i("div",V5,h(l.value?l.value.name:m(t)("tagManager.selectCategory")),1),i("div",z5,[i("button",{class:"add-btn",onClick:B,disabled:!l.value},[fe[51]||(fe[51]=i("span",{class:"plus-icon"},"+",-1)),qe(" "+h(m(t)("tagManager.addTag")),1)],8,q5),Y.value?(T(),C("button",{key:0,class:"share-selected-btn",onClick:rr,disabled:!g.value.length},h(m(t)("tagManager.shareSelected")),9,G5)):(T(),C("button",{key:1,class:"share-btn",onClick:la,disabled:!l.value},h(m(t)("tagManager.batchShare")),9,Q5)),Y.value?(T(),C("button",{key:2,class:"cancel-delete-btn",onClick:Fa},h(m(t)("tagManager.cancelShare")),1)):me("",!0),R.value?(T(),C("button",{key:3,class:"delete-btn",onClick:In,disabled:!g.value.length},h(m(t)("tagManager.deleteSelected")),9,Y5)):(T(),C("button",{key:4,class:"delete-action-btn",onClick:fu,disabled:!l.value},h(m(t)("tagManager.hasDeleteAction")),9,K5)),R.value?(T(),C("button",{key:5,class:"cancel-delete-btn",onClick:Ho},h(m(t)("tagManager.cancelDelete")),1)):me("",!0)])]),l.value?(T(),C("div",J5,[(T(!0),C(Oe,null,je(s.value,we=>(T(),C("div",{key:"tag-grid-"+we.id_index,class:Ee(U.value===we.id_index?"tag-wrapper highlight":"tag-wrapper")},[i("div",{class:"tag-content",onClick:Ye=>We(we)},[i("div",{class:"tag-main",style:mt({backgroundColor:we.color||"transparent"})},[qe(h(we.desc)+" ",1),i("div",Z5,[i("button",{class:"action-btn move",onClick:Je(Ye=>Na(we),["stop"]),title:m(t)("tagManager.moveTag")},[...fe[52]||(fe[52]=[i("svg",{viewBox:"0 0 24 24",class:"move-icon"},[i("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,e8),i("button",{class:"action-btn edit",onClick:Je(Ye=>ne(we),["stop"]),title:m(t)("tagManager.editTag")},[...fe[53]||(fe[53]=[i("svg",{viewBox:"0 0 24 24",class:"edit-icon"},[i("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,t8),i("button",{class:"action-btn delete",onClick:Je(Ye=>Ce(we),["stop"]),title:m(t)("tagManager.deleteTag")},[...fe[54]||(fe[54]=[i("svg",{viewBox:"0 0 24 24",class:"delete-icon"},[i("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,n8)])],4),i("div",o8,h(we.text),1)],8,X5),p.value?Te((T(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":fe[7]||(fe[7]=Ye=>g.value=Ye),value:we,class:"tag-checkbox"},null,8,a8)),[[Bt,g.value]]):me("",!0)],2))),128))])):me("",!0)]),r.value?(T(),C("div",s8,[i("div",{class:"weilin-tools-dialog-content",onMousedown:fe[12]||(fe[12]=Je(()=>{},["stop"]))},[i("div",l8,[i("h2",null,h(L()),1),i("button",{class:"close-btn",onClick:E},"×")]),i("div",r8,[f.value=="primary"?(T(),C("div",i8,[i("label",null,h(m(t)("tagManager.categoryName")),1),Te(i("input",{type:"text","onUpdate:modelValue":fe[8]||(fe[8]=we=>P.value.name=we),placeholder:m(t)("tagManager.categoryNamePlaceholder"),onKeyup:tn(ee,["enter"])},null,40,u8),[[Ae,P.value.name]])])):me("",!0),f.value=="group"?(T(),C("div",c8,[i("label",null,h(m(t)("tagManager.groupName")),1),Te(i("input",{type:"text","onUpdate:modelValue":fe[9]||(fe[9]=we=>F.value.name=we),placeholder:m(t)("tagManager.groupNamePlaceholder"),onKeyup:tn(ee,["enter"])},null,40,d8),[[Ae,F.value.name]])])):me("",!0),i("div",f8,[i("label",null,h(m(t)("tagManager.backgroundColor")),1),i("div",p8,[i("div",{class:"color-preview",style:mt({backgroundColor:y.value})},null,4),i("div",g8,[Te(i("input",{type:"color","onUpdate:modelValue":fe[10]||(fe[10]=we=>S.value.hex=we),onInput:N,class:"color-input"},null,544),[[Ae,S.value.hex]]),i("div",m8,[Te(i("input",{type:"range","onUpdate:modelValue":fe[11]||(fe[11]=we=>S.value.alpha=we),min:"0",max:"100",onInput:N,class:"alpha-slider"},null,544),[[Ae,S.value.alpha,void 0,{number:!0}]]),i("span",h8,h(S.value.alpha)+"%",1)])])])])]),i("div",v8,[i("button",{class:"cancel-btn",onClick:E},h(m(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:ee},h(m(t)("common.confirm")),1)])],32)])):me("",!0),u.value?(T(),C("div",_8,[i("div",{class:"weilin-tools-dialog-content",onMousedown:fe[17]||(fe[17]=Je(()=>{},["stop"]))},[i("div",y8,[i("h2",null,h(c.value?m(t)("tagManager.editTag"):m(t)("tagManager.addTag")),1),i("button",{class:"close-btn",onClick:ve},"×")]),i("div",b8,[i("div",w8,[i("label",null,h(m(t)("tagManager.text")),1),Te(i("input",{type:"text","onUpdate:modelValue":fe[13]||(fe[13]=we=>K.value.desc=we),placeholder:m(t)("tagManager.textPlaceholder")},null,8,x8),[[Ae,K.value.desc]])]),i("div",T8,[i("label",null,h(m(t)("tagManager.description")),1),Te(i("textarea",{"onUpdate:modelValue":fe[14]||(fe[14]=we=>K.value.text=we),placeholder:m(t)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,S8),[[Ae,K.value.text]])]),i("div",k8,[i("label",null,h(m(t)("tagManager.backgroundColor")),1),i("div",C8,[i("div",{class:"color-preview",style:mt({backgroundColor:y.value})},null,4),i("div",E8,[Te(i("input",{type:"color","onUpdate:modelValue":fe[15]||(fe[15]=we=>S.value.hex=we),onInput:N,class:"color-input"},null,544),[[Ae,S.value.hex]]),i("div",L8,[Te(i("input",{type:"range","onUpdate:modelValue":fe[16]||(fe[16]=we=>S.value.alpha=we),min:"0",max:"100",onInput:N,class:"alpha-slider"},null,544),[[Ae,S.value.alpha,void 0,{number:!0}]]),i("span",$8,h(S.value.alpha)+"%",1)])])])])]),i("div",A8,[i("button",{class:"cancel-btn",onClick:ve},h(m(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:ge},h(m(t)("common.confirm")),1)])],32)])):me("",!0),Ve.value?(T(),C("div",I8,[i("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:fe[18]||(fe[18]=Je(()=>{},["stop"]))},[i("div",M8,[i("h2",null,h(m(t)("common.confirmDelete")),1),i("button",{class:"close-btn",onClick:Hn},"×")]),i("div",O8,[i("p",R8,h(jt.value),1)]),i("div",N8,[i("button",{class:"cancel-btn",onClick:Hn},h(m(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:at},h(m(t)("common.delete")),1)])],32)])):me("",!0),O.value?(T(),C("div",D8,[i("div",P8,[i("div",F8,[i("h2",null,h(m(t)("tagManager.moveTag")),1),i("button",{class:"close-btn",onClick:fe[19]||(fe[19]=we=>O.value=!1)},"×")]),i("div",B8,[i("div",U8,[i("label",null,h(m(t)("tagManager.targetTag")),1),Te(i("select",{"onUpdate:modelValue":fe[20]||(fe[20]=we=>W.value=we),class:"form-select"},[(T(!0),C(Oe,null,je(s.value,we=>(T(),C("option",{key:we.id_index,value:we.id_index},h(we.desc+" --> "+we.text),9,H8))),128))],512),[[cn,W.value]])]),i("div",W8,[i("label",null,h(m(t)("tagManager.movePosition")),1),i("div",j8,[i("label",null,[Te(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":fe[21]||(fe[21]=we=>V.value=we),value:"before"},null,512),[[po,V.value]]),qe(" "+h(m(t)("tagManager.moveBefore")),1)]),i("label",null,[Te(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":fe[22]||(fe[22]=we=>V.value=we),value:"after"},null,512),[[po,V.value]]),qe(" "+h(m(t)("tagManager.moveAfter")),1)])])])]),i("div",V8,[i("button",{class:"cancel-btn",onClick:fe[23]||(fe[23]=we=>O.value=!1)},h(m(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:lr},h(m(t)("common.confirm")),1)])])])):me("",!0),v.value?(T(),C("div",z8,[i("div",q8,[i("div",G8,[i("h2",null,h(m(t)("tagManager.moveGroup")),1),i("button",{class:"close-btn",onClick:fe[24]||(fe[24]=we=>v.value=!1)},"×")]),i("div",Q8,[i("div",Y8,[i("label",null,h(m(t)("tagManager.targetGroup")),1),Te(i("select",{"onUpdate:modelValue":fe[25]||(fe[25]=we=>le.value=we),class:"form-select"},[(T(!0),C(Oe,null,je(Da.value,(we,Ye)=>(T(),C("option",{key:"group_move_id"+Ye,value:we.id_index},h(we.name),9,K8))),128))],512),[[cn,le.value]])]),i("div",J8,[i("label",null,h(m(t)("tagManager.movePosition")),1),i("div",X8,[i("label",null,[Te(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":fe[26]||(fe[26]=we=>q.value=we),value:"before"},null,512),[[po,q.value]]),qe(" "+h(m(t)("tagManager.moveGroupBefore")),1)]),i("label",null,[Te(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":fe[27]||(fe[27]=we=>q.value=we),value:"after"},null,512),[[po,q.value]]),qe(" "+h(m(t)("tagManager.moveGroupAfter")),1)])])])]),i("div",Z8,[i("button",{class:"cancel-btn",onClick:fe[28]||(fe[28]=we=>v.value=!1)},h(m(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:Un},h(m(t)("common.confirm")),1)])])])):me("",!0),X.value?(T(),C("div",e7,[i("div",{class:"weilin-tools-dialog-content tab-size-weilin-tools-dialog",onMousedown:fe[39]||(fe[39]=Je(()=>{},["stop"]))},[i("div",t7,[i("h2",null,h(m(t)("tagManager.tabSizeConfig")),1),i("button",{class:"close-btn",onClick:hr},"×")]),i("div",n7,[i("div",o7,[i("h3",null,h(m(t)("tagManager.primaryTabConfig")),1),i("div",a7,[i("label",null,h(m(t)("tagManager.tabWidth")),1),i("div",s7,[i("label",l7,[Te(i("input",{type:"radio","onUpdate:modelValue":fe[29]||(fe[29]=we=>z.value.primaryTab.width=we),value:"fit-content"},null,512),[[po,z.value.primaryTab.width]]),qe(" "+h(m(t)("tagManager.fitContent")),1)]),i("label",r7,[Te(i("input",{type:"radio","onUpdate:modelValue":fe[30]||(fe[30]=we=>z.value.primaryTab.width=we),value:"custom"},null,512),[[po,z.value.primaryTab.width]]),qe(" "+h(m(t)("tagManager.customWidth")),1)]),z.value.primaryTab.width!=="fit-content"?Te((T(),C("input",{key:0,type:"number","onUpdate:modelValue":fe[31]||(fe[31]=we=>z.value.primaryTab.width=we),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,z.value.primaryTab.width,void 0,{number:!0}]]):me("",!0)])]),i("div",i7,[i("label",null,h(m(t)("tagManager.tabHeight"))+" ("+h(z.value.primaryTab.height)+"px)",1),Te(i("input",{type:"range","onUpdate:modelValue":fe[32]||(fe[32]=we=>z.value.primaryTab.height=we),min:"20",max:"60",class:"range-input"},null,512),[[Ae,z.value.primaryTab.height,void 0,{number:!0}]])]),i("div",u7,[i("label",null,h(m(t)("tagManager.fontSize"))+" ("+h(z.value.primaryTab.fontSize)+"px)",1),Te(i("input",{type:"range","onUpdate:modelValue":fe[33]||(fe[33]=we=>z.value.primaryTab.fontSize=we),min:"8",max:"20",class:"range-input"},null,512),[[Ae,z.value.primaryTab.fontSize,void 0,{number:!0}]])])]),i("div",c7,[i("h3",null,h(m(t)("tagManager.groupTabConfig")),1),i("div",d7,[i("label",null,h(m(t)("tagManager.tabWidth")),1),i("div",f7,[i("label",p7,[Te(i("input",{type:"radio","onUpdate:modelValue":fe[34]||(fe[34]=we=>z.value.groupTab.width=we),value:"fit-content"},null,512),[[po,z.value.groupTab.width]]),qe(" "+h(m(t)("tagManager.fitContent")),1)]),i("label",g7,[Te(i("input",{type:"radio","onUpdate:modelValue":fe[35]||(fe[35]=we=>z.value.groupTab.width=we),value:"custom"},null,512),[[po,z.value.groupTab.width]]),qe(" "+h(m(t)("tagManager.customWidth")),1)]),z.value.groupTab.width!=="fit-content"?Te((T(),C("input",{key:0,type:"number","onUpdate:modelValue":fe[36]||(fe[36]=we=>z.value.groupTab.width=we),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,z.value.groupTab.width,void 0,{number:!0}]]):me("",!0)])]),i("div",m7,[i("label",null,h(m(t)("tagManager.tabHeight"))+" ("+h(z.value.groupTab.height)+"px)",1),Te(i("input",{type:"range","onUpdate:modelValue":fe[37]||(fe[37]=we=>z.value.groupTab.height=we),min:"20",max:"60",class:"range-input"},null,512),[[Ae,z.value.groupTab.height,void 0,{number:!0}]])]),i("div",h7,[i("label",null,h(m(t)("tagManager.fontSize"))+" ("+h(z.value.groupTab.fontSize)+"px)",1),Te(i("input",{type:"range","onUpdate:modelValue":fe[38]||(fe[38]=we=>z.value.groupTab.fontSize=we),min:"8",max:"20",class:"range-input"},null,512),[[Ae,z.value.groupTab.fontSize,void 0,{number:!0}]])])])]),i("div",v7,[i("button",{class:"reset-btn",onClick:Ha},h(m(t)("tagManager.resetDefault")),1),i("button",{class:"cancel-btn",onClick:hr},h(m(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:mu},h(m(t)("common.confirm")),1)])],32)])):me("",!0),ze(i5,{ref_key:"importTagDialogItem",ref:Ns},null,512)]))}},[["__scopeId","data-v-c9c6726d"]]),er=100,Pg=_(""),bo=_({}),Ue={setActiveWindow(e){Pg.value!==e&&(Pg.value=e,Object.keys(bo.value).forEach(t=>{bo.value[t]=er}),bo.value[e]=er+10)},getZIndex(e){return bo.value[e]||(bo.value[e]=er),bo.value[e]},registerWindow(e){bo.value[e]||(bo.value[e]=er)},unregisterWindow(e){delete bo.value[e]}},Tn={getLoraList:async e=>await Ie({url:"/get_lora_list",method:"get",params:e}),getAllLoraList:async e=>await Ie({url:"/get_lora_load_all",method:"get",params:e}),getAllLoraStatus:async e=>await Ie({url:"/get_lora_load_status",method:"get",params:e}),getLoraDetail:async e=>await Ie({url:"/lorainfo/api/loras/info",method:"get",params:e}),getLoraRefresh:async e=>await Ie({url:"/lorainfo/api/loras/info/refresh",method:"get",params:e}),postUplaodImg:async(e,t,o)=>{const n=new FormData;return n.append("image",e),n.append("path",t),n.append("fileName",o),await Ie({url:"/lorainfo/api/loras/set/img",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},postLoraSave:async(e,t)=>{const o=new FormData;return o.append("json",JSON.stringify(t)),await Ie({url:"/lorainfo/api/loras/info?file="+e,method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}})},postLoraDelet:async(e,t)=>await Ie({url:"/lorainfo/api/delete/loras/info/filed?file="+e,method:"post",data:{json:t}}),getLoraFolderList:async()=>await Ie({url:"/get_lora_folder_list",method:"post"}),getLoraRangeList:async e=>await Ie({url:"/get_lora_list_by_range",method:"post",data:{range:e}}),searchLoraGetFolderList:async e=>await Ie({url:"/get_lora_list_by_search",method:"post",data:{search:e}})},_7=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Fg=gn({name:"JsonString",props:{jsonValue:{type:String,required:!0}},setup(e){const t=_(!0),o=_(!1),n=_(null),a=_(null);vt(()=>{n.value&&a.value&&n.value.offsetHeight>a.value.offsetHeight&&(o.value=!0)});const s=()=>{t.value=!t.value};return()=>{const l=e.jsonValue,r=_7.test(l);let u;!t.value&&o.value?u=Lt("span",{class:{"jv-ellipsis":!0},onClick:s},"..."):r?u=Lt("span",{class:{"jv-item":!0,"jv-string":!0},ref:n},[Lt("span",null,'"'),Lt("a",{href:l,target:"_blank",class:"jv-link"},l),Lt("span",null,'"')]):u=Lt("span",{class:{"jv-item":!0,"jv-string":!0},ref:n},`"${l}"`);const d=[];return o.value&&d.push(Lt("span",{class:{"jv-toggle":!0,open:t.value},onClick:s})),d.push(Lt("span",{class:{"jv-holder-node":!0},ref:a})),d.push(u),Lt("span",{},d)}}}),y7={class:Ee(["jv-item","jv-undefined"])},b7=gn({__name:"json-undefined",props:{jsonValue:{type:null,default:void 0}},setup(e){const t=e,o=ot(()=>t.jsonValue===null?"null":"undefined");return(n,a)=>(T(),C("span",y7,h(o.value),1))}}),w7=gn({__name:"json-number",props:{jsonValue:{type:Number,required:!0}},setup(e){const t=e,o=ot(()=>Number.isInteger(t.jsonValue));return(n,a)=>(T(),C("span",{class:Ee(["jv-item","jv-number",o.value?"jv-number-integer":"jv-number-float"])},h(e.jsonValue.toString()),3))}}),x7={class:Ee(["jv-item","jv-boolean"])},T7=gn({__name:"json-boolean",props:{jsonValue:{type:Boolean,required:!0}},setup(e){return(t,o)=>(T(),C("span",x7,h(e.jsonValue.toString()),1))}}),S7=gn({name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const o=_({});let n=null;const a=u=>{setTimeout(()=>{o.value=u},0)};Ze(()=>e.jsonValue,u=>{a(u)},{immediate:!0,deep:!0});const s=ot(()=>{if(!e.sort)return o.value;const u=Object.keys(o.value).sort(),d={};return u.forEach(c=>{d[c]=o.value[c]}),d}),l=()=>{if(n)try{n.dispatchEvent(new Event("resized"))}catch{const u=document.createEvent("Event");u.initEvent("resized",!0,!1),n.dispatchEvent(u)}},r=()=>{t("update:expand",!e.expand),l()};return()=>{const u=[];if(u.push(Lt("span",{class:["jv-item","jv-object"]},"{")),e.expand){for(const d in s.value)if(s.value.hasOwnProperty(d)){const c=s.value[d];u.push(Lt(su,{key:d,sort:e.sort,keyName:d,depth:e.depth+1,value:c,previewMode:e.previewMode}))}}return!e.expand&&Object.keys(o.value).length>0&&u.push(Lt("span",{class:"jv-ellipsis",onClick:r,title:`click to reveal object content (keys: ${Object.keys(s.value).join(", ")})`},"...")),u.push(Lt("span",{class:["jv-item","jv-object"]},"}")),Lt("span",{ref:d=>{n=d}},u)}}}),k7=gn({name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const o=_([]);let n=null;const a=(l,r=0)=>{r===0&&(o.value=[]),setTimeout(()=>{l&&l.length>r&&(o.value.push(l[r]),a(l,r+1))},0)};Ze(()=>e.jsonValue,l=>{a(l)},{immediate:!0,deep:!0});const s=()=>{if(t("update:expand",!e.expand),n)try{n.dispatchEvent(new Event("resized"))}catch{const l=document.createEvent("Event");l.initEvent("resized",!0,!1),n.dispatchEvent(l)}};return()=>{const l=[];return!e.previewMode&&!e.keyName&&l.push(Lt("span",{class:{"jv-toggle":!0,open:!!e.expand},onClick:s})),l.push(Lt("span",{class:["jv-item","jv-array"]},"[")),e.expand&&o.value.forEach((r,u)=>{l.push(Lt(su,{key:u,sort:e.sort,depth:e.depth+1,value:r,previewMode:e.previewMode}))}),!e.expand&&o.value.length>0&&l.push(Lt("span",{class:"jv-ellipsis",onClick:s,title:`click to reveal ${o.value.length} hidden items`},"...")),l.push(Lt("span",{class:["jv-item","jv-array"]},"]")),Lt("span",{ref:r=>{n=r}},l)}}}),C7=["title"],E7=gn({__name:"json-function",props:{jsonValue:{type:Function,required:!0}},setup(e){return(t,o)=>(T(),C("span",{class:Ee(["jv-item","jv-function"]),title:e.jsonValue.toString()}," <function> ",8,C7))}}),L7={class:Ee(["jv-item","jv-string"])},$7=gn({__name:"json-date",props:{jsonValue:{type:Date,required:!0}},setup(e){const t=e,o=io("timeformat",a=>a.toLocaleString()),n=ot(()=>o(t.jsonValue));return(a,s)=>(T(),C("span",L7,' "'+h(n.value)+'" ',1))}}),A7={class:Ee(["jv-item","jv-regexp"])},I7=gn({__name:"json-regexp",props:{jsonValue:{type:RegExp,required:!0}},setup(e){return(t,o)=>(T(),C("span",A7,h(e.jsonValue.toString()),1))}}),su=gn({name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},setup(e){const t=io("expandDepth",1/0),o=io("keyClick",()=>{}),n=_(!0);let a=null;vt(()=>{n.value=e.previewMode||e.depth<t});const s=()=>{if(n.value=!n.value,a)try{a.dispatchEvent(new Event("resized"))}catch{const l=document.createEvent("Event");l.initEvent("resized",!0,!1),a.dispatchEvent(l)}};return()=>{const l=[];let r;e.value===null||e.value===void 0?r=b7:Array.isArray(e.value)?r=k7:e.value instanceof Date?r=$7:e.value instanceof RegExp?r=I7:typeof e.value=="object"?r=S7:typeof e.value=="number"?r=w7:typeof e.value=="string"?r=Fg:typeof e.value=="boolean"?r=T7:typeof e.value=="function"?r=E7:r=Fg;const u=e.value&&(Array.isArray(e.value)||typeof e.value=="object"&&!(e.value instanceof Date)&&!(e.value instanceof RegExp));return!e.previewMode&&u&&!(e.value instanceof RegExp)&&l.push(Lt("span",{class:{"jv-toggle":!0,open:!!n.value},onClick:s})),e.keyName&&l.push(Lt("span",{class:"jv-key",onClick:()=>{o&&o(e.keyName)}},`${e.keyName}:`)),l.push(Lt(r,{class:"jv-push",jsonValue:e.value,keyName:e.keyName,sort:e.sort,depth:e.depth,expand:n.value,previewMode:e.previewMode,"onUpdate:expand":d=>{n.value=d}})),Lt("div",{class:{"jv-node":!0,"jv-key-node":!!e.keyName&&!u,toggle:!e.previewMode&&u},ref:d=>{a=d}},l)}}});function M7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lu={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var O7=lu.exports,Bg;function R7(){return Bg||(Bg=1,(function(e,t){(function(o,n){e.exports=n()})(O7,function(){return(function(){var o={686:(function(s,l,r){r.d(l,{default:function(){return oe}});var u=r(279),d=r.n(u),c=r(370),f=r.n(c),g=r(817),p=r.n(g);function v(Q){try{return document.execCommand(Q)}catch{return!1}}var b=function(Q){var ie=p()(Q);return v("cut"),ie},x=b;function k(Q){var ie=document.documentElement.getAttribute("dir")==="rtl",re=document.createElement("textarea");re.style.fontSize="12pt",re.style.border="0",re.style.padding="0",re.style.margin="0",re.style.position="absolute",re.style[ie?"right":"left"]="-9999px";var ye=window.pageYOffset||document.documentElement.scrollTop;return re.style.top="".concat(ye,"px"),re.setAttribute("readonly",""),re.value=Q,re}var A=function(Q,ie){var re=k(Q);ie.container.appendChild(re);var ye=p()(re);return v("copy"),re.remove(),ye},U=function(Q){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},re="";return typeof Q=="string"?re=A(Q,ie):Q instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(Q==null?void 0:Q.type)?re=A(Q.value,ie):(re=p()(Q),v("copy")),re},w=U;function O(Q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(ie){return typeof ie}:O=function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},O(Q)}var W=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=Q.action,re=ie===void 0?"copy":ie,ye=Q.container,de=Q.target,M=Q.text;if(re!=="copy"&&re!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(de!==void 0)if(de&&O(de)==="object"&&de.nodeType===1){if(re==="copy"&&de.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(re==="cut"&&(de.hasAttribute("readonly")||de.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(M)return w(M,{container:ye});if(de)return re==="cut"?x(de):w(de,{container:ye})},V=W;function H(Q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(ie){return typeof ie}:H=function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},H(Q)}function q(Q,ie){if(!(Q instanceof ie))throw new TypeError("Cannot call a class as a function")}function he(Q,ie){for(var re=0;re<ie.length;re++){var ye=ie[re];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(Q,ye.key,ye)}}function le(Q,ie,re){return ie&&he(Q.prototype,ie),re&&he(Q,re),Q}function R(Q,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(ie&&ie.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),ie&&Y(Q,ie)}function Y(Q,ie){return Y=Object.setPrototypeOf||function(re,ye){return re.__proto__=ye,re},Y(Q,ie)}function X(Q){var ie=se();return function(){var re=P(Q),ye;if(ie){var de=P(this).constructor;ye=Reflect.construct(re,arguments,de)}else ye=re.apply(this,arguments);return z(this,ye)}}function z(Q,ie){return ie&&(H(ie)==="object"||typeof ie=="function")?ie:Z(Q)}function Z(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function P(Q){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},P(Q)}function F(Q,ie){var re="data-clipboard-".concat(Q);if(ie.hasAttribute(re))return ie.getAttribute(re)}var K=(function(Q){R(re,Q);var ie=X(re);function re(ye,de){var M;return q(this,re),M=ie.call(this),M.resolveOptions(de),M.listenClick(ye),M}return le(re,[{key:"resolveOptions",value:function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof ye.action=="function"?ye.action:this.defaultAction,this.target=typeof ye.target=="function"?ye.target:this.defaultTarget,this.text=typeof ye.text=="function"?ye.text:this.defaultText,this.container=H(ye.container)==="object"?ye.container:document.body}},{key:"listenClick",value:function(ye){var de=this;this.listener=f()(ye,"click",function(M){return de.onClick(M)})}},{key:"onClick",value:function(ye){var de=ye.delegateTarget||ye.currentTarget,M=this.action(de)||"copy",G=V({action:M,container:this.container,target:this.target(de),text:this.text(de)});this.emit(G?"success":"error",{action:M,text:G,trigger:de,clearSelection:function(){de&&de.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(ye){return F("action",ye)}},{key:"defaultTarget",value:function(ye){var de=F("target",ye);if(de)return document.querySelector(de)}},{key:"defaultText",value:function(ye){return F("text",ye)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(ye){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return w(ye,de)}},{key:"cut",value:function(ye){return x(ye)}},{key:"isSupported",value:function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],de=typeof ye=="string"?[ye]:ye,M=!!document.queryCommandSupported;return de.forEach(function(G){M=M&&!!document.queryCommandSupported(G)}),M}}]),re})(d()),oe=K}),828:(function(s){var l=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function u(d,c){for(;d&&d.nodeType!==l;){if(typeof d.matches=="function"&&d.matches(c))return d;d=d.parentNode}}s.exports=u}),438:(function(s,l,r){var u=r(828);function d(g,p,v,b,x){var k=f.apply(this,arguments);return g.addEventListener(v,k,x),{destroy:function(){g.removeEventListener(v,k,x)}}}function c(g,p,v,b,x){return typeof g.addEventListener=="function"?d.apply(null,arguments):typeof v=="function"?d.bind(null,document).apply(null,arguments):(typeof g=="string"&&(g=document.querySelectorAll(g)),Array.prototype.map.call(g,function(k){return d(k,p,v,b,x)}))}function f(g,p,v,b){return function(x){x.delegateTarget=u(x.target,p),x.delegateTarget&&b.call(g,x)}}s.exports=c}),879:(function(s,l){l.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},l.nodeList=function(r){var u=Object.prototype.toString.call(r);return r!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in r&&(r.length===0||l.node(r[0]))},l.string=function(r){return typeof r=="string"||r instanceof String},l.fn=function(r){var u=Object.prototype.toString.call(r);return u==="[object Function]"}}),370:(function(s,l,r){var u=r(879),d=r(438);function c(v,b,x){if(!v&&!b&&!x)throw new Error("Missing required arguments");if(!u.string(b))throw new TypeError("Second argument must be a String");if(!u.fn(x))throw new TypeError("Third argument must be a Function");if(u.node(v))return f(v,b,x);if(u.nodeList(v))return g(v,b,x);if(u.string(v))return p(v,b,x);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(v,b,x){return v.addEventListener(b,x),{destroy:function(){v.removeEventListener(b,x)}}}function g(v,b,x){return Array.prototype.forEach.call(v,function(k){k.addEventListener(b,x)}),{destroy:function(){Array.prototype.forEach.call(v,function(k){k.removeEventListener(b,x)})}}}function p(v,b,x){return d(document.body,v,b,x)}s.exports=c}),817:(function(s){function l(r){var u;if(r.nodeName==="SELECT")r.focus(),u=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var d=r.hasAttribute("readonly");d||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),d||r.removeAttribute("readonly"),u=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var c=window.getSelection(),f=document.createRange();f.selectNodeContents(r),c.removeAllRanges(),c.addRange(f),u=c.toString()}return u}s.exports=l}),279:(function(s){function l(){}l.prototype={on:function(r,u,d){var c=this.e||(this.e={});return(c[r]||(c[r]=[])).push({fn:u,ctx:d}),this},once:function(r,u,d){var c=this;function f(){c.off(r,f),u.apply(d,arguments)}return f._=u,this.on(r,f,d)},emit:function(r){var u=[].slice.call(arguments,1),d=((this.e||(this.e={}))[r]||[]).slice(),c=0,f=d.length;for(c;c<f;c++)d[c].fn.apply(d[c].ctx,u);return this},off:function(r,u){var d=this.e||(this.e={}),c=d[r],f=[];if(c&&u)for(var g=0,p=c.length;g<p;g++)c[g].fn!==u&&c[g].fn._!==u&&f.push(c[g]);return f.length?d[r]=f:delete d[r],this}},s.exports=l,s.exports.TinyEmitter=l})},n={};function a(s){if(n[s])return n[s].exports;var l=n[s]={exports:{}};return o[s](l,l.exports,a),l.exports}return(function(){a.n=function(s){var l=s&&s.__esModule?(function(){return s.default}):(function(){return s});return a.d(l,{a:l}),l}})(),(function(){a.d=function(s,l){for(var r in l)a.o(l,r)&&!a.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:l[r]})}})(),(function(){a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)}})(),a(686)})().default})})(lu)),lu.exports}var N7=R7();const D7=M7(N7),P7=function(e,t){let o=Date.now(),n;return(...a)=>{Date.now()-o<t&&n&&clearTimeout(n),n=setTimeout(()=>{e(...a)},t),o=Date.now()}},F7=gn({name:"JsonViewer",components:{JsonBox:su},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:e=>e.toLocaleString()},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},emits:["onKeyClick","copied"],setup(e,{emit:t}){const o=_(!1),n=_(!1),a=_(e.expanded),s=_(null),l=_(null);gl("expandDepth",e.expandDepth),gl("timeformat",e.timeformat),gl("keyClick",v=>{t("onKeyClick",v)});const r=ot(()=>"jv-container jv-"+e.theme+(e.boxed?" boxed":"")),u=ot(()=>{if(typeof e.copyable=="boolean"&&!e.copyable)return{copyText:"copy",copiedText:"copied!",timeout:2e3,align:"right"};const v=e.copyable;return{copyText:v.copyText||"copy",copiedText:v.copiedText||"copied!",timeout:v.timeout||2e3,align:v.align||"right"}}),d=ot(()=>{if(!e.parse||typeof e.value!="string")return e.value;try{return JSON.parse(e.value)}catch{return e.value}}),c=()=>{f()},f=P7(()=>{Qe(()=>{l.value&&(l.value.$el.clientHeight>=250?n.value=!0:n.value=!1)})},200),g=v=>{o.value||(o.value=!0,setTimeout(()=>{o.value=!1},u.value.timeout),t("copied",v))},p=()=>{a.value=!a.value};return Ze(()=>e.value,()=>{c()}),vt(()=>{e.boxed&&l.value&&(c(),l.value.$el.addEventListener("resized",c,!0)),e.copyable&&s.value&&new D7(s.value,{text:()=>JSON.stringify(d.value,null,2)}).on("success",g)}),{clip:s,jsonBox:l,copied:o,expandableCode:n,expandCode:a,jvClass:r,copyText:u,parseValue:d,toggleExpandCode:p}}}),B7=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o};function U7(e,t,o,n,a,s){const l=Sh("json-box");return T(),C("div",{class:Ee(e.jvClass)},[e.copyable?(T(),C("div",{key:0,class:Ee(`jv-tooltip ${e.copyText.align||"right"}`)},[i("span",{ref:"clip",class:Ee(["jv-button",{copied:e.copied}])},[ns(e.$slots,"copy",{copied:e.copied},()=>[qe(h(e.copied?e.copyText.copiedText:e.copyText.copyText),1)])],2)],2)):me("",!0),i("div",{class:Ee(["jv-code",{open:e.expandCode,boxed:e.boxed}])},[ze(l,{ref:"jsonBox",value:e.parseValue,sort:e.sort,"preview-mode":e.previewMode},null,8,["value","sort","preview-mode"])],2),e.expandableCode&&e.boxed?(T(),C("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=(...r)=>e.toggleExpandCode&&e.toggleExpandCode(...r))},[i("span",{class:Ee(["jv-toggle",{open:!!e.expandCode}])},null,2)])):me("",!0)],2)}const H7=B7(F7,[["render",U7]]),W7={class:"lora-raw__content"},Ug="weilin_tools_",j7=xt({__name:"lora_raw",emits:["close","update"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_({}),s=_(!1),l={loraRaw:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},u=_((()=>{try{const p=localStorage.getItem(`${Ug}loraRawState`);if(p){const v=JSON.parse(p),b={...l};return v.loraRaw&&(b.loraRaw={...l.loraRaw,...v.loraRaw}),b}}catch(p){console.error("Error loading window states:",p)}return{...l}})());Ze(u,p=>{try{localStorage.setItem(`${Ug}loraRawState`,JSON.stringify(p))}catch(v){console.error("Error saving window states:",v)}},{deep:!0}),vt(()=>{Ue.registerWindow("loraRaw")}),Dn(()=>{Ue.unregisterWindow("loraRaw")});const d=p=>{s.value=!1},c=(p,v)=>{u.value[p]&&(u.value[p].position={...v})},f=(p,v)=>{u.value[p]&&(u.value[p].size={...v})};return t({open:p=>{s.value=!0,Ue.setActiveWindow("loraRaw"),a.value=p}}),(p,v)=>s.value?(T(),yt(xn,{key:0,title:m(n)("lora.rawTitle"),position:u.value.loraRaw.position,size:u.value.loraRaw.size,"z-index":m(Ue).getZIndex("loraRaw"),"onUpdate:position":v[0]||(v[0]=b=>c("loraRaw",b)),"onUpdate:size":v[1]||(v[1]=b=>f("loraRaw",b)),onActive:v[2]||(v[2]=b=>m(Ue).setActiveWindow("loraRaw")),onClose:v[3]||(v[3]=b=>d())},{default:ht(()=>[i("div",W7,[ze(m(H7),{value:a.value,copyable:"",sort:"",theme:"dark"},null,8,["value"])])]),_:1},8,["title","position","size","z-index"])):me("",!0)}},[["__scopeId","data-v-4c910f08"]]),V7={key:0,class:"lora-detail__loading"},z7={class:"lora-detail__body"},q7={class:"lora-detail__tags"},G7=["title"],Q7=["title"],Y7={class:"lora-detail__table"},K7={class:"label"},J7={colspan:"2"},X7={colspan:"3"},Z7={class:"label"},e6={colspan:"2",class:"hash"},t6={class:"label"},n6={colspan:"2"},o6=["href"],a6={key:1,class:"not-found"},s6=["title"],l6={class:"label"},r6=["title"],i6={key:1,class:"text"},u6={class:"actions"},c6={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},d6={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},f6={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},p6={class:"label"},g6={colspan:"2"},m6={class:"label"},h6={colspan:"2"},v6={class:"label"},_6=["title"],y6=["onUpdate:modelValue","type","onKeyup"],b6={key:1,class:"text"},w6={class:"actions"},x6=["onClick","title"],T6={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},S6={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},k6={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},C6={class:"label"},E6=["onUpdate:modelValue"],L6={key:1},$6=["onUpdate:modelValue","type","onKeyup"],A6={key:1,class:"text"},I6={class:"actions"},M6=["onClick","title"],O6={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},R6={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},N6={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},D6=["onClick","title"],P6={class:"field-management"},F6=["title"],B6={key:0},U6={class:"label"},H6=["title"],W6={key:0,class:"word-selection"},j6={colspan:"2"},V6={class:"word-list"},z6=["onClick"],q6={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},G6={key:1},Q6={key:0,class:"lora-detail__images"},Y6={class:"image-wrapper"},K6=["onClick"],J6=["src"],X6={class:"image-info"},Z6={key:0,class:"info-item"},ex=["href"],tx={key:1,class:"info-item"},nx={key:2,class:"info-item"},ox={key:3,class:"info-item"},ax={key:4,class:"info-item"},sx={key:5,class:"info-item"},lx={key:6,class:"info-item"},rx={key:7,class:"info-item"},Hg="weilin_tools_",tr=xt({__name:"lora_detail",emits:["close","update"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_(!1),s=_({}),l=_(!1),r=_(),u=_({}),d={loraDetail:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},f=_((()=>{try{const M=localStorage.getItem(`${Hg}loraDetailState`);if(M){const G=JSON.parse(M),ae={...d};return G.loraDetail&&(ae.loraDetail={...d.loraDetail,...G.loraDetail}),ae}}catch(M){console.error("Error loading window states:",M)}return{...d}})());Ze(f,M=>{try{localStorage.setItem(`${Hg}loraDetailState`,JSON.stringify(M))}catch(G){console.error("Error saving window states:",G)}},{deep:!0}),vt(()=>{Ue.registerWindow("loraDetail")}),Dn(()=>{Ue.unregisterWindow("loraDetail")});const g=M=>{l.value=!1},p=(M,G)=>{f.value[M]&&(f.value[M].position={...G})},v=(M,G)=>{f.value[M]&&(f.value[M].size={...G})};t({open:M=>{l.value=!0,Ue.setActiveWindow("loraDetail"),a.value=!0,s.value=M,Qe(()=>{q()})}});const x=_(""),k=_(),A=M=>{k.value.open(M)},U=_({}),w=_({}),O=_([]),W=[{key:"strengthMin",label:n("lora.strengthMin"),tip:n("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:n("lora.strengthMax"),tip:n("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:n("lora.strWeight"),tip:n("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:n("lora.promptWords"),tip:n("lora.promptWordsTip")}],V=()=>{const M=`custom_${Date.now()}`;s.value.user_diy_fileds||(s.value.user_diy_fileds={}),u.value[M]={label:"新字段",type:"text"},s.value.user_diy_fileds[M]={label:"新字段",value:""},w.value[M]="",P(M)},H=async M=>{var G,ae;delete u.value[M],delete w.value[M],(ae=(G=s.value)==null?void 0:G.user_diy_fileds)!=null&&ae[M]&&delete s.value.user_diy_fileds[M],await Qe(async()=>{await oe(M)})},q=()=>{x.value=s.value.name,s.value={},O.value=[],w.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},Tn.getLoraDetail({file:x.value,refresh:!1,light:!1}).then(M=>{s.value=M.data,Qe(function(){var G,ae,D,ee,L,E;s.value.name=s.value.name||((ae=(G=s.value.raw)===null||G===void 0?void 0:G.metadata)===null||ae===void 0?void 0:ae.ss_output_name===void 0?ae["modelspec.title"]:ae.ss_output_name)||"",w.value.nameValue=s.value.name,s.value.strengthMin=(D=s.value.strengthMin)!==null&&D!==void 0?D:"",w.value.minValue=s.value.strengthMin,s.value.strengthMax=(ee=s.value.strengthMax)!==null&&ee!==void 0?ee:"",w.value.maxValue=s.value.strengthMax,s.value.userNote=(L=s.value.userNote)!==null&&L!==void 0?L:"",w.value.notesValue=s.value.userNote,s.value.loraWorks=(E=s.value.loraWorks)!==null&&E!==void 0?E:"",w.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1})}).catch(M=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},he=M=>{let ae=new URL(M).pathname.split("/").pop();return ae=ae.split("?")[0],decodeURIComponent(ae)},le=async M=>{try{const G=await fetch(M),ae=he(M),D=await G.blob();Tn.postUplaodImg(D,s.value.file,ae).then(ee=>{te({type:"success",str:"message.saveSuccess"})}).catch(ee=>{te({type:"warn",str:"message.unknownError"})})}catch{te({type:"warn",str:"message.unknownError"})}},R=ot(()=>{var M;return(M=s.value.links)==null?void 0:M.find(G=>G.includes("civitai.com/models"))}),Y=ot(()=>{var M,G;return((G=(M=s.value.raw)==null?void 0:M.civitai)==null?void 0:G.error)==="Model not found"}),X=ot(()=>s.value.trainedWords||[]),z=async()=>{var G;const M=((G=r.value)==null?void 0:G.scrollTop)||0;a.value=!0,Tn.getLoraRefresh({file:x.value}).then(ae=>{s.value=ae.data,Qe(function(){var D,ee,L,E,B,ne;s.value.name=s.value.name||((ee=(D=s.value.raw)===null||D===void 0?void 0:D.metadata)===null||ee===void 0?void 0:ee.ss_output_name===void 0?ee["modelspec.title"]:ee.ss_output_name)||"",w.value.nameValue=s.value.name,s.value.strengthMin=(L=s.value.strengthMin)!==null&&L!==void 0?L:"",w.value.minValue=s.value.strengthMin,s.value.strengthMax=(E=s.value.strengthMax)!==null&&E!==void 0?E:"",w.value.maxValue=s.value.strengthMax,s.value.userNote=(B=s.value.userNote)!==null&&B!==void 0?B:"",w.value.notesValue=s.value.userNote,s.value.loraWorks=(ne=s.value.loraWorks)!==null&&ne!==void 0?ne:"",w.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1}),Qe(function(){a.value=!1}),r.value&&(r.value.scrollTop=M),te({type:"success",str:"message.dataLoaded"})}).catch(ae=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},Z=M=>{U.value[M]?P(M):se(M)},se=M=>{var G,ae;U.value[M]=!0,M in u.value?w.value[M]=((ae=(G=s.value.user_diy_fileds)==null?void 0:G[M])==null?void 0:ae.value)||"":w.value[M]=s.value[M],Qe(()=>{M==="name"&&nameInput.value&&nameInput.value.focus()})},P=M=>{M in u.value?(s.value.user_diy_fileds||(s.value.user_diy_fileds={}),s.value.user_diy_fileds[M]={label:u.value[M].label,value:w.value[M]}):s.value[M]=w.value[M],K(s.value),U.value[M]=!1},F=M=>{U.value[M]=!1,w.value[M]=s.value[M]},K=M=>{var ae;const G=((ae=r.value)==null?void 0:ae.scrollTop)||0;a.value=!0,Tn.postLoraSave(x.value,M).then(D=>{s.value=D.data,Qe(function(){var ee,L,E,B,ne,ge;s.value.name=s.value.name||((L=(ee=s.value.raw)===null||ee===void 0?void 0:ee.metadata)===null||L===void 0?void 0:L.ss_output_name===void 0?L["modelspec.title"]:L.ss_output_name)||"",w.value.nameValue=s.value.name,s.value.strengthMin=(E=s.value.strengthMin)!==null&&E!==void 0?E:"",w.value.minValue=s.value.strengthMin,s.value.strengthMax=(B=s.value.strengthMax)!==null&&B!==void 0?B:"",w.value.maxValue=s.value.strengthMax,s.value.userNote=(ne=s.value.userNote)!==null&&ne!==void 0?ne:"",w.value.notesValue=s.value.userNote,s.value.loraWorks=(ge=s.value.loraWorks)!==null&&ge!==void 0?ge:"",w.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1,Qe(function(){r.value&&(r.value.scrollTop=G)})}),te({type:"success",str:"message.saveSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},oe=async M=>{var ae;const G=((ae=r.value)==null?void 0:ae.scrollTop)||0;a.value=!0,await Tn.postLoraDelet(x.value,M).then(D=>{s.value=D.data,Qe(function(){var ee,L,E,B,ne,ge;s.value.name=s.value.name||((L=(ee=s.value.raw)===null||ee===void 0?void 0:ee.metadata)===null||L===void 0?void 0:L.ss_output_name===void 0?L["modelspec.title"]:L.ss_output_name)||"",w.value.nameValue=s.value.name,s.value.strengthMin=(E=s.value.strengthMin)!==null&&E!==void 0?E:"",w.value.minValue=s.value.strengthMin,s.value.strengthMax=(B=s.value.strengthMax)!==null&&B!==void 0?B:"",w.value.maxValue=s.value.strengthMax,s.value.userNote=(ne=s.value.userNote)!==null&&ne!==void 0?ne:"",w.value.notesValue=s.value.userNote,s.value.loraWorks=(ge=s.value.loraWorks)!==null&&ge!==void 0?ge:"",w.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1,Qe(function(){r.value&&(r.value.scrollTop=G)})}),te({type:"success",str:"message.deleteSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},Q=M=>{const G=O.value.indexOf(M);G===-1?O.value.push(M):O.value.splice(G,1)},ie=M=>O.value.includes(M),re=async()=>{O.value.length&&navigator.clipboard.writeText(O.value).then(M=>{te({type:"success",str:"message.copySuccess"})},M=>{te({type:"warn",str:"message.copyFailed"})})};_(!1),_(!1),ot(()=>a.value?n("common.loading"):n("common.ready"));const ye=_(!0),de=()=>{ye.value=!ye.value};return(M,G)=>(T(),C(Oe,null,[l.value?(T(),yt(xn,{key:0,title:m(n)("lora.title"),position:f.value.loraDetail.position,size:f.value.loraDetail.size,"z-index":m(Ue).getZIndex("loraDetail"),"onUpdate:position":G[5]||(G[5]=ae=>p("loraDetail",ae)),"onUpdate:size":G[6]||(G[6]=ae=>v("loraDetail",ae)),onActive:G[7]||(G[7]=ae=>m(Ue).setActiveWindow("loraDetail")),onClose:G[8]||(G[8]=ae=>g())},{default:ht(()=>{var ae;return[i("div",{class:"lora-detail__content",ref_key:"loraContent",ref:r},[a.value?(T(),C("div",V7,[...G[9]||(G[9]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[i("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)])])):me("",!0),i("div",z7,[G[24]||(G[24]=i("div",{class:"lora-detail__title"},"Lora 信息",-1)),i("ul",q7,[s.value.type?(T(),C("li",{key:0,class:Ee(["lora-detail__tag",`-type-${s.value.type.toLowerCase()}`]),title:m(n)("lora.type")},h(s.value.type),11,G7)):me("",!0),s.value.baseModel?(T(),C("li",{key:1,class:Ee(["lora-detail__tag",`-basemodel-${s.value.baseModel.toLowerCase()}`]),title:m(n)("lora.baseModel")},h(s.value.baseModel),11,Q7)):me("",!0)]),i("table",Y7,[i("tbody",null,[i("tr",null,[i("td",K7,h(m(n)("lora.file")),1),i("td",J7,h(s.value.file),1),i("td",X7,[i("button",{class:"fetch-btn",onClick:G[0]||(G[0]=D=>A(s.value.raw.metadata))},h(m(n)("lora.seeLoraRaw")),1)])]),i("tr",null,[i("td",Z7,h(m(n)("lora.hash")),1),i("td",e6,h(s.value.sha256),1)]),i("tr",null,[i("td",t6,h(m(n)("lora.civitai")),1),i("td",n6,[R.value?(T(),C(Oe,{key:0},[i("a",{href:R.value,target:"_blank",class:"civitai-link"},[G[10]||(G[10]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),i("span",null,h(m(n)("lora.viewOnCivitai")),1)],8,o6),i("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:z},h(m(n)("lora.getCivitData")),1)],64)):Y.value?(T(),C("div",a6,[i("i",null,h(m(n)("lora.modelNotFound")),1),(T(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:m(n)("lora.modelNotFoundTip")},[...G[11]||(G[11]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,s6))])):(T(),C("button",{key:2,class:"fetch-btn",onClick:z},h(m(n)("lora.fetchFromCivitai")),1))])]),i("tr",{class:Ee({"is-editing":U.value.name})},[i("td",l6,[qe(h(m(n)("lora.name"))+" ",1),(T(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:m(n)("lora.nameTip")},[...G[12]||(G[12]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,r6))]),i("td",null,[U.value.name?Te((T(),C("input",{key:0,"onUpdate:modelValue":G[1]||(G[1]=D=>w.value.name=D),type:"text",onKeyup:[G[2]||(G[2]=tn(D=>P("name"),["enter"])),G[3]||(G[3]=tn(D=>F("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,w.value.name]]):(T(),C("span",i6,h(s.value.name),1))]),i("td",u6,[i("button",{class:"edit-btn",onClick:G[4]||(G[4]=D=>Z("name"))},[(T(),C("svg",c6,[U.value.name?(T(),C("path",d6)):(T(),C("path",f6))]))])])],2),i("tr",null,[i("td",p6,h(m(n)("lora.baseModel")),1),i("td",g6,h(!s.value.baseModelFile&&!s.value.baseModelFile?"":(s.value.baseModel||"")+(s.value.baseModelFile?`
                                    (${s.value.baseModelFile})`:"")),1)]),i("tr",null,[i("td",m6,h(m(n)("lora.skipClip")),1),i("td",h6,h((M._t=(M._s=s.value.raw)===null||M._s===void 0?void 0:M._s.metadata)===null||M._t===void 0?void 0:M._t.ss_clip_skip),1)]),(T(),C(Oe,null,je(W,D=>i("tr",{key:D.key,class:Ee({"is-editing":U.value[D.key]})},[i("td",v6,[qe(h(D.label)+" ",1),D.tip?(T(),C("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:D.tip},[...G[13]||(G[13]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,_6)):me("",!0)]),i("td",null,[U.value[D.key]?Te((T(),C("input",{key:0,"onUpdate:modelValue":ee=>w.value[D.key]=ee,type:D.type||"text",onKeyup:[tn(ee=>P(D.key),["enter"]),tn(ee=>F(D.key),["esc"])]},null,40,y6)),[[Ad,w.value[D.key]]]):(T(),C("span",b6,h(s.value[D.key]),1))]),i("td",w6,[i("button",{class:"edit-btn",onClick:ee=>Z(D.key),title:m(n)("promptBox.settings.edit")},[(T(),C("svg",T6,[U.value[D.key]?(T(),C("path",S6)):(T(),C("path",k6))]))],8,x6)])],2)),64)),(T(!0),C(Oe,null,je(u.value,(D,ee)=>{var L;return T(),C("tr",{key:ee,class:Ee({"is-editing":U.value[ee]})},[i("td",C6,[U.value[ee]?Te((T(),C("input",{key:0,"onUpdate:modelValue":E=>D.label=E,type:"text"},null,8,E6)),[[Ae,D.label]]):(T(),C("span",L6,h(D.label),1))]),i("td",null,[U.value[ee]?Te((T(),C("input",{key:0,"onUpdate:modelValue":E=>w.value[ee]=E,type:D.type||"text",onKeyup:[tn(E=>P(ee),["enter"]),tn(E=>F(ee),["esc"])]},null,40,$6)),[[Ad,w.value[ee]]]):(T(),C("span",A6,h(s.value.user_diy_fileds?(L=s.value.user_diy_fileds[ee])==null?void 0:L.value:""),1))]),i("td",I6,[i("button",{class:"edit-btn",onClick:E=>Z(ee),title:m(n)("promptBox.settings.edit")},[(T(),C("svg",O6,[U.value[ee]?(T(),C("path",R6)):(T(),C("path",N6))]))],8,M6),i("button",{style:{"margin-left":"5px",color:"#f87171"},onClick:E=>H(ee),class:"edit-btn",title:m(n)("promptBox.settings.delete")},h(m(n)("promptBox.settings.delete")),9,D6)])],2)}),128)),i("div",P6,[i("button",{onClick:V,class:"add-btn",title:m(n)("lora.addDiyFiled")},h(m(n)("lora.addDiyFiled")),9,F6)]),X.value.length?(T(),C("tr",B6,[i("td",U6,[qe(h(m(n)("lora.trainedWords"))+" ",1),(T(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:m(n)("lora.trainedWordsTip")},[...G[14]||(G[14]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,H6)),O.value.length?(T(),C("div",W6,[qe(h(m(n)("lora.selectedWords",{count:O.value.length}))+" ",1),i("button",{class:"copy-btn",onClick:re},h(m(n)("common.copy")),1)])):me("",!0)]),i("td",j6,[i("ul",V6,[(T(!0),C(Oe,null,je(ye.value?X.value.slice(0,10):X.value,(D,ee)=>(T(),C("li",{key:"words-"+ee,class:Ee(["word-item",{"is-selected":ie(D.word),"is-hidden":ye.value&&ee>=10}]),onClick:L=>Q(D.word)},[i("span",null,h(D.word),1),D.civitai?(T(),C("svg",q6,[...G[15]||(G[15]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)])])):me("",!0),D.count!=null?(T(),C("small",G6,h(D.count),1)):me("",!0)],10,z6))),128)),X.value.length>10?(T(),C("li",{key:0,class:"toggle-btn",onClick:de},h(ye.value?m(n)("common.showMore"):m(n)("common.showLess")),1)):me("",!0)])])])):me("",!0)])]),(ae=s.value.images)!=null&&ae.length?(T(),C("ul",Q6,[(T(!0),C(Oe,null,je(s.value.images,(D,ee)=>(T(),C("li",{key:ee,class:"lora-detail__image-item"},[i("figure",null,[i("div",Y6,[i("div",{class:"image-action",onClick:L=>le(D.url)}," 设置为Lora封面 ",8,K6),i("img",{src:D.url},null,8,J6)]),i("figcaption",X6,[D.civitaiUrl?(T(),C("span",Z6,[i("a",{href:D.civitaiUrl,target:"_blank",class:"civitai-link"},[...G[16]||(G[16]=[qe(" C站 civitai ",-1),i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})],-1)])],8,ex)])):me("",!0),D.seed?(T(),C("span",tx,[G[17]||(G[17]=i("label",null,"种子 seed",-1)),qe(" "+h(D.seed),1)])):me("",!0),D.steps?(T(),C("span",nx,[G[18]||(G[18]=i("label",null,"步数 steps",-1)),qe(" "+h(D.steps),1)])):me("",!0),D.cfg?(T(),C("span",ox,[G[19]||(G[19]=i("label",null,"引导系数 cfg",-1)),qe(" "+h(D.cfg),1)])):me("",!0),D.sampler?(T(),C("span",ax,[G[20]||(G[20]=i("label",null,"采样器 sampler",-1)),qe(" "+h(D.sampler),1)])):me("",!0),D.model?(T(),C("span",sx,[G[21]||(G[21]=i("label",null,"基础模型 model",-1)),qe(" "+h(D.model),1)])):me("",!0),D.positive?(T(),C("span",lx,[G[22]||(G[22]=i("label",null,"正向提示词 positive",-1)),qe(" "+h(D.positive),1)])):me("",!0),D.negative?(T(),C("span",rx,[G[23]||(G[23]=i("label",null,"反向提示词 negative",-1)),qe(" "+h(D.negative),1)])):me("",!0)])])]))),128))])):me("",!0)])],512)]}),_:1},8,["title","position","size","z-index"])):me("",!0),ze(j7,{ref_key:"loraRawRef",ref:k},null,512)],64))}},[["__scopeId","data-v-3a570568"]]),ix={key:0,class:"lora-detail__loading"},ux={class:"lora-detail__body"},cx={class:"lora-detail__tags"},dx=["title"],fx=["title"],px={class:"lora-detail__table"},gx={class:"label"},mx={colspan:"2"},hx={class:"label"},vx={colspan:"2",class:"hash"},_x={class:"label"},yx={colspan:"2"},bx=["href"],wx={key:1,class:"not-found"},xx=["title"],Tx={class:"label"},Sx=["title"],kx={key:1,class:"text"},Cx={class:"label"},Ex={colspan:"2"},Lx={class:"label"},$x={colspan:"2"},Ax={class:"label"},Ix=["title"],Mx={class:"text"},Ox={class:"actions"},Rx=["onClick","title"],Nx={class:"label"},Dx=["onUpdate:modelValue"],Px={key:1},Fx={class:"text"},Bx={class:"actions"},Ux=["onClick","title"],Hx={key:0},Wx={class:"label"},jx=["title"],Vx={key:0,class:"word-selection"},zx={colspan:"2"},qx={class:"word-list"},Gx=["onClick"],Qx={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},Yx={key:1},Kx={key:0,class:"lora-detail__images",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"12px"}},Jx={class:"image-wrapper",style:{height:"200px"}},Xx=["src"],ru=xt({__name:"lora_card",props:{fileNmae:{type:String,required:!0},paddingLeft:{type:Number,required:!1,default:100},paddingTop:{type:Number,required:!1,default:100}},emits:["cardLeave","cardenter"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_(!1),s=_({}),l=_(),r=_({}),u=e,d=_(""),c=o,f=()=>{c("cardLeave")},g=()=>{c("cardenter")},p=_({}),v=_({}),b=_([]),x=[{key:"strengthMin",label:n("lora.strengthMin"),tip:n("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:n("lora.strengthMax"),tip:n("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:n("lora.strWeight"),tip:n("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:n("lora.promptWords"),tip:n("lora.promptWordsTip")}];vt(()=>{k()});const k=()=>{d.value=u.fileNmae,s.value={},b.value=[],v.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},Tn.getLoraDetail({file:d.value,refresh:!1,light:!1}).then(Z=>{s.value=Z.data,Qe(function(){var se,P,F,K,oe,Q;s.value.name=s.value.name||((P=(se=s.value.raw)===null||se===void 0?void 0:se.metadata)===null||P===void 0?void 0:P.ss_output_name===void 0?P["modelspec.title"]:P.ss_output_name)||"",v.value.nameValue=s.value.name,s.value.strengthMin=(F=s.value.strengthMin)!==null&&F!==void 0?F:"",v.value.minValue=s.value.strengthMin,s.value.strengthMax=(K=s.value.strengthMax)!==null&&K!==void 0?K:"",v.value.maxValue=s.value.strengthMax,s.value.userNote=(oe=s.value.userNote)!==null&&oe!==void 0?oe:"",v.value.notesValue=s.value.userNote,s.value.loraWorks=(Q=s.value.loraWorks)!==null&&Q!==void 0?Q:"",v.value.loraWorksValue=s.value.loraWorks,r.value=s.value.user_diy_fileds,a.value=!1})}).catch(Z=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},A=Z=>{navigator.clipboard.writeText(Z).then(()=>{te({type:"success",str:"已复制到剪贴板"})}).catch(se=>{te({type:"error",str:"复制失败"})})},U=ot(()=>{var Z;return(Z=s.value.links)==null?void 0:Z.find(se=>se.includes("civitai.com/models"))}),w=ot(()=>{var Z,se;return((se=(Z=s.value.raw)==null?void 0:Z.civitai)==null?void 0:se.error)==="Model not found"}),O=ot(()=>s.value.trainedWords||[]),W=async()=>{var se;const Z=((se=l.value)==null?void 0:se.scrollTop)||0;a.value=!0,Tn.getLoraRefresh({file:d.value}).then(P=>{s.value=P.data,Qe(function(){var F,K,oe,Q,ie;s.value.name=s.value.name||((K=(F=s.value.raw)===null||F===void 0?void 0:F.metadata)===null||K===void 0?void 0:K.ss_output_name===void 0?K["modelspec.title"]:K.ss_output_name)||"",v.value.nameValue=s.value.name,s.value.strengthMin=(oe=s.value.strengthMin)!==null&&oe!==void 0?oe:"",v.value.minValue=s.value.strengthMin,s.value.strengthMax=(Q=s.value.strengthMax)!==null&&Q!==void 0?Q:"",v.value.maxValue=s.value.strengthMax,s.value.userNote=(ie=s.value.userNote)!==null&&ie!==void 0?ie:"",v.value.notesValue=s.value.userNote,a.value=!1}),Qe(function(){a.value=!1}),l.value&&(l.value.scrollTop=Z),te({type:"success",str:"message.dataLoaded"})}).catch(P=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},V=Z=>{Z in r.value?(s.value.user_diy_fileds||(s.value.user_diy_fileds={}),s.value.user_diy_fileds[Z]={label:r.value[Z].label,value:v.value[Z]}):s.value[Z]=v.value[Z],q(s.value),p.value[Z]=!1},H=Z=>{p.value[Z]=!1,v.value[Z]=s.value[Z]},q=Z=>{var P;const se=((P=l.value)==null?void 0:P.scrollTop)||0;a.value=!0,Tn.postLoraSave(d.value,Z).then(F=>{s.value=F.data,Qe(function(){var K,oe,Q,ie,re;s.value.name=s.value.name||((oe=(K=s.value.raw)===null||K===void 0?void 0:K.metadata)===null||oe===void 0?void 0:oe.ss_output_name===void 0?oe["modelspec.title"]:oe.ss_output_name)||"",v.value.nameValue=s.value.name,s.value.strengthMin=(Q=s.value.strengthMin)!==null&&Q!==void 0?Q:"",v.value.minValue=s.value.strengthMin,s.value.strengthMax=(ie=s.value.strengthMax)!==null&&ie!==void 0?ie:"",v.value.maxValue=s.value.strengthMax,s.value.userNote=(re=s.value.userNote)!==null&&re!==void 0?re:"",v.value.notesValue=s.value.userNote,a.value=!1,Qe(function(){l.value&&(l.value.scrollTop=se)})}),te({type:"success",str:"message.saveSuccess"})}).catch(F=>{te({type:"warn",str:"message.networkError"}),a.value=!1})},he=Z=>{const se=b.value.indexOf(Z);se===-1?b.value.push(Z):b.value.splice(se,1)},le=Z=>b.value.includes(Z),R=async()=>{b.value.length&&navigator.clipboard.writeText(b.value).then(Z=>{te({type:"success",str:"message.copySuccess"})},Z=>{te({type:"warn",str:"message.copyFailed"})})},Y=_(!0),X=()=>{Y.value=!Y.value};return t({refresh:()=>{k()}}),(Z,se)=>{var P;return T(),C("div",{class:"lora_catd_content",style:mt(["left: "+e.paddingLeft+"px;top: "+e.paddingTop+"px;",{"font-size":"0.55em"}]),onMouseenter:g,onMouseleave:f},[i("div",{class:"close-button",onClick:f,title:"关闭"},[...se[3]||(se[3]=[i("span",null,"×",-1)])]),i("div",{class:"lora-detail__content",ref_key:"loraContent",ref:l},[a.value?(T(),C("div",ix,[...se[4]||(se[4]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[i("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)])])):me("",!0),i("div",ux,[se[13]||(se[13]=i("div",{class:"lora-detail__title"},"Lora 信息",-1)),i("ul",cx,[s.value.type?(T(),C("li",{key:0,class:Ee(["lora-detail__tag",`-type-${s.value.type.toLowerCase()}`]),title:m(n)("lora.type")},h(s.value.type),11,dx)):me("",!0),s.value.baseModel?(T(),C("li",{key:1,class:Ee(["lora-detail__tag",`-basemodel-${s.value.baseModel.toLowerCase()}`]),title:m(n)("lora.baseModel")},h(s.value.baseModel),11,fx)):me("",!0)]),i("table",px,[i("tbody",null,[i("tr",null,[i("td",gx,h(m(n)("lora.file")),1),i("td",mx,h(s.value.file),1)]),i("tr",null,[i("td",hx,h(m(n)("lora.hash")),1),i("td",vx,h(s.value.sha256),1)]),i("tr",null,[i("td",_x,h(m(n)("lora.civitai")),1),i("td",yx,[U.value?(T(),C(Oe,{key:0},[i("a",{href:U.value,target:"_blank",class:"civitai-link"},[se[5]||(se[5]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),i("span",null,h(m(n)("lora.viewOnCivitai")),1)],8,bx),i("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:W},h(m(n)("lora.getCivitData")),1)],64)):w.value?(T(),C("div",wx,[i("i",null,h(m(n)("lora.modelNotFound")),1),(T(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:m(n)("lora.modelNotFoundTip")},[...se[6]||(se[6]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,xx))])):(T(),C("button",{key:2,class:"fetch-btn",onClick:W},h(m(n)("lora.fetchFromCivitai")),1))])]),i("tr",{class:Ee({"is-editing":p.value.name})},[i("td",Tx,[qe(h(m(n)("lora.name"))+" ",1),(T(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:m(n)("lora.nameTip")},[...se[7]||(se[7]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,Sx))]),i("td",null,[p.value.name?Te((T(),C("input",{key:0,"onUpdate:modelValue":se[0]||(se[0]=F=>v.value.name=F),type:"text",onKeyup:[se[1]||(se[1]=tn(F=>V("name"),["enter"])),se[2]||(se[2]=tn(F=>H("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,v.value.name]]):(T(),C("span",kx,h(s.value.name),1))])],2),i("tr",null,[i("td",Cx,h(m(n)("lora.baseModel")),1),i("td",Ex,h(!s.value.baseModelFile&&!s.value.baseModelFile?"":(s.value.baseModel||"")+(s.value.baseModelFile?`
                                (${s.value.baseModelFile})`:"")),1)]),i("tr",null,[i("td",Lx,h(m(n)("lora.skipClip")),1),i("td",$x,h((Z._t=(Z._s=s.value.raw)===null||Z._s===void 0?void 0:Z._s.metadata)===null||Z._t===void 0?void 0:Z._t.ss_clip_skip),1)]),(T(),C(Oe,null,je(x,F=>i("tr",{key:F.key,class:Ee({"is-editing":p.value[F.key]})},[i("td",Ax,[qe(h(F.label)+" ",1),F.tip?(T(),C("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:F.tip},[...se[8]||(se[8]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,Ix)):me("",!0)]),i("td",null,[i("span",Mx,h(s.value[F.key]),1)]),i("td",Ox,[i("button",{class:"copy-btn",onClick:K=>A(s.value[F.key]),title:m(n)("lora.copy")},[se[9]||(se[9]=i("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),qe(" "+h(m(n)("lora.copy")),1)],8,Rx)])],2)),64)),(T(!0),C(Oe,null,je(r.value,(F,K)=>{var oe;return T(),C("tr",{key:K,class:Ee({"is-editing":p.value[K]})},[i("td",Nx,[p.value[K]?Te((T(),C("input",{key:0,"onUpdate:modelValue":Q=>F.label=Q,type:"text"},null,8,Dx)),[[Ae,F.label]]):(T(),C("span",Px,h(F.label),1))]),i("td",null,[i("span",Fx,h(s.value.user_diy_fileds?(oe=s.value.user_diy_fileds[K])==null?void 0:oe.value:""),1)]),i("td",Bx,[i("button",{class:"copy-btn",onClick:Q=>{var ie;return A((ie=s.value.user_diy_fileds[K])==null?void 0:ie.value)},title:m(n)("lora.copy")},[se[10]||(se[10]=i("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),qe(" "+h(m(n)("lora.copy")),1)],8,Ux)])],2)}),128)),O.value.length?(T(),C("tr",Hx,[i("td",Wx,[qe(h(m(n)("lora.trainedWords"))+" ",1),(T(),C("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:m(n)("lora.trainedWordsTip")},[...se[11]||(se[11]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,jx)),b.value.length?(T(),C("div",Vx,[qe(h(m(n)("lora.selectedWords",{count:b.value.length}))+" ",1),i("button",{class:"copy-btn",onClick:R},h(m(n)("common.copy")),1)])):me("",!0)]),i("td",zx,[i("ul",qx,[(T(!0),C(Oe,null,je(Y.value?O.value.slice(0,10):O.value,(F,K)=>(T(),C("li",{key:"words-"+K,class:Ee(["word-item",{"is-selected":le(F.word),"is-hidden":Y.value&&K>=10}]),onClick:oe=>he(F.word)},[i("span",null,h(F.word),1),F.civitai?(T(),C("svg",Qx,[...se[12]||(se[12]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)])])):me("",!0),F.count!=null?(T(),C("small",Yx,h(F.count),1)):me("",!0)],10,Gx))),128)),O.value.length>10?(T(),C("li",{key:0,class:"toggle-btn",onClick:X},h(Y.value?m(n)("common.showMore"):m(n)("common.showLess")),1)):me("",!0)])])])):me("",!0)])]),(P=s.value.images)!=null&&P.length?(T(),C("ul",Kx,[(T(!0),C(Oe,null,je(s.value.images,(F,K)=>(T(),C("li",{key:K,class:"lora-detail__image-item"},[i("div",Jx,[i("img",{src:F.url,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,Xx)])]))),128))])):me("",!0)])],512)],36)}}},[["__scopeId","data-v-d4b68239"]]),Zx={class:"header-actions"},e9=["title"],t9=["onMouseover","onDragstart","onDrop"],n9={class:"lora-info"},o9={class:"lora-header"},a9=["title"],s9={class:"lora-actions"},l9=["onClick","title"],r9=["onClick","title"],i9={class:"lora-weights-row"},u9={class:"weight-item-col"},c9=["onUpdate:modelValue"],d9={class:"weight-item-col"},f9=["onUpdate:modelValue"],p9={class:"switch-item-col"},g9={class:"switch"},m9=["checked","onChange"],Uo="weilin_prompt_ui_",h9=xt({__name:"lora_stack",props:{isOpen:{type:Boolean,default:!1},selectedLoras:{type:Array,default:[]}},emits:["close","update:selectedLoras"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_(!1),s=_(""),l=_(100),r=_(0),u=_(),d=_(!1),c=_(!1),f=_(),g=e,p=o,v=(le,R)=>{if(c.value=!0,s.value===le&&a.value)return;const X=R.currentTarget.getBoundingClientRect();let Z={left:X.left-450-10,top:X.top};Z.left<10&&(Z.left=X.right+10),Z.top=Math.max(10,Math.min(Z.top,window.innerHeight-310)),l.value=Z.left,r.value=Z.top,a.value=!0,s.value=le,Qe(()=>{f.value.refresh()})},b=()=>{c.value=!1,setTimeout(()=>{!d.value&&!c.value&&(a.value=!1,s.value="",d.value=!1)},200)},x=()=>{d.value=!0,c.value=!0},k=()=>{a.value=!1,s.value="",d.value=!1},A=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora"},"*")},U=le=>{le.hidden=!le.hidden},w=le=>{console.log(g.selectedLoras),g.selectedLoras&&!g.selectedLoras.find(R=>R.name===le.name)&&(g.selectedLoras.push({name:le.name,weight:1,text_encoder_weight:1,...le}),p("update:selectedLoras",g.selectedLoras))},O=le=>{const R=g.selectedLoras.findIndex(Y=>Y.name===le.name);R>-1&&(g.selectedLoras.splice(R,1),p("update:selectedLoras",g.selectedLoras))},W=_(),V=le=>{W.value.open({name:le.lora})};window.addEventListener("message",le=>{le.data.type==="weilin_prompt_ui_selectLora"&&w(le.data.lora)});const H=_(null),q=le=>{H.value=le},he=le=>{if(H.value===null||H.value===le)return;const R=g.selectedLoras.splice(H.value,1)[0];g.selectedLoras.splice(le,0,R),H.value=null,p("update:selectedLoras",g.selectedLoras)};return t({addLora:w,removeLora:O}),(le,R)=>(T(),C("div",{class:Ee(`${Uo}lora-stack`),style:mt([{width:e.isOpen?"300px":"0"},{paddingRight:e.isOpen?"16px":"0"}])},[i("div",{class:Ee(`${Uo}lora-content`)},[i("div",{class:Ee(`${Uo}lora-header`)},[i("h3",{class:Ee(`${Uo}lora-title`)},h(m(n)("controls.loraStack")),3),i("div",Zx,[i("button",{class:Ee(`${Uo}add-btn`),onClick:A,title:m(n)("controls.addLora")},[...R[2]||(R[2]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])],10,e9),i("button",{class:Ee(`${Uo}close-btn`),onClick:R[0]||(R[0]=Y=>le.$emit("close"))},[...R[3]||(R[3]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],2)])],2),i("div",{class:Ee(`${Uo}lora-body`)},[i("div",{class:Ee(`${Uo}lora-list`)},[(T(!0),C(Oe,null,je(e.selectedLoras,(Y,X)=>(T(),C("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:u,key:Y.name,class:Ee(["lora-item",{"hidden-lora":Y.hidden}]),onMouseover:z=>v(Y.lora,z),onMouseleave:b,draggable:"true",onDragstart:z=>q(X),onDragover:R[1]||(R[1]=Je(()=>{},["prevent"])),onDrop:z=>he(X)},[i("div",n9,[i("div",o9,[i("span",{class:"lora-name",title:Y.name},h(Y.name),9,a9),i("div",s9,[i("button",{class:"look-on-btn",onClick:z=>V(Y),title:m(n)("controls.lookOnLora")},[...R[4]||(R[4]=[i("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[i("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),i("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),i("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),i("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)])],8,l9),i("button",{class:"remove-btn",onClick:z=>O(Y),title:m(n)("controls.removeLora")},[...R[5]||(R[5]=[i("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,r9)])]),i("div",i9,[i("div",u9,[i("label",null,h(m(n)("loraManager.modelWeight")),1),Te(i("input",{type:"number","onUpdate:modelValue":z=>Y.weight=z,class:"lora-weight",step:"0.1"},null,8,c9),[[Ae,Y.weight]])]),i("div",d9,[i("label",null,h(m(n)("loraManager.textEncoderWeight")),1),Te(i("input",{type:"number","onUpdate:modelValue":z=>Y.text_encoder_weight=z,class:"lora-weight",step:"0.1"},null,8,f9),[[Ae,Y.text_encoder_weight]])]),i("div",p9,[i("label",null,h(Y.hidden?m(n)("lora.hideLora"):m(n)("lora.showLora")),1),i("label",g9,[i("input",{type:"checkbox",checked:!Y.hidden,onChange:z=>U(Y)},null,40,m9),R[6]||(R[6]=i("span",{class:"slider"},null,-1))])])])])],42,t9))),128))],2)],2)],2),ze(tr,{ref_key:"loraDetailLoraStackRef",ref:W},null,512),a.value?(T(),yt(ru,{key:0,ref_key:"loraCardItem",ref:f,fileNmae:s.value,paddingLeft:l.value,paddingTop:r.value,onCardLeave:k,onCardenter:x},null,8,["fileNmae","paddingLeft","paddingTop"])):me("",!0)],6))}},[["__scopeId","data-v-22aa3dae"]]),v9={class:"main-label-manager"},_9={class:"mlm-header"},y9={class:"mlm-grid"},b9=["disabled"],w9=["disabled"],x9=["onClick","title","onDragstart","onDragenter","onDrop"],T9={class:"mlm-item-main"},S9={key:0,class:"pin-badge"},k9={class:"mlm-name"},C9={class:"mlm-item-actions"},E9=["title","onClick"],L9=["title","onClick"],Wg="weilin_prompt_ui_main_labels_v1",$9=xt({__name:"main_label_manager",props:{selectedId:{type:String,default:null}},emits:["select"],setup(e,{expose:t,emit:o}){const n=e,a=o,s=_(""),l=_([]),r=_(n.selectedId),u=_(!0),d=_(!0),c=_("time"),f=_(null),g=_(null);function p(){const K={items:l.value,settings:{sortMode:c.value,sortTimeDesc:u.value,sortNameAsc:d.value,selectedId:r.value}};localStorage.setItem(Wg,JSON.stringify(K))}function v(){try{const K=localStorage.getItem(Wg);if(!K)throw new Error("no data");const oe=JSON.parse(K),Q=Array.isArray(oe)?oe:(oe==null?void 0:oe.items)??[],ie=Array.isArray(oe)?{}:(oe==null?void 0:oe.settings)??{};l.value=Q.map((re,ye)=>({id:re.id??A(),name:re.name??"未命名",content:re.content??"",createdAt:re.createdAt??re.updatedAt??Date.now(),updatedAt:re.updatedAt??re.createdAt??Date.now(),pinned:!!re.pinned,highlighted:!!re.highlighted,order:typeof re.order=="number"?re.order:ye})),ie.sortMode&&(c.value=ie.sortMode),typeof ie.sortTimeDesc=="boolean"&&(u.value=ie.sortTimeDesc),typeof ie.sortNameAsc=="boolean"&&(d.value=ie.sortNameAsc),(typeof ie.selectedId=="string"||ie.selectedId===null)&&(r.value=ie.selectedId)}catch{l.value=[]}}vt(()=>{var K;if(v(),l.value.length===0){const oe=A();l.value.push({id:oe,name:"示例标签",content:"",createdAt:Date.now(),updatedAt:Date.now(),pinned:!1,highlighted:!1,order:0}),p(),r.value=oe;return}if(!U(r.value))r.value=((K=l.value[0])==null?void 0:K.id)??null;else{const oe=U(r.value);a("select",oe?{...oe}:null)}}),Ze(()=>n.selectedId,K=>{r.value=K}),Ze([c,u,d],()=>{p()}),Ze(l,()=>{p()},{deep:!0}),Ze(r,K=>{p();const oe=K?U(K):null;a("select",oe?{...oe}:null)});const b=ot(()=>{const K=s.value.trim().toLowerCase();return K?l.value.filter(oe=>(oe.name||"").toLowerCase().includes(K)):l.value}),x=ot(()=>{const K=[...b.value];if(c.value==="manual")return K.sort((re,ye)=>{const de=re.order??0,M=ye.order??0;return de!==M?de-M:(re.createdAt??0)-(ye.createdAt??0)});const oe=(re,ye)=>{const de=re.name||"",M=ye.name||"";let G=de.localeCompare(M,void 0,{numeric:!0,sensitivity:"base"});return d.value||(G=-G),G},Q=(re,ye)=>{let de=re.createdAt-ye.createdAt;return u.value&&(de=-de),de},ie=re=>re.pinned?0:1;return K.sort((re,ye)=>{const de=ie(re)-ie(ye);if(de!==0)return de;if(c.value==="name"){const G=oe(re,ye);return G!==0?G:Q(re,ye)}const M=Q(re,ye);return M!==0?M:oe(re,ye)}),K}),k=ot(()=>U(r.value));function A(){return"mlm_"+Math.random().toString(36).slice(2)+"_"+Date.now()}function U(K){return l.value.find(oe=>oe.id===K)||null}function w(K){r.value=K.id,a("select",{...K})}function O(){const K=window.prompt("新建标签名称：","");if(!K)return;z(),c.value="manual";const oe=A(),Q=Date.now(),ie=l.value.reduce((ye,de)=>typeof de.order=="number"?Math.min(ye,de.order):ye,0),re={id:oe,name:K.trim(),content:"",createdAt:Q,updatedAt:Q,pinned:!1,highlighted:!1,order:ie-1};l.value.push(re),p(),r.value=oe,a("select",{...re})}function W(){const K=k.value;if(!K)return;const oe=window.prompt("重命名标签：",K.name||"");oe&&(K.name=oe.trim(),K.updatedAt=Date.now(),p())}function V(){const K=k.value;if(!K||!window.confirm(`确定删除标签"${K.name}"吗？`))return;const oe=l.value.findIndex(Q=>Q.id===K.id);oe>=0&&l.value.splice(oe,1),p(),l.value.length?(r.value=l.value[0].id,a("select",{...l.value[0]})):(r.value=null,a("select",null))}function H(){c.value="time",u.value=!u.value}function q(){c.value="name",d.value=!d.value}function he(K){K.pinned=!K.pinned,K.updatedAt=Date.now(),p()}function le(K){K.highlighted=!K.highlighted,K.updatedAt=Date.now(),p()}function R(K){const oe=k.value;oe&&(oe.content=K??"",oe.updatedAt=Date.now(),clearTimeout(Y),Y=setTimeout(()=>p(),400))}let Y=null;function X(K){try{const oe=new Date(K);return`${oe.getFullYear()}-${(oe.getMonth()+1).toString().padStart(2,"0")}-${oe.getDate().toString().padStart(2,"0")} ${oe.getHours().toString().padStart(2,"0")}:${oe.getMinutes().toString().padStart(2,"0")}`}catch{return""}}function z(){x.value.forEach((oe,Q)=>{oe.order=Q})}function Z(K,oe,Q){try{Q.dataTransfer.effectAllowed="move"}catch{}f.value=K.id,g.value=null,z(),c.value="manual"}function se(K){f.value&&(g.value=K.id)}function P(K){if(!f.value)return;const oe=f.value,Q=K==null?void 0:K.id;if(!Q||oe===Q)return F();const ie=[...x.value],re=ie.findIndex(M=>M.id===oe),ye=ie.findIndex(M=>M.id===Q);if(re<0||ye<0)return F();const[de]=ie.splice(re,1);ie.splice(ye,0,de),ie.forEach((M,G)=>{M.order=G}),p(),F()}function F(){f.value=null,g.value=null}return t({updateSelectedContent:R}),(K,oe)=>(T(),C("div",v9,[i("div",_9,[Te(i("input",{"onUpdate:modelValue":oe[0]||(oe[0]=Q=>s.value=Q),class:"mlm-search",type:"text",placeholder:"搜索标签…"},null,512),[[Ae,s.value]]),i("button",{class:"mlm-add",onClick:O},"+ 新建标签"),i("div",y9,[i("button",{class:"mlm-sort",onClick:H}," 按时间 "+h(u.value?"后→先":"先→后"),1),i("button",{class:"mlm-sort",onClick:q}," 按名称 "+h(d.value?"A→Z":"Z→A"),1),i("button",{class:"mlm-edit",disabled:!k.value,onClick:W},"编辑",8,b9),i("button",{class:"mlm-delete",disabled:!k.value,onClick:V},"删除",8,w9)])]),ze(Pv,{name:"mlm",tag:"div",class:"mlm-list"},{default:ht(()=>[(T(!0),C(Oe,null,je(x.value,(Q,ie)=>(T(),C("div",{key:Q.id,class:Ee(["mlm-item",{active:Q.id===r.value,pinned:!!Q.pinned,highlighted:!!Q.highlighted},{dragging:f.value===Q.id,"drag-over":g.value===Q.id}]),onClick:re=>w(Q),title:Q.updatedAt?X(Q.updatedAt):"",draggable:"true",onDragstart:re=>Z(Q,ie,re),onDragenter:Je(re=>se(Q),["prevent"]),onDragover:oe[1]||(oe[1]=Je(()=>{},["prevent"])),onDrop:Je(re=>P(Q),["prevent"]),onDragend:F},[i("div",T9,[Q.pinned?(T(),C("span",S9,"置顶")):me("",!0),i("span",k9,h(Q.name),1)]),i("div",C9,[i("button",{class:Ee(["mini-btn","pin",{active:Q.pinned}]),title:Q.pinned?"取消置顶":"置顶",onClick:Je(re=>he(Q),["stop"])},[...oe[2]||(oe[2]=[i("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[i("path",{d:"M4 14h4v6h8v-6h4L12 4 4 14z"})],-1)])],10,E9),i("button",{class:Ee(["mini-btn","highlight",{active:Q.highlighted}]),title:Q.highlighted?"取消高亮":"高亮",onClick:Je(re=>le(Q),["stop"])},[...oe[3]||(oe[3]=[i("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[i("path",{d:"M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)])],10,L9)])],42,x9))),128))]),_:1})]))}},[["__scopeId","data-v-a435a9c3"]]);function jg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nr={exports:{}},A9=nr.exports,Vg;function I9(){return Vg||(Vg=1,(function(e){if(typeof t=="object"&&typeof t.version=="string")throw new Error("translate.js 已经加载过一次了，当前是重复加载，避免你的翻译出现异常，已帮你拦截此次加载。本信息只是给你一个提示，你可以检查一下你的项目中是否出现了重复引入 translate.js ，当然，这个异常并不会影响到你的具体使用，它已经自动帮你处理拦截了这个异常，只不过提示出来是让你知道，你的代码里出现了重复引入的情况。");var t={version:"3.18.0.20250816",useVersion:"v2",setUseVersion2:function(){t.useVersion="v2",console.log("提示：自 v2.10 之后的版本默认就是使用V2版本（当前版本为:"+t.version+"）， translate.setUseVersion2() 可以不用再加这一行了。当然加了也无所谓，只是加了跟不加是完全一样的。")},translate:null,includedLanguages:"zh-CN,zh-TW,en",resourcesUrl:"//res.zvo.cn/translate",selectLanguageTag:{documentId:"translate",show:!0,languages:"",alreadyRender:!1,selectOnChange:function(n){var a=n.target.value;t.changeLanguage(a)},refreshRender:function(){let n=document.getElementById(t.selectLanguageTag.documentId+"SelectLanguage");n&&n.parentNode.removeChild(n),t.selectLanguageTag.alreadyRender=!1,t.selectLanguageTag.render()},customUI:function(n){var a=function(c){t.selectLanguageTag.selectOnChange(c)},s=document.createElement("select");s.id=t.selectLanguageTag.documentId+"SelectLanguage",s.className=t.selectLanguageTag.documentId+"SelectLanguage";for(var l=t.language.getCurrent(),r=0;r<n.length;r++){var u=document.createElement("option");if(u.setAttribute("value",n[r].id),t.selectLanguageTag.languages.length>0){var d=(","+t.selectLanguageTag.languages+",").toLowerCase();if(d.indexOf(","+n[r].id.toLowerCase()+",")<0)continue}l!=null&&typeof l<"u"&&l.length>0?l==n[r].id&&u.setAttribute("selected","selected"):n[r].id==t.language.getLocal()&&u.setAttribute("selected","selected"),u.appendChild(document.createTextNode(n[r].name)),s.appendChild(u)}window.addEventListener?s.addEventListener("change",a,!1):s.attachEvent("onchange",a),document.getElementById(t.selectLanguageTag.documentId).appendChild(s)},render:function(){if(!t.selectLanguageTag.alreadyRender&&(t.selectLanguageTag.alreadyRender=!0,!!t.selectLanguageTag.show)){if(document.getElementById(t.selectLanguageTag.documentId)==null){var n=document.getElementsByTagName("body");if(n.length==0){console.log("body tag not find, translate.selectLanguageTag.render() is not show Select Language");return}var a=n[0],s=document.createElement("div");s.id=t.selectLanguageTag.documentId,a.appendChild(s)}else if(document.getElementById(t.selectLanguageTag.documentId+"SelectLanguage")!=null)return;typeof t.request.api.language=="string"&&t.request.api.language.length>0?t.request.post(t.request.api.language,{},function(l){if(l.result==0){console.log("load language list error : "+l.info);return}t.selectLanguageTag.customUI(l.list)},null):typeof t.request.api.language=="object"&&t.selectLanguageTag.customUI(t.request.api.language)}}},localLanguage:"zh-CN",googleTranslateElementInit:function(){var n="";document.getElementById("translate")!=null&&(n="translate"),t.translate=new google.translate.TranslateElement({pageLanguage:"zh-CN",includedLanguages:t.selectLanguageTag.languages,layout:0},n)},execute_v1:function(){console.log("=====ERROR======"),console.log("The v1 version has been discontinued since 2022. Please use the latest V3 version and refer to: http://translate.zvo.cn/41162.html")},setCookie:function(n,a){var s=n+"="+escape(a);document.cookie=s},getCookie:function(n){for(var a=document.cookie,s=a.split("; "),l=0;l<s.length;l++){var r=s[l].split("=");if(r[0]==n)return unescape(r[1])}return""},currentLanguage:function(){var n=t.getCookie("googtrans");return n.length>0?n.substr(n.lastIndexOf("/")+1,n.length-1):t.localLanguage},changeLanguage:function(n){var a=",en,de,hi,lt,hr,lv,ht,hu,zh-CN,hy,uk,mg,id,ur,mk,ml,mn,af,mr,uz,ms,el,mt,is,it,my,es,et,eu,ar,pt-PT,ja,ne,az,fa,ro,nl,en-GB,no,be,fi,ru,bg,fr,bs,sd,se,si,sk,sl,ga,sn,so,gd,ca,sq,sr,kk,st,km,kn,sv,ko,sw,gl,zh-TW,pt-BR,co,ta,gu,ky,cs,pa,te,tg,th,la,cy,pl,da,tr,";if(a.indexOf(","+n+",")>-1){console.log("您使用的是v1版本的切换语种方式，v1已在2021年就以废弃，请更换为v2，参考文档： http://translate.zvo.cn/41549.html"),t.check();var s="/"+t.localLanguage+"/"+n,l=document.location.host.split(".");if(l.length>2){var r=l[l.length-2]+"."+l[l.length-1];document.cookie="googtrans=;expires="+new Date(1)+";domain="+r+";path=/",document.cookie="googtrans="+s+";domain="+r+";path=/"}t.setCookie("googtrans",""+s),t.refreshCurrentPage();return}if(t.useVersion="v2",t.to!=null&&t.to.length>0&&t.to!=t.language.getLocal())var u=!0;t.to=n,t.storage.set("to",n);try{window.self!==window.top&&typeof window.parent.translate=="object"&&typeof window.parent.translate.version=="string"&&window.parent.translate.language.getCurrent()!=n&&window.parent.translate.changeLanguage(n)}catch(d){console.log(d)}if(u)location.reload();else{t.execute();const d=document.querySelectorAll("iframe");for(let c=0;c<d.length;c++){const g=d[c].contentWindow;try{typeof g.translate=="object"&&typeof g.translate.version=="string"&&g.translate.to!=n&&(g.translate.to=n,g.translate.storage.set("to",n),g.translate.execute())}catch(p){console.log(p)}}}t.listener.use==!0&&t.listener.isStart==!1&&typeof t.listener.start<"u"&&t.listener.start()},check:function(){window.location.protocol=="file:"&&console.log(`\r
---WARNING----\r
translate.js 主动翻译组件自检异常，当前协议是file协议，翻译组件要在正常的线上http、https协议下才能正常使用翻译功能\r
------------`)},to:"",autoDiscriminateLocalLanguage:!1,documents:[],inProgressNodes:[],ignore:{tag:["style","script","link","pre","code"],class:["ignore","translateSelectLanguage"],id:[],isIgnore:function(n){if(n==null||typeof n>"u")return!1;for(var a=n,s=100;s-- >0;){if(a==null||typeof a>"u")return!1;var l=t.element.getNodeName(a).toLowerCase();if(l.length>0){if(l=="body"||l=="html"||l=="#document")return!1;if(t.ignore.tag.indexOf(l)>-1)return!0}if(a.className!=null){var r=a.className;if(r==null||typeof r!="string")continue;r=r.trim().split(" ");for(var u=0;u<r.length;u++)if(r[u]!=null&&r[u].trim().length>0&&t.ignore.class.indexOf(r[u])>-1)return!0}if(a.id!=null&&typeof a.id<"u"&&t.ignore.id.indexOf(a.id)>-1)return!0;a=a.parentNode}return!1},text:[],textRegex:[],setTextRegexs:function(n){if(!Array.isArray(n))throw new Error("参数必须为数组");for(let a=0;a<n.length;a++)if(!(n[a]instanceof RegExp))throw new Error("第"+a+"项不是RegExp对象");this.textRegex=this.textRegex.concat(n)}},refreshCurrentPage:function(){location.reload()},nomenclature:{data:new Array,old_Data:[],set:function(n){alert("请将 translate.nomenclature.set 更换为 append，具体使用可参考： https://github.com/xnx3/translate ")},append:function(n,a,s){typeof t.nomenclature.data[n]>"u"&&(t.nomenclature.data[n]=new Array),typeof t.nomenclature.data[n][a]>"u"&&(t.nomenclature.data[n][a]=new Array);for(var l=s.split(`
`),r=0;r<l.length;r++){var u=l[r].trim();if(!(u.length<1)){var d=u.split("=");if(d.length==2){var c=d[0].trim(),f=d[1].trim();c.length==0||f.length==0||(t.nomenclature.data[n][a][c]=f)}}}t.nomenclature.data[n][a]=t.util.objSort(t.nomenclature.data[n][a])},get:function(){return t.nomenclature.data},dispose:function(n){if(n==null||n.length==0||typeof t.nomenclature.data[t.language.getLocal()]>"u"||typeof t.nomenclature.data[t.language.getLocal()][t.to]>"u")return n;for(var a in t.nomenclature.data[t.language.getLocal()][t.to])if(t.nomenclature.data[t.language.getLocal()][t.to].hasOwnProperty(a)){var s=t.nomenclature.data[t.language.getLocal()][t.to][a];if(typeof s!="function"){var l=n.indexOf(a);if(l>-1)if(t.language.getLocal()=="english"){var r="";if(l!=0){r=n.substr(l-1,1);var u=t.language.getCharLanguage(r);if(u=="english"||u=="romance")continue}var d="";if(l+a.length!=n.length){d=n.substr(l+a.length,1);var u=t.language.getCharLanguage(d);if(u=="english"||u=="romance")continue}n=n.replace(new RegExp(r+a+d,"g"),r+s+d)}else n=n.replace(new RegExp(a,"g"),s)}}return n}},office:{export:function(){if(t.language.getLocal()==t.language.getCurrent()){alert("本地语种跟要翻译的语种一致，无需导出");return}var n="";for(var a in t.nodeQueue)if(t.nodeQueue.hasOwnProperty(a)){t.nodeQueue[a];for(var s in t.nodeQueue[a].list)if(t.nodeQueue[a].list.hasOwnProperty(s)&&!(typeof s!="string"||s.length<1))for(var l in t.nodeQueue[a].list[s])t.nodeQueue[a].list[s].hasOwnProperty(l)&&(n=n+`
`+t.nodeQueue[a].list[s][l].original+"="+t.storage.get("hash_"+t.language.getCurrent()+"_"+l))}n.length>0?(n="translate.office.append('"+t.language.getCurrent()+"',`"+n+"\n`);",t.util.loadMsgJs(),msg.popups({text:'<textarea id="msgPopupsTextarea" style="width:100%; height:100%; color: black; padding: 8px;">loaing...</textarea>',width:"750px",height:"600px",padding:"1px"}),document.getElementById("msgPopupsTextarea").value=n):msg.alert("无有效内容！")},showPanel:function(){let n=document.createElement("div");n.setAttribute("id","translate_export"),n.setAttribute("class","ignore");let a=document.createElement("button");a.onclick=function(){t.office.export()},a.innerHTML="导出配置信息",a.setAttribute("style","margin-left: 72px; margin-top: 30px; margin-bottom: 20px; font-size: 25px; background-color: blue; padding: 15px; padding-top: 3px; padding-bottom: 3px; border-radius: 3px;"),n.appendChild(a);let s=document.createElement("div");s.innerHTML='1. 首先将当前语种切换为你要翻译的语种<br/>2. 点击导出按钮，将翻译的配置信息导出<br/>3. 将导出的配置信息粘贴到代码中，即可完成<br/><a href="asd" target="_black" style="color: aliceblue;">点此进行查阅详细使用说明</a>',s.setAttribute("style","font-size: 14px; padding: 12px;"),n.appendChild(s),n.setAttribute("style","background-color: black; color: #fff; width: 320px; height: 206px; position: fixed; bottom: 50px; right: 50px;"),document.body.appendChild(n),t.util.loadMsgJs()},append:function(n,a){for(var s=a.split(`
`),l=0;l<s.length;l++){var r=s[l].trim();if(!(r.length<1)){var u=r.split("=");if(u.length==2){var d=u[0],c=u[1];d.length==0||c.length==0||t.storage.set("hash_"+n+"_"+t.util.hash(d),c)}}}},fullExtract:{set:async function(n,a,s,l){if(typeof t.storage.IndexedDB>"u"){console.log("ERROR: translate.storage.IndexedDB not find");return}var r=await t.storage.IndexedDB.get("hash_"+n);typeof r>"u"&&r==null&&(r={originalText:a}),r[s]=l,await t.storage.IndexedDB.set("hash_"+n,r)},export:async function(n){if(typeof t.storage.IndexedDB>"u"){console.log("ERROR: translate.storage.IndexedDB not find");return}if(typeof n!="string"){console.log('error : to param not find, example: "english"');return}var a="translate.office.append('",s=await t.storage.IndexedDB.list("hash_*");for(var l in s)if(s.hasOwnProperty(l)){var r=s[l].value.originalText.replace(/\n/g,"\\n").replace(/\t/g,"\\t");a=a+`
`+r+"="+s[l].value.english.replace(/\n/g,"\\n").replace(/\t/g,"\\t")}a=a+"\n`);";const u=new Blob([a],{type:"text/plain"}),d=URL.createObjectURL(u),c=document.createElement("a");c.href=d,c.download=n+".txt",c.click(),URL.revokeObjectURL(d)},isUse:!1}},setAutoDiscriminateLocalLanguage:function(){t.autoDiscriminateLocalLanguage=!0},nodeQueue:{},setDocuments:function(n){n==null||typeof n>"u"||(typeof n.length>"u"?t.documents[0]=n:t.documents=n,t.nodeQueue={})},getDocuments:function(){if(t.documents!=null&&typeof t.documents<"u"&&t.documents.length>0)return t.documents;var n=new Array;return n[0]=document.documentElement,n},listener:{isStart:!1,use:!1,start:function(){t.listener.use=!0,t.temp_linstenerStartInterval=setInterval(function(){if(document.readyState=="complete"){if(clearInterval(t.temp_linstenerStartInterval),t.language.getCurrent()==t.language.getLocal()&&!t.language.translateLocal)return;t.listener.addListener()}},300)},ignoreNode:[],translateExecuteNodeIgnoreExpireTime:1e3,addIgnore:function(n,a,s){let l="";typeof n=="string"?l=n:l=o.uuid(n),t.listener.ignoreNode[l]={addtime:Date.now()+a,text:s}},refreshIgnoreNode:function(){var n=Date.now();for(const a in t.listener.ignoreNode)t.listener.ignoreNode[a].addtime<n&&delete t.listener.ignoreNode[a]},addListener:function(){if(t.listener.isStart==!0){console.log("translate.listener.start() 已经启动了，无需再重复启动监听，增加浏览器负担");return}t.listener.isStart=!0,t.listener.config={attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},t.listener.callback=function(l,r){var u=[];for(let v of l){let b=[];v.type==="childList"?v.addedNodes.length>0?b=v.addedNodes:v.removedNodes.length>0:v.type==="attributes"||v.type==="characterData"&&(b=[v.target]);for(let x of b){for(var d=!1,c=0;c<u.length;c++)if(u[c].isSameNode(x)){d=!0;break}if(d)break;u.push.apply(u,[x])}}if(u.length>0){var f=[];for(let v of u){for(var g=!1,p=0;p<t.inProgressNodes.length;p++)if(t.inProgressNodes[p].node.isSameNode(v)){g=!0;break}if(g)continue;let b=o.uuid(v);typeof t.listener.ignoreNode[b]<"u"&&t.listener.ignoreNode[b].addtime>Date.now()&&typeof v.nodeValue=="string"&&v.nodeValue==t.listener.ignoreNode[b].text||f.push(v)}if(f.length<1)return;t.execute(f)}},t.listener.observer=new MutationObserver(t.listener.callback);for(var n=t.getDocuments(),a=0;a<n.length;a++){var s=n[a];s!=null&&t.listener.observer.observe(s,t.listener.config)}},renderTaskFinish:function(n){},execute:{renderStartByApi:[],renderStartByApiRun:function(n,a,s){for(var l=0;l<t.listener.execute.renderStartByApi.length;l++)try{t.listener.execute.renderStartByApi[l](n,a,s)}catch(r){console.log(r)}},renderFinishByApi:[],renderFinishByApiRun:function(n,a,s){for(var l=0;l<t.listener.execute.renderFinishByApi.length;l++)try{t.listener.execute.renderFinishByApi[l](n,a,s)}catch(r){console.log(r)}}}},renderTask:class{constructor(){this.taskQueue=[],this.nodes=[]}add(n,a,s,l){var r=t.element.nodeAnalyse.get(n,l),u=t.util.hash(r.text);typeof this.nodes[u]>"u"&&(this.nodes[u]=new Array),this.nodes[u].push(n);var d=this.taskQueue[u];(d==null||typeof d>"u")&&(d=new Array);var c=new Array;a.substr(0,1)==" "&&s.substr(0,1)!=" "&&(s=" "+s),a.substr(a.length-1,1)===" "&&s.substr(0,1)!=" "&&(s=s+" "),c.originalText=a,c.resultText=s,c.attribute=l,d.push(c),this.taskQueue[u]=d}execute(){for(var n in this.taskQueue)if(this.taskQueue.hasOwnProperty(n)){var a=this.taskQueue[n];typeof a!="function"&&(a.sort((f,g)=>g.originalText.length-f.originalText.length),this.taskQueue[n]=a)}t.listener.refreshIgnoreNode();for(var n in this.nodes)if(this.nodes.hasOwnProperty(n))for(var a=this.taskQueue[n],s=0;s<this.nodes[n].length;s++)for(var l=0;l<a.length;l++){var r=a[l];if(typeof a!="function"){var u=this.nodes[n][l];setTimeout(function(p){for(var v=0;v<t.inProgressNodes.length;v++)if(t.inProgressNodes[v].node.isSameNode(p)){t.inProgressNodes[v].number=t.inProgressNodes[v].number-1,t.inProgressNodes[v].number<1&&t.inProgressNodes.splice(v,1);break}},50,u);var d=t.element.nodeAnalyse.set(this.nodes[n][l],r.originalText,r.resultText,r.attribute);t.listener.addIgnore(this.nodes[n][l],t.listener.translateExecuteNodeIgnoreExpireTime,d.resultText)}}if(typeof this.taskQueue<"u"&&Object.keys(this.taskQueue).length>0){var c=this;setTimeout(function(){for(var f in c.nodes)if(c.nodes.hasOwnProperty(f)){for(var g in c.nodes[f])if(c.nodes[f].hasOwnProperty(g)){var p=t.element.nodeAnalyse.get(c.nodes[f][g]),v=o.uuid(p.node);v.length!=0&&(t.nodeHistory[v]={},t.nodeHistory[v].node=p.node,t.whole.isWhole(p.node)?t.nodeHistory[v].translateText=c.taskQueue[f][g].resultText:t.nodeHistory[v].translateText=p.text)}}t.listener.renderTaskFinish(c)},50)}}},state:0,waitingExecute:{use:!0,queue:[],add:function(n){t.waitingExecute.queue.push(n);let a=setInterval(function(){if(t.state==0){clearInterval(a);var s=t.waitingExecute.get();t.execute(s)}},500)},get:function(){return t.waitingExecute.queue.length>0?t.waitingExecute.queue.shift():(console.log("警告， translate.waitingExecute.get 出现异常，quque已空，但还往外取。"),null)},isAllExecuteFinish:function(n,a,s){t.listener.execute.renderFinishByApiRun(n,a,s);for(var l in t.translateRequest[n])if(t.translateRequest[n].hasOwnProperty(l)){for(var r=0;r<t.translateRequest[n][l].length;r++)if(t.translateRequest[n][l][r].executeFinish==0)return}t.lifecycle.execute.renderFinish_Trigger(n,s),t.state=0,t.executeNumber++}},executeNumber:0,lifecycle:{execute:{start:[],start_Trigger:function(n,a){for(var s=0;s<t.lifecycle.execute.start.length;s++)try{t.lifecycle.execute.start[s](n,a)}catch(l){console.log(l)}},start_old:[],startRun:function(n,a,s){for(var l=0;l<t.listener.execute.renderStartByApi.length;l++)try{t.listener.execute.renderStartByApi[l](n,a,s)}catch(r){console.log(r)}},scanNodesFinsh:[],translateNetworkBefore:[],translateNetworkBefore_Trigger:function(n,a,s,l){for(var r=0;r<t.lifecycle.execute.translateNetworkBefore.length;r++)try{t.lifecycle.execute.translateNetworkBefore[r](n,a,s,l)}catch(u){console.log(u)}},translateNetworkAfter:[],renderFinish:[function(n,a){typeof t.visual<"u"&&t.visual.adjustTranslationSpacesByNodequeueUuid(n)}],renderFinish_Trigger:function(n,a){for(var s=0;s<t.lifecycle.execute.renderFinish.length;s++)try{t.lifecycle.execute.renderFinish[s](n,a)}catch(l){console.log(l)}}}},execute:function(n){if(t.waitingExecute.use&&t.state!=0){console.log("当前翻译还未完结，新的翻译任务已加入等待翻译队列中，待翻译结束后便会执行当前翻译任务。"),t.waitingExecute.add(n);return}t.state=1,typeof n<"u"&&(t.useVersion="v2"),t.useVersion=="v1"&&(console.log("提示：https://github.com/xnx3/translate 在 v2.5 版本之后，由于谷歌翻译调整，免费翻译通道不再支持，所以v1版本的翻译接口不再被支持，v1全线下架。考虑到v1已不能使用，当前已自动切换到v2版本。如果您使用中发现什么异常，请针对v2版本进行适配。"),t.useVersion="v2");try{t.init()}catch{}var a=t.util.uuid();if(t.to==null||t.to==""){var s=t.storage.get("to");s!=null&&typeof s<"u"&&s.length>0&&(t.to=s)}try{t.selectLanguageTag.render()}catch(ve){console.log(ve)}if(t.to==null||typeof t.to>"u"||t.to.length==0)if(t.autoDiscriminateLocalLanguage)t.executeByLocalLanguage();else{t.state=0;return}if(t.to==t.language.getLocal()&&!t.language.translateLocal){t.state=0;return}t.lifecycle.execute.start_Trigger(a,t.to),t.images.execute();var l;typeof n<"u"&&n!=null?typeof n.length>"u"?(l=new Array,l[0]=n):l=n:l=t.getDocuments(),l.length>500&&(console.log("------tip------"),console.log("translate.execute( docs ) 传入的docs.length 过大，超过500，这很不正常，当前 docs.length : "+l.length+" ,如果你感觉真的没问题，请联系作者 http://translate.zvo.cn/43006.html 说明情况，根据你的情况进行分析。 当前只取前500个元素进行翻译"));try{for(var r in t.element.tagAttribute)if(t.element.tagAttribute.hasOwnProperty(r)&&t.element.tagAttribute[r]instanceof Array){var u=t.element.tagAttribute[r];t.element.tagAttribute[r]={attribute:u,condition:function(ve){return!0}}}}catch(ve){console.log(ve)}for(var d=0;d<l.length&d<500;d++){var c=l[d];t.element.whileNodes(a,c)}if(t.language.translateLanguagesRange.length>0)for(var f in t.nodeQueue[a].list)t.nodeQueue[a].list.hasOwnProperty(f)&&t.language.translateLanguagesRange.indexOf(f)<0&&delete t.nodeQueue[a].list[f];typeof t.nodeQueue[a]>"u"&&(t.nodeQueue[a]=new Array,t.nodeQueue[a].list=[],console.log("--- translate.js warn tip 警告！！ ---"),console.log("您使用translate.js时可能放的位置不对，不要吧 translate.js 放在网页最顶部，这样当 translate.js 进行执行，也就是 translate.execute() 执行时，因为网页是从上往下加载，它放在网页最顶部，那么它执行时网页后面的内容都还没加载出来，这个是不会获取到网页任何内容的，也就是它是不起任何作用的"));for(var f in t.nodeQueue[a].list)if(t.nodeQueue[a].list.hasOwnProperty(f)){for(var g in t.nodeQueue[a].list[f])if(t.nodeQueue[a].list[f].hasOwnProperty(g)&&typeof t.nodeQueue[a].list[f][g]!="function"&&!(typeof t.nodeQueue[a].list[f][g].nodes>"u"||typeof t.nodeQueue[a].list[f][g].nodes.length>"u")){for(var p=t.nodeQueue[a].list[f][g].nodes.length-1;p>-1;p--){var v=t.element.nodeAnalyse.get(t.nodeQueue[a].list[f][g].nodes[p].node),b=o.uuid(v.node);typeof t.nodeHistory[b]<"u"&&t.nodeHistory[b].translateText==v.text&&t.nodeQueue[a].list[f][g].nodes.splice(p,1)}t.nodeQueue[a].list[f][g].nodes.length==0&&delete t.nodeQueue[a].list[f][g]}Object.keys(t.nodeQueue[a].list[f]).length==0&&delete t.nodeQueue[a].list[f]}var x={},k={},A={},U=[];for(var f in t.nodeQueue[a].list){if(!t.nodeQueue[a].list.hasOwnProperty(f)||f==null||typeof f>"u"||f.length==0||f=="undefined")continue;x[f]=[],k[f]=[];let S=new t.renderTask;A[f]=[];for(var g in t.nodeQueue[a].list[f])if(t.nodeQueue[a].list[f].hasOwnProperty(g)&&typeof t.nodeQueue[a].list[f][g]!="function"){var w=t.nodeQueue[a].list[f][g].original,O=t.nodeQueue[a].list[f][g].translateText,W=w==O?g:t.util.hash(O);t.nodeQueue[a].list[f][g].cacheHash=W;var V=t.storage.get("hash_"+t.to+"_"+W);if(V!=null&&V.length>0){for(var H=0;H<t.nodeQueue[a].list[f][g].nodes.length;H++){for(var q=t.nodeQueue[a].list[f][g].nodes[H].node,he=!1,le=0;le<t.inProgressNodes.length;le++)t.inProgressNodes[le].node.isSameNode(q)&&(t.inProgressNodes[le].number++,he=!0);he||t.inProgressNodes.push({node:q,number:1});var R=t.nodeQueue[a].list[f][g].nodes[H].beforeText+V+t.nodeQueue[a].list[f][g].nodes[H].afterText;S.add(t.nodeQueue[a].list[f][g].nodes[H].node,w,R,t.nodeQueue[a].list[f][g].nodes[H].attribute);for(var Y=-1,d=0;d<A[f].length;d++)if(t.nodeQueue[a].list[f][g].nodes[H].node.isSameNode(A[f][d].node)){Y=d;break}for(var X=-1,d=0;d<U.length;d++)if(t.nodeQueue[a].list[f][g].nodes[H].node.isSameNode(U[d].node)){X=d;break}Y==-1&&(Y=A[f].length,A[f][Y]={},A[f][Y].node=t.nodeQueue[a].list[f][g].nodes[H].node,A[f][Y].array=[]),X==-1&&(X=U.length,U[X]={},U[X].node=t.nodeQueue[a].list[f][g].nodes[H].node,U[X].array=[]);var z=A[f][Y].array.length;A[f][Y].array[z]=R;var Z=U[X].array.length;U[X].array[Z]=R}continue}x[f].push(O),k[f].push(g)}S.execute()}if(typeof t.request.api.translate!="string"||t.request.api.translate==null||t.request.api.translate.length<1){t.state=0,t.lifecycle.execute.renderFinish_Trigger(a,t.to),t.executeNumber++;return}for(var f in A)if(A.hasOwnProperty(f)){for(var se=Object.keys(t.nodeQueue[a].list[f]),P=se.length,d=0;d<A[f].length;d++){for(var F=0;F<U.length;F++)if(A[f][d].node.isSameNode(U[F].node)){A[f][d].array=U[F].array;break}A[f][d].array.sort(function(y,N){return N.length-y.length});for(var K=t.element.nodeAnalyse.get(A[f][d].node),oe=K.text,Q=0;Q<A[f][d].array.length;Q++)A[f][d].array[Q]<1||(oe=oe.replace(new RegExp(t.util.regExp.pattern(A[f][d].array[Q]),"g"),t.util.regExp.resultText(`
`)));for(var ie=oe.split(`
`),re=0;re<ie.length;re++)ie[re]<1||t.addNodeToQueue(a,K.node,ie[re])}var ye=Object.keys(t.nodeQueue[a].list[f]),de=ye.length;if(P-de!=0)for(var M=0;M<ye.length;M++){var G=ye[M];if(se.indexOf(G)==-1){var ae=t.nodeQueue[a].list[f][G],W=ae.original==ae.translateText?G:t.util.hash(ae.translateText);t.nodeQueue[a].list[f][G].cacheHash=W,x[f].push(ae.translateText),k[f].push(G)}}}var D=[];for(var f in t.nodeQueue[a].list)t.nodeQueue[a].list.hasOwnProperty(f)&&(typeof x[f]>"u"||x[f].length<1||f!=t.to&&D.push(f));if(D.length==0){t.lifecycle.execute.renderFinish_Trigger(a,t.to),t.state=0,t.executeNumber++;return}for(var f in k)if(k.hasOwnProperty(f)&&!(typeof k[f]>"u")&&!(k[f].length<1))for(var ee=0;ee<k[f].length;ee++){var L=k[f][ee];if(typeof t.nodeQueue[a].list[f][L].nodes>"u"||typeof t.nodeQueue[a].list[f][L].nodes.length>"u"){console.log("translate.nodeQueue['"+a+"']['list']['"+f+"']['"+L+"'].nodes.length is null ，理论上不应该存在，进行异常报出，但不影响使用，已容错。");continue}for(var E=0;E<t.nodeQueue[a].list[f][L].nodes.length;E++){for(var q=t.nodeQueue[a].list[f][L].nodes[E].node,he=!1,le=0;le<t.inProgressNodes.length;le++)t.inProgressNodes[le].node.isSameNode(q)&&(t.inProgressNodes[le].number++,he=!0);he||t.inProgressNodes.push({node:q,number:1})}}t.state=20;for(var B in D)if(D.hasOwnProperty(B)){var f=D[B];if(typeof f=="string"){if(typeof x[f]>"u"||x[f].length<1){console.log("异常,理论上不应该存在, lang:"+f+", translateTextArray:"),console.log(x),console.log("你无需担心，这个只是个提示，它并不影响你翻译的正常进行，只是个异常提示而已，它会自动容错处理的，不会影响翻译的使用。"),t.state=0,t.executeNumber++;return}(typeof t.translateRequest[a]>"u"||t.translateRequest[a]==null)&&(t.translateRequest[a]={}),t.translateRequest[a][f]={},t.translateRequest[a][f].executeFinish=0,t.translateRequest[a][f].addtime=Math.floor(Date.now()/1e3),t.listener.execute.renderStartByApiRun(a,f,t.to),t.lifecycle.execute.translateNetworkBefore_Trigger(a,f,t.to,x[f]);var ne=t.request.api.translate,ge={from:f,to:t.to,text:encodeURIComponent(JSON.stringify(x[f]))};t.request.post(ne,ge,function(S){if(S.result==0){typeof t.translateRequest[a]=="object"&&typeof t.translateRequest[a][S.from]=="object"?(t.translateRequest[a][S.from].result=2,t.translateRequest[a][S.from].executeFinish=1,t.translateRequest[a][S.from].stoptime=Math.floor(Date.now()/1e3)):console.log("WARINNG!!! translate.translateRequest[uuid][data.from] is not object");var y="";typeof S.from<"u"&&S.from!=null&&(y=S.from);var N="";typeof S.to<"u"&&S.to!=null?N=S.to:N=t.to,t.waitingExecute.isAllExecuteFinish(a,y,N),console.log("=======ERROR START======="),console.log(x[S.from]),console.log("response : "+S.info),console.log("=======ERROR END  =======");return}if(typeof t.nodeQueue[a]>"u"){console.log("提示：你很可能多次引入了 translate.js 所以造成了翻译本身的数据错乱，这只是个提示，它还是会给你正常翻译的，但是你最好不要重复引入太多次 translate.js ，正常情况下只需要引入一次 translate.js 就可以了。太多的话很可能会导致你页面卡顿");return}let j=new t.renderTask;for(var xe=0;xe<k[S.from].length;xe++){var _e=S.from,J=S.text[xe];if(J!=null){J.toLowerCase().indexOf(x[S.from][xe].toLowerCase())>-1&&(J=x[S.from][xe]);var ue=k[S.from][xe],Me=t.nodeQueue[a].list[_e][ue].cacheHash,Pe="";try{Pe=t.nodeQueue[a].list[_e][ue].original}catch(Ve){console.log("uuid:"+a+", originalWord:"+Pe+", lang:"+_e+", hash:"+ue+", text:"+J+", queue:"+t.nodeQueue[a]),console.log(Ve);continue}for(var We=0;We<t.nodeQueue[a].list[_e][ue].nodes.length;We++)j.add(t.nodeQueue[a].list[_e][ue].nodes[We].node,Pe,t.nodeQueue[a].list[_e][ue].nodes[We].beforeText+J+t.nodeQueue[a].list[_e][ue].nodes[We].afterText,t.nodeQueue[a].list[_e][ue].nodes[We].attribute);t.storage.set("hash_"+S.to+"_"+Me,J),t.office.fullExtract.isUse&&t.office.fullExtract.set(ue,Pe,S.to,J)}}j.execute(),t.translateRequest[a][_e].result=1,t.translateRequest[a][_e].executeFinish=1,t.translateRequest[a][_e].stoptime=Math.floor(Date.now()/1e3),setTimeout(function(){t.waitingExecute.isAllExecuteFinish(a,S.from,S.to)},10)},function(S){t.translateRequest[a][S.data.from].executeFinish=1,t.translateRequest[a][S.data.from].stoptime=Math.floor(Date.now()/1e3),t.translateRequest[a][S.data.from].result=3,t.waitingExecute.isAllExecuteFinish(a,S.data.from,t.to)})}}},translateRequest:{},nodeHistory:{},element:{tagAttribute:{},nodeAnalyse:{get:function(n,a){return t.element.nodeAnalyse.analyse(n,"","",a)},set:function(n,a,s,l){return t.element.nodeAnalyse.analyse(n,a,s,l)},analyse:function(n,a,s,l){var r=new Array;r.node=n,r.text="";var u=t.element.getNodeName(n);if(l!=null&&typeof l=="string"&&l.length>0){var d;if(u=="INPUT"&&l.toLowerCase()=="value"?d=n.value:d=n[l],r.text=d,typeof a<"u"&&a.length>0){if(typeof d<"u"){var c=t.util.textReplace(d,a,s,t.to);u=="INPUT"&&l.toLowerCase()=="value"?n.value=c:n[l]=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}var f=n.getAttribute(l);if(f!=null&&typeof f<"u"){var c=t.util.textReplace(f,a,s,t.to);n.setAttribute(l,c),c.indexOf(s)>-1?r.resultText=c:r.resultText=""}}return r}if(u=="#text"&&typeof n.parentNode<"u"){var g=t.element.getNodeName(n.parentNode);g=="TEXTAREA"&&(u="TEXTAREA",n=n.parentNode)}if(u=="INPUT"||u=="TEXTAREA"){if(n.attributes==null||typeof n.attributes>"u")return r.text="",r;if(u=="INPUT"&&typeof n.attributes.type<"u"&&typeof n.attributes.type.nodeValue!=null&&(n.attributes.type.nodeValue.toLowerCase()=="button"||n.attributes.type.nodeValue.toLowerCase()=="submit")){var p=n.attributes.value;if(p!=null&&typeof p<"u"&&typeof p.nodeValue<"u"&&p.nodeValue.length>0){if(typeof a<"u"&&a.length>0){var c=t.util.textReplace(p.nodeValue,a,s,t.to);p.nodeValue=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=p.nodeValue,r.node=p,r}}if(typeof n.attributes.placeholder<"u"){if(typeof a<"u"&&a.length>0){var c=t.util.textReplace(n.attributes.placeholder.nodeValue,a,s,t.to);n.attributes.placeholder.nodeValue=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=n.attributes.placeholder.nodeValue,r.node=n.attributes.placeholder,r}return r.text="",r}if(u=="META"){if(typeof n.name<"u"&&n.name!=null){var v=n.name.toLowerCase(),b=n.getAttribute("property"),x="";if(typeof b<"u"&&b!=null&&b.length>0&&(x=b.toLowerCase()),v=="keywords"||v=="description"||v=="sharetitle"||x=="og:title"||x=="og:description"||x=="og:site_name"||x=="og:novel:latest_chapter_name"){if(typeof a<"u"&&a!=null&&a.length>0){var c=t.util.textReplace(n.content,a,s,t.to);n.content=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=n.content,r}}return r.text="",r}if(u=="IMG"){if(typeof n.alt>"u"||n.alt==null)return r.text="",r;if(typeof a<"u"&&a.length>0){var c=t.util.textReplace(n.alt,a,s,t.to);n.alt=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=n.alt,r}if(n.nodeValue==null||typeof n.nodeValue>"u")r.text="";else if(n.nodeValue.trim().length==0)r.text="";else{if(typeof a<"u"&&a!=null&&a.length>0){var c=t.util.textReplace(n.nodeValue,a,s,t.to);n.nodeValue=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}r.text=n.nodeValue}return r}},getNodeName:function(n){return n==null||typeof n>"u"||n.nodeName==null||typeof n.nodeName>"u"?"":(n.nodeName,typeof n.nodeName=="string"?n.nodeName:typeof n.tagName=="string"&&n.tagName.length>0?n.tagName:(console.log("warn : get nodeName is null, this node ignore translate. node : "),console.log(n),""))},whileNodes:function(n,a){if(!(a==null||typeof a>"u")){(typeof t.nodeQueue[n]>"u"||t.nodeQueue[n]==null)&&(t.nodeQueue[n]=new Array,t.nodeQueue[n].expireTime=Date.now()+120*1e3,t.nodeQueue[n].list=new Array),typeof a=="object"&&typeof a.title=="string"&&a.title.length>0&&(t.ignore.isIgnore(a)||t.addNodeToQueue(n,a,a.title,"title"));var s=t.element.getNodeName(a).toLowerCase();if(typeof t.element.tagAttribute[s]<"u"){for(var l in t.element.tagAttribute[s].attribute)if(t.element.tagAttribute[s].attribute.hasOwnProperty(l)&&!(typeof t.element.tagAttribute[s].condition<"u"&&!t.element.tagAttribute[s].condition(a))){var r=t.element.tagAttribute[s].attribute[l];if(s=="input"&&r.toLowerCase()=="value")u=a.value;else{var u=a.getAttribute(r);if((typeof u>"u"||u==null)&&(u=a[r]),typeof u>"u"||u==null)continue}t.ignore.isIgnore(a)||t.addNodeToQueue(n,a,u,r)}}var d=a.childNodes;if(!(d==null||typeof d>"u"))if(d.length>0)for(var c=0;c<d.length;c++)t.element.whileNodes(n,d[c]);else t.element.findNode(n,a)}},findNode:function(n,a){if(!(a==null||typeof a>"u")&&a.parentNode!=null){var s=t.element.getNodeName(a.parentNode);if(s!=""&&!(t.ignore.tag.indexOf(s.toLowerCase())>-1)&&!t.ignore.isIgnore(a)){var l=t.element.nodeAnalyse.get(a);l.text.length>0&&t.addNodeToQueue(n,l.node,l.text)}}}},addNodeToQueue:function(n,a,s,l){if(!(a==null||s==null||s.length==0)){var r=t.element.getNodeName(a);if(r.toLowerCase()!="#comment"){if(t.util.hash(s),t.util.findTag(s)){if(a.parentNode==null)return;var u=t.element.getNodeName(a.parentNode);if(u=="SCRIPT"||u=="STYLE")return}var d=new Array;d.push(s);for(var c=0;c<t.ignore.textRegex.length;c++)for(var f=t.ignore.textRegex[c],g=0;g<d.length;g++){var s=d[g],p=s.match(f)||[];t.ignore.text=t.ignore.text.concat(p)}for(var v=0;v<t.ignore.text.length;v++)t.ignore.text[v].trim().length!=0&&(d=t.addNodeToQueueTextAnalysis(n,a,d,l,t.ignore.text[v],t.ignore.text[v]));if(typeof t.temp_nomenclature>"u"&&(t.temp_nomenclature=new Array),typeof t.temp_nomenclature[t.language.getLocal()]>"u"&&(b=new Array),typeof t.nomenclature.data[t.language.getLocal()]<"u"&&typeof t.nomenclature.data[t.language.getLocal()][t.to]<"u"){var b;for(var x in t.nomenclature.data[t.language.getLocal()][t.to])if(t.nomenclature.data[t.language.getLocal()][t.to].hasOwnProperty(x)){var k=t.nomenclature.data[t.language.getLocal()][t.to][x];d=t.addNodeToQueueTextAnalysis(n,a,d,l,x,k),typeof b<"u"&&b.push(x)}typeof t.temp_nomenclature[t.language.getLocal()]>"u"&&(t.temp_nomenclature[t.language.getLocal()]=b)}for(var g=0;g<d.length;g++)d[g].trim().length!=0&&(t.ignore.text.indexOf(d[g].trim())>-1||typeof t.temp_nomenclature[t.language.getLocal()]<"u"&&t.temp_nomenclature[t.language.getLocal()].indexOf(d[g].trim())>-1||t.addNodeToQueueAnalysis(n,a,d[g],l))}}},addNodeToQueueTextAnalysis:function(n,a,s,l,r,u){for(var d=new Array,c=0;c<s.length;c++){var f=s[c];if(f.trim()!=u.trim()){var g=f.indexOf(r);if(g>-1){if(r!=u){var p=g-u.length;p<0&&(p=0);var v=g+u.length;v>f.length&&(v=f.length);var b=f.substring(p,v);if(b.indexOf(u)>-1)continue}r!=u&&t.element.nodeAnalyse.set(a,r,u,l);for(var x=f.split(r),k=0;k<x.length;k++){var A=x[k];A.trim().length!=0&&(s.push(A),d.push(f))}}}}if(d.length>0)for(var U=0;U<d.length;U++){let w=s.indexOf(d[U]);w>-1&&s.splice(w,1)}return s},addNodeToQueueAnalysis:function(n,a,s,l){var r=t.language.recognition(s),u=r.languageArray;typeof u[t.to]<"u"&&delete u[t.to];var d=t.whole.isWhole(a);if(d){var c=r.languageName;t.addNodeQueueItem(n,a,s,l,c,"","")}else for(var c in u)if(u.hasOwnProperty(c)){for(var f=0;f<u[c].list.length;f++)if(!(typeof u[c].list[f]>"u"||typeof u[c].list[f].text>"u")){var g=u[c].list[f].text,p=u[c].list[f].beforeText,v=u[c].list[f].afterText;t.addNodeQueueItem(n,a,g,l,c,p,v)}}},addNodeQueueItem:function(n,a,s,l,r,u,d){(t.nodeQueue[n].list[r]==null||typeof t.nodeQueue[n].list[r]>"u")&&(t.nodeQueue[n].list[r]=new Array);var c=t.util.hash(s);(t.nodeQueue[n].list[r][c]==null||typeof t.nodeQueue[n].list[r][c]>"u")&&(t.nodeQueue[n].list[r][c]=new Array,t.nodeQueue[n].list[r][c].nodes=new Array,t.nodeQueue[n].list[r][c].original=s,t.nodeQueue[n].list[r][c].translateText=s);var f=!1;if(typeof a.isSameNode<"u"){for(var g=0;g<t.nodeQueue[n].list[r][c].nodes.length;g++)if(a.isSameNode(t.nodeQueue[n].list[r][c].nodes[g].node)){f=!0;continue}}if(!f){var p=t.nodeQueue[n].list[r][c].nodes.length;t.nodeQueue[n].list[r][c].nodes[p]=new Array,t.nodeQueue[n].list[r][c].nodes[p].node=a,t.nodeQueue[n].list[r][c].nodes[p].attribute=l,t.nodeQueue[n].list[r][c].nodes[p].beforeText=u,t.nodeQueue[n].list[r][c].nodes[p].afterText=d}},whole:{isEnableAll:!1,enableAll:function(){t.whole.isEnableAll=!0},class:[],tag:[],id:[],executeTip:function(){t.whole.class.length==0&&t.whole.tag.length==0&&t.whole.id.length==0||console.log("您开启了 translate.whole 此次行为避开了浏览器端的文本语种自动识别，而是暴力的直接对某个元素的整个文本进行翻译，很可能会产生非常大的翻译量，请谨慎！有关每日翻译字符的说明，可参考： http://translate.zvo.cn/42557.html "),t.whole.tag.indexOf("html")>-1&&console.log("自检发现您设置了 translate.whole.tag 其中有 html ，这个是不生效的，最大只允许设置到 body ")},isWhole:function(n){if(t.whole.isEnableAll)return!0;if(t.whole.class.length==0&&t.whole.tag.length==0&&t.whole.id.length==0&&t.whole.isEnableAll==!1||n==null||typeof n>"u")return!1;for(var a=n,s=100;s-- >0;){if(a==null||typeof a>"u")return!1;var l=t.element.getNodeName(a).toLowerCase();if(l.length>0){if(l=="html"||l=="#document")return!1;if(t.whole.tag.indexOf(l)>-1)return!0}if(a.className!=null){var r=a.className;if(r==null||typeof r!="string")continue;r=r.trim().split(" ");for(var u=0;u<r.length;u++)if(r[u]!=null&&r[u].trim().length>0&&t.whole.class.indexOf(r[u])>-1)return!0}if(a.id!=null&&typeof a.id<"u"&&t.whole.id.indexOf(a.id)>-1)return!0;a=a.parentElement}return!1}},language:{englishVarietys:["french","italian","deutsch","portuguese"],local:"",translateLocal:!1,translateLanguagesRange:[],setLocal:function(n){t.useVersion="v2",t.language.local=n},getLocal:function(){return(t.language.local==null||t.language.local.length<1)&&t.language.autoRecognitionLocalLanguage(),t.language.local},getCurrent:function(){var n=t.storage.get("to");return n!=null&&typeof n<"u"&&n.length>0?n:t.language.getLocal()},setDefaultTo:function(n){var a=t.storage.get("to");a!=null&&typeof a<"u"&&a.length>0||(t.storage.set("to",n),t.to=n)},clearCacheLanguage:function(){typeof t.language.setUrlParamControl_use<"u"&&t.language.setUrlParamControl_use&&(console.log("使用提示："),console.log("translate.language.setUrlParamControl(...) 的作用是 可以通过URL传一个语种，来指定当前页面以什么语种显示。 参考文档： http://translate.zvo.cn/4075.html"),console.log("translate.language.clearCacheLanguage() 是清除历史翻译语种缓存，也就是清除之前指定翻译为什么语种。 参考文档：http://translate.zvo.cn/4080.html"),console.log("如果你执行了 translate.language.setUrlParamControl(...) 那么是要根据url传参来切换语种的，但是后面又出现了 translate.language.clearCacheLanguage() 它会阻止 translate.language.setUrlParamControl(...) 它的设置，即使有url传递翻译为什么语言，也会因为 translate.language.clearCacheLanguage() 给清除掉，使URL传参的语种不起任何作用。")),t.to="",t.storage.set("to","")},setUrlParamControl:function(n){t.language.setUrlParamControl_use=!0,(typeof n>"u"||n.length<1)&&(n="language");var a=t.util.getUrlParam(n);typeof a>"u"||a==""||a=="null"||a=="undefined"||(t.storage.set("to",a),t.to=a)},getTranslateAreaText:function(){var n="",a=document.createElement("div");if(t.documents!=null&&typeof t.documents<"u"&&t.documents.length>0)for(var s=0;s<t.documents.length;s++){var l=t.documents[s];typeof l<"u"&&l!=null&&typeof l.innerText<"u"&&l.innerText!=null&&l.innerText.length>0&&a.appendChild(l.cloneNode(!0))}else typeof document.head<"u"&&a.appendChild(document.head.cloneNode(!0)),typeof document.body<"u"&&a.appendChild(document.body.cloneNode(!0));for(var r=0;r<t.ignore.tag.length;r++)for(var u=t.ignore.tag[r],d=a.querySelectorAll(u),c=Array.prototype.slice.call(d),f=0;f<c.length;f++){var g=c[f];g.parentNode&&g.parentNode.removeChild(g)}if(n=a.innerText,n==null||typeof n>"u"||n.length<1){t.language.local="chinese_simplified";return}return n=n.replace(/\s/g,""),n},autoRecognitionLocalLanguage:function(){if(t.language.local!=null&&t.language.local.length>2)return t.language.local;var n=t.language.getTranslateAreaText();t.language.local="chinese_simplified";var a=t.language.recognition(n);return t.language.local=a.languageName,t.language.local},get:function(n){for(var a=new Array,s=new Array,l=[],r=[],u=0;u<n.length;u++){var d=n.charAt(u),c=t.language.getCharLanguage(d);c==""&&(c="unidentification");var f=t.language.analyse(c,s,l,r,d);s=f.langStrs,typeof l.language<"u"&&(r.language=l.language,r.charstr=l.charstr,r.storage_language=l.storage_language),l.language=f.storage_language,l.charstr=d,l.storage_language=f.storage_language,a.push(c)}return typeof s.unidentification<"u"&&delete s.unidentification,typeof s.specialCharacter<"u"&&delete s.specialCharacter,typeof s.number<"u"&&delete s.number,s},recognitionAlgorithm:function(n,a,s,l){if(typeof s.english<"u"&&typeof s.romance<"u"&&a.languageName=="english"&&s.romance/s.english>.008&&(typeof t.language.local<"u"&&t.language.local.length>1&&t.language.englishVarietys.indexOf(t.language.local)>-1&&(a.languageName=t.language.local),a.languageName=="english")){var r=t.language.romanceSentenceAnaly(n);r.length==0?console.log("语种识别异常，应该是 法语、西班牙语、葡萄牙语、意大利语 中的一种才是，除非是除了这四种语种之外的别的 罗曼语族 中的语种，当前已将 "+n+"识别为英语。 你可以联系我们求助 https://translate.zvo.cn/4030.html"):a.languageName=r}if(typeof s.japanese<"u"&&a.languageName!="japanese"&&s.japanese/l>.08&&(a.languageName="japanese"),(typeof s.chinese_simplified<"u"||typeof s.chinese_traditional<"u")&&typeof s.english<"u"&&a.languageName=="english"){var u=0;typeof s.chinese_simplified<"u"&&(u=u+s.chinese_simplified),typeof s.chinese_traditional<"u"&&(u=u+s.chinese_traditional),u/s.english>.05&&(a.languageName="chinese_simplified")}return typeof s.chinese_simplified<"u"&&typeof s.chinese_traditional<"u"&&a.languageName=="chinese_simplified"&&s.chinese_traditional/s.chinese_simplified>.03&&(a.languageName="chinese_traditional"),a},recognition:function(n){var a=t.language.get(n),s=[],l=[],r=0;for(var u in a)if(a.hasOwnProperty(u)&&typeof a[u]=="object"){for(var d=0,c=0;c<a[u].length;c++)d=d+a[u][c].text.length;r=r+d,s[u]=d,l[u]=d}var f="",g=0;for(var p in s)s.hasOwnProperty(p)&&s[p]>g&&(f=p,g=s[p]);var v={};for(var p in a)a.hasOwnProperty(p)&&(v[p]={},v[p].number=l[p],v[p].list=a[p]);var b={languageName:f,languageArray:v};return t.language.recognitionAlgorithm(n,b,s,r)},getCharLanguage:function(n){if(n==null||typeof n>"u")return"";if(this.russian(n))return"russian";if(this.english(n))return"english";if(this.romance(n))return"romance";if(this.specialCharacter(n))return"specialCharacter";if(this.number(n))return"number";var a=this.chinese(n);return a=="simplified"?"chinese_simplified":a=="traditional"?"chinese_traditional":this.japanese(n)?"japanese":this.korean(n)?"korean":this.greek(n)?"greek":this.thai(n)?"thai":this.arabic(n)?"arabic":this.romanian(n)?"romanian":this.hebrew(n)?"hebrew":""},analyse:function(n,a,s,l,r){typeof a[n]>"u"&&(a[n]=new Array);var u=0;typeof s.storage_language>"u"||(t.language.connector(r)&&(n=s.storage_language),s.storage_language==n?u=a[n].length-1:u=a[n].length),typeof a[n][u]>"u"&&(a[n][u]=new Array,a[n][u].beforeText="",a[n][u].afterText="",a[n][u].text=""),a[n][u].text=a[n][u].text+r,t.language.wordBlankConnector(t.language.getLocal())==!1&&t.language.wordBlankConnector(t.to)&&s.storage_language!=null&&typeof s.storage_language<"u"&&s.storage_language.length>0&&s.storage_language!="specialCharacter"&&(t.language.wordBlankConnector(s.storage_language)==!1&&t.language.wordBlankConnector(n)?a[s.storage_language][a[s.storage_language].length-1].afterText=" ":s.storage_language=="english"&&n!="english"&&(a[n][u].beforeText=" "));var d=new Array;return d.langStrs=a,d.storage_language=n,d},connector:function(n){return!!(/.*[\u0020\u00A0\u202F\u205F\u3000]+.*$/.test(n)||/.*[\u0030-\u0039]+.*$/.test(n)||/.*[\u0021\u0022\u0023\u0024\u0025\u0026\u0027\u002C\u002D\u002E\u003A\u003B\u003F\u0040]+.*$/.test(n)||/.*[\u3002\uFF1F\uFF01\uFF0C\u3001\uFF1B\uFF1A\u300C\u300D\u300E\u300F\u2018\u2019\u201C\u201D\uFF08\uFF09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uFF0E\u300A\u300B\u3008\u3009\u00b7]+.*$/.test(n))},wordBlankConnector:function(n){if(n==null||typeof n>"u")return!0;switch(n.trim().toLowerCase()){case"chinese_simplified":return!1;case"chinese_traditional":return!1;case"korean":return!1;case"japanese":return!1}return!0},chinese_traditional_dict:"皚藹礙愛翺襖奧壩罷擺敗頒辦絆幫綁鎊謗剝飽寶報鮑輩貝鋇狽備憊繃筆畢斃閉邊編貶變辯辮鼈癟瀕濱賓擯餅撥缽鉑駁蔔補參蠶殘慚慘燦蒼艙倉滄廁側冊測層詫攙摻蟬饞讒纏鏟産闡顫場嘗長償腸廠暢鈔車徹塵陳襯撐稱懲誠騁癡遲馳恥齒熾沖蟲寵疇躊籌綢醜櫥廚鋤雛礎儲觸處傳瘡闖創錘純綽辭詞賜聰蔥囪從叢湊竄錯達帶貸擔單鄲撣膽憚誕彈當擋黨蕩檔搗島禱導盜燈鄧敵滌遞締點墊電澱釣調諜疊釘頂錠訂東動棟凍鬥犢獨讀賭鍍鍛斷緞兌隊對噸頓鈍奪鵝額訛惡餓兒爾餌貳發罰閥琺礬釩煩範販飯訪紡飛廢費紛墳奮憤糞豐楓鋒風瘋馮縫諷鳳膚輻撫輔賦複負訃婦縛該鈣蓋幹趕稈贛岡剛鋼綱崗臯鎬擱鴿閣鉻個給龔宮鞏貢鈎溝構購夠蠱顧剮關觀館慣貫廣規矽歸龜閨軌詭櫃貴劊輥滾鍋國過駭韓漢閡鶴賀橫轟鴻紅後壺護滬戶嘩華畫劃話懷壞歡環還緩換喚瘓煥渙黃謊揮輝毀賄穢會燴彙諱誨繪葷渾夥獲貨禍擊機積饑譏雞績緝極輯級擠幾薊劑濟計記際繼紀夾莢頰賈鉀價駕殲監堅箋間艱緘繭檢堿鹼揀撿簡儉減薦檻鑒踐賤見鍵艦劍餞漸濺澗漿蔣槳獎講醬膠澆驕嬌攪鉸矯僥腳餃繳絞轎較稭階節莖驚經頸靜鏡徑痙競淨糾廄舊駒舉據鋸懼劇鵑絹傑潔結誡屆緊錦僅謹進晉燼盡勁荊覺決訣絕鈞軍駿開凱顆殼課墾懇摳庫褲誇塊儈寬礦曠況虧巋窺饋潰擴闊蠟臘萊來賴藍欄攔籃闌蘭瀾讕攬覽懶纜爛濫撈勞澇樂鐳壘類淚籬離裏鯉禮麗厲勵礫曆瀝隸倆聯蓮連鐮憐漣簾斂臉鏈戀煉練糧涼兩輛諒療遼鐐獵臨鄰鱗凜賃齡鈴淩靈嶺領餾劉龍聾嚨籠壟攏隴樓婁摟簍蘆盧顱廬爐擄鹵虜魯賂祿錄陸驢呂鋁侶屢縷慮濾綠巒攣孿灤亂掄輪倫侖淪綸論蘿羅邏鑼籮騾駱絡媽瑪碼螞馬罵嗎買麥賣邁脈瞞饅蠻滿謾貓錨鉚貿麽黴沒鎂門悶們錳夢謎彌覓綿緬廟滅憫閩鳴銘謬謀畝鈉納難撓腦惱鬧餒膩攆撚釀鳥聶齧鑷鎳檸獰甯擰濘鈕紐膿濃農瘧諾歐鷗毆嘔漚盤龐國愛賠噴鵬騙飄頻貧蘋憑評潑頗撲鋪樸譜臍齊騎豈啓氣棄訖牽扡釺鉛遷簽謙錢鉗潛淺譴塹槍嗆牆薔強搶鍬橋喬僑翹竅竊欽親輕氫傾頃請慶瓊窮趨區軀驅齲顴權勸卻鵲讓饒擾繞熱韌認紉榮絨軟銳閏潤灑薩鰓賽傘喪騷掃澀殺紗篩曬閃陝贍繕傷賞燒紹賒攝懾設紳審嬸腎滲聲繩勝聖師獅濕詩屍時蝕實識駛勢釋飾視試壽獸樞輸書贖屬術樹豎數帥雙誰稅順說碩爍絲飼聳慫頌訟誦擻蘇訴肅雖綏歲孫損筍縮瑣鎖獺撻擡攤貪癱灘壇譚談歎湯燙濤縧騰謄銻題體屜條貼鐵廳聽烴銅統頭圖塗團頹蛻脫鴕馱駝橢窪襪彎灣頑萬網韋違圍爲濰維葦偉僞緯謂衛溫聞紋穩問甕撾蝸渦窩嗚鎢烏誣無蕪吳塢霧務誤錫犧襲習銑戲細蝦轄峽俠狹廈鍁鮮纖鹹賢銜閑顯險現獻縣餡羨憲線廂鑲鄉詳響項蕭銷曉嘯蠍協挾攜脅諧寫瀉謝鋅釁興洶鏽繡虛噓須許緒續軒懸選癬絢學勳詢尋馴訓訊遜壓鴉鴨啞亞訝閹煙鹽嚴顔閻豔厭硯彥諺驗鴦楊揚瘍陽癢養樣瑤搖堯遙窯謠藥爺頁業葉醫銥頤遺儀彜蟻藝億憶義詣議誼譯異繹蔭陰銀飲櫻嬰鷹應纓瑩螢營熒蠅穎喲擁傭癰踴詠湧優憂郵鈾猶遊誘輿魚漁娛與嶼語籲禦獄譽預馭鴛淵轅園員圓緣遠願約躍鑰嶽粵悅閱雲鄖勻隕運蘊醞暈韻雜災載攢暫贊贓髒鑿棗竈責擇則澤賊贈紮劄軋鍘閘詐齋債氈盞斬輾嶄棧戰綻張漲帳賬脹趙蟄轍鍺這貞針偵診鎮陣掙睜猙幀鄭證織職執紙摯擲幟質鍾終種腫衆謅軸皺晝驟豬諸誅燭矚囑貯鑄築駐專磚轉賺樁莊裝妝壯狀錐贅墜綴諄濁茲資漬蹤綜總縱鄒詛組鑽緻鐘麼為隻兇準啟闆裡靂餘鍊",chinese:function(n){return/.*[\u4e00-\u9fa5]+.*$/.test(n)?this.chinese_traditional_dict.indexOf(n)>-1?"traditional":"simplified":""},japanese:function(n){return!!/.*[\u3040-\u309F\u30A0-\u30FF]+.*$/.test(n)},korean:function(n){return!!/.*[\uAC00-\uD7AF]+.*$/.test(n)},russian:function(n){return!!/^[А-Яа-яЁё]$/.test(n)},thai:function(n){return!!/^[\u0E01-\u0E59]$/.test(n)},arabic:function(n){return/^[\u0600-\u06FF\u0750-\u077F]$/.test(n)},romanian:function(n){return/^[\u00C0-\u00FF\u0100-\u017F\u0218-\u021B]$/.test(n)},greek:function(n){return!!/^[\u0391-\u03A9\u03B1-\u03C9]$/.test(n)},hebrew:function(n){return/^[\u0590-\u05FF]$/.test(n)},number:function(n){return!!/.*[\u0030-\u0039]+.*$/.test(n)},english:function(n){return/.*[\u0041-\u005a]+.*$/.test(n)?!0:!!/.*[\u0061-\u007a]+.*$/.test(n)},romance_dict:["é","è","ê","à","ç","œ","ñ","á","ó","ò","ì","ã","õ"],romance:function(n){return this.romance_dict.indexOf(n)>-1},romanceSentenceAnaly:function(n){const a={french:{score:0,chars:["é","è","ê","à","ç","œ"]},spanish:{score:0,chars:["ñ","á","ó"],pairs:["ll"]},italian:{score:0,chars:["ò","ì"],pairs:["cc","ss"]},portuguese:{score:0,chars:["ã","õ"]}};for(let r=0;r<n.length;r++){const u=n[r].toLowerCase();if(Object.keys(a).forEach(d=>{a[d].chars.includes(u)&&(a[d].score+=1)}),r<n.length-1){const d=n.slice(r,r+2).toLowerCase();Object.keys(a).forEach(c=>{const f=a[c].pairs;f&&f.includes(d)&&(a[c].score+=2)})}}let s="",l=-1;return Object.keys(a).forEach(r=>{a[r].score>l&&(l=a[r].score,s=r)}),s||""},specialCharacter:function(n){return!!(/.*[\u2460-\u24E9]+.*$/.test(n)||/.*[\u2500-\u25FF]+.*$/.test(n)||/.*[\u3200-\u33FF]+.*$/.test(n)||/.*[\uFF00-\uFF5E]+.*$/.test(n)||/.*[\u2000-\u22FF]+.*$/.test(n)||/.*[\u3001-\u3036]+.*$/.test(n)||/.*[\u0020-\u002F]+.*$/.test(n)||/.*[\u003B\u003B\u003C\u003D\u003E\u003F\u005B\u005C\u005D\u005E\u005F\u0060\u007B\u007C\u007D\u007E]+.*$/.test(n)||/.*[\u0009\u000a\u0020\u00A0\u1680\u180E\u202F\u205F\u3000\uFEFF]+.*$/.test(n)||/.*[\u2000-\u200B]+.*$/.test(n)||/.*[\u2C60-\u2C77]+.*$/.test(n))},textTranslateReplace:function(n,a,s,l){return t.util.textReplace(n,a,s,l)}},executeByLocalLanguage:function(){var n=t.util.browserDefaultLanguage();if(typeof n<"u"&&n.length>0){t.changeLanguage(n);return}typeof t.request.api.ip!="string"||t.request.api.ip==null||t.request.api.ip.length<1||t.request.post(t.request.api.ip,{},function(a){a.result==0?(console.log("==== ERROR 获取当前用户所在区域异常 ===="),console.log(a.info),console.log("==== ERROR END ====")):(t.storage.set("to",a.language),t.to=a.language,t.selectLanguageTag,t.execute())},null)},util:{textReplace:function(n,a,s,l){if(n==a)return s;let r=0,u=30;for(;n.indexOf(a,r)>-1&&u-- >0;){let d=""+s,c=""+a;if(t.language.wordBlankConnector(l)){let g=n.indexOf(a,r);if(g+1<n.length){let p=n.charAt(g+a.length);/。/.test(p)?(d=d+". ",c=a+"。"):/，/.test(p)?(d=d+", ",c=a+"，"):/：/.test(p)?(d=d+": ",c=a+"："):[" ",`
`,"	","]","|","_","-","/"].indexOf(p)!==-1||d.length>0&&d.charAt(d.length-1)==" "||(d=d+" ")}if(g>0){let p=n.charAt(g-1);/。/.test(p)?(d=". "+d,c="。"+c):/，/.test(p)?(d=", "+d,c="，"+c):/：/.test(p)?(d=": "+d,c="："+c):[" ",`
`,"	","[","|","_","-","/"].indexOf(p)!==-1||d.length>0&&d.charAt(0)==" "||(d=" "+d)}}let f=t.util.replaceFromIndex(n,r,c,d);f.replaceEndIndex<1?console.log("while中已经 indexOf发现了，但是实际没有替换，出现异常了！理论上这是不应该出现的。 text:"+n+" , translateOriginal:"+a):(r=f.replaceEndIndex,n=f.text)}return n},replaceFromIndex:function(n,a,s,l){const r=n.slice(0,a),u=n.slice(a),d=u.indexOf(s);if(d>-1){const c=u.replace(s,l);return{text:r+c,replaceEndIndex:a+d+l.length}}else return{text:r+replacedAfter,replaceEndIndex:0}},uuid:function(){var n=new Date().getTime();window.performance&&typeof window.performance.now=="function"&&(n+=performance.now());var a="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(s){var l=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(s=="x"?l:l&3|8).toString(16)});return a},findTag:function(n){var a=/<[^>]+>/g;return a.test(n)},arrayFindMaxNumber:function(n){for(var a={},s=[],l=0,r=0,u=n.length;r<u;r++)a[n[r]]?a[n[r]]++:a[n[r]]=1,a[n[r]]>l&&(l=a[n[r]]);for(var d in a)a.hasOwnProperty(d)&&a[d]===l&&s.push(d);return s},hash:function(n){if(n==null||typeof n>"u")return n;var a=0,s,l;if(n.length===0)return a;for(s=0;s<n.length;s++)l=n.charCodeAt(s),a=(a<<5)-a+l,a|=0;return a+""},charReplace:function(n){return n==null?"":(n=n.trim(),n=n.replace(/\t|\n|\v|\r|\f/g,""),n)},regExp:{pattern:function(n){return n=n.replace(/\\/g,"\\\\"),n=n.replace(/\"/g,'\\"'),n=n.replace(/\?/g,"\\?"),n=n.replace(/\$/g,"\\$"),n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)"),n=n.replace(/\|/g,"\\|"),n=n.replace(/\+/g,"\\+"),n=n.replace(/\*/g,"\\*"),n=n.replace(/\[/g,"\\["),n=n.replace(/\]/g,"\\]"),n=n.replace(/\^/g,"\\^"),n=n.replace(/\{/g,"\\{"),n=n.replace(/\}/g,"\\}"),n},resultText:function(n){return n}},getUrlParam:function(n){var a=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),s=window.location.search.substr(1).match(a);return s!=null?unescape(s[2]):""},synchronizesLoadJs:function(n){var a=null;if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch{a=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(a=new XMLHttpRequest);if(a.open("GET",n,!1),a.send(null),a.readyState==4)if(a.status>=200&&a.status<300||a.status==0||a.status==304){var s=document.getElementsByTagName("HTML")[0],l=document.createElement("script");l.language="javascript",l.type="text/javascript";try{l.appendChild(document.createTextNode(a.responseText))}catch{l.text=a.responseText}return s.appendChild(l),!0}else return!1;else return!1},loadMsgJs:function(){typeof msg<"u"||t.util.synchronizesLoadJs("https://res.zvo.cn/msg/msg.js")},objSort:function(n){var a=Array.from(Object.keys(n));a.sort(function(r,u){return u.length-r.length});var s=new Array;for(var l of a)s[l]=n[l];return s},versionStringToInt:function(n){var a=n.split("."),s=0;return s=parseInt(a[0])*1e3*1e3+s,s=parseInt(a[1])*1e3+s,s=parseInt(a[2])+s,s},split:function(n,a,s){let l=a,r=[];if(JSON.stringify(n).length<=a)r.push(n);else{let u=JSON.stringify(n).trim().substring(1,JSON.stringify(n).length-1);if(JSON.stringify(n).length-a<=2){a=a-4;let d=u.substring(0,u.lastIndexOf('","')+1),c=u.substring(u.lastIndexOf('","')+2);r.push(JSON.parse("["+d+"]")),r.push(JSON.parse("["+c+"]"))}else{a=a-2;let d=0;for(;d-u.length<0;){let c="";d+a-u.length>=0?c=u.substring(d):c=u.substring(d,d+a);let f=c.length,g=1;c.endsWith('"')?c.endsWith('","')?f-=2:c.startsWith('"')||(f=c.lastIndexOf('","')+1):c.endsWith('",')?f-=1:(f=c.lastIndexOf('","')+1,f<=0&&(c.startsWith('"')?f=c.length-1:f=c.length-2,c.endsWith('"')||(g=0)));let p="";f-c.length>0||f-0==0?(p=c,f=f+p.length):p=c.substring(0,f),!p.startsWith('"')&&!p.startsWith(',"')&&(p='"'+p),p.endsWith('"')||(p=p+'"'),d+=f+g,p="["+p+"]";try{r.push(JSON.parse(p))}catch{d=d-(f+g)+1}}}}return s&&s>0&&(r=t.util._splitMaxSize(r,l,s)),r},_splitMaxSize:function(n,a,s){let l=[],r=[];if(n.forEach(function(u,d){if(u=r.concat(u),u.length>s){let f=u.slice(0,s),g=u.slice(s),p=1;for(;JSON.stringify(f).length>a&&(f=u.slice(0,s-p),g=u.slice(s-p),p++,!(p>=u.length+1)););l.push(f),r.length=0,r=g}else{let f=u,g=[],p=1;for(;JSON.stringify(f).length>a&&(f=u.slice(0,s-p),g=u.slice(s-p),p++,!(p>=u.length+1)););l.push(f),r.length=0,r=g}}),r.length>0){let u=[];u.push(r);let d=t.util._splitMaxSize(u,a,s);l=l.concat(d)}return l},browserLanguage:{zh:"chinese_simplified","zh-CN":"chinese_simplified","zh-TW":"chinese_traditional","zh-HK":"chinese_traditional",co:"corsican",gn:"guarani",rw:"kinyarwanda",ha:"hausa",no:"norwegian",nl:"dutch",yo:"yoruba",en:"english","en-US":"english",kok:"gongen",la:"latin",ne:"nepali",fr:"french",cs:"czech",haw:"hawaiian",ka:"georgian",ru:"russian",fa:"persian",bho:"bhojpuri",hi:"hindi",be:"belarusian",sw:"swahili",is:"icelandic",yi:"yiddish",tw:"twi",ga:"irish",gu:"gujarati",km:"khmer",sk:"slovak",he:"hebrew",kn:"kannada",hu:"hungarian",ta:"tamil",ar:"arabic",bn:"bengali",az:"azerbaijani",sm:"samoan",af:"afrikaans",id:"indonesian",da:"danish",sn:"shona",bm:"bambara",lt:"lithuanian",vi:"vietnamese",mt:"maltese",tk:"turkmen",as:"assamese",ca:"catalan",si:"singapore",ceb:"cebuano",gd:"scottish-gaelic",sa:"sanskrit",pl:"polish",gl:"galician",lv:"latvian",uk:"ukrainian",tt:"tatar",cy:"welsh",ja:"japanese",fil:"filipino",ay:"aymara",lo:"lao",te:"telugu",ro:"romanian",ht:"haitian_creole",doi:"dogrid",sv:"swedish",mai:"maithili",th:"thai",hy:"armenian",my:"burmese",ps:"pashto",hmn:"hmong",dv:"dhivehi",lb:"luxembourgish",sd:"sindhi",ku:"kurdish",tr:"turkish",mk:"macedonian",bg:"bulgarian",ms:"malay",lg:"luganda",mr:"marathi",et:"estonian",ml:"malayalam",de:"deutsch",sl:"slovene",ur:"urdu",pt:"portuguese",ig:"igbo",ckb:"kurdish_sorani",om:"oromo",el:"greek",es:"spanish",fy:"frisian",so:"somali",am:"amharic",ny:"nyanja",pa:"punjabi",eu:"basque",it:"italian",sq:"albanian",ko:"korean",tg:"tajik",fi:"finnish",ky:"kyrgyz",ee:"ewe",hr:"croatian",kri:"creole",qu:"quechua",bs:"bosnian",mi:"maori"},browserDefaultLanguage:function(){var n=navigator.language||navigator.userLanguage;if(typeof n=="string"&&n.length>0){var a=t.util.browserLanguage[n];if(typeof a>"u")console.log("browser default language : "+n+", translate.js current translate channel not support this language ");else return a}return""},urlSplitByText:function(n){const a=/(https?:\/\/[\w\-._~:\/?#[\]@!$&'()*+;=%]+(?=[\s\u4e00-\u9fa5，。；,!?]|$))/gi,s=n.split(a);let l={};for(let r=0;r<s.length;r++)r%2===0?s[r]!==""&&(l[s[r]]="0"):l[s[r]]="1";return l},getElementPosition:function(n){const a=n.getBoundingClientRect(),s=window.scrollX||document.documentElement.scrollLeft,l=window.scrollY||document.documentElement.scrollTop,r=a.left+s,u=a.top+l,d=a.right-a.left,c=a.bottom-a.top,f=r+d,g=u+c;return{startX:r,startY:u,endX:f,endY:g,width:d,height:c}}},service:{name:"translate.service",use:function(n){if(typeof t.enterprise<"u"&&t.enterprise.isUse==!0){console.log("您已启用了企业级翻译通道 translate.enterprise.use(); (文档：https://translate.zvo.cn/4087.html) , 所以您设置的 translate.service.use('"+n+"'); (文档：https://translate.zvo.cn/4081.html) 将失效不起作用，有企业级翻译通道全部接管。");return}if(typeof n=="string"&&(t.service.name=n,n!="translate.service")){if(t.whole.enableAll(),n.toLowerCase()=="giteeai"){t.request.api.host=["https://giteeai.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn:1000/","https://api.translate.zvo.cn:1000/"];return}if(n.toLowerCase()=="siliconflow"){t.request.api.host=["https://siliconflow.zvo.cn/","https://america.api.translate.zvo.cn:1414/","https://deutsch.enterprise.api.translate.zvo.cn:1414/"];return}}},edge:{api:{auth:"https://edge.microsoft.com/translate/auth",translate:"https://api.cognitive.microsofttranslator.com/translate?from={from}&to={to}&api-version=3.0&includeSentenceLength=true"},language:{json:[{id:"ukrainian",name:"Україна",serviceId:"uk"},{id:"norwegian",name:"Norge",serviceId:"no"},{id:"welsh",name:"Iaith Weleg",serviceId:"cy"},{id:"dutch",name:"nederlands",serviceId:"nl"},{id:"japanese",name:"日本語",serviceId:"ja"},{id:"filipino",name:"Pilipino",serviceId:"fil"},{id:"english",name:"English",serviceId:"en"},{id:"lao",name:"ກະຣຸນາ",serviceId:"lo"},{id:"telugu",name:"తెలుగుName",serviceId:"te"},{id:"romanian",name:"Română",serviceId:"ro"},{id:"nepali",name:"नेपालीName",serviceId:"ne"},{id:"french",name:"Français",serviceId:"fr"},{id:"haitian_creole",name:"Kreyòl ayisyen",serviceId:"ht"},{id:"czech",name:"český",serviceId:"cs"},{id:"swedish",name:"Svenska",serviceId:"sv"},{id:"russian",name:"Русский язык",serviceId:"ru"},{id:"malagasy",name:"Malagasy",serviceId:"mg"},{id:"burmese",name:"ဗာရမ်",serviceId:"my"},{id:"pashto",name:"پښتوName",serviceId:"ps"},{id:"thai",name:"คนไทย",serviceId:"th"},{id:"armenian",name:"Արմենյան",serviceId:"hy"},{id:"chinese_simplified",name:"简体中文",serviceId:"zh-CHS"},{id:"persian",name:"Persian",serviceId:"fa"},{id:"chinese_traditional",name:"繁體中文",serviceId:"zh-CHT"},{id:"kurdish",name:"Kurdî",serviceId:"ku"},{id:"turkish",name:"Türkçe",serviceId:"tr"},{id:"hindi",name:"हिन्दी",serviceId:"hi"},{id:"bulgarian",name:"български",serviceId:"bg"},{id:"malay",name:"Malay",serviceId:"ms"},{id:"swahili",name:"Kiswahili",serviceId:"sw"},{id:"oriya",name:"ଓଡିଆ",serviceId:"or"},{id:"icelandic",name:"ÍslandName",serviceId:"is"},{id:"irish",name:"Íris",serviceId:"ga"},{id:"khmer",name:"ភាសា​ខ្មែរName",serviceId:"km"},{id:"gujarati",name:"ગુજરાતી",serviceId:"gu"},{id:"slovak",name:"Slovenská",serviceId:"sk"},{id:"kannada",name:"ಕನ್ನಡ್Name",serviceId:"kn"},{id:"hebrew",name:"היברית",serviceId:"he"},{id:"hungarian",name:"magyar",serviceId:"hu"},{id:"marathi",name:"मराठीName",serviceId:"mr"},{id:"tamil",name:"தாமில்",serviceId:"ta"},{id:"estonian",name:"eesti keel",serviceId:"et"},{id:"malayalam",name:"മലമാലം",serviceId:"ml"},{id:"inuktitut",name:"ᐃᓄᒃᑎᑐᑦ",serviceId:"iu"},{id:"arabic",name:"بالعربية",serviceId:"ar"},{id:"deutsch",name:"Deutsch",serviceId:"de"},{id:"slovene",name:"slovenščina",serviceId:"sl"},{id:"bengali",name:"বেঙ্গালী",serviceId:"bn"},{id:"urdu",name:"اوردو",serviceId:"ur"},{id:"azerbaijani",name:"azerbaijani",serviceId:"az"},{id:"portuguese",name:"português",serviceId:"pt"},{id:"samoan",name:"lifiava",serviceId:"sm"},{id:"afrikaans",name:"afrikaans",serviceId:"af"},{id:"tongan",name:"汤加语",serviceId:"to"},{id:"greek",name:"ελληνικά",serviceId:"el"},{id:"indonesian",name:"IndonesiaName",serviceId:"id"},{id:"spanish",name:"Español",serviceId:"es"},{id:"danish",name:"dansk",serviceId:"da"},{id:"amharic",name:"amharic",serviceId:"am"},{id:"punjabi",name:"ਪੰਜਾਬੀName",serviceId:"pa"},{id:"albanian",name:"albanian",serviceId:"sq"},{id:"lithuanian",name:"Lietuva",serviceId:"lt"},{id:"italian",name:"italiano",serviceId:"it"},{id:"vietnamese",name:"Tiếng Việt",serviceId:"vi"},{id:"korean",name:"한국어",serviceId:"ko"},{id:"maltese",name:"Malti",serviceId:"mt"},{id:"finnish",name:"suomi",serviceId:"fi"},{id:"catalan",name:"català",serviceId:"ca"},{id:"croatian",name:"hrvatski",serviceId:"hr"},{id:"bosnian",name:"bosnian",serviceId:"bs-Latn"},{id:"polish",name:"Polski",serviceId:"pl"},{id:"latvian",name:"latviešu",serviceId:"lv"},{id:"maori",name:"Maori",serviceId:"mi"}],getMap:function(){if(typeof t.service.edge.language.map>"u"){t.service.edge.language.map=new Array;for(var n=0;n<t.service.edge.language.json.length;n++){var a=t.service.edge.language.json[n];t.service.edge.language.map[a.id]=a.serviceId}}return t.service.edge.language.map}},translate:function(n,a,s,l){var r=JSON.parse(decodeURIComponent(a.text));let u=t.util.split(r,4e4,900);t.request.send(t.service.edge.api.auth,{},{},function(d){var c={from:a.from+"",to:a.to,text:a.text},f=a.from;f!="auto"&&(f=="romance"?f="fr":f=t.service.edge.language.getMap()[a.from]);for(var g=t.service.edge.language.getMap()[a.to],p=t.service.edge.api.translate.replace("{from}",f).replace("{to}",g),v=0;v<u.length;v++){for(var b=[],x=0;x<u[v].length;x++)b.push({Text:u[v][x]});t.request.send(p,JSON.stringify(b),c,function(k){var A={};A.info="SUCCESS",A.result=1,A.from=a.from,A.to=a.to,A.text=[];for(var U=0;U<k.length;U++)A.text.push(k[U].translations[0].text);if(u.length>1){for(var w=-1,O=0;O<u.length;O++)if(u[O].length-A.text.length==0){w=O;break}w<0&&(console.log("------ERROR--------"),console.log("翻译内容过多，进行拆分，但拆分判断出现异常，currentIndex：-1 请联系 http://translate.zvo.cn/43006.html 说明"));for(var W=0;W<w;W++)for(var V=u[W].length,H=0;H<V;H++)A.text.unshift(null);for(var q=u.length-1;q>w;q--)for(var he=u[q].length,H=0;H<he;H++)A.text.push(null)}s(A)},"post",!0,{Authorization:"Bearer "+d,"Content-Type":"application/json"},l,!0)}},"get",!0,{"content-type":"application/x-www-form-urlencoded"},function(d){console.log("---------error--------"),console.log("edge translate service error, http code : "+d.status+", response text : "+d.responseText)},!0)}}},request:{api:{host:["https://api.translate.zvo.cn/","https://america.api.translate.zvo.cn/"],language:"language.json",translate:"translate.json",ip:"ip.json",connectTest:"connectTest.json",init:"init.json"},appendParams:{},appendHeaders:{},response:function(n){},speedDetectionControl:{hostMasterNodeCutTime:2e3,hostQueue:[],hostQueueIndex:-1,disableTime:1e6,setCurrentHost:function(n){t.storage.set("speedDetectionControl_hostQueue",""),t.request.api.host=n,t.request.speedDetectionControl.checkHostQueue=new Array,t.request.speedDetectionControl.checkResponseSpeed_Storage(n,0)},getHostQueue:function(){if(t.request.speedDetectionControl.hostQueue.length==0){var n=t.storage.get("speedDetectionControl_hostQueue");if(n==null||typeof n>"u"||n==""){typeof t.request.api.host=="string"&&(t.request.api.host=[""+t.request.api.host]),t.request.speedDetectionControl.hostQueue=[];for(var a=0;a<t.request.api.host.length;a++){var s=t.request.api.host[a];t.request.speedDetectionControl.hostQueue[a]={host:s,time:0}}}else t.request.speedDetectionControl.hostQueue=JSON.parse(n);var l=t.storage.get("speedDetectionControl_lasttime");(l==null||typeof l>"u")&&(l=0);var r=6e4;new Date().getTime()-l>r&&t.request.speedDetectionControl.checkResponseSpeed()}return t.request.speedDetectionControl.hostQueue},checkResponseSpeed_Storage:function(n,a){t.request.speedDetectionControl.checkHostQueue.push({host:n,time:a}),t.request.speedDetectionControl.checkHostQueue.sort((s,l)=>s.time-l.time),t.storage.set("speedDetectionControl_hostQueue",JSON.stringify(t.request.speedDetectionControl.checkHostQueue)),t.storage.set("speedDetectionControl_lasttime",new Date().getTime()),t.request.speedDetectionControl.hostQueue=t.request.speedDetectionControl.checkHostQueue},checkResponseSpeed:function(){var n={"content-type":"application/x-www-form-urlencoded"};if(!(typeof t.request.api.connectTest!="string"||t.request.api.connectTest==null||t.request.api.connectTest.length<1)){t.request.speedDetectionControl.checkHostQueue=[],t.request.speedDetectionControl.checkHostQueueMap=[],typeof t.request.api.host=="string"&&(t.request.api.host=[""+t.request.api.host]);for(var a=0;a<t.request.api.host.length;a++){var s=t.request.api.host[a];t.request.speedDetectionControl.checkHostQueueMap[s]={start:new Date().getTime()};try{t.request.send(s+t.request.api.connectTest,{host:s},{host:s},function(l){var r=l.info,u=t.request.speedDetectionControl.checkHostQueueMap[r],d=new Date().getTime()-u.start;t.request.api.host[0]==r&&(d=d-t.request.speedDetectionControl.hostMasterNodeCutTime,d<0&&(d=0)),t.request.speedDetectionControl.checkResponseSpeed_Storage(r,d)},"post",!0,n,function(l){var r=l.requestURL.replace(t.request.api.connectTest,"");t.request.speedDetectionControl.checkResponseSpeed_Storage(r,t.request.speedDetectionControl.disableTime)},!1)}catch(l){console.log(l)}}}},getHostQueueIndex:function(){if(t.request.speedDetectionControl.hostQueueIndex<0){var n=t.storage.get("speedDetectionControl_hostQueueIndex");typeof n>"u"||n==null?(t.request.speedDetectionControl.hostQueueIndex=0,t.storage.set("speedDetectionControl_hostQueueIndex",0)):t.request.speedDetectionControl.hostQueueIndex=n}return t.request.speedDetectionControl.hostQueueIndex},getHost:function(){var n=t.request.speedDetectionControl.getHostQueue(),a=t.request.speedDetectionControl.getHostQueueIndex();return n.length>a||(console.log("异常，下标越界了！index："+a),a=n.length-1),n[a].host}},getUrl:function(n){var a=t.request.speedDetectionControl.getHost(),s=a+n+"?v="+t.version;return s},post:function(n,a,s,l){var r={"content-type":"application/x-www-form-urlencoded"};if(!(typeof a>"u")){if(typeof t.enterprise<"u"&&t.enterprise.automaticAdaptationService(),t.request.getUrl(n),t.service.name=="client.edge"){if(n==t.request.api.translate){t.service.edge.translate(n,a,s,l);return}if(n==t.request.api.language){var u={};u.info="SUCCESS",u.result=1,u.list=t.service.edge.language.json,s(u);return}}this.send(n,a,a,s,"post",!0,r,l,!0)}},send:function(n,a,s,l,r,u,d,c,f){var g="";if((a==null||typeof a>"u")&&(a={}),typeof a=="string")g=a;else{a.browserDefaultLanguage=t.util.browserDefaultLanguage();for(var p in t.request.appendParams)t.request.appendParams.hasOwnProperty(p)&&(a[p]=t.request.appendParams[p]);typeof t.enterprise<"u"&&typeof t.enterprise.key<"u"&&typeof t.enterprise.key=="string"&&t.enterprise.key.length>0&&(a.key=t.enterprise.key);for(var v in a)a.hasOwnProperty(v)&&(g.length>0&&(g=g+"&"),g=g+v+"="+a[v])}n.indexOf("https://")==0||n.indexOf("http://")==0||(n=t.request.getUrl(n));var b=null;try{b=new XMLHttpRequest}catch{b=new ActiveXObject("Microsoft.XMLHTTP")}if(b.data=s,b.open(r,n,u),d!=null)for(var v in d)d.hasOwnProperty(v)&&b.setRequestHeader(v,d[v]);for(var x in t.request.appendHeaders)t.request.appendHeaders.hasOwnProperty(x)&&b.setRequestHeader(x,t.request.appendHeaders[x]);return t.service.name=="translate.service"&&b.setRequestHeader("currentpage",window.location.href+""),b.send(g),b.onreadystatechange=function(){if(b.readyState==4)if(t.request.response(b),b.status==200){var k=null;if(!(typeof b.responseText>"u"||b.responseText==null)){if(b.responseText.indexOf("{")>-1&&b.responseText.indexOf("}")>-1)try{k=JSON.parse(b.responseText)}catch(A){console.log(A)}}k==null?l(b.responseText):l(k)}else f&&(n.indexOf(t.request.api.connectTest)>-1||(t.service.name=="translate.service"&&console.log(`----- translate.js 提示 -----
翻译服务响应异常，解决这种情况可以有两种方案：
【方案一】：使用采用最新版本 3.16.0及更高版本，js引用文件为 https://cdn.staticfile.net/translate.js/3.16.0/translate.js 并且使用 client.edge 模式 （增加一行设置代码就好，可参考 https://translate.zvo.cn/4081.html ），这样就不会再出现这种情况了，而且这个方案也是完全免费的。 
【方案二】：采用企业级稳定翻译通道 ,但是这个相比于 方案一 来说，是有一定的收费的，大概一年600，这个就是专门为了高速及高稳定准备的，而相比于这个方案二，方案一则是全免费的。 因为方案二我们是部署了两个集群，而每个集群又下分了数个网络节点，包含中国大陆、香港、美国、欧洲、 等多个州，充分保障稳定、高效，同样也产生了不少成本，所以才需要付费。更多信息说明可以参考： http://translate.zvo.cn/4087.html 
【方案三】：私有部署你自己的翻译通道，并且启用内存级翻译缓存，毫秒级响应，但是需要依赖一台1核2G服务器，是最推荐的方式。具体参考：https://translate.zvo.cn/391129.html
-------------`),console.log("------- translate.js service api response error --------"),console.log("    http code : "+b.status),console.log("    response : "+b.response),console.log("    request url : "+n),console.log("    request data : "+JSON.stringify(a)),console.log("    request method : "+r),console.log("---------------------- end ----------------------"))),b.requestURL=n,c!=null&&c(b)},b},translateText:function(n,a){var s=new Array,l=t.language.getLocal(),r=t.language.getCurrent();if(typeof n=="string")s[0]=n;else{var u=Object.prototype.toString.call(n);if(u=="[object Array]")s=n;else if(u=="[object Object]")typeof n.texts>"u"&&console.log("translate.request.translateText 传入的值类型异常，因为你没有传入 obj.texts 要翻译的具体文本！ 请查阅文档： https://translate.zvo.cn/4077.html"),typeof n.texts=="string"?s=[n.texts]:s=n.texts,typeof n.from=="string"&&n.from.length>0&&(l=n.from),typeof n.to=="string"&&n.to.length>0&&(r=n.to);else{console.log("translate.request.translateText 传入的值类型错误，请查阅文档： https://translate.zvo.cn/4077.html");return}}for(var d=new Array,c=[],f={},g=0;g<s.length;g++){var p=t.util.hash(s[g]),v=t.storage.get("hash_"+r+"_"+p);v!=null&&v.length>0?d[g]=v:(d[g]="",c.push(s[g]),f[p]=g)}if(c.length==0){var x={from:l,to:r,text:d,result:1};a(x);return}if(!(typeof t.request.api.translate!="string"||t.request.api.translate==null||t.request.api.translate.length<1)){var b=t.request.api.translate,x={from:l,to:r,text:encodeURIComponent(JSON.stringify(c))};t.request.post(b,x,function(k){k.result==0&&(console.log("=======ERROR START======="),console.log("from : "+k.from),console.log("to : "+k.to),console.log("translate text array : "+s),console.log("response : "+k.info),console.log("=======ERROR END  ======="));for(var A=0;A<k.text.length;A++){var U=t.util.hash(c[A]);t.storage.set("hash_"+r+"_"+U,k.text[A]),t.office.fullExtract.isUse&&t.office.fullExtract.set(U,c[A],x.to,k.text[A]),d[f[U]]=k.text[A]}k.text=d,a(k)},null)}},listener:{minIntervalTime:800,lasttime:0,executetime:0,delayExecuteTime:200,addExecute:function(){var n=Date.now();t.request.listener.lasttime==0?(t.request.listener.executetime=n,t.request.listener.lasttime=1):t.request.listener.executetime>1||(n<t.request.listener.lasttime+t.request.listener.minIntervalTime?t.request.listener.executetime=t.request.listener.lasttime+t.request.listener.minIntervalTime:t.request.listener.executetime=n)},trigger:function(n){return!0},start:function(){if(typeof t.request.listener.isStart<"u")return;if(t.request.listener.isStart=!0,setInterval(function(){var r=Date.now();if(t.request.listener.executetime>1&&r>t.request.listener.executetime+t.request.listener.delayExecuteTime){t.request.listener.executetime=0,t.request.listener.lasttime=r;try{t.execute()}catch(u){console.log(u)}}},100),typeof PerformanceObserver>"u"){console.log("因浏览器版本较低， translate.request.listener.start() 中 PerformanceObserver 对象不存在，浏览器不支持，所以 translate.request.listener.start() 未生效。");return}const n=new PerformanceObserver(r=>{for(var u=!1,d=0;d<r.getEntries().length;d++){var c=r.getEntries()[d];if(c.initiatorType==="fetch"||c.initiatorType==="xmlhttprequest"){var f=c.name;typeof t.request.api.host=="string"&&(t.request.api.host=[t.request.api.host]);for(var g=!1,p=0;p<t.request.api.host.length;p++)if(f.indexOf(t.request.api.host[p])>-1){g=!0;break}if(typeof t.service.edge<"u"&&f.indexOf(t.service.edge.api.auth)>-1&&(g=!0),f.indexOf(".microsofttranslator.com/translate")>-1&&(g=!0),g||!t.request.listener.trigger())continue;u=!0;break}}u&&t.request.listener.addExecute()});var a=PerformanceObserver.supportedEntryTypes;if(a){for(var s=!1,l=0;l<a.length;l++)if(a[l]==="resource"){s=!0;break}if(s)try{n.observe({entryTypes:["resource"]});return}catch{console.log("PerformanceObserver entryTypes 失败，尝试 type 参数")}}try{n.observe({type:"resource",buffered:!0}),console.log("使用 PerformanceObserver type")}catch{console.log("当前浏览器不支持 PerformanceObserver 的任何参数, translate.request.listener.start() 未启动")}}}},storage:{IndexedDB:{db:null,initDB:function(){const n=this;return new Promise((a,s)=>{const l="translate.js",r="kvStore",d=indexedDB.open(l,1);d.onupgradeneeded=function(c){const f=c.target.result;f.objectStoreNames.contains(r)||f.createObjectStore(r,{keyPath:"key"})},d.onsuccess=function(c){n.db=c.target.result,a()},d.onerror=function(c){s("IndexedDB 打开失败")}})},set:async function(n,a){return this.db||await this.initDB(),new Promise((s,l)=>{const u=this.db.transaction("kvStore","readwrite").objectStore("kvStore"),d={key:n,value:a},c=u.put(d);c.onsuccess=()=>s(),c.onerror=()=>l("写入失败")})},get:async function(n){return this.db||await this.initDB(),new Promise((a,s)=>{const u=this.db.transaction("kvStore","readonly").objectStore("kvStore").get(n);u.onsuccess=()=>{const d=u.result;a(d?d.value:void 0)},u.onerror=()=>s("读取失败")})},list:async function(n=""){return this.db||await this.initDB(),new Promise((a,s)=>{const u=this.db.transaction("kvStore","readonly").objectStore("kvStore").openCursor(),d=[],c="^"+n.replace(/\*/g,".*")+"$",f=new RegExp(c);u.onsuccess=g=>{const p=g.target.result;p?(f.test(p.key)&&d.push({key:p.key,value:p.value.value}),p.continue()):a(d)},u.onerror=()=>s("游标读取失败")})}},set:function(n,a){localStorage.setItem(n,a)},get:function(n){return localStorage.getItem(n)}},images:{queues:[],add:function(n){for(var a in n)n.hasOwnProperty(a)&&(t.images.queues[a]=n[a])},execute:function(){if(!(Object.keys(t.images.queues).length<1)){for(var n=document.getElementsByTagName("img"),a=0;a<n.length;a++){var s=n[a];if(!(typeof s.src>"u"||s.src==null||s.src.length==0)){var l=s.getAttribute("src");for(var r in t.images.queues){var u=r,d=t.images.queues[r];u==l&&(d=d.replace(new RegExp("{language}","g"),t.to),s.src=d)}}}for(var c=document.getElementsByTagName("*"),a=0;a<c.length;a++){var f=c[a],g=window.getComputedStyle(f,null),p=g.backgroundImage;if(p!="none"){var v=t.images.gainCssBackgroundUrl(p);if(typeof t.images.queues[v]<"u"){var d=t.images.queues[v];d=d.replace(new RegExp("{language}","g"),t.to),f.style.backgroundImage='url("'+d+'")'}}}}},gainCssBackgroundUrl:function(n){var a=n.indexOf('"'),s=n.lastIndexOf('"');if(a!=-1&&s!=-1){var l=n.substring(a+1,s);return l}return n}},reset:function(){var n=t.language.getCurrent(),a="";for(var s in t.nodeQueue)t.nodeQueue.hasOwnProperty(s)&&(a=s);if(a==""){console.log("提示，你当前还未执行过翻译，所以你无需执行 translate.reset(); 进行还原。");return}for(var l in t.nodeQueue[a].list)if(t.nodeQueue[a].list.hasOwnProperty(l)){for(var r in t.nodeQueue[a].list[l])if(t.nodeQueue[a].list[l].hasOwnProperty(r)){var u=t.nodeQueue[a].list[l][r];for(var d in u.nodes)if(u.nodes.hasOwnProperty(d)){var c=t.storage.get("hash_"+n+"_"+r);if(!(typeof c>"u")&&c!=null&&c.length!=0&&!(typeof u.nodes[d].node>"u")){var f=typeof u.nodes[d].node.attribute>"u"?null:u.nodes[d].node.attribute,g=t.element.nodeAnalyse.analyse(u.nodes[d].node,"","",f);t.element.nodeAnalyse.analyse(u.nodes[d].node,g.text,u.original,f)}}}}t.storage.set("to",""),t.to=null,t.selectLanguageTag.render()},selectionTranslate:{selectionX:0,selectionY:0,callTranslate:function(n){let a=window.getSelection();if(a.anchorOffset==a.focusOffset)return;let s=window.getSelection().toString();if(typeof t.request.api.translate!="string"||t.request.api.translate==null||t.request.api.translate.length<1){console.log("已设置了不使用 translate 翻译接口，翻译请求被阻止");return}var l=t.request.api.translate,r={from:t.language.getLocal(),to:t.to,text:encodeURIComponent(JSON.stringify([s]))};t.request.post(l,r,function(u){if(u.result==0)return;let d=document.querySelector("#translateTooltip");d.innerText=u.text[0],d.style.top=selectionY+20+"px",d.style.left=selectionX+50+"px",d.style.display=""},null)},start:function(){let n=document.createElement("span");n.innerText="",n.setAttribute("id","translateTooltip"),n.setAttribute("style","background-color:black;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:999;top:150%;left:50%; "),document.body.appendChild(n),document.addEventListener("mousedown",a=>{selectionX=a.pageX,selectionY=a.pageY},!1),document.addEventListener("mouseup",t.selectionTranslate.callTranslate,!1),document.addEventListener("click",a=>{document.querySelector("#translateTooltip").style.display="none"},!1)}},enterprise:{isUse:!1,use:function(){if(t.enterprise.isUse=!0,t.request.speedDetectionControl.hostMasterNodeCutTime=300,t.request.api.host=["https://america-enterprise-api-translate.zvo.cn/","https://beijing.enterprise.api.translate.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn/","https://america.api.translate.zvo.cn:666/","https://api.translate.zvo.cn:666/","https://api.translate.zvo.cn:888/"],t.service.name=="client.edge"){t.service.name="translate.service",console.log("您已启用了企业级翻译通道 translate.enterprise.use(); (文档：https://translate.zvo.cn/4087.html) , 所以您设置的 translate.service.use('client.edge'); (文档：https://translate.zvo.cn/4081.html) 将失效不起作用，有企业级翻译通道全部接管。");return}},automaticAdaptationService:function(){if(t.enterprise.isUse){var n=t.request.speedDetectionControl.getHostQueue();n.length>0&&n[0].time+1>t.request.speedDetectionControl.disableTime&&(t.service.name="client.edge")}},key:""},init:function(){if(!(typeof t.init_execute<"u")&&(t.init_execute="已进行",!(typeof t.request.api.init!="string"||t.request.api.init==null||t.request.api.init.length<1)))try{t.request.send(t.request.api.init,{},{},function(n){if(n.result==0){console.log("translate.js init 初始化异常："+n.info);return}else if(n.result==1){var a=t.util.versionStringToInt(n.version),s=t.util.versionStringToInt(t.version.replace("v",""));a>s&&console.log("Tip : translate.js find new version : "+n.version)}},"post",!0,null,function(n){},!1)}catch{}},progress:{style:`
			/* CSS部分 */
			/* 灰色水平加载动画 */
			.translate_api_in_progress {
			  position: relative;
			  overflow: hidden; /* 隐藏超出部分的动画 */
			}

			/* 蒙版层 */
			.translate_api_in_progress::after {
			  content: '';
			  position: absolute;
			  top: 0;
			  left: 0;
			  width: 100%;
			  height: 100%;
			  background: rgba(255, 255, 255, 1); /* 半透明白色遮罩 */
			  z-index: 2;
			}

			/* 水平加载条动画 */
			.translate_api_in_progress::before {
			  content: '';
			  position: absolute;
			  top: 50%;
			  left: 0;
			  width: 100%;
			  height:100%; /* 细线高度 */
			  background: linear-gradient(
			    90deg,
			    transparent 0%,
			    #e8e8e8 25%,  /* 浅灰色 */
			    #d0d0d0 50%,  /* 中灰色 */
			    #e8e8e8 75%,  /* 浅灰色 */
			    transparent 100%
			  );
			  background-size: 200% 100%;
			  animation: translate_api_in_progress_horizontal-loader 3.5s linear infinite;
			  z-index: 3;
			  transform: translateY(-50%);
			}

			@keyframes translate_api_in_progress_horizontal-loader {
			  0% {
			    background-position: 200% 0;
			  }
			  100% {
			    background-position: -200% 0;
			  }
			}
		`,api:{isTip:!0,setUITip:function(n){t.progress.api.isTip=n},removeChildClass:function(n,a){var s=n.childNodes;if(!(s==null||typeof s>"u")){if(s.length>0)for(var l=0;l<s.length;l++)t.progress.api.removeChildClass(s[l],a+1)}a!=1&&(typeof n>"u"||typeof n.className=="string"&&(n.className.indexOf("translate_api_in_progress")<-1||(n.className=n.className.replace(/translate_api_in_progress/g,""))))},startUITip:function(){const n=document.createElement("style");n.textContent=t.progress.style,document.head.appendChild(n),t.progress.api.isTip&&(t.listener.execute.renderStartByApi.push(function(a,s,l){for(var r in t.nodeQueue[a].list[s])if(t.nodeQueue[a].list[s].hasOwnProperty(r)){for(var u in t.nodeQueue[a].list[s][r].nodes)if(t.nodeQueue[a].list[s][r].nodes.hasOwnProperty(u)){var d=t.nodeQueue[a].list[s][r].nodes[u].node;if(!(typeof d>"u"||typeof d.parentNode>"u")){var c=d.parentNode;if(c!=null){var f=d.parentNode;if(!(f!=null&&typeof f.className<"u"&&f.className!=null&&c.className.indexOf("translate_api_in_progress")>-1))if(t.progress.api.removeChildClass(c,1),typeof c.className>"u"||c.className==null||c.className=="")c.className=" translate_api_in_progress";else{if(c.className.indexOf("translate_api_in_progress")>-1)continue;c.className=c.className+" translate_api_in_progress"}}}}}}),t.listener.execute.renderFinishByApi.push(function(a,s,l){for(var r in t.nodeQueue[a].list[s])if(t.nodeQueue[a].list[s].hasOwnProperty(r)){for(var u in t.nodeQueue[a].list[s][r].nodes)if(t.nodeQueue[a].list[s][r].nodes.hasOwnProperty(u)){var d=t.nodeQueue[a].list[s][r].nodes[u].node,c=d.parentNode;if(c!=null){var f=c.className;typeof f>"u"||f==null||f==""||f.indexOf("translate_api_in_progress")<-1||(c.className=f.replace(/translate_api_in_progress/g,""))}}}}))}}},js:{transString:function(n,a,s,l){let r;try{r=JSON.parse(n)}catch(u){l(u);return}t.js.transObject(r,a,s,l)},transObject:function(n,a,s,l){let r=t.js.find(n);var u=new Array;for(const c in r)u.push(c);var d={from:"auto",to:a,texts:u};t.request.translateText(d,function(c){if(typeof c.result>"u"||c.result==0){l("network connect failure");return}if(c.result==0){l(c.info);return}const f=c.text;f&&f.length===u.length?u.forEach((g,p)=>{const v=f[p],b=r[g];b&&b.length>0&&b.forEach(x=>{t.js.setValueByPath(n,x,v)})}):console.error("翻译结果长度不匹配或为空"),s(n)})},setValueByPath:function(n,a,s){const l=a.replace(/\[(\d+)\]/g,".$1").split(".");let r=n;for(let u=0;u<l.length-1;u++)r=r[l[u]];r[l[l.length-1]]=s},find:function(n,a=""){let s={};if(typeof n=="object"&&n!==null)if(Array.isArray(n))n.forEach((l,r)=>{const u=a?`${a}[${r}]`:`[${r}]`,d=t.js.find(l,u);for(const[c,f]of Object.entries(d))s[c]||(s[c]=[]),s[c]=s[c].concat(f)});else for(const l in n){const r=a?`${a}.${l}`:l;if(typeof n[l]=="object"&&n[l]!==null){const u=t.js.find(n[l],r);for(const[d,c]of Object.entries(u))s[d]||(s[d]=[]),s[d]=s[d].concat(c)}else typeof n[l]=="string"&&(typeof s[n[l]]>"u"&&(s[n[l]]=[]),s[n[l]].push(r))}else typeof n=="string"&&(typeof s[n]>"u"&&(s[n]=[]),s[n].push(a));return s}},network:{originalOpen:XMLHttpRequest.prototype.open,originalSend:XMLHttpRequest.prototype.send,setRequestHeaderOriginal:XMLHttpRequest.prototype.setRequestHeader,rules:[{url:/https:\/\/www\.guanleiming\.com\/a\/b\/.html/,methods:["GET","POST"],params:["a","b1"]}],getRuleMatch:function(n,a){for(let s=0;s<t.network.rules.length;s++){const l=t.network.rules[s];if(typeof l.url>"u"&&l.url==""){console.log("WARINNG : translate.network.rule find url is null:"),console.log(l);continue}if(!(!l.url.test(n)||!l.methods.includes(a.toUpperCase())))return l}return null},use:function(){XMLHttpRequest.prototype.open=function(...n){return t.network.hookOpen.apply(this,n)},XMLHttpRequest.prototype.send=function(...n){return t.network.hookSend.apply(this,n)},XMLHttpRequest.prototype.setRequestHeader=function(...n){return t.network.setRequestHeader.apply(this,n)},t.network.fetch.use()},_translateText(n){return t.language.getLocal()==t.language.getCurrent()||typeof n=="string"&&n.length>0&&t.language.recognition(n).languageName==t.language.getLocal()?new Promise((a,s)=>{const l={from:"auto",to:t.language.getLocal(),text:[n]};a(l)}):new Promise((a,s)=>{const l={from:"auto",to:t.language.getLocal(),texts:[n]};t.request.translateText(l,function(r){r.result===1?a(r):s(r)})})},setRequestHeader:function(n,a){return this._requestContext&&(this._requestContext.headers=this._requestContext.headers||{},this._requestContext.headers[n]=a),t.network.setRequestHeaderOriginal.call(this,n,a)},RequestHandler:{async handleGet(n,a){typeof a.params>"u"&&typeof a.params.length>"u"&&a.params.length<1&&(console.log("WARINNG: rule not find params , rule : "),console.log(a),a.params=[]);try{const r=new URL(n,window.location.origin),u=r.searchParams;for(var s=0;s<a.params.length;s++){var l=a.params[s];if(u.has(l)){const d=u.get(l),c=await t.network._translateText(d);typeof c>"u"?console.log("WARINNG: translateResultData is undefined"):typeof c.result>"u"?console.log("WARINNG: translateResultData.result is undefined"):c.result!=1?console.log("WARINNG: translateResultData.result failure : "+c.info):u.set(l,decodeURIComponent(c.text[0]))}}return r.toString()}catch(r){return console.warn("GET处理失败:",r),n}},async handleForm(n,a){try{const s=new URLSearchParams(n),l={...s};for(const r of a.params)if(s.has(r)){const u=s.get(r),d=await t.network._translateText(u);l[r]=d}return new URLSearchParams(l).toString()}catch(s){return console.warn("表单处理失败:",s),n}},async handleJson(n,a){try{const l={...JSON.parse(n)};for(const r of a.params)if(l.hasOwnProperty(r)){const u=l[r];l[r]=await t.network._translateText(u)}return JSON.stringify(l)}catch(s){return console.warn("JSON处理失败:",s),n}}},_requestContext:null,hookOpen(n,a,s,l,r){return this._requestContext={method:n.toUpperCase(),originalUrl:a,async:s,user:l,password:r,matchedRule:t.network.getRuleMatch(a,n)},t.network.originalOpen.call(this,n,a,s,l,r)},hookSend(n){const a=this._requestContext;if(!a||!a.matchedRule)return t.network.originalSend.call(this,n);const s=async()=>{let l=n;const r=a.method;try{const d=await t.network.RequestHandler.handleGet(a.originalUrl,a.matchedRule);if(t.network.originalOpen.call(this,r,d,a.async,a.user,a.password),a.headers)for(const c in a.headers)t.network.setRequestHeaderOriginal.call(this,c,a.headers[c]);if(r==="POST"&&typeof n<"u"&&n!=null&&n.length<2e3){var u=!1;if(n.trim().indexOf("[")==0||n.trim().indexOf("{")==0)try{l=await t.network.RequestHandler.handleJson(n,a.matchedRule),u=!0}catch{u=!1}if(!u)try{l=await t.network.RequestHandler.handleForm(n,a.matchedRule)}catch{}}}catch(d){console.warn("请求处理异常:",d)}t.network.originalSend.call(this,l)};a.async!==!1?s.call(this):(console.warn("同步请求不支持翻译拦截"),t.network.originalSend.call(this,n))},fetch:{originalFetch:window.fetch,use:function(){const n=this;window.fetch=function(...a){return n.hookFetch.apply(n,a)}},hookFetch:async function(n,a){const s=new Request(n,a),l=s.url,r=s.method,u=t.network.getRuleMatch(l,r);if(!u)return this.originalFetch.call(window,s);const d={method:r,url:l,headers:{},rule:u,isModified:!1};s.headers.forEach((f,g)=>{d.headers[g]=f}),this._requestContext=d;try{const f=await t.network.RequestHandler.handleGet(l,u);if(r==="GET"){const g=new Request(f,{method:r,headers:new Headers(d.headers),mode:s.mode,credentials:s.credentials,cache:s.cache,redirect:s.redirect,referrer:s.referrer,referrerPolicy:s.referrerPolicy});return this.originalFetch.call(window,g)}if(r==="POST"){let g=null;s.body&&(g=await s.clone().text());const p=s.headers.get("Content-Type");let v=g;if(typeof g<"u"&&g!=null&&g.length<2e3){var c=!1;if(g.trim().indexOf("[")==0||g.trim().indexOf("{")==0)try{v=await t.network.RequestHandler.handleJson(g,u),c=!0}catch{c=!1}if(!c)try{v=await t.network.RequestHandler.handleForm(g,u)}catch{}}const b=new Request(f,{method:r,headers:new Headers(d.headers),body:v,mode:s.mode,credentials:s.credentials,cache:s.cache,redirect:s.redirect,referrer:s.referrer,referrerPolicy:s.referrerPolicy});return this.originalFetch.call(window,b)}return this.originalFetch.call(window,s)}catch(f){return console.warn("fetch 请求处理异常:",f),this.originalFetch.call(window,s)}},_requestContext:null}},visual:{getRects:function(n){return n.map(a=>{if(!a)return null;let s;if(a.nodeType===Node.TEXT_NODE){const l=document.createRange();l.selectNodeContents(a);const r=l.getClientRects();s=r.length>0?r[0]:null}else a.nodeType===Node.ELEMENT_NODE&&(s=a.getBoundingClientRect());return s?{node:a,left:s.left,top:s.top,right:s.right,bottom:s.bottom,width:s.width,height:s.height}:null})},coordinateSort:function(n){return n.filter(s=>s!==null).sort((s,l)=>Math.abs(s.top-l.top)<5?s.left-l.left:s.top-l.top)},afterAdjacent:function(n){var a=t.visual.coordinateSort(n);const s=[];return t.visual.groupRectsByLine(a).forEach(r=>{for(let u=0;u<r.length;u++)for(let d=u+1;d<r.length;d++){const c=r[u],f=r[d];if(!t.visual.areHorizontallyAdjacent(c,f))break;s.push({before:c,after:f})}}),s},groupRectsByLine:function(n){const a=[];let s=[];return n.forEach(l=>{if(s.length===0)s.push(l);else{const r=s[s.length-1];Math.abs(l.top-r.top)<5?s.push(l):(a.push(s),s=[l])}}),s.length>0&&a.push(s),a},areHorizontallyAdjacent:function(n,a){const s=Math.min(n.bottom,a.bottom)-Math.max(n.top,a.top),l=a.left-n.right;return s>0&&Math.abs(l)<1},afterAddSpace:function(n){const a=[];return n.forEach(s=>{const{before:l,after:r}=s,u=l.node,d=r.node,c=window.getComputedStyle(u.nodeType===Node.TEXT_NODE?u.parentElement:u),f=window.getComputedStyle(d.nodeType===Node.TEXT_NODE?d.parentElement:d),g=parseFloat(c.marginRight)>0||parseFloat(c.paddingRight)>0,p=parseFloat(f.marginLeft)>0||parseFloat(f.paddingLeft)>0;!g&&!p&&typeof u.textContent=="string"&&typeof d.textContent=="string"&&(/\s$/.test(u.textContent)||/^\s/.test(d.textContent)||a.push(u))}),a},adjustTranslationSpaces:function(n){if(!t.language.wordBlankConnector(t.to))return;const a=t.visual.getRects(n),s=t.visual.afterAdjacent(a);t.visual.afterAddSpace(s).forEach(r=>{if(r.nodeType===Node.TEXT_NODE)r.textContent=r.textContent+" ";else if(r.nodeType===Node.ELEMENT_NODE){const u=r.lastChild;u&&u.nodeType===Node.TEXT_NODE&&(u.textContent=u.textContent+" ")}})},adjustTranslationSpacesByNodequeueUuid:function(n){var a=[];for(var s in t.nodeQueue[n].list)if(t.nodeQueue[n].list.hasOwnProperty(s)&&!(s.length<1)){for(var l in t.nodeQueue[n].list[s])if(t.nodeQueue[n].list[s].hasOwnProperty(l)){for(var r in t.nodeQueue[n].list[s][l].nodes)if(t.nodeQueue[n].list[s][l].nodes.hasOwnProperty(r)){var u=t.nodeQueue[n].list[s][l].nodes[r].node;a.push(u)}}}t.visual.adjustTranslationSpaces(a)},adjustTranslationSpacesByLastNodequeueUuid:function(a){var a="";for(var s in t.nodeQueue){a=s;break}typeof a=="string"&&a.length>1&&t.visual.adjustTranslationSpacesByNodequeueUuid(a)},hideText:{style:`
				/* 文本隐藏核心样式 - 仅隐藏文本内容 */
		        html.translatejs-text-hidden p, html.translatejs-text-hidden div,
		        html.translatejs-text-hidden h1, html.translatejs-text-hidden h2, html.translatejs-text-hidden h3,
		        html.translatejs-text-hidden h4, html.translatejs-text-hidden h5, html.translatejs-text-hidden h6,
		        html.translatejs-text-hidden span, html.translatejs-text-hidden a, html.translatejs-text-hidden b,
		        html.translatejs-text-hidden strong, html.translatejs-text-hidden i, html.translatejs-text-hidden em,
		        html.translatejs-text-hidden mark,
		        html.translatejs-text-hidden blockquote, html.translatejs-text-hidden ul, html.translatejs-text-hidden ol,
		        html.translatejs-text-hidden li, html.translatejs-text-hidden table, html.translatejs-text-hidden th,
		        html.translatejs-text-hidden td, html.translatejs-text-hidden label, html.translatejs-text-hidden button,
		        html.translatejs-text-hidden input, html.translatejs-text-hidden select, html.translatejs-text-hidden textarea {
		            color: transparent !important;
		            text-shadow: none !important;
		        }

		        /* 隐藏占位符文字 */
		        html.translatejs-text-hidden ::placeholder {
		            color: transparent !important;
		        }

		        /* 确保媒体元素不受影响 */
		        img, video, iframe, canvas, svg,
		        object, embed, picture, source {
		            color: initial !important;
		        }

		        /* 忽略隐藏的元素保持可见 */
		        .ignore-hidden {
		            color: inherit !important;
		        }
			`,hide:function(){const n=document.createElement("style");n.textContent=t.visual.hideText.style,document.head.appendChild(n),document.documentElement.classList.add("translatejs-text-hidden")},show:function(){document.documentElement.classList.remove("translatejs-text-hidden")}},webPageLoadTranslateBeforeHiddenText:function(){typeof document.body>"u"||document.body==null||console.log("错误警告： translate.visual.webPageLoadTranslateBeforeHiddenText() 要在 head 标签中触发才能达到最好的效果！"),t.language.local==""&&console.log("错误警告：在使用 translate.visual.webPageLoadTranslateBeforeHiddenText() 之前，请先手动设置你的本地语种，参考： http://translate.zvo.cn/4066.html  如果你不设置，则不管你是否有切换语言，网页打开后都会先短暂的不显示文字"),(t.language.local==""||t.language.local!=t.language.getCurrent())&&(t.visual.hideText.hide(),t.lifecycle.execute.renderFinish.push(function(n,a){t.visual.hideText.show()}))}}},o={index:function(n){var a=n.parentElement;if(a==null)return"";var s;if(typeof n.tagName>"u")s=a.childNodes;else{s=[];for(var l=a.childNodes,r=0;r<l.length;r++)l[r].tagName===n.tagName&&s.push(l[r])}var u=Array.prototype.indexOf.call(s,n);return n.nodeName+""+(u+1)},uuid:function(n){for(var a="",s=n;s!=null;){var l=o.index(s);l!=""&&(a!=""&&(a="_"+a),a=l+a),s=s.parentElement}return a}};console.log(`------ translate.js ------
Two lines of js html automatic translation, page without change, no language configuration file, no API Key, SEO friendly! Open warehouse : https://github.com/xnx3/translate 
两行js实现html全自动翻译。 无需改动页面、无语言配置文件、无API Key、对SEO友好！完全开源，代码仓库：https://gitee.com/mail_osc/translate`),(function(n,a){e.exports?e.exports=a():n.translate=a()})(A9,function(){return t})})(nr)),nr.exports}var M9=I9();const Aa=jg(M9),Bn={getHistory:async()=>await Ie({url:"/prompt/history/get_history",method:"get"}),saveHistory:async e=>await Ie({url:"/prompt/history/add_history",method:"post",data:e}),deleteHistory:async e=>await Ie({url:"/prompt/history/delete_history",method:"post",data:{id_index:e}}),batchDeleteHistory:async e=>await Ie({url:"/prompt/history/batch_delete_history",method:"post",data:{id_index:e}}),getFavorite:async()=>await Ie({url:"/prompt/collect_history/get_collect_history",method:"get"}),addFavorite:async e=>await Ie({url:"/prompt/collect_history/add_collect_history",method:"post",data:e}),editFavorite:async e=>await Ie({url:"/prompt/collect_history/edit_collect_history",method:"post",data:e}),deleteFavorite:async e=>await Ie({url:"/prompt/collect_history/delete_collect_history",method:"post",data:{id_index:e}}),batchDeleteFavorite:async e=>await Ie({url:"/prompt/collect_history/batch_delete_collect_history",method:"post",data:{id_indices:e}})},O9={class:"lora-manager-top-bar"},R9=["placeholder"],N9=["title"],D9=["title"],P9={class:"checkbox-container"},F9=["onClick"],B9=["onClick"],U9={key:0,class:"loading-indicator"},H9={key:1,class:"empty-list"},W9=["onClick","onMouseover"],j9=["src","alt","title"],V9={key:0,class:"loading-more"},z9={key:1,class:"no-more-data"},Wt="weilin_prompt_ui_",zg=xt({__name:"lora_index",props:{loraManager:{type:String,default:"look"}},setup(e,{expose:t}){const{t:o}=wt(),n=_(!1),a=_(!1),s=_(!1),l=_(!1),r=_("all"),u=_(""),d=_(null),c=_(""),f=_(null),g=_(!1),p=_(""),v=_(100),b=_(0),x=_(),k=_(!1),A=_(!1),U=_(),w=_(localStorage.getItem("weilin_prompt_ui_showHoverInfo")),O=_(localStorage.getItem("weilin_prompt_ui_clickAddTag"));(w.value===null||w.value===void 0||w.value==="")&&(localStorage.setItem("weilin_prompt_ui_showHoverInfo",!0),w.value=!0),(O.value===null||O.value===void 0||O.value==="")&&(localStorage.setItem("weilin_prompt_ui_clickAddTag",!1),O.value=!1);const W=e;Ze(w,y=>{localStorage.setItem("weilin_prompt_ui_showHoverInfo",y)}),Ze(O,y=>{localStorage.setItem("weilin_prompt_ui_clickAddTag",y)});const V=_(1),H=_(50),q=ot(()=>{if(r.value==="all"){const y=z.value;if(y){const N=Object.values(y);return Math.ceil(N.length/H.value)}}else{const y=z.value[u.value];if(y){const N=Object.values(y);return Math.ceil(N.length/H.value)}return 1}}),he=()=>{k.value=!0,A.value=!0},le=(y,N)=>{if(!w.value||w.value=="false"||(A.value=!0,p.value===y&&g.value))return;const xe=N.currentTarget.getBoundingClientRect(),_e=window.innerHeight,J=450;let ue={left:xe.left+(xe.width-J)/2,top:xe.top+xe.height+10};ue.top+310>_e&&(ue.top=xe.top-310),ue.left=Math.max(10,Math.min(ue.left,window.innerWidth-J-10)),ue.top=Math.max(10,Math.min(ue.top,_e-310)),v.value=ue.left,b.value=ue.top,g.value=!0,p.value=y,Qe(()=>{U.value.refresh()})},R=()=>{A.value=!1,setTimeout(()=>{!k.value&&!A.value&&(g.value=!1,p.value="",k.value=!1)},200)},Y=()=>{g.value=!1,p.value="",k.value=!1},X=_([]),z=_([]),Z=_(""),se=_(0),P=(y,N)=>{se.value=y,Z.value=N},F=async()=>{try{const y=await Tn.getLoraFolderList();X.value=y.data}catch(y){console.error("Failed to get folder list:",y),te({type:"error",str:"message.loadFailed"})}},K=()=>{if(!f.value||s.value||l.value)return;const y=f.value;y.scrollHeight-y.scrollTop-y.clientHeight<100&&ne()},oe=_(!1);let Q=null;const ie=()=>{Q&&clearTimeout(Q),Q=setTimeout(()=>{c.value.length>0?(oe.value=!0,M()):(oe.value=!1,B())},300)},re=y=>{var N;return(N=y.local_info)!=null&&N.name&&y.local_info.name!==""&&y.local_info.name.length>0?y.local_info.name:y.name},ye=_(),de=y=>{W.loraManager==="addLora"?ve(y):W.loraManager==="prompt_inner"&&O.value?S(y):ye.value.open(y)},M=async()=>{try{const y=await Tn.searchLoraGetFolderList(c.value);if(z.value=y.data,z.value.length>0){V.value=1;const N=Object.values(z.value),j=(V.value-1)*50,xe=j+50,_e=N.slice(j,xe);ee(_e)}}catch(y){console.error("Failed to get folder list:",y),te({type:"error",str:"message.loadFailed"})}},G=_([]),ae=y=>{if(y==="all"){G.value=[],r.value=y,u.value="/",z.value=X.value[y];const N=z.value;if(N){l.value=!1,V.value=1;const j=Object.values(N),xe=(V.value-1)*50,_e=xe+50,J=j.slice(xe,_e);ee(J)}}else{G.value=[],r.value=y,u.value="/",z.value=X.value[y];const N=z.value["/"];if(N){l.value=!1,V.value=1;const j=Object.values(N),xe=(V.value-1)*50,_e=xe+50,J=j.slice(xe,_e);ee(J)}}},D=y=>{if(y!=u.value){u.value=y,G.value=[];const N=z.value[u.value];if(N){l.value=!1,V.value=1;const j=Object.values(N),xe=(V.value-1)*50,_e=xe+50,J=j.slice(xe,_e);ee(J)}}},ee=async y=>{const N=await Tn.getLoraRangeList(y);V.value===1?G.value=N.data.loras:G.value=G.value.concat(N.data.loras)},L=async()=>{if(d.value!=null){te({type:"warn",str:"message.isLoading"});return}try{te({type:"success",str:"message.isLoadingPleaseWait"}),await Tn.getAllLoraList(),d.value=setInterval(async()=>{await E()},1e3)}catch(y){console.error("Failed to get all lora list:",y),te({type:"error",str:"message.loadFailed"})}},E=async()=>{try{const y=await Tn.getAllLoraStatus();y.data.isLoading===!1?(clearInterval(d.value),d.value=null,te({type:"success",str:"message.loaddingSuccess"}),await B()):te({type:"warn",str:"message.loaddingPrc",name:y.data.progress})}catch(y){console.error("Failed to get lora status:",y),clearInterval(d.value),d.value=null,te({type:"error",str:"message.loadFailed"})}},B=async()=>{if(!n.value){n.value=!0,V.value=1,l.value=!1,s.value=!1;try{await F(),Qe(()=>{ae("all")})}catch(y){console.error("Failed to refresh lora list:",y)}finally{n.value=!1}}},ne=async()=>{if(V.value>=q.value){l.value=!0;return}s.value=!0;try{if(V.value++,oe.value){if(z.value=res.data,z.value.length>0){const y=Object.values(z.value),N=(V.value-1)*50,j=N+50,xe=y.slice(N,j);ee(xe)}}else if(r.value==="all"){z.value=X.value[r.value];const y=z.value;if(y){const N=Object.values(y),j=(V.value-1)*50,xe=j+50,_e=N.slice(j,xe);ee(_e)}}else{const y=z.value[u.value];if(y){const N=Object.values(y),j=(V.value-1)*50,xe=j+50,_e=N.slice(j,xe);ee(_e)}}}finally{s.value=!1}},ge=()=>{V.value=1,l.value=!1,s.value=!1};Ze([r,u,c],()=>{ge()}),vt(()=>{B()});const ve=y=>{var N,j,xe,_e,J,ue,Me,Pe,We;se.value===0?window.postMessage({type:"weilin_prompt_ui_selectLora",lora:{name:y.model_name,display_name:re(y),lora:y.name,weight:(N=y.local_info)!=null&&N.strengthMin?y.local_info.strengthMin:.5,text_encoder_weight:(j=y.local_info)!=null&&j.strWeight?y.local_info.strWeight:.5,loraWorks:(xe=y.local_info)!=null&&xe.loraWorks?y.local_info.loraWorks:""}},"*"):se.value===1?window.postMessage({type:"weilin_prompt_ui_selectLora_stack_"+Z.value,lora:{name:y.model_name,display_name:re(y),lora:y.name,weight:(_e=y.local_info)!=null&&_e.strengthMin?y.local_info.strengthMin:.5,text_encoder_weight:(J=y.local_info)!=null&&J.strWeight?y.local_info.strWeight:.5,loraWorks:(ue=y.local_info)!=null&&ue.loraWorks?y.local_info.loraWorks:""}},"*"):se.value===2&&window.postMessage({type:"weilin_prompt_ui_selectLora_stack_node_"+Z.value,lora:{name:y.model_name,display_name:re(y),lora:y.name,weight:(Me=y.local_info)!=null&&Me.strengthMin?y.local_info.strengthMin:.5,text_encoder_weight:(Pe=y.local_info)!=null&&Pe.strWeight?y.local_info.strWeight:.5,loraWorks:(We=y.local_info)!=null&&We.loraWorks?y.local_info.loraWorks:""}},"*")},S=y=>{var N,j,xe;window.postMessage({type:"weilin_prompt_ui_addLoraTag_inner",lora:{tag:`<wlr:${y.model_name}:${(N=y.local_info)!=null&&N.strengthMin?y.local_info.strengthMin:.5}:${(j=y.local_info)!=null&&j.strWeight?y.local_info.strWeight:.5}>`,loraWorks:(xe=y.local_info)!=null&&xe.loraWorks?y.local_info.loraWorks:""}},"*")};return t({openSetSeed:P}),(y,N)=>(T(),C("div",{class:Ee(`${Wt}lora-manager`)},[i("div",O9,[Te(i("input",{"onUpdate:modelValue":N[0]||(N[0]=j=>c.value=j),class:Ee(`${Wt}search-input`),placeholder:m(o)("loraManager.searchPlaceholder"),onInput:ie},null,42,R9),[[Ae,c.value]]),i("button",{class:Ee(`${Wt}refresh-btn`),onClick:B,title:m(o)("loraManager.refresh")},[(T(),C("svg",{class:Ee([`${Wt}refresh-icon`,{"is-rotating":n.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},[...N[3]||(N[3]=[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1)])],2))],10,N9),i("button",{style:{"margin-left":"10px"},class:Ee(`${Wt}refresh-btn`),onClick:L,title:m(o)("loraManager.cacheAll")},[(T(),C("svg",{class:Ee([`${Wt}refresh-icon`,{"is-rotating":n.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},[...N[4]||(N[4]=[i("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},null,-1)])],2))],10,D9),i("div",P9,[i("label",{class:Ee(`${Wt}checkbox-label`)},[Te(i("input",{type:"checkbox","onUpdate:modelValue":N[1]||(N[1]=j=>w.value=j),class:Ee(`${Wt}checkbox`)},null,2),[[Bt,w.value]]),N[5]||(N[5]=i("span",null,"悬浮信息",-1))],2),e.loraManager=="prompt_inner"?(T(),C("label",{key:0,class:Ee(`${Wt}checkbox-label`)},[Te(i("input",{type:"checkbox","onUpdate:modelValue":N[2]||(N[2]=j=>O.value=j),class:Ee(`${Wt}checkbox`)},null,2),[[Bt,O.value]]),N[6]||(N[6]=i("span",null,"点击添加Tag",-1))],2)):me("",!0)])]),oe.value?me("",!0):(T(),C("div",{key:0,class:Ee(`${Wt}category-nav`)},[(T(!0),C(Oe,null,je(Object.keys(X.value),j=>(T(),C("button",{key:j,class:Ee([`${Wt}category-btn`,{active:r.value===j}]),onClick:xe=>ae(j)},h(j==="/"?m(o)("loraManager.root"):j=="all"?m(o)("loraManager.all"):j),11,F9))),128))],2)),r.value!="all"&&!oe.value?(T(),C("div",{key:1,class:Ee(`${Wt}subcategory-nav`)},[(T(!0),C(Oe,null,je(Object.keys(z.value),j=>(T(),C("button",{key:j,class:Ee([`${Wt}category-btn`,{active:u.value===j}]),onClick:xe=>D(j)},h(j==="/"?m(o)("loraManager.root"):j=="all"?m(o)("loraManager.all"):j),11,B9))),128))],2)):me("",!0),i("div",{class:Ee(`${Wt}lora-list-container`),ref_key:"scrollContainer",ref:f,onScroll:K},[a.value&&!s.value?(T(),C("div",U9,h(m(o)("loraManager.loading")),1)):G.value.length===0?(T(),C("div",H9,h(m(o)("loraManager.noResults")),1)):me("",!0),i("div",{class:Ee(`${Wt}lora-list`),style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"}},[(T(!0),C(Oe,null,je(G.value,j=>(T(),C("div",{key:j.file_path,class:Ee(`${Wt}lora-card`),ref_for:!0,ref_key:"loraCardRef",ref:x,onClick:xe=>de(j),onMouseover:xe=>le(j.name,xe),onMouseleave:R,style:{display:"flex","flex-direction":"column","min-height":"200px",cursor:"pointer"}},[i("div",{class:Ee(`${Wt}lora-preview`),style:{flex:"1",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%"}},[j.preview?(T(),C("img",{key:0,src:j.preview,alt:j.model_name,title:j.model_name,loading:"lazy",style:{width:"100%",height:"100%","object-fit":"contain","min-height":"150px"}},null,8,j9)):(T(),C("div",{key:1,class:Ee(`${Wt}no-preview`),style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","min-height":"150px"}},[...N[7]||(N[7]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[i("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)])],2))],2),i("div",{class:Ee(`${Wt}lora-name`),style:{padding:"8px","text-align":"center","word-break":"break-word","white-space":"normal",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","min-height":"40px","max-height":"40px","line-height":"1.2","text-overflow":"ellipsis"}},h(re(j)),3)],42,W9))),128))],2),i("div",null,[s.value?(T(),C("div",V9,h(m(o)("loraManager.loadingMore")),1)):me("",!0),!s.value&&l.value?(T(),C("div",z9,h(m(o)("loraManager.noMoreData")),1)):me("",!0)])],34),ze(tr,{ref_key:"loraDetailRef",ref:ye},null,512),g.value?(T(),yt(ru,{key:2,ref_key:"loraCardItem",ref:U,fileNmae:p.value,paddingLeft:v.value,paddingTop:b.value,onCardLeave:Y,onCardenter:he},null,8,["fileNmae","paddingLeft","paddingTop"])):me("",!0)],2))}},[["__scopeId","data-v-2f0b875e"]]),q9={class:"tag-manager"},G9={class:"selected-categories-container"},Q9={class:"selected-categories-header"},Y9={class:"selected-categories-content"},K9={key:0,class:"selected-category-section"},J9={class:"section-title"},X9={class:"selected-items"},Z9={class:"category-name"},eT=["onClick"],tT={key:1,class:"selected-category-section"},nT={class:"section-title"},oT={class:"selected-items"},aT={class:"category-name"},sT={class:"subcategory-name"},lT=["onClick"],rT={key:2,class:"no-selected"},iT={class:"category-tabs"},uT={class:"tabs-wrapper primary-tabs"},cT={class:"tabs-scroll"},dT=["onClick"],fT={class:"tab-text"},pT=["onClick","title"],gT={key:0,class:"tabs-wrapper group-tabs"},mT={class:"tabs-scroll"},hT=["onClick"],vT={class:"tab-text"},_T=["onClick","disabled","title"],yT=xt({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=o,s=_([]),l=_(null),r=_(null),u=_([]),d=_(!1),c=_([]),f=_(!1),g=_(0),p=ot(()=>c.value.filter(Y=>!Y.sub)),v=ot(()=>c.value.filter(Y=>Y.sub)),b=Y=>c.value.findIndex(X=>X.group.p_uuid===Y.group.p_uuid&&!X.sub),x=Y=>c.value.findIndex(X=>X.group.p_uuid===Y.group.p_uuid&&X.sub&&X.sub.g_uuid===Y.sub.g_uuid),k=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},A=async()=>{try{const Y=await Rt.getTagsGroupList();if(s.value=Y.info,r.value){const X=s.value.flatMap(z=>z.groups).find(z=>z.p_uuid===r.value.p_uuid);X?r.value=X:r.value=null}if(l.value){const X=s.value.find(z=>z.p_uuid===l.value.p_uuid);X?l.value=X:l.value=null}}catch(Y){console.error("获取标签列表失败:",Y)}},U=Y=>{if(!Y||Y==="transparent")return"var(--primary-text)";let X,z,Z,se=1;if(Y.startsWith("rgba")){const F=Y.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);F&&([,X,z,Z,se]=F.map(Number))}else if(Y.startsWith("rgb")){const F=Y.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);F&&([,X,z,Z]=F.map(Number))}return se<.5?"var(--primary-text)":(X*299+z*587+Z*114)/1e3>128?"#000000":"#ffffff"};vt(()=>{window.addEventListener("message",le)}),Eo(()=>{window.removeEventListener("message",le)});const w=Y=>{l.value=Y,r.value=null,d.value=!1,u.value=[]},O=Y=>{W(l.value)||(r.value=Y,d.value=!1,u.value=[])},W=Y=>Y?c.value.some(X=>X.group.p_uuid===Y.p_uuid&&!X.sub):!1,V=Y=>{const X=c.value.findIndex(z=>z.group.p_uuid===Y.p_uuid&&!z.sub);X!==-1?c.value.splice(X,1):(c.value=c.value.filter(z=>z.group.p_uuid!==Y.p_uuid),c.value.push({group:{p_uuid:Y.p_uuid,name:Y.name},sub:null}))},H=(Y,X)=>{if(W(Y))return;const z=c.value.findIndex(Z=>Z.group.p_uuid===Y.p_uuid&&Z.sub&&Z.sub.g_uuid===X.g_uuid);if(z!==-1)c.value.splice(z,1);else{const Z=c.value.findIndex(se=>se.group.p_uuid===Y.p_uuid&&!se.sub);Z!==-1&&c.value.splice(Z,1),c.value.push({group:{p_uuid:Y.p_uuid,name:Y.name},sub:X?{g_uuid:X.g_uuid,name:X.name}:null})}},q=Y=>{c.value.splice(Y,1)},he=()=>{c.value=[]},le=Y=>{Y.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&A()},R=()=>{if(c.value.length===0){te({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{data:c.value,index:g.value}),f.value=!1};return t({open:(Y,X)=>{k(),g.value=Y,c.value=X,f.value=!0}}),(Y,X)=>(T(),yt(Es,{modelValue:f.value,"onUpdate:modelValue":X[1]||(X[1]=z=>f.value=z),title:m(n)("importDialog.selectTitle")},{footer:ht(()=>[i("button",{onClick:X[0]||(X[0]=z=>f.value=!1)},h(m(n)("promptBox.settings.close")),1),i("button",{onClick:R},h(m(n)("importDialog.sureSelect")),1)]),default:ht(()=>[i("div",q9,[i("div",G9,[i("div",Q9,[i("span",null,h(m(n)("importDialog.selectedCategories")),1),c.value.length>0?(T(),C("button",{key:0,class:"clear-all-btn",onClick:he},h(m(n)("importDialog.clearAll")),1)):me("",!0)]),i("div",Y9,[p.value.length>0?(T(),C("div",K9,[i("div",J9,h(m(n)("importDialog.primaryCategories")),1),i("div",X9,[(T(!0),C(Oe,null,je(p.value,(z,Z)=>(T(),C("div",{key:"primary-"+Z,class:"selected-item"},[i("span",Z9,h(z.group.name),1),i("button",{class:"remove-selected-btn",onClick:se=>q(b(z))},"×",8,eT)]))),128))])])):me("",!0),v.value.length>0?(T(),C("div",tT,[i("div",nT,h(m(n)("importDialog.subCategories")),1),i("div",oT,[(T(!0),C(Oe,null,je(v.value,(z,Z)=>(T(),C("div",{key:"sub-"+Z,class:"selected-item"},[i("span",aT,h(z.group.name),1),X[2]||(X[2]=i("span",{class:"separator"},">",-1)),i("span",sT,h(z.sub.name),1),i("button",{class:"remove-selected-btn",onClick:se=>q(x(z))},"×",8,lT)]))),128))])])):me("",!0),c.value.length===0?(T(),C("div",rT,h(m(n)("importDialog.noSelectedCategories")),1)):me("",!0)])]),i("div",iT,[i("div",uT,[i("div",cT,[(T(!0),C(Oe,null,je(s.value,(z,Z)=>{var se,P,F;return T(),C("div",{key:"Tabss-"+Z,class:Ee(["tab-item",{active:((se=l.value)==null?void 0:se.p_uuid)===z.p_uuid}]),style:mt({backgroundColor:((P=l.value)==null?void 0:P.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((F=l.value)==null?void 0:F.p_uuid)===z.p_uuid?"var(--weilin-prompt-ui-primary-text)":U(z.color)}),onClick:K=>w(z)},[i("span",fT,h(z.name),1),i("button",{class:"select-tab-btn",onClick:Je(K=>V(z),["stop"]),title:m(n)("importDialog.selectCategory")},[...X[3]||(X[3]=[i("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[i("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)])],8,pT)],14,dT)}),128))])]),l.value?(T(),C("div",gT,[i("div",mT,[(T(!0),C(Oe,null,je(l.value.groups,(z,Z)=>{var se,P,F;return T(),C("div",{key:"TabsSw-"+Z,class:Ee(["tab-item",{active:((se=r.value)==null?void 0:se.g_uuid)===z.g_uuid,disabled:W(l.value)}]),style:mt({backgroundColor:((P=r.value)==null?void 0:P.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-bg)":z.color,color:((F=r.value)==null?void 0:F.g_uuid)===z.g_uuid?"var(--weilin-prompt-ui-primary-text)":U(z.color),opacity:W(l.value)?"0.5":"1",cursor:W(l.value)?"not-allowed":"pointer"}),onClick:K=>W(l.value)?null:O(z)},[i("span",vT,h(z.name),1),W(l.value)?me("",!0):(T(),C("button",{key:0,class:"select-tab-btn",onClick:Je(K=>H(l.value,z),["stop"]),disabled:W(l.value),title:m(n)("importDialog.selectSubcategory")},[...X[4]||(X[4]=[i("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[i("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)])],8,_T))],14,hT)}),128))])])):me("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-7c9863cd"]]),fn={getTemplateList:async()=>await Ie({url:"/random_template/get_template_list",method:"post"}),getTemplateData:async e=>await Ie({url:"/random_template/get_template_data",method:"post",data:{name:e}}),saveTemplateData:async e=>await Ie({url:"/random_template/save_template",method:"post",data:{data:e}}),updateTemplateData:async(e,t)=>await Ie({url:"/random_template/update_template",method:"post",data:{name:e,data:t}}),deleteTemplateData:async e=>await Ie({url:"/random_template/delete_template",method:"post",data:{name:e}}),getRandomTemplateApple:async()=>await Ie({url:"/get/setting/get_random_template_setting",method:"post"}),updateRandomTemplateApple:async e=>await Ie({url:"/update/setting/update_random_template_setting",method:"post",data:{path:e}}),goRandomTemplate:async()=>await Ie({url:"/random_template/go_random_template",method:"post"}),goRandomTemplatePath:async e=>await Ie({url:"/random_template/go_random_template_path",method:"post",data:{name:e}})},bT={class:"random-rule-container"},wT={class:"settings-section template-section"},xT={class:"section-header"},TT={class:"template-controls"},ST={class:"template-select-group"},kT={class:"template-select-with-apply"},CT={value:""},ET=["value"],LT=["disabled"],$T={class:"template-bottom-buttons"},AT=["disabled"],IT=["disabled"],MT={key:0,class:"template-name-input"},OT=["placeholder"],RT={class:"template-actions"},NT={key:0},DT={class:"settings-section"},PT={class:"section-header"},FT={class:"rules-reminder"},BT={class:"rules-list"},UT={class:"rule-header"},HT=["onClick"],WT={class:"rule-content"},jT={class:"form-group"},VT={class:"range-inputs"},zT=["onUpdate:modelValue"],qT=["onUpdate:modelValue"],GT={class:"form-group"},QT=["onUpdate:modelValue"],YT={value:"category"},KT={value:"specific"},JT={key:0,class:"form-group"},XT={class:"selected-categories-container"},ZT={class:"selected-categories-header"},eS={class:"selected-categories-content"},tS={key:0,class:"selected-category-section"},nS={class:"section-title"},oS={class:"selected-items"},aS={class:"category-name"},sS={key:1,class:"selected-category-section"},lS={class:"section-title"},rS={class:"selected-items"},iS={class:"category-name"},uS={class:"subcategory-name"},cS={key:2,class:"no-selected"},dS=["onClick"],fS={key:1,class:"form-group"},pS={class:"tags-input-container"},gS=["onClick"],mS=["onUpdate:modelValue","onKeydown","placeholder"],hS=["onClick"],vS={class:"actions-section"},_S=["disabled"],qg="weilin_tools_",yS=xt({__name:"random_setting",emits:["close","update","generateRandomTags"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_(!1),s=_(null),l=_(!1),r=_(""),u=_(""),d={randomRuleSetting:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},c={file_name:"new_random_template",rules:[{range:{min:1,max:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""},{range:{min:4,max:6},type:"category",categoryId:2,specificTags:[],tagGroupList:[],tagInput:""}]},f=_({});async function g(){try{r.value=="prompt_global"?await fn.getRandomTemplateApple().then(async ae=>{ae.data==""?f.value=c:await fn.getTemplateData(ae.data).then(async D=>{z.value=ae.data,f.value=D.data,l.value=!0}).catch(D=>{console.error("加载模板失败:",D),te({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(ae=>{console.error(ae),te({type:"warn",str:"message.networkError"})}):u.value==""?f.value=c:await fn.getTemplateData(u.value).then(async ae=>{z.value=u.value,f.value=ae.data,l.value=!0}).catch(ae=>{console.error("加载模板失败:",ae),te({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(ae){te({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",ae)}}function p(){try{const ae=JSON.parse(JSON.stringify(f.value));ae.rules&&ae.rules.forEach(D=>{delete D.tagInput}),fn.updateTemplateData(z.value,ae).then(async D=>{await fn.getTemplateData(D.path_name).then(async ee=>{f.value=ee.data,te({type:"success",str:"randomUtils.templateSaved"})}).catch(ee=>{console.error("加载模板失败:",ee),te({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(D=>{console.error("更新模板失败:",D),te({type:"warn",str:"randomUtils.errorSavingTemplate"})})}catch(ae){console.error("Error saving random tag settings:",ae),te({type:"warn",str:"randomUtils.errorSavingSettings"})}}function v(){f.value.rules.push({range:{min:f.value.rules.length>0?f.value.rules[f.value.rules.length-1].range.max+1:1,max:f.value.rules.length>0?f.value.rules[f.value.rules.length-1].range.max+3:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""})}function b(ae){f.value.rules.splice(ae,1)}function x(ae){ae.tagInput&&ae.tagInput.trim()&&(ae.specificTags.push(ae.tagInput.trim()),ae.tagInput="")}function k(ae,D){ae.specificTags.splice(D,1)}function A(){}const w=_((()=>{try{const ae=localStorage.getItem(`${qg}randomRuleSettingState`);if(ae){const D=JSON.parse(ae),ee={...d};return D.randomRuleSetting&&(ee.randomRuleSetting={...d.randomRuleSetting,...D.randomRuleSetting}),ee}}catch(ae){console.error("Error loading window states:",ae)}return{...d}})());Ze(w,ae=>{try{localStorage.setItem(`${qg}randomRuleSettingState`,JSON.stringify(ae))}catch(D){console.error("Error saving window states:",D)}},{deep:!0});const O=ae=>{a.value=!1},W=(ae,D)=>{w.value[ae]&&(w.value[ae].position={...D})},V=(ae,D)=>{w.value[ae]&&(w.value[ae].size={...D})},H=ae=>{a.value=!0,r.value=ae,Ue.registerWindow("randomRuleSetting"),Qe(()=>{Ue.setActiveWindow("randomRuleSetting"),ae=="prompt_global"?F(1):M()})},q=(ae,D)=>{s.value.open(ae,D)},he=()=>void 0,le=ae=>!ae||!Array.isArray(ae)||ae.length<=0?[]:ae.filter(D=>!D.sub),R=ae=>!ae||!Array.isArray(ae)||ae.length<=0?[]:ae.filter(D=>D.sub),Y=ae=>{ae&&ae.data&&Array.isArray(ae.data)?f.value.rules[ae.index].tagGroupList=ae.data:f.value.rules[ae.index].tagGroupList=[]},X=_([]),z=_(""),Z=_(""),se=_(!1),P=_(!1);async function F(ae=0){try{await fn.getTemplateList().then(D=>{X.value=D.data,ae==1&&g()}).catch(D=>{console.error(D),te({type:"warn",str:"message.networkError"})})}catch(D){te({type:"warn",str:"message.networkError"}),console.error("RandomTemplate获取列表失败:",D)}}function K(){se.value=!0,Z.value=""}function oe(){se.value=!1,Z.value=""}function Q(){if(!z.value){te.warm(n("randomUtils.pleaseChooseTemplate"));return}r.value=="prompt_global"?fn.updateRandomTemplateApple(z.value).then(ae=>{te({type:"success",str:"randomUtils.templateApplied"})}).catch(ae=>{console.error("获取模板失败:",ae),te({type:"warn",str:"randomUtils.errorApplyingTemplate"})}):(window.postMessage({type:"weilin_prompt_ui_prompt_inner_update_node_tag_template_id",data:z.value},"*"),te({type:"success",str:"randomUtils.templateApplied"}))}function ie(){z.value&&fn.deleteTemplateData(z.value).then(()=>{te({type:"success",str:"randomUtils.templateDeleted"}),F(),z.value=""}).catch(ae=>{console.error("删除模板失败:",ae),te({type:"warn",str:"randomUtils.errorDeletingTemplate"})})}function re(){if(!z.value)return;const ae=X.value.find(D=>D.path_name===z.value);ae&&(se.value=!0,Z.value=ae.file_name,P.value=!0)}function ye(){if(!Z.value.trim()){te({type:"warn",str:"randomUtils.templateNameRequired"});return}if(f.value.file_name=Z.value.trim(),P.value){const ae=X.value.find(D=>D.path_name===z.value);if(ae){ae.file_name=Z.value.trim();const D=JSON.parse(JSON.stringify(f.value));D.rules&&D.rules.forEach(ee=>{delete ee.tagInput}),fn.updateTemplateData(ae.path_name,D).then(async ee=>{te({type:"success",str:"randomUtils.templateSaved"}),await F().then(async()=>{await fn.getTemplateData(ee.path_name).then(async L=>{z.value=ee.path_name,f.value=L.data,te({type:"success",str:"randomUtils.templateSaved"})}).catch(L=>{console.error("加载模板失败:",L),te({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(ee=>{console.error("保存模板失败:",ee),te({type:"warn",str:"randomUtils.errorSavingTemplate"})})}}else{f.value=c,f.value.file_name=Z.value.trim();const ae=JSON.parse(JSON.stringify(f.value));ae.rules&&ae.rules.forEach(D=>{delete D.tagInput}),fn.saveTemplateData(ae).then(async D=>{await F().then(async()=>{await fn.getTemplateData(D.path_name).then(async ee=>{z.value=D.path_name,f.value=ee.data,te({type:"success",str:"randomUtils.templateSaved"})}).catch(ee=>{console.error("加载模板失败:",ee),te({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(D=>{console.error("保存模板失败:",D),te({type:"warn",str:"randomUtils.errorSavingTemplate"})})}se.value=!1,Z.value="",P.value=!1}const de=async ae=>{if(ae.target.value!="")try{await fn.getTemplateData(ae.target.value).then(async D=>{z.value=D.path_name,f.value=D.data,l.value=!0}).catch(D=>{console.error("加载模板失败:",D),te({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(D){te({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",D)}},M=()=>{window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id"},"*")},G=ae=>{ae.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response"&&(u.value=ae.data.data,F(1))};return vt(()=>{window.addEventListener("message",G)}),Dn(()=>{Ue.unregisterWindow("randomRuleSetting"),window.removeEventListener("message",G)}),t({open:H,getRandomTags:he}),(ae,D)=>(T(),C(Oe,null,[a.value?(T(),yt(xn,{key:0,title:m(n)("randomUtils.title"),position:w.value.randomRuleSetting.position,size:w.value.randomRuleSetting.size,"z-index":m(Ue).getZIndex("randomRuleSetting"),"onUpdate:position":D[2]||(D[2]=ee=>W("randomRuleSetting",ee)),"onUpdate:size":D[3]||(D[3]=ee=>V("randomRuleSetting",ee)),onActive:D[4]||(D[4]=ee=>m(Ue).setActiveWindow("randomRuleSetting")),onClose:D[5]||(D[5]=ee=>O())},{default:ht(()=>[i("div",bT,[i("div",wT,[i("div",xT,[i("h3",null,h(m(n)("randomUtils.ruleTemplates")),1)]),i("div",TT,[i("div",ST,[i("div",kT,[Te(i("select",{"onUpdate:modelValue":D[0]||(D[0]=ee=>z.value=ee),onChange:de,class:"form-select template-select"},[i("option",CT,h(m(n)("randomUtils.selectTemplate")),1),(T(!0),C(Oe,null,je(X.value,(ee,L)=>(T(),C("option",{key:L,value:ee.path_name},h(ee.file_name),9,ET))),128))],544),[[cn,z.value]]),i("button",{class:"apply-template-btn",onClick:Q,disabled:!z.value},h(m(n)("randomUtils.applyTemplate")),9,LT)]),i("div",$T,[i("button",{class:"new-template-btn",onClick:K},h(m(n)("randomUtils.newTemplate")),1),i("button",{class:"edit-template-btn",onClick:re,disabled:!z.value},h(m(n)("randomUtils.editTemplate")),9,AT),i("button",{class:"delete-template-btn",onClick:ie,disabled:!z.value},h(m(n)("randomUtils.deleteTemplate")),9,IT)])]),se.value?(T(),C("div",MT,[Te(i("input",{type:"text","onUpdate:modelValue":D[1]||(D[1]=ee=>Z.value=ee),class:"form-input",placeholder:m(n)("randomUtils.templateNamePlaceholder")},null,8,OT),[[Ae,Z.value]]),i("div",RT,[i("button",{class:"save-template-btn",onClick:ye},h(m(n)("randomUtils.save")),1),i("button",{class:"cancel-template-btn",onClick:oe},h(m(n)("randomUtils.cancel")),1)])])):me("",!0)])]),z.value&&l.value?(T(),C("div",NT,[i("div",DT,[i("div",PT,[i("h3",null,h(m(n)("randomUtils.rules")),1),i("button",{class:"add-rule-btn",onClick:v},[D[6]||(D[6]=i("span",null,"+",-1)),qe(" "+h(m(n)("randomUtils.addRule")),1)])]),i("div",FT,[i("p",null,h(m(n)("randomUtils.rulesReminder")),1)]),i("div",BT,[(T(!0),C(Oe,null,je(f.value.rules,(ee,L)=>(T(),C("div",{key:L,class:"rule-item"},[i("div",UT,[i("h4",null,h(m(n)("randomUtils.rule"))+" #"+h(L+1),1),i("button",{class:"delete-rule-btn",onClick:E=>b(L)},"×",8,HT)]),i("div",WT,[i("div",jT,[i("label",null,h(m(n)("randomUtils.range")),1),i("div",VT,[Te(i("input",{type:"number","onUpdate:modelValue":E=>ee.range.min=E,min:"1",class:"form-input range-input"},null,8,zT),[[Ae,ee.range.min,void 0,{number:!0}]]),D[7]||(D[7]=i("span",null,"-",-1)),Te(i("input",{type:"number","onUpdate:modelValue":E=>ee.range.max=E,min:"1",class:"form-input range-input"},null,8,qT),[[Ae,ee.range.max,void 0,{number:!0}]])])]),i("div",GT,[i("label",null,h(m(n)("randomUtils.tagType")),1),Te(i("select",{"onUpdate:modelValue":E=>ee.type=E,class:"form-select"},[i("option",YT,h(m(n)("randomUtils.category")),1),i("option",KT,h(m(n)("randomUtils.specificTags")),1)],8,QT),[[cn,ee.type]])]),ee.type==="category"?(T(),C("div",JT,[i("div",XT,[i("div",ZT,[i("span",null,h(m(n)("importDialog.selectedCategories")),1)]),i("div",eS,[le(ee.tagGroupList).length>0?(T(),C("div",tS,[i("div",nS,h(m(n)("importDialog.primaryCategories")),1),i("div",oS,[(T(!0),C(Oe,null,je(le(ee.tagGroupList),(E,B)=>(T(),C("div",{key:"primary-"+B,class:"selected-item"},[i("span",aS,h(E.group.name),1)]))),128))])])):me("",!0),R(ee.tagGroupList).length>0?(T(),C("div",sS,[i("div",lS,h(m(n)("importDialog.subCategories")),1),i("div",rS,[(T(!0),C(Oe,null,je(R(ee.tagGroupList),(E,B)=>(T(),C("div",{key:"sub-"+B,class:"selected-item"},[i("span",iS,h(E.group.name),1),D[8]||(D[8]=i("span",{class:"separator"},">",-1)),i("span",uS,h(E.sub.name),1)]))),128))])])):me("",!0),!ee.tagGroupList||ee.tagGroupList.length===0?(T(),C("div",cS,h(m(n)("importDialog.noSelectedCategories")),1)):me("",!0)])]),i("button",{class:"add-tag-btn",onClick:E=>q(L,ee.tagGroupList)},h(m(n)("randomUtils.selectTagGroup")),9,dS)])):me("",!0),ee.type==="specific"?(T(),C("div",fS,[i("label",null,h(m(n)("randomUtils.specificTags")),1),i("div",pS,[(T(!0),C(Oe,null,je(ee.specificTags,(E,B)=>(T(),C("div",{key:B,class:"tag-chip"},[qe(h(E)+" ",1),i("button",{class:"remove-tag-btn",onClick:ne=>k(ee,B)},"×",8,gS)]))),128)),Te(i("input",{type:"text","onUpdate:modelValue":E=>ee.tagInput=E,onKeydown:tn(Je(E=>x(ee),["prevent"]),["enter"]),class:"tag-input",placeholder:m(n)("randomUtils.addTagPlaceholder")},null,40,mS),[[Ae,ee.tagInput]])]),i("button",{class:"add-tag-btn",onClick:E=>x(ee)},h(m(n)("randomUtils.addTag")),9,hS)])):me("",!0)])]))),128))])])])):me("",!0)]),i("div",vS,[i("button",{class:"save-btn",onClick:p,disabled:!z.value},h(m(n)("common.save")),9,_S)])]),_:1},8,["title","position","size","z-index"])):me("",!0),ze(yT,{ref_key:"tagGroupSelectItem",ref:s,onSureSelect:Y},null,512)],64))}},[["__scopeId","data-v-61460fd3"]]);function Ia(e){let t=e.length;for(;--t>=0;)e[t]=0}const bS=3,wS=258,Gg=29,xS=256+1+Gg,Qg=30,TS=512,SS=new Array((xS+2)*2);Ia(SS);const kS=new Array(Qg*2);Ia(kS);const CS=new Array(TS);Ia(CS);const ES=new Array(wS-bS+1);Ia(ES);const LS=new Array(Gg);Ia(LS);const $S=new Array(Qg);Ia($S);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const iu=new Uint8Array(256);for(let e=0;e<256;e++)iu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;iu[254]=iu[254]=1;const AS={class:"weilin_prompt_ui_prompt-box"},IS={key:0,class:"weilin-toast",role:"status","aria-live":"polite"},MS={class:"center-container"},OS={class:"action-item"},RS=["title"],NS={class:"action-text"},DS={class:"action-item"},PS=["title"],FS={class:"action-text"},BS={class:"action-item"},US={class:"action-text"},HS={class:"action-item"},WS=["title"],jS={class:"action-text"},VS={class:"action-item"},zS=["title"],qS={class:"action-text"},GS={class:"action-item"},QS=["title"],YS={class:"action-text"},KS={key:0,class:"action-item"},JS=["title"],XS={class:"action-text"},ZS={class:"action-item"},ek=["title"],tk={class:"action-text"},nk={class:"action-item"},ok=["title"],ak={class:"action-text"},sk={class:"action-item"},lk=["title"],rk={class:"action-text"},ik={class:"action-item"},uk=["title"],ck={class:"action-text"},dk={class:"action-item"},fk=["title"],pk={class:"action-text"},gk={class:"action-item"},mk=["title"],hk={class:"action-text"},vk={class:"action-item"},_k=["title"],yk={class:"action-text"},bk={class:"action-item weilin-comfyui-toolbar-right"},wk=["disabled"],xk=["placeholder"],Tk={class:"token-counter"},Sk=["onClick"],kk={class:"tag"},Ck={class:"desc"},Ek={class:"prompt-input-translate-area"},Lk=["placeholder"],$k=["title"],Ak={style:{"margin-left":"5px"},class:"action-text"},Ik=["title"],Mk={class:"action-text"},Ok=["title"],Rk={class:"action-text"},Nk={key:0,class:"tokens-container"},Dk=["draggable","onDragstart","onDragover","onDrop","onDblclick"],Pk={key:0,class:"newline-token"},Fk=["title"],Bk=["onMouseenter","onMouseleave"],Uk=["title"],Hk=["title","onMouseenter","onMouseleave"],Wk={style:{"margin-left":"5px"}},jk=["onMouseenter","onMouseleave"],Vk=["onClick"],zk=["value","onInput","onBlur","onKeyup"],qk={key:4,class:"translation-result"},Gk=["onClick","title"],Qk={class:"translated-text"},Yk={key:0,class:"line-break"},Kk={class:"tag-tips-content"},Jk=["innerHTML"],Xk={key:0,class:"weight-control"},Zk={class:"weight-label"},eC={key:1,class:"lora-weight-controls"},tC={class:"weight-control"},nC={class:"weight-label"},oC={class:"weight-control"},aC={class:"weight-label"},sC=["title"],lC={key:2,class:"bracket-btn-group"},rC={class:"bracket-btn-container"},iC={class:"vertical-btn-group"},uC=["title"],cC=["title"],dC={class:"bracket-btn-container"},fC={class:"vertical-btn-group"},pC=["title"],gC=["title"],mC={class:"bracket-btn-container"},hC={class:"vertical-btn-group"},vC=["title"],_C=["title"],yC={class:"tag-manager-section"},bC={class:"weilin-comfyui-selection-actions-content"},wC={class:"weilin-comfyui-selection-actions-count"},xC={class:"header-left"},TC={class:"section-title"},SC={class:"header-right"},kC={class:"lora-manager-container"},CC={class:"tag-manager-section"},EC={class:"header-left"},LC={class:"section-title"},$C={class:"header-right"},AC={class:"tag-manager-container"},IC="weilin_prompt_ui_",Rs="weilin-selection-box",MC=16,Yg="weilin_prompt_ui_sidebar_visible",OC="weilin_prompt_ui_main_labels_v1",RC=50,NC=xt({__name:"prompt_index",props:{promptManager:{type:String,default:"prompt_global"},hasPromptLoraStack:{type:Boolean,default:!1}},setup(e,{expose:t}){const o=_(null),{t:n}=wt(),a=_(),s=_(),l=_({top:0,left:0}),r=_(0),u=e,d=_(null),c=_(""),f=_([]),g={},p=_(null),v=_(!1),b=_({top:"0px",left:"0px"}),x=_(!1),k=_(null),A=_(null),U=_(null),w=_([]),O=_(!1),W=_(!1),V=_([]),H=_(0),q=_(null),he=_(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),le=_(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),R=_(""),Y=_(!1),X=_({x:0,y:0}),z=_({x:0,y:0}),Z=_([]),se=_(null),P=_(!1),F=_(!1),K=_(!1),oe=_({top:"0px",left:"0px"}),Q=_(!1),ie=_(!1),re=_(0),ye=_(!1),de=_({top:"0px",left:"0px"}),M=_(null),G=_(null),ae=_(""),D=_(0),ee=_(!0),L=()=>{ee.value=!ee.value};Ze(ee,I=>{localStorage.setItem(Yg,String(I))}),vt(()=>{const I=localStorage.getItem(Yg);ee.value=I!=="false"});const E=()=>(D.value++,`token_${D.value}_${Date.now()}`),B=()=>{O.value=!O.value},ne=()=>{O.value=!1},ge=_(null),ve=_(null),S=_(!1),y=`weilin_prompt_ui_last_main_label_id_${u.promptManager||"default"}`,N=ot(()=>{const I=ee.value?280:0;return`calc(100% - ${(O.value?300:0)+I}px)`});let j=!1;const xe=I=>{if(!I){ve.value=null,c.value="",Qe(()=>{s.value&&(s.value.value="",sa({target:s.value}))}),S.value=!1;return}ve.value=I.id,j=!0,c.value=I.content||"",Qe(()=>{s.value&&(s.value.value=c.value,sa({target:s.value}))}),S.value=!1};Ze(c,I=>{if(j){j=!1;return}S.value=!0}),Ze(f,()=>{j||(S.value=!0)},{deep:!0}),Ze(ve,I=>{try{localStorage.setItem(y,I||"")}catch{}});function _e(){try{const I=localStorage.getItem(y);if(!I)return;const $=localStorage.getItem(OC),ce=$?JSON.parse($):[],be=Array.isArray(ce)?ce.find(Ne=>Ne&&Ne.id===I):null;if(!be)return;ve.value=I,j=!0,c.value=be.content||"",Qe(()=>{s.value&&(s.value.value=c.value,sa({target:s.value})),j=!1}),S.value=!1}catch{}}vt(()=>{_e();const I=()=>{try{localStorage.setItem(y,ve.value||"")}catch{}};window.addEventListener("beforeunload",I),Eo(()=>window.removeEventListener("beforeunload",I))});function J(){var I;ve.value&&(I=ge.value)!=null&&I.updateSelectedContent&&(ge.value.updateSelectedContent(c.value),S.value=!1,Pe())}const ue=_(!1);let Me=null;function Pe(){ue.value=!0,Me&&clearTimeout(Me),Me=setTimeout(()=>{ue.value=!1},1600)}Eo(()=>{Me&&clearTimeout(Me)});const We=()=>{k.value.open()},Ve=_(1),ut=()=>{if(p.value===null)return;let $=f.value[p.value].text;if(!at($)){te({type:"warn",str:"message.noFinishKuo"});return}const ce=$e=>$e.startsWith("(")&&$e.endsWith(")")&&!$e.slice(1,-1).includes("(")&&!$e.slice(1,-1).includes(")")&&!$e.slice(1,-1).includes("[")&&!$e.slice(1,-1).includes("]")&&!$e.slice(1,-1).includes("{")&&!$e.slice(1,-1).includes("}")&&!$e.slice(1,-1).includes("<")&&!$e.slice(1,-1).includes(">");let be=$;const Ne=/:\d+(\.\d+)?$/.test($),ke=$.match(/^\((.*?):(\d+(\.\d+)?)\)$/);if(Ne||ke)Ve.value===1?$.startsWith("(")&&$.endsWith(")")?be=$.slice(1,-1).replace(/:(\d+(\.\d+)?)$/,""):be=$.replace(/:(\d+(\.\d+)?)$/,""):ke?be=`(${ke[1]}:${Ve.value})`:be=$.replace(/:(\d+(\.\d+)?)$/,`:${Ve.value}`);else{const $e=$.match(/^([^_]+)_(\([^)]+\))$/);if($e&&!$.includes("\\(")&&!$.includes("\\)")){const[,Re,lt]=$e;Ve.value===1?be=$:be=`(${Re} ${lt}:${Ve.value})`}else $.includes("\\(")&&$.includes("\\)")&&!/[\(\)\[\]\{\}<>]/.test($.replace(/\\[\(\)\[\]\{\}<>]/g,""))?Ve.value===1?be=$:$.startsWith("(")&&$.endsWith(")")?be=$.replace(/\)$/,`:${Ve.value})`):be=`(${$}:${Ve.value})`:/[\(\[\{\<\)\]\}\>]/.test($)?Ve.value===1&&ce($)?be=$.slice(1,-1):Ve.value===1?be=$:$.startsWith("(")&&$.endsWith(")")?be=$.replace(/\)$/,`:${Ve.value})`):be=`(${$}:${Ve.value})`:Ve.value===1?be=$:be=`(${$}:${Ve.value})`}f.value[p.value].text=be,no()},dt=_(.5),jt=_(.5);Ze(p,I=>{var $;if(I!==null&&(($=f.value[I])!=null&&$.isLoraTag)){const be=f.value[I].text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);be&&(dt.value=parseFloat(be[2]),jt.value=parseFloat(be[3]))}});const Fe=()=>{var I;if(p.value!==null&&((I=f.value[p.value])!=null&&I.isLoraTag)){const $=f.value[p.value],ce=$.text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);if(ce){const Ne=`<wlr:${ce[1]}:${dt.value}:${jt.value}>`;$.text=Ne,no()}}},Le=I=>{if(p.value===null)return;let ce=f.value[p.value].text;const be={"(":")","[":"]","{":"}","<":">"}[I];ce=`${I}${ce}${be}`,f.value[p.value].text=ce,In()},Ce=I=>{if(p.value===null)return;let ce=f.value[p.value].text;const be={"(":")","[":"]","{":"}","<":">"};ce.startsWith(I)&&ce.endsWith(be[I])&&(ce=ce.slice(1,-1),f.value[p.value].text=ce,In())},at=I=>{const $=[],ce={"(":")","[":"]","{":"}","<":">"};for(let be of I)if(ce[be])$.push(be);else if(Object.values(ce).includes(be)&&($.length===0||ce[$.pop()]!==be))return!1;return $.length===0};bc(()=>{for(const I in g)delete g[I]}),_(!0),_(!1);const pn=I=>/[\p{L}]/u.test(I),aa=I=>{const $=I.match(/([^:]+):[\d.]+/);return $?$[1]:I};let Na=null;const lr=async()=>{Na&&clearTimeout(Na),Na=setTimeout(async()=>{if(!s.value)return;const I=s.value,$=I.selectionStart;await Qe();const ce=I.value.substring(0,$),be=document.createElement("div");be.style.position="absolute",be.style.top="0",be.style.left="0",be.style.visibility="hidden",be.style.whiteSpace="pre-wrap",be.style.wordWrap="break-word",be.style.width=window.getComputedStyle(I).width,be.style.font=window.getComputedStyle(I).font,be.style.padding=window.getComputedStyle(I).padding;const Ne=document.createTextNode(ce),ke=document.createElement("span");ke.textContent="|",be.appendChild(Ne),be.appendChild(ke),I.parentNode.appendChild(be);const $e=ke.getBoundingClientRect(),Re=I.parentNode.getBoundingClientRect();let lt=$e.top-Re.top+$e.height,rt=$e.left-Re.left;if(await Qe(),a.value){const St=a.value.offsetWidth,Sn=I.offsetWidth,Gt=I.getBoundingClientRect().left-Re.left;rt+St>Gt+Sn&&(rt=Gt+Sn-St),rt<Gt&&(rt=Gt),rt=Math.max(0,Math.min(rt,Re.width-St))}I.parentNode.removeChild(be),l.value={top:lt,left:rt},Na=null},50)},Da=_(null),sa=I=>{if(!(I!=null&&I.target)||!s.value)return;const $=I.target.value,ce=I.target.selectionStart,be=I.target.selectionEnd,Ne={comma:{enabled:localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false",pattern:/，/g,replace:","},period:{enabled:localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false",pattern:/。/g,replace:"."},bracket:{enabled:localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false",patterns:[{pattern:/【/g,replace:"["},{pattern:/】/g,replace:"]"},{pattern:/（/g,replace:"("},{pattern:/）/g,replace:")"}]},angleBracket:{enabled:localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false",patterns:[{pattern:/《/g,replace:"<"},{pattern:/》/g,replace:">"}]}};let ke=$.substring(0,ce),$e=$;Object.values(Ne).forEach(Xe=>{Xe.enabled&&(Xe.pattern?(ke=ke.replace(Xe.pattern,Xe.replace),$e=$e.replace(Xe.pattern,Xe.replace)):Xe.patterns&&Xe.patterns.forEach(({pattern:$t,replace:kt})=>{ke=ke.replace($t,kt),$e=$e.replace($t,kt)}))}),c.value=$e;const Re=ke.length,lt=be-ce,rt=Re+lt;Qe(()=>{s.value&&(s.value.setSelectionRange(Re,rt),s.value.focus())});const St=$e.substring(0,Re),Sn=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",Gt=Re>0?St[Re-1]:"";if((Gt===","||Gt===" ")&&Sn){W.value=!1,M.value&&clearTimeout(M.value),M.value=setTimeout(()=>{var Hs;const Xe=((Hs=s.value)==null?void 0:Hs.selectionStart)||0,kt=(c.value||"").substring(0,Xe);let sn=Xe;for(;sn>0&&!/[,\s]/.test(kt[sn-1]);)sn--;const Us=kt.substring(sn,Xe).trim();Us&&im(Us),la()},300),r.value=Pa(c.value);return}let pt=Re;for(;pt>0&&!/[,\s]/.test(St[pt-1]);)pt--;const tt=St.substring(pt,Re).trim();M.value&&clearTimeout(M.value),M.value=setTimeout(()=>{tt&&im(tt),la()},300),r.value=Pa(c.value)},Pa=I=>I?I.trim().split(/\s+/).length:0,Un=async()=>{let I=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",$=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",ce=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",be=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true";localStorage.getItem("weilin_prompt_ui_underscore_to_bracket"),localStorage.getItem("weilin_prompt_ui_comma_conversion")||(localStorage.setItem("weilin_prompt_ui_comma_conversion","true"),I=!0),localStorage.getItem("weilin_prompt_ui_period_conversion")||(localStorage.setItem("weilin_prompt_ui_period_conversion","true"),$=!0),localStorage.getItem("weilin_prompt_ui_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_bracket_conversion","true"),ce=!0),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion","true"),be=!0),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")||localStorage.setItem("weilin_prompt_ui_underscore_to_bracket","false"),I&&(c.value=c.value.replace(/，/g,",")),$&&(c.value=c.value.replace(/。/g,".")),ce&&(c.value=c.value.replace(/【/g,"[").replace(/】/g,"]").replace(/（/g,"(").replace(/）/g,")")),be&&(c.value=c.value.replace(/《/g,"<").replace(/》/g,">"));const Ne=c.value;let ke=[];const $e=f.value.map((it,pt)=>({token:it,originalIndex:pt,currentIndex:pt})).filter(({token:it})=>it.isHidden);ke=((it,pt=0)=>{let tt=[],Xe=pt,$t="",kt=[];for(;Xe<it.length;){const sn=it[Xe];if(sn===`
`){$t.trim()&&(tt.push($t.trim()),$t=""),tt.push(`
`),Xe++;continue}kt.length===0&&sn===","?($t.trim()&&tt.push($t.trim()),$t=""):$t+=sn,Xe++}return $t.trim()&&(kt.length===0?tt.push(...$t.split(",").filter(Boolean).map(sn=>sn.trim())):tt.push($t.trim())),tt})(Ne);const lt=new Map;f.value.forEach((it,pt)=>{it.id||(it.id=E()),lt.set(pt,it)});const rt=[];ke.forEach(it=>{if(it===`
`)rt.push({id:E(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""});else if(it.trim()){const pt=it.trim(),tt=/^<wlr:[^:]+:\d+(\.\d+)?:\d+(\.\d+)?>$/.test(pt);let Xe=!1;for(const[$t,kt]of lt)if(kt.text===pt&&!kt.isHidden&&!rt.includes(kt)){tt&&!kt.isLoraTag&&(kt.isLoraTag=!0),rt.push(kt),lt.delete($t),Xe=!0;break}if(!Xe){for(const[$t,kt]of lt)if(kt.text===pt&&!rt.includes(kt)){tt&&!kt.isLoraTag&&(kt.isLoraTag=!0),rt.push(kt),lt.delete($t),Xe=!0;break}}Xe||rt.push({id:E(),text:pt,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:"",isLoraTag:tt})}});const St=new Set;$e.forEach(({token:it,originalIndex:pt})=>{if(St.has(it.id)||(St.add(it.id),rt.some($t=>$t.id===it.id)))return;let Xe=pt;for(;Xe>rt.length;)Xe--;Xe<0?rt.push(it):rt.splice(Xe,0,it)}),f.value=rt,c.value=f.value.length>0?f.value.reduce((it,pt,tt)=>{var Hs,gm;if(pt.isHidden)return it;if(pt.text===`
`){const wo=ja(tt);return wo!==-1&&f.value[wo],it+pt.text}if(it===""){let wo=tt+1;for(;wo<f.value.length&&((Hs=f.value[wo])!=null&&Hs.isHidden);)wo++;const rI=wo>=f.value.length,mm=wo<f.value.length?f.value[wo]:null,iI=rI||mm&&mm.text===`
`;return pt.text+(iI?",":"")}let Xe=tt+1;for(;Xe<f.value.length&&((gm=f.value[Xe])!=null&&gm.isHidden);)Xe++;const $t=Xe>=f.value.length,kt=Xe<f.value.length?f.value[Xe]:null,sn=kt&&kt.text===`
`||$t,Us=ja(tt);return Us!==-1&&f.value[Us].text===`
`?it+pt.text+(sn?",":""):it+", "+pt.text+(sn?",":"")},""):"",G.value&&clearTimeout(G.value),G.value=setTimeout(()=>{In()},1e3),la();const Sn=20;let Gt=0;for(;Gt<f.value.length;){const it=Math.min(Gt+Sn,f.value.length),pt=[];for(let tt=Gt;tt<it;tt++)if(f.value[tt].text.length>0&&!f.value[tt].translate){let Xe=f.value[tt].text;const $t=aa(Xe.trim());pt.push(An.getTranslateLocal($t).then(kt=>{const sn=kt;f.value[tt].translate=sn.translated.translate,f.value[tt].color=sn.translated.color}))}await Promise.all(pt),Gt=it}r.value=Pa(c.value)},fu=async()=>{let $=0;for(;$<f.value.length;){const ce=Math.min($+20,f.value.length),be=[];for(let Ne=$;Ne<ce;Ne++){const ke=f.value[Ne];if(ke.translate&&/[a-zA-Z]/.test(ke.translate)){const $e=ke.text,Re=new Promise(lt=>{localStorage.getItem("weilin_prompt_ui_translater_setting")=="network"?Aa.request.translateText($e,function(rt){if(rt.result>0){const St=rt.text.map(Sn=>Sn.replace(/[\[\]“”]/g,"")).join(", ");f.value[Ne].translate=St}lt()}):An.translaterText($e).then(rt=>{rt.text.length>0&&(f.value[Ne].translate=rt.text),lt()})});be.push(Re)}}await Promise.all(be),$=ce}},Ho=_(""),In=()=>{const I=c.value.replace(/[\s\t\n]+/g,"");if(w.value.length>0){if(I.length>0){const $=w.value.filter(Ne=>!Ne.hidden);let ce={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:w.value};$.length>0&&(ce.lora=$);const be=JSON.stringify(ce);Ho.value!=be&&(Ho.value=be,Bn.saveHistory({tag:be}))}}else if(Ho.value!=c.value){const $={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:""},ce=JSON.stringify($);I.length>0&&Bn.saveHistory({tag:ce})}la(),j||(S.value=!0)},la=()=>{if(w.value.length>0){Ho.value=c.value;const I=w.value.filter(be=>!be.hidden);let $={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:w.value};I.length>0&&($.lora=I);const ce=JSON.stringify($);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:ce},"*")}else{Ho.value=c.value;const I={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:""},$=JSON.stringify(I);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:$},"*")}},Fa=(I,$)=>{if(P.value)return;Hn.value&&(clearTimeout(Hn.value),Hn.value=null);const ce=$.target.getBoundingClientRect();b.value={top:`${ce.top-50}px`,left:`${ce.left+ce.width/2}px`},p.value=I;const be=f.value[I].text;Ve.value=rr(be),de.value={top:`${ce.bottom+window.scrollY+ce.height+10}px`,left:`${ce.left+ce.width/2}px`},f.value[I].isLoraTag||(ye.value=!0)},rr=I=>{const $=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"<",close:">"}];for(const be of $)if(I.startsWith(be.open)&&I.endsWith(be.close))return rr(I.slice(1,-1));const ce=I.match(/:(\d+(\.\d+)?)$/);return ce?parseFloat(ce[1]):1},Hn=_(null),Ba=I=>{Hn.value&&clearTimeout(Hn.value),Hn.value=setTimeout(()=>{v.value||ir(),Hn.value=null},100),ye.value=!1},ra=()=>{v.value=!1,Ba(p.value),setTimeout(()=>{v.value||(P.value=!1)},100)},ir=()=>{v.value||(p.value=null)},Wn=()=>{if(p.value!==null){const I=p.value;ur(I),p.value=null,v.value=!1}},ur=I=>{const $=c.value;let ce=f.value[I],be=0,Ne=-1;for(let ke=0;ke<I;ke++){let $e=$.indexOf(f.value[ke].text,be);$e!==-1&&(be=$e+f.value[ke].text.length)}if(ce.text===`
`||ce.text==="	"){for(let ke=be;ke<$.length;ke++)if($[ke]===ce.text){Ne=ke;break}}else Ne=$.indexOf(ce.text,be);if(Ne!==-1){const ke=ce.text===`
`?" ":"",$e=$.substring(0,Ne)+ke+$.substring(Ne+ce.text.length);c.value=$e}f.value.splice(I,1),c.value=f.value.length>0?f.value.reduce((ke,$e,Re)=>{var it,pt;if($e.isHidden)return ke;if($e.text===`
`){const tt=ja(Re);return tt!==-1&&f.value[tt],ke+$e.text}if(ke===""){let tt=Re+1;for(;tt<f.value.length&&((it=f.value[tt])!=null&&it.isHidden);)tt++;const Xe=tt>=f.value.length,$t=tt<f.value.length?f.value[tt]:null,kt=Xe||$t&&$t.text===`
`;return $e.text+(kt?",":"")}let lt=Re+1;for(;lt<f.value.length&&((pt=f.value[lt])!=null&&pt.isHidden);)lt++;const rt=lt>=f.value.length,St=lt<f.value.length?f.value[lt]:null,Sn=St&&St.text===`
`||rt,Gt=ja(Re);return Gt!==-1&&f.value[Gt].text===`
`?ke+$e.text+(Sn?",":""):ke+", "+$e.text+(Sn?",":"")},""):"",In(),S.value=!0},cr=(I,$)=>{const ce=c.value;let be=0,Ne=-1;for(let $e=0;$e<I;$e++){let Re=ce.indexOf(f.value[$e].text,be);Re!==-1&&(be=Re+f.value[$e].text.length)}const ke=f.value[I].text;if(Ne=ce.indexOf(ke,be),Ne!==-1){const $e=$.target.value,Re=ce.substring(0,Ne)+$e+ce.substring(Ne+ke.length);c.value=Re,f.value[I]={...f.value[I],text:$e},In()}},dr=I=>{f.value[I].isPunctuation||(f.value[I].isEditing=!0,setTimeout(()=>{const $=g[I];if($){$.focus();const ce=$.value.length;$.setSelectionRange(ce,ce),fr($),$.addEventListener("input",()=>fr($)),In(),S.value=!0}}))},fr=I=>{const $=document.createElement("span");$.style.visibility="hidden",$.style.position="absolute",$.style.whiteSpace="pre";const ce=window.getComputedStyle(I);$.style.font=ce.font,$.style.fontSize=ce.fontSize,$.style.fontFamily=ce.fontFamily,$.style.padding=ce.padding,$.style.border=ce.border,$.textContent=I.value||I.placeholder||"",document.body.appendChild($);const be=$.offsetWidth;I.style.width=`${Math.max(be+4,20)}px`,document.body.removeChild($)},pr=I=>{f.value[I].isEditing=!1};Ze(f,I=>{no()},{deep:!0}),Ze(w,I=>{In(),S.value=!0},{deep:!0});const pu=()=>{x.value=!x.value,x.value&&Qe(()=>{var $;const I=A.value.getBoundingClientRect();($=U.value)==null||$.setPosition(I)})},gr=()=>{x.value=!1},Ns=I=>{var $,ce;A.value&&!A.value.contains(I.target)&&U.value&&!U.value.$el.contains(I.target)&&gr(),($=a.value)!=null&&$.contains&&((ce=s.value)!=null&&ce.contains)&&!a.value.contains(I.target)&&!s.value.contains(I.target)&&(W.value=!1)},gu=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openTagManager_prompt"},"*")},mr=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openLoraManager"},"*")},mu=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openHistoryManager"},"*")},Ua=_(!0),hr=()=>{Ua.value=!Ua.value},Ha=_(!1),pe=()=>{Ha.value=!Ha.value};_(null);const fe=()=>{const I=s.value;I&&(I.addEventListener("keyup",we),I.addEventListener("click",we),I.addEventListener("input",we))},we=()=>{W.value&&lr()},Ye=()=>{if(s.value){const I=s.value.style.height||`${s.value.offsetHeight}px`;localStorage.setItem("weilinPromptTextAreaHeight",I)}},Pt=()=>{const I=localStorage.getItem("weilinPromptTextAreaHeight");I&&s.value&&(s.value.style.height=I)};vt(()=>{document.addEventListener("click",Ns),window.addEventListener("message",lm),rm(),fe(),Qe(()=>{Pt()}),setTimeout(()=>{se.value||(se.value=document.querySelector(".tokens-container")),se.value?(se.value.removeEventListener("mousedown",Ft),se.value.removeEventListener("mousemove",st),se.value.removeEventListener("mouseup",Tt),se.value.removeEventListener("mouseleave",Tt),se.value.addEventListener("mousedown",Ft),se.value.addEventListener("mousemove",st),se.value.addEventListener("mouseup",Tt),se.value.addEventListener("mouseleave",Tt),se.value.style.userSelect="none",se.value.style.cursor="default",console.log("框选功能事件监听器绑定成功")):console.warn("未能找到tokens-container元素，框选功能可能无法正常工作")},100)}),Eo(()=>{se.value&&(se.value.removeEventListener("mousedown",Ft),se.value.removeEventListener("mousemove",st),se.value.removeEventListener("mouseup",Tt),se.value.removeEventListener("mouseleave",Tt)),Ps()});const Ft=I=>{if(I.button===0&&!I.ctrlKey&&!I.metaKey){const $=I.target.closest(".token-item-box, .token-item, .lora-tag-icon, .newline-token, .tab-token, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box, .token-controls"),ce=se.value;if(ce&&!$){Fs();const be=ce.getBoundingClientRect();X.value={x:Math.max(I.clientX,be.left),y:Math.max(I.clientY,be.top)},z.value={x:Math.max(I.clientX,be.left),y:Math.max(I.clientY,be.top)},F.value=!0,console.log("记录框选起始位置")}}},st=I=>{if(F.value&&se.value&&!Y.value&&Math.sqrt(Math.pow(I.clientX-X.value.x,2)+Math.pow(I.clientY-X.value.y,2))>3&&(I.preventDefault(),I.stopPropagation(),Y.value=!0,P.value=!0,Z.value=[],Ds(),console.log("开始实际框选")),Y.value&&se.value){I.preventDefault(),I.stopPropagation();const $=se.value.getBoundingClientRect();z.value={x:Math.min(Math.max(I.clientX,$.left),$.right),y:Math.min(Math.max(I.clientY,$.top),$.bottom)};const ce=5;Math.abs(z.value.x-X.value.x)<ce&&(z.value.x=X.value.x+ce),Math.abs(z.value.y-X.value.y)<ce&&(z.value.y=X.value.y+ce),Q.value||(Q.value=!0,requestAnimationFrame(()=>{Mn(),Q.value=!1}));const be=Date.now();!ie.value&&be-re.value>MC&&(re.value=be,ie.value=!0,requestAnimationFrame(()=>{RA(),ie.value=!1}))}},Tt=()=>{if(F.value=!1,Y.value){const I=Z.value.length;Y.value=!1,P.value=!1,Ps(),I>0&&NA()}},Ds=()=>{let I=document.getElementById(Rs);I&&document.body.removeChild(I),I=document.createElement("div"),I.id=Rs,I.style.cssText=`
    position: fixed;
    background-color: rgba(66, 133, 244, 0.4);
    border: 2px dashed #4285f4;
    box-shadow: 0 0 12px rgba(66, 133, 244, 0.6);
    pointer-events: none;
    z-index: 99999;
    transition: none;
    opacity: 1;
    display: block;
  `,document.body.appendChild(I),console.log("选择框已创建"),Mn()},Mn=()=>{let I=document.getElementById(Rs);if(!I&&Y.value&&(Ds(),I=document.getElementById(Rs),!I))return;const $=Math.min(X.value.x,z.value.x),ce=Math.min(X.value.y,z.value.y),be=Math.abs(z.value.x-X.value.x),Ne=Math.abs(z.value.y-X.value.y),ke=5,$e=Math.max(be,ke),Re=Math.max(Ne,ke);I.style.left=`${$}px`,I.style.top=`${ce}px`,I.style.width=`${$e}px`,I.style.height=`${Re}px`},Ps=()=>{const I=document.getElementById(Rs);I&&document.body.removeChild(I)},RA=()=>{Z.value=[];const I=Math.min(X.value.x,z.value.x),$=Math.min(X.value.y,z.value.y),ce=Math.max(X.value.x,z.value.x),be=Math.max(X.value.y,z.value.y);document.querySelectorAll(".token-item-box").forEach((ke,$e)=>{if(!ke.querySelector(".token-item, .lora-tag-icon, .newline-token, .tab-token"))return;const lt=ke.getBoundingClientRect();lt.right>=I&&lt.left<=ce&&lt.bottom>=$&&lt.top<=be&&Z.value.push($e)}),am()},am=()=>{const I=document.querySelectorAll(".token-item-box"),$=[],ce=[];I.forEach((be,Ne)=>{Z.value.includes(Ne)?$.push(be):ce.push(be)}),$.forEach(be=>{be.style.border="2px solid #4285f4",be.style.boxShadow="0 0 5px rgba(66, 133, 244, 0.5)",be.style.backgroundColor="rgba(66, 133, 244, 0.1)"}),ce.forEach(be=>{be.style.border="",be.style.boxShadow="",be.style.backgroundColor=be.dataset.originalBgColor||""})},NA=()=>{if(Z.value.length>0){const I=Math.min(X.value.x,z.value.x),$=Math.min(X.value.y,z.value.y),ce=Math.max(X.value.x,z.value.x);Math.max(X.value.y,z.value.y),oe.value={top:`${$-50}px`,left:`${(I+ce)/2}px`},K.value=!0,setTimeout(()=>{document.addEventListener("click",sm)},0)}},DA=()=>{if(Z.value.length===0)return;const ce=[...Z.value].sort((be,Ne)=>be-Ne).map(be=>f.value[be].text).join(", ");navigator.clipboard.writeText(ce).then(()=>{const be=document.createElement("div");be.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4caf50;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      z-index: 999999;
    `,be.textContent="已复制到剪贴板",document.body.appendChild(be),setTimeout(()=>{document.body.removeChild(be)},2e3)}),Fs()},PA=()=>{Z.value.length!==0&&(Z.value.forEach(I=>{f.value[I]&&!f.value[I].isHidden&&(f.value[I].isHidden=!0,f.value[I].hiddenHint=n("promptBox.hiddenHint"))}),no(),In(),Fs())},FA=()=>{Z.value.length!==0&&(Z.value.forEach(I=>{f.value[I]&&f.value[I].isHidden&&(f.value[I].isHidden=!1,f.value[I].hiddenHint="")}),no(),In(),Fs())},BA=()=>{Z.value.length>0&&(confirm(`确定要删除选中的 ${Z.value.length} 个标签吗？`)?UA():hu())},Fs=()=>{K.value=!1,document.removeEventListener("click",sm),hu()},sm=I=>{const $=document.querySelector(".token-controls");$&&!$.contains(I.target)&&Fs()},UA=()=>{if(Z.value.length===0)return;[...Z.value].sort(($,ce)=>ce-$).forEach($=>{f.value.splice($,1)}),no(),In(),hu()},hu=()=>{document.querySelectorAll('.token-item-box[style*="border: 2px solid"]').forEach($=>{$.style.border="",$.style.boxShadow="",$.style.backgroundColor=$.dataset.originalBgColor||""}),Z.value=[]};Dn(()=>{document.removeEventListener("click",Ns),Da.value&&clearTimeout(Da.value),window.removeEventListener("message",lm);const I=s.value;I&&(I.removeEventListener("keyup",we),I.removeEventListener("click",we),I.removeEventListener("input",we)),se.value&&(se.value.removeEventListener("mousedown",Ft),se.value.removeEventListener("mousemove",st),se.value.removeEventListener("mouseup",Tt),se.value.removeEventListener("mouseleave",Tt)),Ps()});const lm=I=>{if(I.data.type==="weilin_prompt_ui_insertTag"){const $=c.value,ce=I.data.tagText;$===""?c.value=ce:($.endsWith(" "),c.value=$+", "+ce+","),ae.value=c.value,Un()}else if(I.data.type==="weilin_prompt_ui_user_history_tag"){const $=I.data.tagText;Ho.value=$,fm($)}else if(I.data.type!=="weilin_prompt_ui_refresh_all_data"){if(I.data.type==="weilin_prompt_ui_translate_setting")rm();else if(I.data.type==="weilin_prompt_ui_selectLora"){if(I.data.lora.loraWorks!=null&&I.data.lora.loraWorks.length>0){const $=c.value,ce=I.data.lora.loraWorks;$===""?c.value=ce:($.endsWith(" "),c.value=$+", "+ce+","),ae.value=c.value,Un()}}else if(I.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response")sI(I.data.data);else if(I.data.type==="weilin_prompt_ui_addLoraTag_inner")if(I.data.lora.loraWorks!=null&&I.data.lora.loraWorks.length>0){const $=c.value,ce=I.data.lora.tag+(I.data.lora.loraWorks===""?"":", "+I.data.lora.loraWorks);$===""?c.value=ce:($.endsWith(" "),c.value=$+", "+ce+","),ae.value=c.value,Un()}else{const $=c.value,ce=I.data.lora.tag;$===""?c.value=ce:($.endsWith(" "),c.value=$+", "+ce+","),ae.value=c.value,Un()}}},rm=async()=>{const I=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",$=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified";localStorage.getItem("weilin_prompt_ui_sourceLanguage")||localStorage.setItem("weilin_prompt_ui_sourceLanguage",I),localStorage.getItem("weilin_prompt_ui_targetLanguage")||localStorage.setItem("weilin_prompt_ui_targetLanguage",$),I!=="auto"&&Aa.language.setLocal(I),Aa.language.setDefaultTo($),await Qe()},HA=(I,$)=>{localStorage.getItem("weilin_prompt_ui_translater_setting")=="network"?Aa.request.translateText(I,function(ce){if(ce.result>0){const be=ce.text.map(Ne=>Ne.replace(/[\[\]“”]/g,"")).join(", ");$.translate=be}}):An.translaterText(I).then(ce=>{ce.text.length>0&&($.translate=ce.text)})},WA=()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network"){var I={from:Aa.language.recognition(R.value).languageName,to:"english",texts:[R.value]};Aa.request.translateText(I,function(ce){if(ce.result>0){const be=ce.text.map(Ne=>Ne.replace(/[\[\]“”]/g,"")).join(", ");f.value.push({text:be,translate:R.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),R.value="",no()}})}else An.translaterInputText(R.value).then($=>{$.text.length>0&&(f.value.push({text:$.text,translate:R.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),R.value="",no())})},jA=()=>{setTimeout(()=>{W.value||(ae.value=c.value,Un())},100)},im=I=>{let $=I.replace(/[\[\]{}]/g,"").trim();const be=aa($).trim();if(!be){W.value=!1;return}if(be.length>20){W.value=!1;return}try{const Ne=be.toLowerCase();Vi.getAutocomplete(String(Ne)).then(async ke=>{V.value=ke.data,await lr(),setTimeout(()=>{he.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450,le.value=localStorage.getItem("weilin_prompt_ui_auto_box_height")||350,W.value=V.value.length>0,H.value=0},50)})}catch(Ne){console.error("Autocomplete error:",Ne),W.value=!1}},VA=I=>{W.value&&(I.key==="ArrowDown"?(I.preventDefault(),H.value=Math.min(H.value+1,V.value.length-1),um()):I.key==="ArrowUp"?(I.preventDefault(),H.value=Math.max(H.value-1,0),um()):I.key==="Tab"||I.key==="Enter"?(I.preventDefault(),cm(H.value,null)):I.key==="Escape"&&(I.preventDefault(),dm()))},um=()=>{Qe(()=>{if(q.value&&a.value){const I=a.value,$=q.value,ce=I.getBoundingClientRect(),be=$.getBoundingClientRect(),Ne=be.top<ce.top,ke=be.bottom>ce.bottom;Ne?I.scrollTop=I.scrollTop+(be.top-ce.top):ke&&(I.scrollTop=I.scrollTop+(be.bottom-ce.bottom))}})},zA=ot(()=>{if(!d.value)return{left:l.value.left};const I=d.value.offsetWidth;he.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450;const $=he.value;let ce=l.value.left;return ce+$>I&&(ce=I-$),ce<0&&(ce=0),{left:ce}}),cm=(I,$)=>{if($&&($.preventDefault(),$.stopPropagation()),!V.value[I])return;W.value=!1;const ce=s.value.selectionStart,be=s.value.selectionEnd,Ne=c.value;let ke=V.value[I].text;localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false"&&(ke=ke.replace(/，/g,",")),localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false"&&(ke=ke.replace(/。/g,".")),localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false"&&(ke=ke.replace(/【/g,"[").replace(/】/g,"]").replace(/（/g,"(").replace(/）/g,")")),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false"&&(ke=ke.replace(/《/g,"<").replace(/》/g,">")),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"&&(ke=ke.replace(/_/g," ")),localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"&&(ke=ke.replace(/\(([^)]+)\)/g,"\\($1\\)"));let $e=ce,Re=be;for(;$e>0&&!/[,\s]/.test(Ne[$e-1]);)$e--;for(;!1;)Re++;let lt=Ne.substring(0,$e)+ke+Ne.substring(Re);Ne[Re]&&!/[\,\s]/.test(Ne[Re])&&(lt=Ne.substring(0,$e)+ke+", "+Ne.substring(Re));const rt=Ne[Re]&&!/[\,\s]/.test(Ne[Re]),St=$e+ke.length+(rt?2:0);c.value=lt,ae.value=lt,Un(),Qe(()=>{s.value&&(s.value.selectionStart=St,s.value.selectionEnd=St)})},dm=()=>{W.value=!1},fm=I=>{if(I.length>0)try{const $=JSON.parse(I);if(c.value=$.prompt,ae.value=c.value,$.lora&&$.lora!=""&&(w.value=$.lora),$.temp_prompt&&$.temp_prompt!=""){const ce=$.temp_prompt;let be=!1;ce.tokens&&ce.tokens.length>0&&ce.tokens!=""&&(f.value=ce.tokens,be=!0),ce.lora&&ce.lora.length>0&&ce.lora!=""&&(w.value=ce.lora,be=!0),!be&&ce.length>0&&ce!=""&&(f.value=ce)}if($.temp_lora&&$.temp_lora.length>0&&$.temp_lora!=""){const ce=$.temp_lora;w.value=ce}Un()}catch{te({type:"warn",str:"promptBox.settings.errorPrompt"})}},vr=_(!1),Bs=_(null),jn=_([]);let Wa=null,Wo=null;const qA=(I,$=!1)=>{vr.value=!0,Bs.value=null,jn.value=[],$&&Z.value.length>1&&Z.value.includes(I)?jn.value=[...Z.value].sort((ce,be)=>ce-be):(Z.value=[],Bs.value=I),Wo={originalTokens:[...f.value],draggedItems:jn.value.length>0?jn.value.map(ce=>f.value[ce]):[f.value[I]]}},GA=(I,$)=>{if(P.value){$.preventDefault();return}qA(I,!0),$.dataTransfer.effectAllowed="move"},QA=(I,$,ce)=>{const be=$.filter($e=>$e<ce).length;let Ne=Math.max(0,ce-be);const ke=I.length-$.length;return Ne=Math.min(Ne,ke),Ne},pm=I=>{if(!Wo)return;const $=[...Wo.originalTokens],ce=jn.value.length>0?jn.value:[Bs.value],be=ce.map(ke=>Wo.originalTokens[ke]);for(let ke=ce.length-1;ke>=0;ke--){const $e=ce[ke];$e<$.length&&$.splice($e,1)}const Ne=QA(Wo.originalTokens,ce,I);if(Wo.draggedItems.forEach((ke,$e)=>{$.splice(Ne+$e,0,ke)}),f.value=$,no(),jn.value.length>0&&Z.value.length>0){const ke=[];for(let $e=0;$e<$.length;$e++){const Re=$[$e];be.some(lt=>lt.text===Re.text)&&ke.push($e)}Z.value=ke,setTimeout(()=>{am()},0)}},YA=(I,$)=>{if(P.value){$.preventDefault();return}$.preventDefault(),vr.value&&(I<0||I>=f.value.length||jn.value.length>0&&jn.value.includes(I)||jn.value.length===0&&Bs.value===I||(Wa&&clearTimeout(Wa),Wa=setTimeout(()=>{pm(I)},RC)))},KA=(I,$)=>{$.preventDefault(),Wa&&(clearTimeout(Wa),Wa=null),vr.value&&Wo&&pm(I),vr.value=!1,Bs.value=null,jn.value=[],Wo=null},no=()=>{c.value=f.value.length>0?f.value.reduce((I,$,ce)=>{var lt,rt;if($.isHidden)return I;if($.text===`
`){const St=ja(ce);return St!==-1&&f.value[St],I+$.text}if(I===""){let St=ce+1;for(;St<f.value.length&&((lt=f.value[St])!=null&&lt.isHidden);)St++;const Sn=St>=f.value.length,Gt=St<f.value.length?f.value[St]:null,it=Sn||Gt&&Gt.text===`
`;return $.text+(it?",":"")}let be=ce+1;for(;be<f.value.length&&((rt=f.value[be])!=null&&rt.isHidden);)be++;const Ne=be>=f.value.length,ke=be<f.value.length?f.value[be]:null,$e=ke&&ke.text===`
`||Ne,Re=ja(ce);return Re!==-1&&f.value[Re].text===`
`?I+$.text+($e?",":""):I+", "+$.text+($e?",":"")},""):"",la(),j||(S.value=!0)},JA=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*")},XA=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank")},ZA=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_cloud_window"},"*")},eI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_danbooru_manager_window"},"*")},tI=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},ja=I=>{for(let $=I-1;$>=0;$--)if(!f.value[$].isHidden)return $;return-1},nI=I=>{if(I>=0&&I<f.value.length){if(f.value[I].text===`
`||f.value[I].text==="	")return;f.value[I].isHidden=!f.value[I].isHidden,f.value[I].isHidden?f.value[I].hiddenHint=n("promptBox.hiddenHint"):f.value[I].hiddenHint="",no()}},oI=()=>{window.open("https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X","_blank")},aI=async()=>{if(u.promptManager=="prompt_global")try{await fn.goRandomTemplate().then(I=>{I.code===200?(c.value=I.random_tags,Qe(()=>{Un()})):te({type:"warn",str:I.info})}).catch(I=>{console.error(I),te({type:"warn",str:"message.networkError"})})}catch(I){te({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",I)}else window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"},"*")},sI=async I=>{try{await fn.goRandomTemplatePath(I).then($=>{$.code===200?(c.value=$.random_tags,Qe(()=>{Un()})):te({type:"warn",str:$.info})}).catch($=>{console.error($),te({type:"warn",str:"message.networkError"})})}catch($){te({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",$)}},lI=()=>{o.value.open(u.promptManager)};return t({setPromptText:fm}),(I,$)=>{var ce,be,Ne;return T(),C(Oe,null,[i("div",AS,[ze(bl,{name:"weilin-fade"},{default:ht(()=>[ue.value?(T(),C("div",IS,"已更新标签")):me("",!0)]),_:1}),u.promptManager==="prompt"?(T(),yt(h9,{key:0,"is-open":O.value,"selected-loras":w.value,onClose:ne},null,8,["is-open","selected-loras"])):me("",!0),ee.value?(T(),yt($9,{key:1,ref_key:"mainLabelManagerRef",ref:ge,"selected-id":ve.value,onSelect:xe},null,8,["selected-id"])):me("",!0),i("div",{class:Ee(`${IC}main-content`),style:mt({width:N.value})},[i("div",MS,[i("div",OS,[i("button",{class:"tag-manager-btn",onClick:L,title:ee.value?"收起标签栏":"展开标签栏"},[(T(),C("svg",{class:Ee(["weilin-comfyui-sidebar-toggle-icon",{"is-closed":!ee.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[...$[14]||($[14]=[i("path",{fill:"currentColor",d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"},null,-1)])],2)),i("span",NS,h(ee.value?"收起标签栏":"展开标签栏"),1)],8,RS)]),i("div",DS,[i("button",{class:"language-switch-btn",onClick:Je(pu,["stop"]),ref_key:"langBtnRef",ref:A,title:m(n)("controls.language")},[$[15]||($[15]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"translate-icon"},[i("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1)),i("span",FS,h(m(n)("controls.language")),1)],8,PS),ze(bl,{name:"fade"},{default:ht(()=>[x.value?(T(),yt(F2,{key:0,ref_key:"languageSwitcherRef",ref:U,onClose:gr},null,512)):me("",!0)]),_:1})]),i("div",BS,[ze(Yb,{title:m(n)("controls.switchTheme")},{default:ht(({isDark:ke})=>[i("span",US,h(m(n)(ke?"controls.darkMode":"controls.lightMode")),1)]),_:1},8,["title"])]),i("div",HS,[i("button",{class:"settings-btn",onClick:We,title:m(n)("controls.settings")},[$[16]||($[16]=i("svg",{class:"settings-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})],-1)),i("span",jS,h(m(n)("controls.settings")),1)],8,WS)]),i("div",VS,[i("button",{class:"tag-manager-btn",onClick:gu,title:m(n)("controls.tagManager")},[$[17]||($[17]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",qS,h(m(n)("controls.tagManager")),1)],8,zS)]),i("div",GS,[i("button",{class:"tag-manager-btn",onClick:eI,title:m(n)("controls.danbooruManager")},[$[18]||($[18]=i("svg",{class:"tag-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",YS,h(m(n)("controls.danbooruManager")),1)],8,QS)]),u.hasPromptLoraStack?(T(),C("div",KS,[i("button",{class:"tag-manager-btn",onClick:B,title:m(n)("controls.loraStack")},[$[19]||($[19]=i("svg",{sxmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M902.5 485.1c-59-17.5-113.8-3.4-155 27.7V365.1c0-45.2-36.9-82.1-82.1-82.1H511.2c31.1-41.2 45.2-96 27.7-155C522.2 71.6 475 26.1 418 12 303.4-16.5 200.9 69.4 200.9 179.3c0 39.1 13.5 74.7 35.3 103.7H82.1C36.9 283 0 319.9 0 365.1v113.1c0 25.5 27.9 38.8 49.5 25.3 38.8-24.3 87.8-33.6 139.4-19.5 57 15.6 103.4 62.5 118.4 119.7 30.1 115.5-56.2 219.4-166.8 219.4-33.5 0-64.7-9.6-91.1-26.2C27.8 783.4 0 796.8 0 822.2v113.2c0 45.2 36.9 82.1 82.1 82.1h583.3c45.2 0 82.1-36.9 82.1-82.1V787.7c29 21.9 64.6 35.3 103.7 35.3 109.9 0 195.8-102.5 167.3-217.1-14.1-56.9-59.7-104.1-116-120.8z"})],-1)),i("span",XS,h(m(n)("controls.loraStack")),1)],8,JS)])):me("",!0),i("div",ZS,[i("button",{class:"tag-manager-btn",onClick:mr,title:m(n)("controls.loraManager")},[$[20]||($[20]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),i("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),i("span",tk,h(m(n)("controls.loraManager")),1)],8,ek)]),i("div",nk,[i("button",{class:"tag-manager-btn",onClick:mu,title:m(n)("controls.history")},[$[21]||($[21]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M653.7 85.83c-235.05 0-426.29 191.25-426.29 426.3s191.24 426.3 426.29 426.3c235.06 0 426.3-191.25 426.3-426.3S888.76 85.83 653.7 85.83z m0 779.98c-195.01 0-353.67-158.65-353.67-353.68S458.69 158.45 653.7 158.45c195.02 0 353.68 158.65 353.68 353.68S848.72 865.81 653.7 865.81z"}),i("path",{d:"M866.78 634.19L695.93 533.61V302.59c0-20.06-16.26-36.31-36.31-36.31s-36.31 16.26-36.31 36.31v253.66c0 17.06 11.8 31.26 27.66 35.16l178.98 105.36c17.28 10.17 39.54 4.41 49.71-12.87 10.17-17.28 4.4-39.54-12.88-49.71zM44.76 324.51h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31zM231.18 703.25H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.25-36.31-36.31-36.31zM36.31 550.19h118.8c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H36.31c-20.05 0-36.31 16.26-36.31 36.31 0 20.06 16.26 36.31 36.31 36.31z"})],-1)),i("span",ak,h(m(n)("controls.history")),1)],8,ok)]),i("div",sk,[i("button",{class:"tag-manager-btn",onClick:JA,title:m(n)("controls.aiChat")},[$[22]||($[22]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),i("path",{d:"M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"})],-1)),i("span",rk,h(m(n)("controls.aiChat")),1)],8,lk)]),i("div",ik,[i("button",{class:"tag-manager-btn",onClick:XA,title:m(n)("controls.github")},[$[23]||($[23]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)),i("span",ck,h(m(n)("controls.github")),1)],8,uk)]),i("div",dk,[i("button",{class:"tag-manager-btn",onClick:ZA,title:m(n)("controls.shareCloudData")},[$[24]||($[24]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),i("span",pk,h(m(n)("controls.shareCloudData")),1)],8,fk)]),i("div",gk,[i("button",{class:"tag-manager-btn",onClick:oI,title:m(n)("controls.tutorialVideo")},[$[25]||($[25]=i("svg",{t:"1745234292993",class:"tag-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1496",width:"128",height:"128"},[i("path",{d:"M204.288 63.488c-8.704 8.192-16.896 20.48-18.944 26.624-3.584 11.776 12.8 62.464 20.48 62.464S235.52 176.128 235.52 184.32c0 16.384-17.92 26.112-47.104 26.112-34.816 0-104.448 27.648-128.512 51.2-9.216 8.704-26.112 33.792-37.888 56.32L0 358.4v469.504l21.504 40.448c24.576 47.616 35.84 59.392 82.944 84.992l40.96 22.528h722.944l40.96-19.968c51.712-24.576 72.704-45.056 95.744-94.72l17.92-38.4v-231.424l0.512-231.424-17.92-36.352c-9.216-20.48-28.16-47.104-42.496-59.904-31.232-30.208-86.528-54.272-122.368-54.272-54.272 0-65.024-22.528-26.624-57.856 20.48-18.432 23.04-25.088 23.04-45.568 0-19.968-3.584-28.16-16.896-41.984-9.216-9.216-22.528-16.896-29.696-16.896-11.776 0-34.304 9.216-40.448 16.896-1.536 1.536-35.84 35.328-75.776 74.24l-73.216 71.168-83.456-0.512c-45.568 0-88.064-2.56-93.696-4.608-5.632-2.56-38.4-31.232-72.704-65.024C249.856 40.448 235.008 32.256 204.288 63.488z m652.8 262.656c5.12 0.512 19.968 9.216 31.744 20.48l21.504 19.968 1.536 217.088c1.024 197.12 0.512 218.112-8.704 236.032-14.336 27.136-34.816 40.448-65.536 41.984-14.336 0.512-173.568 0.512-353.28 0l-326.144-1.536-45.056-45.056V373.248l20.992-22.528c15.872-17.92 25.6-23.552 41.984-25.088 16.384-1.024 634.88-0.512 680.96 0.512z","p-id":"1497"}),i("path",{d:"M279.04 502.272c-20.48 22.016-20.992 25.088-20.992 66.56 0 39.936 1.024 44.544 17.92 64 29.184 33.28 55.808 32.256 84.48-2.56 11.264-12.8 12.8-22.016 13.312-64 0-47.104-0.512-48.64-19.968-68.096-27.136-27.648-47.616-26.112-74.752 4.096z m393.216-3.584c-18.944 18.944-19.968 20.992-19.968 69.12 0 47.616 0.512 49.664 18.432 67.072 24.576 23.552 35.84 26.624 58.368 13.824 29.184-16.896 39.936-43.52 36.864-90.624-2.56-35.328-4.608-41.984-22.016-59.904-25.088-25.6-45.568-25.6-71.68 0.512z","p-id":"1498"})],-1)),i("span",hk,h(m(n)("controls.tutorialVideo")),1)],8,mk)]),i("div",vk,[i("button",{class:"tag-manager-btn",onClick:tI,title:m(n)("controls.sponsor")},[$[26]||($[26]=i("svg",{t:"1745823985128",class:"tag-icon",viewBox:"0 0 1322 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[i("path",{d:"M495.899049 634.906371c-17.304811 0-31.251971 13.947161-31.251971 31.251971S478.594238 697.410314 495.899049 697.410314c17.304811 0 31.251971-13.947161 31.251971-31.251972 0-17.304811-13.947161-31.251971-31.251971-31.251971zM790.855671 728.662285c-17.304811 0-31.251971 13.947161-31.251972 31.251971s13.947161 31.251971 31.251972 31.251972 31.251971-13.947161 31.251971-31.251972c0-17.04653-13.947161-30.993691-31.251971-31.251971z"}),i("path",{d:"M1262.99289 719.622459c-13.430599-8.264984-28.927445-13.430599-44.68257-14.980284 34.867902-84.974368 57.080047-196.293374-18.596215-306.837537-115.193217-168.657333-280.75118-256.73107-491.766556-260.863562-60.179416-1.291404-130.948343 1.549685-205.849762 4.649054-87.040614 3.35765-203.008673 8.006703-281.526023 1.549684 15.755126-8.523265 32.543375-16.788249 47.007098-23.761829 55.530362-27.119479 98.921529-48.04022 84.457807-85.232649-7.748423-21.695583-30.218848-33.059937-67.411277-34.09306C206.624604-1.755689 37.967271 43.443443 7.748423 119.636265c-17.04653 42.874605-19.887618 125.524447 152.902206 198.876182 71.027208 30.218848 271.969635 66.894715 349.453861 74.643138 17.563091 1.549685 34.867902 5.165615 51.397871 11.364353-17.821372 11.622634-35.901025 24.02011-54.238959 36.417586-31.768533-18.079653-83.941245-39.516955-122.683358-13.172318-14.463722 9.298107-23.503549 25.053233-24.02011 42.358044-0.516562 21.179022 12.397476 42.099763 26.861198 58.629731-57.080047 45.715694-103.312302 89.881703-119.84227 123.974762-18.337934 41.841482-25.828075 110.544163 8.523265 177.438879 43.391167 84.974368 138.955046 144.120661 284.625391 176.147474 190.352916 41.583202 354.619476 4.132492 463.355674-53.205835 60.437697-32.026814 103.570583-69.994085 124.233043-103.828864 6.457019 2.066246 12.914038 4.132492 19.629338 6.198738 9.298107 2.841088 18.596214 5.682177 27.37776 8.781546 28.669164 10.072949 60.695977 8.523265 85.232649-3.61593l1.291403-0.774843c17.821372-9.039826 31.510252-25.053233 37.708991-44.166009 15.238565-51.139589-29.444006-79.033911-56.563486-96.08044z m-811.776412-239.684541l-17.30481 12.655757c-5.165615-5.165615-9.814669-11.106072-13.430599-17.563091 6.7153-2.066246 18.337934 0.258281 30.735409 4.907334zM1262.99289 798.139808c-1.291404 3.874211-4.132492 6.97358-9.298107 9.814669-10.33123 5.165615-25.569795 5.423896-39.258675 0.774842-9.298107-3.35765-19.371057-6.457019-29.444006-9.556388-18.596214-5.682177-49.848186-15.238565-55.788643-22.470426-9.814669-12.914038-28.152602-15.755126-41.32492-5.940457s-15.755126 28.152602-5.940458 41.324921c3.615931 4.390773 7.490142 8.264984 12.139196 11.622634-44.940851 62.245662-242.267348 186.220424-521.468844 125.007885-125.782728-27.636041-210.498815-77.742507-244.850155-145.412065-24.794952-48.815063-19.112776-98.921529-7.231861-126.299289 34.09306-71.027208 280.75118-234.518925 438.30244-327.241716 13.947161-8.264984 18.596214-26.344637 10.33123-40.291798s-27.119479-19.629337-40.291797-10.33123c-12.655757 7.490142-55.788643 33.059937-111.060725 68.186119-18.596214-12.655757-50.881309-27.894322-102.537459-33.059936-81.874999-8.264984-270.936512-44.42429-332.149051-70.252366C139.471608 245.418993 40.033517 196.34565 61.987381 141.073568c5.165615-12.914038 29.185725-33.576498 81.100157-53.464116 35.384463-13.430599 72.318611-22.470426 109.769321-27.119479l-11.622634 5.682176c-35.384463 17.304811-73.868296 36.417586-99.954652 59.146293-1.807965-1.033123-3.615931-2.324527-5.165615-3.874211-10.847792-11.622634-29.185725-12.397476-41.06664-1.291404l-0.516562 0.516561c-11.880915 11.106072-12.139195 29.702287-1.033123 41.583202 10.589511 11.106072 26.086356 19.371057 45.715694 25.569795 0.774842 0.258281 1.291404 0.516562 2.066246 0.774842 68.702681 21.179022 190.611197 18.596214 362.367899 11.622634 74.126577-2.841088 144.120661-5.682177 202.492111-4.649054 193.710566 3.874211 339.122631 80.841876 444.75946 235.552049 64.828469 95.047318 41.583202 188.544951 4.390773 269.903388-4.649054-3.615931-9.039826-7.748423-12.655757-12.139195-10.33123-12.397476-28.669164-14.463722-41.324921-4.649054-12.655757 10.072949-14.722003 28.669164-4.649054 41.324921 5.940457 7.490142 36.675867 42.874605 74.643138 39.775236h2.066246c1.291404-0.258281 2.324527 0 3.615931-0.258281 25.828075-4.649054 42.358044-3.615931 57.596608 6.198738 20.40418 12.914038 30.218848 20.40418 28.410883 26.861199z"})],-1)),i("span",yk,h(m(n)("controls.sponsor")),1)],8,_k)]),ze(Ip,{ref_key:"settingDialog",ref:k},null,512),i("div",bk,[i("button",{class:Ee(["update-label-btn",{"is-dirty":S.value}]),disabled:!ve.value||!S.value,onClick:J}," 更新标签 ",10,wk)])]),i("div",{style:{position:"relative"},ref_key:"parentCneterBox",ref:d},[Te(i("textarea",{"onUpdate:modelValue":$[0]||($[0]=ke=>c.value=ke),class:"input-area",onInput:sa,placeholder:m(n)("promptBox.placeholder"),onKeydown:VA,onBlur:jA,rows:"6",ref_key:"inputAreaRef",ref:s,onMouseup:Ye,onResize:Ye},null,40,xk),[[Ae,c.value]]),i("div",Tk,h(r.value)+" tokens ",1),i("div",{class:"autocomplete-container",ref_key:"autocompleteContainerRef",ref:a,style:mt({top:`${l.value.top}px`,left:`${zA.value.left}px`,display:W.value?"block":"none",width:`${he.value}px`,maxHeight:`${le.value}px`})},[i("button",{class:"close-autocomplete-btn",onClick:Je(dm,["stop"])},"×"),(T(!0),C(Oe,null,je(V.value,(ke,$e)=>(T(),C("div",{key:$e,class:Ee(["autocomplete-item",{selected:$e===H.value}]),onClick:Je(Re=>cm($e,Re),["stop"]),ref_for:!0,ref:Re=>{Re&&$e===H.value&&(q.value=Re)}},[i("span",kk,h(ke.text),1),i("span",Ck,h(ke.desc),1)],10,Sk))),128))],4)],512),i("div",Ek,[Te(i("input",{type:"text","onUpdate:modelValue":$[1]||($[1]=ke=>R.value=ke),class:"prompt-input-translate-area-textarea",onKeyup:$[2]||($[2]=tn(ke=>WA(),["enter"])),placeholder:m(n)("promptBox.translatePlaceholder")},null,40,Lk),[[Ae,R.value]]),i("button",{class:"translate-btn",onClick:fu,title:m(n)("promptBox.oneClickTranslate")},[$[27]||($[27]=i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[i("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),i("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)),i("span",Ak,h(m(n)("promptBox.oneClickTranslate")),1)],8,$k),i("button",{class:"translate-btn random-tag-settings-btn",onClick:lI,title:m(n)("promptBox.randomTagSettings")},[$[28]||($[28]=i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[i("path",{d:"M512 409.6c-56.32 0-102.4 46.08-102.4 102.4s46.08 102.4 102.4 102.4 102.4-46.08 102.4-102.4-46.08-102.4-102.4-102.4z m0 153.6c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z"}),i("path",{d:"M512 204.8c-25.6 0-51.2 2.56-76.8 7.68l-15.36-61.44c-2.56-10.24-10.24-17.92-20.48-20.48-10.24-2.56-20.48 0-28.16 7.68l-76.8 76.8c-5.12 5.12-7.68 12.8-7.68 20.48s2.56 15.36 7.68 20.48l76.8 76.8c5.12 5.12 12.8 7.68 20.48 7.68 2.56 0 5.12 0 7.68-2.56 10.24-2.56 17.92-10.24 20.48-20.48l15.36-61.44c25.6-5.12 51.2-7.68 76.8-7.68 140.8 0 256 115.2 256 256s-115.2 256-256 256-256-115.2-256-256c0-25.6 2.56-51.2 7.68-76.8l61.44-15.36c10.24-2.56 17.92-10.24 20.48-20.48 2.56-10.24 0-20.48-7.68-28.16l-76.8-76.8c-5.12-5.12-12.8-7.68-20.48-7.68s-15.36 2.56-20.48 7.68l-76.8 76.8c-7.68 7.68-10.24 17.92-7.68 28.16 2.56 10.24 10.24 17.92 20.48 20.48l61.44 15.36c-5.12 25.6-7.68 51.2-7.68 76.8 0 168.96 138.24 307.2 307.2 307.2s307.2-138.24 307.2-307.2-138.24-307.2-307.2-307.2z"})],-1)),i("span",Mk,h(m(n)("promptBox.randomTagSettings")),1)],8,Ik),i("button",{class:"translate-btn random-tag-btn",onClick:aI,title:m(n)("promptBox.oneClickRandomTag")},[$[29]||($[29]=i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[i("path",{d:"M832 512c0-176-144-320-320-320S192 336 192 512s144 320 320 320 320-144 320-320z m-384 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 256c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-128 128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z"})],-1)),i("span",Rk,h(m(n)("promptBox.oneClickRandomTag")),1)],8,Ok)]),f.value.length>0?(T(),C("div",Nk,[(T(!0),C(Oe,null,je(f.value,(ke,$e)=>(T(),C(Oe,{key:"tag-item-"+$e},[i("div",{class:Ee(["token-item-box",{"token-item-box-disabled":ke.isHidden}]),draggable:!ke.isEditing,onDragstart:Re=>GA($e,Re),onDragover:Je(Re=>YA($e,Re),["prevent"]),onDrop:Re=>KA($e,Re),onDblclick:Re=>nI($e),style:mt({backgroundColor:ke.color})},[ke.text===`
`?(T(),C("div",Pk,[i("span",{class:"token-symbol",title:m(n)("promptBox.newline")},"↵",8,Fk)])):ke.text==="	"?(T(),C("div",{key:1,class:"token-item tab-token",onMouseenter:Re=>Fa($e,Re),onMouseleave:Re=>Ba()},[i("span",{class:"token-symbol",title:m(n)("promptBox.tab")},"→",8,Uk)],40,Bk)):ke.isLoraTag?(T(),C("div",{key:2,class:"lora-tag-icon",title:m(n)("promptBox.loraTag"),onMouseenter:Re=>Fa($e,Re),onMouseleave:Re=>Ba()},[$[30]||($[30]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"15",height:"15"},[i("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})],-1)),i("span",Wk,h(ke.text),1)],40,Hk)):ke.text&&!ke.isLoraTag?(T(),C("div",{key:3,class:Ee(["token-item",{punctuation:ke.isPunctuation}]),onMouseenter:Re=>Fa($e,Re),onMouseleave:Re=>Ba()},[!ke.isEditing||ke.isPunctuation?(T(),C("span",{key:0,onClick:Re=>!ke.isPunctuation&&dr($e)},h(ke.text),9,Vk)):ke.isPunctuation?me("",!0):(T(),C("input",{key:1,value:ke.text,onInput:Re=>cr($e,Re),onBlur:Re=>pr($e),onKeyup:tn(Re=>pr($e),["enter"]),ref_for:!0,ref:Re=>{Re&&(g[$e]=Re)}},null,40,zk))],42,jk)):me("",!0),ke.text!==`
`&&ke.text!=="	"&&!ke.isLoraTag?(T(),C("div",qk,[pn(ke.text)?(T(),C("div",{key:0,onClick:Re=>HA(ke.text,ke),class:"translate-button",title:m(n)("promptBox.translate")},[...$[31]||($[31]=[i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[i("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),i("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)])],8,Gk)):me("",!0),i("span",Qk,h(ke.translate?ke.translate:""),1)])):me("",!0)],46,Dk),ke.text===`
`?(T(),C("div",Yk)):me("",!0)],64))),128))])):me("",!0),ye.value?(T(),C("div",{key:1,class:"tag-tips-box",style:mt(de.value)},[i("div",Kk,[i("p",{innerHTML:m(n)("promptBox.tagTips")},null,8,Jk)])],4)):me("",!0),Te(i("div",{class:"token-controls",style:mt(b.value),onMouseenter:$[12]||($[12]=ke=>v.value=!0),onMouseleave:ra},[(ce=f.value[p.value])!=null&&ce.isLoraTag?me("",!0):(T(),C("div",Xk,[Te(i("input",{type:"number","onUpdate:modelValue":$[3]||($[3]=ke=>Ve.value=ke),step:"0.1",class:"weight-input",onChange:ut},null,544),[[Ae,Ve.value]]),i("span",Zk,h(m(n)("promptBox.weight")),1)])),(be=f.value[p.value])!=null&&be.isLoraTag?(T(),C("div",eC,[i("div",tC,[Te(i("input",{type:"number","onUpdate:modelValue":$[4]||($[4]=ke=>dt.value=ke),step:"0.1",class:"weight-input",onChange:Fe},null,544),[[Ae,dt.value]]),i("span",nC,h(m(n)("promptBox.modelWeight")),1)]),i("div",oC,[Te(i("input",{type:"number","onUpdate:modelValue":$[5]||($[5]=ke=>jt.value=ke),step:"0.1",class:"weight-input",onChange:Fe},null,544),[[Ae,jt.value]]),i("span",aC,h(m(n)("promptBox.textWeight")),1)])])):me("",!0),i("button",{onClick:Wn,class:"delete-btn",title:m(n)("promptBox.delete")},[...$[32]||($[32]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,sC),(Ne=f.value[p.value])!=null&&Ne.isLoraTag?me("",!0):(T(),C("div",lC,[i("div",rC,[$[33]||($[33]=i("div",{class:"bracket-btn"}," () ",-1)),i("div",iC,[i("button",{class:"vertical-btn",onClick:$[6]||($[6]=ke=>Le("(")),title:m(n)("promptBox.addBracket")}," + ",8,uC),i("button",{class:"vertical-btn",onClick:$[7]||($[7]=ke=>Ce("(")),title:m(n)("promptBox.removeLayer")}," - ",8,cC)])]),i("div",dC,[$[34]||($[34]=i("div",{class:"bracket-btn"}," [] ",-1)),i("div",fC,[i("button",{class:"vertical-btn",onClick:$[8]||($[8]=ke=>Le("[")),title:m(n)("promptBox.addBracket")}," + ",8,pC),i("button",{class:"vertical-btn",onClick:$[9]||($[9]=ke=>Ce("[")),title:m(n)("promptBox.removeLayer")}," - ",8,gC)])]),i("div",mC,[$[35]||($[35]=i("div",{class:"bracket-btn"}," {} ",-1)),i("div",hC,[i("button",{class:"vertical-btn",onClick:$[10]||($[10]=ke=>Le("{")),title:m(n)("promptBox.addBracket")}," + ",8,vC),i("button",{class:"vertical-btn",onClick:$[11]||($[11]=ke=>Ce("{")),title:m(n)("promptBox.removeLayer")}," - ",8,_C)])])]))],36),[[fs,p.value!==null&&f.value[p.value]]]),i("div",yC,[Te(i("div",{class:"token-controls",style:mt(oe.value),onMouseenter:$[13]||($[13]=ke=>v.value=!0),onMouseleave:ra},[i("div",bC,[i("div",wC,"选中 "+h(Z.value.length)+" 个标签",1),i("div",{class:"weilin-comfyui-selection-actions-buttons"},[i("button",{class:"delete-btn copy-btn",onClick:DA,title:"复制"},[...$[36]||($[36]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)])]),i("button",{class:"delete-btn",onClick:PA,title:"禁用"},[...$[37]||($[37]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#ff4d4f","stroke-width":"2"}),i("path",{d:"M8.5 8.5l7 7",stroke:"#ff4d4f","stroke-width":"2","stroke-linecap":"round"})],-1)])]),i("button",{class:"delete-btn enable-btn",onClick:FA,title:"启用"},[...$[38]||($[38]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)])]),i("button",{class:"delete-btn",onClick:BA,title:"删除"},[...$[39]||($[39]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])])])])],36),[[fs,K.value]]),i("div",{class:"tag-manager-header",onClick:pe},[i("div",xC,[$[40]||($[40]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),i("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),i("span",TC,h(m(n)("controls.loraManager")),1)]),i("div",SC,[(T(),C("svg",{class:Ee(["collapse-icon",{"is-collapsed":!Ha.value}]),viewBox:"0 0 24 24"},[...$[41]||($[41]=[i("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)])],2))])]),Te(i("div",kC,[ze(zg,{loraManager:"prompt_inner"})],512),[[fs,Ha.value]])]),i("div",CC,[i("div",{class:"tag-manager-header",onClick:hr},[i("div",EC,[$[42]||($[42]=i("svg",{class:"tag-icon",viewBox:"0 0 24 24"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",LC,h(m(n)("controls.tagManager")),1)]),i("div",$C,[(T(),C("svg",{class:Ee(["collapse-icon",{"is-collapsed":!Ua.value}]),viewBox:"0 0 24 24"},[...$[43]||($[43]=[i("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)])],2))])]),Te(i("div",AC,[ze(Dg)],512),[[fs,Ua.value]])])],6)]),ze(yS,{ref_key:"randomSettingItem",ref:o},null,512)],64)}}},[["__scopeId","data-v-ebbd7fa8"]]),DC={class:"container"},PC={class:"tab-container"},FC={key:0},BC={class:"search-container"},UC=["placeholder"],HC=["title"],WC=["title","disabled"],jC=["title"],VC={class:"history-list"},zC={class:"action-buttons"},qC=["onClick","title"],GC=["onClick","title"],QC=["onClick","title"],YC=["value"],KC={key:1},JC={class:"search-container"},XC=["placeholder"],ZC=["title"],eE=["title"],tE=["title","disabled"],nE=["title"],oE={class:"history-list"},aE={key:0,class:"favor-name"},sE={class:"action-buttons"},lE=["onClick","title"],rE=["onClick","title"],iE=["onClick","title"],uE=["value"],cE={key:2,class:"weilin-tools-dialog-overlay"},dE={class:"weilin-tools-dialog-header"},fE={class:"weilin-tools-dialog-body"},pE={class:"form-group"},gE=["placeholder"],mE={class:"form-group"},hE=["placeholder"],vE={class:"form-group"},_E={class:"color-picker"},yE={class:"color-controls"},bE={class:"alpha-control"},wE={class:"alpha-value"},xE={class:"weilin-tools-dialog-footer"},TE={key:3,class:"weilin-tools-dialog-overlay"},SE={class:"weilin-tools-dialog-header"},kE={class:"weilin-tools-dialog-body"},CE={class:"confirm-message"},EE={class:"weilin-tools-dialog-footer"},LE=xt({__name:"history_index",setup(e){const{t}=wt(),o=_(""),n=_([]),a=_([]),s=_([]),l=_([]),r=_("history"),u=_([]),d=_(!1),c=_(!1),f=_(!1),g=_({hex:"rgba(255, 123, 2, .4)",alpha:100}),p=_({name:"",tag:"",color:"rgba(255, 123, 2, .4)"}),v=_(!1),b=_(0),x=D=>JSON.parse(D).prompt,k=D=>({hex:"#FFFFFF",alpha:0}),A=D=>{const{hex:ee,alpha:L}=k();g.value={hex:ee,alpha:L}},U=()=>{f.value=!1,p.value={id:"",name:"",tag:"",backgroundColor:"transparent"},A(),d.value=!0},w=D=>{const ee=D.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(ee){const[,L,E,B,ne]=ee,ge=`#${((1<<24)+(parseInt(L)<<16)+(parseInt(E)<<8)+parseInt(B)).toString(16).slice(1)}`,ve=ne?Math.round(parseFloat(ne)*100):100;return{hex:ge,alpha:ve}}return{hex:"#FF7B02",alpha:50}},O=D=>{f.value=!0,p.value={...D},g.value=w(D.color),d.value=!0},W=()=>{const D=se(g.value.hex,g.value.alpha);p.value.color=D},V=()=>{d.value=!1,p.value={name:"",tag:"",color:"rgba(255, 123, 2, .4)"},f.value=!1},H=_(""),q=_(null),he=ot(()=>{if(!q.value)return"";switch(H.value){case"history":return t("history.deleteHistoryConfirm",{name:q.value.tag});case"favorite":return t("history.deleteFavoriteConfirm",{name:q.value.tag});case"deleteSelected":return t("history.confirmDeleteSelected");case"deleteSelectedFavorite":return t("history.confirmDeleteSelected");default:return""}}),le=D=>{H.value="history",q.value=D,c.value=!0},R=D=>{H.value="favorite",q.value=D,c.value=!0},Y=()=>{v.value=!1,b.value=0,H.value="deleteSelected",q.value=u.value,c.value=!0},X=()=>{v.value=!1,b.value=0,H.value="deleteSelectedFavorite",q.value=u.value,c.value=!0},z=async()=>{try{switch(H.value){case"history":Bn.deleteHistory(q.value.id_index).then(D=>{K(),te({type:"success",str:"message.deleteSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"})});break;case"favorite":Bn.deleteFavorite(q.value.id_index).then(D=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.deleteSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Bn.batchDeleteHistory(u.value).then(D=>{K(),te({type:"success",str:"message.deleteSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"})});break;case"deleteSelectedFavorite":Bn.batchDeleteFavorite(q.value).then(D=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.deleteSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"})});break}P()}catch{te({type:"warn",str:"message.networkError"})}},Z=D=>{D.target.checked?r.value==="history"?u.value=n.value.map(ee=>ee.id_index):u.value=s.value.map(ee=>ee.id_index):u.value=[]},se=(D,ee)=>{const L=parseInt(D.slice(1,3),16),E=parseInt(D.slice(3,5),16),B=parseInt(D.slice(5,7),16);return`rgba(${L}, ${E}, ${B}, ${ee/100})`},P=()=>{c.value=!1,H.value="",q.value=null},F=()=>{if(!p.value.tag){te({type:"warn",str:"history.dialog.tag_placeholder"});return}f.value?Bn.editFavorite({id_index:p.value.id_index,name:p.value.name,tag:p.value.tag,color:p.value.color}).then(D=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.editSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"})}):Bn.addFavorite({name:p.value.name,tag:p.value.tag,color:p.value.color}).then(D=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),te({type:"success",str:"message.addSuccess"})}).catch(D=>{te({type:"warn",str:"message.networkError"})}),V()},K=()=>{Bn.getHistory({}).then(D=>{n.value=D.data,a.value=n.value}).catch(D=>{te({type:"warn",str:"message.networkError"})})},oe=()=>{Bn.getFavorite().then(D=>{s.value=D.data,l.value=s.value}).catch(D=>{te({type:"warn",str:"message.networkError"})})},Q=()=>{a.value=n.value.filter(D=>D.tag.includes(o.value))},ie=()=>{l.value=s.value.filter(D=>D.tag.includes(o.value))},re=()=>{K()},ye=()=>{oe()},de=D=>{Bn.addFavorite({tag:D.tag}).then(ee=>{ee.code===200?(window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),oe(),te({type:"success",str:"message.addFavoriteSuccess"})):te({type:"success",str:"message.addFavoriteIsExist"})}).catch(ee=>{te({type:"warn",str:"message.networkError"})})},M=D=>{window.postMessage({type:"weilin_prompt_ui_user_history_tag",tagText:D.tag},"*")},G=()=>{u.value=[],v.value=!0},ae=()=>{u.value=[],v.value=!1,b.value=0};return vt(()=>{K(),oe()}),(D,ee)=>(T(),C("div",DC,[i("h1",null,h(r.value==="history"?m(t)("history.title"):m(t)("history.favorites")),1),i("div",PC,[i("button",{class:Ee([{active:r.value==="history"},"tab-button"]),onClick:ee[0]||(ee[0]=L=>r.value="history")},h(m(t)("history.history")),3),i("button",{class:Ee([{active:r.value==="favorites"},"tab-button"]),onClick:ee[1]||(ee[1]=L=>r.value="favorites")},h(m(t)("history.favorites")),3)]),r.value==="history"?(T(),C("div",FC,[i("div",BC,[i("button",{class:"refresh-btn",onClick:re},[...ee[14]||(ee[14]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),Te(i("input",{type:"text","onUpdate:modelValue":ee[2]||(ee[2]=L=>o.value=L),placeholder:m(t)("history.search_placeholder"),onInput:Q,class:"search-input"},null,40,UC),[[Ae,o.value]]),v.value?Te((T(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":ee[3]||(ee[3]=L=>b.value=L),value:1,class:"tag-checkbox",onChange:Z},null,544)),[[Bt,b.value]]):me("",!0),v.value?me("",!0):(T(),C("button",{key:1,class:"bulk-delete-btn",onClick:G,title:m(t)("history.bulk_delete")},[...ee[15]||(ee[15]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,HC)),v.value?(T(),C("button",{key:2,class:"bulk-delete-btn",onClick:Y,title:m(t)("history.sure_delete"),disabled:u.value.length===0},[...ee[16]||(ee[16]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)])],8,WC)):me("",!0),v.value?(T(),C("button",{key:3,class:"bulk-delete-btn",onClick:ae,title:m(t)("history.cancel_delete")},[...ee[17]||(ee[17]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),i("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)])],8,jC)):me("",!0)]),i("ul",VC,[(T(!0),C(Oe,null,je(a.value,L=>(T(),C("li",{key:L.id_index,class:"history-item"},[i("span",null,h(x(L.tag)),1),i("div",zC,[i("button",{onClick:E=>de(L),class:"favorite-btn",title:m(t)("history.add_to_favorites")},[...ee[18]||(ee[18]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"favorite-icon"},[i("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],8,qC),i("button",{onClick:E=>le(L),class:"delete-favorite-btn",title:m(t)("history.delete_history")},[...ee[19]||(ee[19]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,GC),i("button",{onClick:E=>M(L),class:"use-btn",title:m(t)("history.use_item")},[...ee[20]||(ee[20]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[i("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)])],8,QC),v.value?Te((T(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":ee[4]||(ee[4]=E=>u.value=E),value:L.id_index,class:"tag-checkbox"},null,8,YC)),[[Bt,u.value]]):me("",!0)])]))),128))])])):(T(),C("div",KC,[i("div",JC,[i("button",{class:"refresh-btn",onClick:ye},[...ee[21]||(ee[21]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),Te(i("input",{type:"text","onUpdate:modelValue":ee[5]||(ee[5]=L=>o.value=L),placeholder:m(t)("history.search_placeholder"),onInput:ie,class:"search-input"},null,40,XC),[[Ae,o.value]]),v.value?Te((T(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":ee[6]||(ee[6]=L=>b.value=L),value:1,class:"tag-checkbox",onChange:Z},null,544)),[[Bt,b.value]]):me("",!0),i("button",{class:"add-his-btn",onClick:U,title:m(t)("history.add_new")},[...ee[22]||(ee[22]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"add-icon"},[i("path",{d:"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z"})],-1)])],8,ZC),v.value?me("",!0):(T(),C("button",{key:1,class:"bulk-delete-btn",onClick:G,title:m(t)("history.bulk_delete")},[...ee[23]||(ee[23]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,eE)),v.value?(T(),C("button",{key:2,class:"bulk-delete-btn",onClick:X,title:m(t)("history.sure_delete"),disabled:u.value.length===0},[...ee[24]||(ee[24]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)])],8,tE)):me("",!0),v.value?(T(),C("button",{key:3,class:"bulk-delete-btn",onClick:ae,title:m(t)("history.cancel_delete")},[...ee[25]||(ee[25]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),i("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)])],8,nE)):me("",!0)]),i("ul",oE,[(T(!0),C(Oe,null,je(l.value,L=>(T(),C("li",{key:L.id_index,class:"history-item"},[i("div",{class:"favor-name-box",style:mt({backgroundColor:L.color||"transparent"})},[L.name.length>0?(T(),C("span",aE,h(L.name),1)):me("",!0)],4),i("span",null,h(x(L.tag)),1),i("div",sE,[i("button",{onClick:E=>O(L),class:"delete-favorite-btn",title:m(t)("history.edit_favorite")},[...ee[26]||(ee[26]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[i("path",{d:"M200.59 626.48v129.5h129.5l381.93-381.93-129.5-129.5-381.93 381.93z m611.56-352.57c13.45-13.41 13.48-35.18 0.07-48.62l-0.07-0.07-80.81-80.81c-13.41-13.45-35.18-13.48-48.62-0.07l-0.07 0.07-63.19 63.19 129.5 129.5 63.19-63.19zM131.52 824.96h759.71c23.02 0 34.53 11.51 34.53 34.53 0 23.02-11.51 34.53-34.53 34.53H131.52c-23.02 0-34.53-11.51-34.53-34.53 0-23.02 11.51-34.53 34.53-34.53z","p-id":"2346"})],-1)])],8,lE),i("button",{onClick:E=>R(L),class:"delete-favorite-btn",title:m(t)("history.delete_favorite")},[...ee[27]||(ee[27]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,rE),i("button",{onClick:E=>M(L),class:"use-btn",title:m(t)("history.use_favorite")},[...ee[28]||(ee[28]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[i("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)])],8,iE),v.value?Te((T(),C("input",{key:0,type:"checkbox","onUpdate:modelValue":ee[7]||(ee[7]=E=>u.value=E),value:L.id_index,class:"tag-checkbox"},null,8,uE)),[[Bt,u.value]]):me("",!0)])]))),128))])])),d.value?(T(),C("div",cE,[i("div",{class:"weilin-tools-dialog-content",onMousedown:ee[12]||(ee[12]=Je(()=>{},["stop"]))},[i("div",dE,[i("h2",null,h(f.value?m(t)("history.dialog.edit_tag"):m(t)("history.dialog.add_tag")),1),i("button",{class:"close-btn",onClick:V},"×")]),i("div",fE,[i("div",pE,[i("label",null,h(m(t)("history.dialog.name")),1),Te(i("input",{type:"text","onUpdate:modelValue":ee[8]||(ee[8]=L=>p.value.name=L),placeholder:m(t)("history.dialog.name_placeholder")},null,8,gE),[[Ae,p.value.name]])]),i("div",mE,[i("label",null,h(m(t)("history.dialog.tag")),1),Te(i("textarea",{"onUpdate:modelValue":ee[9]||(ee[9]=L=>p.value.tag=L),placeholder:m(t)("history.dialog.tag_placeholder"),rows:"4"},"                        ",8,hE),[[Ae,p.value.tag]])]),i("div",vE,[i("label",null,h(m(t)("history.dialog.background_color")),1),i("div",_E,[i("div",{class:"color-preview",style:mt({backgroundColor:D.previewColor})},null,4),i("div",yE,[Te(i("input",{type:"color","onUpdate:modelValue":ee[10]||(ee[10]=L=>g.value.hex=L),onInput:W,class:"color-input"},null,544),[[Ae,g.value.hex]]),i("div",bE,[Te(i("input",{type:"range","onUpdate:modelValue":ee[11]||(ee[11]=L=>g.value.alpha=L),min:"0",max:"100",onInput:W,class:"alpha-slider"},null,544),[[Ae,g.value.alpha,void 0,{number:!0}]]),i("span",wE,h(g.value.alpha)+"%",1)])])])])]),i("div",xE,[i("button",{class:"cancel-btn",onClick:V},h(m(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:F},h(m(t)("common.confirm")),1)])],32)])):me("",!0),c.value?(T(),C("div",TE,[i("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:ee[13]||(ee[13]=Je(()=>{},["stop"]))},[i("div",SE,[i("h2",null,h(m(t)("common.confirmDelete")),1),i("button",{class:"close-btn",onClick:P},"×")]),i("div",kE,[i("p",CE,h(he.value),1)]),i("div",EE,[i("button",{class:"cancel-btn",onClick:P},h(m(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:z},h(m(t)("common.delete")),1)])],32)])):me("",!0)]))}},[["__scopeId","data-v-d9f9b5c3"]]),$E={key:0,class:"drop-zone"},AE={key:1,class:"preview-container"},IE=["srcdoc"],ME={class:"action-buttons"},Kg="weilin_tools_",OE=xt({__name:"tranToWeb",emits:["close","update"],setup(e,{expose:t,emit:o}){const{t:n}=wt(),a=_(!1),s=_(""),l=_(null),r={tranToWeb:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},d=_((()=>{try{const H=localStorage.getItem(`${Kg}tranToWebState`);if(H){const q=JSON.parse(H),he={...r};return q.tranToWeb&&(he.tranToWeb={...r.tranToWeb,...q.tranToWeb}),he}}catch(H){console.error("Error loading window states:",H)}return{...r}})());Ze(d,H=>{try{localStorage.setItem(`${Kg}tranToWebState`,JSON.stringify(H))}catch(q){console.error("Error saving window states:",q)}},{deep:!0}),vt(()=>{Ue.registerWindow("tranToWeb")}),Dn(()=>{Ue.unregisterWindow("tranToWeb")});const c=H=>{a.value=!1},f=(H,q)=>{d.value[H]&&(d.value[H].position={...q})},g=(H,q)=>{d.value[H]&&(d.value[H].size={...q})},p=()=>{a.value=!0,Ue.setActiveWindow("tranToWeb")},v=H=>{H.dataTransfer.dropEffect="copy"},b=H=>{const q=H.dataTransfer.files[0];q&&q.type.startsWith("image/")&&k(q)},x=H=>{const q=H.clipboardData.items;for(let he=0;he<q.length;he++)if(q[he].type.startsWith("image/")){const le=q[he].getAsFile();k(le);break}},k=H=>{const q=new FileReader;q.onload=he=>{const le=he.target.result,R=btoa(le);l.value=R,A()},q.readAsDataURL(H)},A=()=>{s.value=`
        <!DOCTYPE html>
        <html>
        <head>
            <title>WeiLin Comfyui Tools - Image to HTML</title>
            <style>
                body { margin: 0; padding: 0; }
                img { max-width: 100%; height: auto; }
            </style>
            <script>
                window.onload = function() {
                    // 解密图片数据
                    try {
                        const encryptedData = "${l.value}";
                        const originalData = atob(encryptedData);
                        document.getElementById('decrypted-img').src = originalData;
                        document.getElementById('decrypted-img').style.display = 'block';
                    } catch(e) {
                        console.error('解密失败:', e);
                        document.body.innerHTML = '<p>图片解密失败</p>';
                    }
                };
            <\/script>
        </head>
        <body>
            <img id="decrypted-img" style="display:none;" />
        </body>
        </html>
    `},U=()=>{const H=new Blob([s.value],{type:"text/html"}),q=URL.createObjectURL(H),he=document.createElement("a");he.href=q,he.download="image-to-html.html",document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(q)},w=()=>{s.value="",l.value=null},O=_(null),W=()=>{s.value||O.value.click()},V=H=>{const q=H.target.files[0];q&&q.type.startsWith("image/")&&k(q)};return t({open:p}),(H,q)=>a.value?(T(),yt(xn,{key:0,title:m(n)("utils.tranToWeb"),position:d.value.tranToWeb.position,size:d.value.tranToWeb.size,"z-index":m(Ue).getZIndex("tranToWeb"),"onUpdate:position":q[0]||(q[0]=he=>f("tranToWeb",he)),"onUpdate:size":q[1]||(q[1]=he=>g("tranToWeb",he)),onActive:q[2]||(q[2]=he=>m(Ue).setActiveWindow("tranToWeb")),onClose:q[3]||(q[3]=he=>c())},{default:ht(()=>[i("div",{class:"utils_tran_web__content",onDragover:Je(v,["prevent"]),onDrop:Je(b,["prevent"]),onPaste:x,onClick:W},[s.value?(T(),C("div",AE,[i("iframe",{srcdoc:s.value,class:"html-preview"},null,8,IE),i("div",ME,[i("button",{onClick:U},h(m(n)("utils.downloadHtml")),1),i("button",{onClick:w},h(m(n)("utils.clear")),1)])])):(T(),C("div",$E,h(m(n)("utils.dropOrPasteImage")),1)),i("input",{type:"file",ref_key:"fileInput",ref:O,style:{display:"none"},accept:"image/*",onChange:V},null,544)],32)]),_:1},8,["title","position","size","z-index"])):me("",!0)}},[["__scopeId","data-v-aaebcad3"]]),RE=["onMouseenter","onMouseleave","onMousedown","onMouseup"],NE=xt({__name:"FloatingBall",setup(e){const{t}=wt(),o=_(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1),n=_(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66),a=_(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||n.value),s=_(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),l=_(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),r=_(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),u=_(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),d=_(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),c=_(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50);o.value<1&&(o.value=1,localStorage.setItem("weilin_prompt_ui_floatingBallCount",o.value)),n.value<5&&(n.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallSize",n.value)),a.value<5&&(a.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",a.value)),localStorage.getItem("weilin_prompt_ui_floatingBallCount")||localStorage.setItem("weilin_prompt_ui_floatingBallCount",o.value),localStorage.getItem("weilin_prompt_ui_floatingBallSize")||localStorage.setItem("weilin_prompt_ui_floatingBallSize",n.value),localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",n.value);const f=_([]),g=_([]),p=_([]),v=_([]),b=_(null),x=ot(()=>v.value.map(le=>{const R={...le};return s.value==="custom"&&l.value?(R.backgroundImage=`url(${l.value})`,R.backgroundSize="contain",R.backgroundRepeat="no-repeat",R.backgroundPosition="center",R.imageRendering="optimizeQuality"):r.value==="gradient"?R.background=`linear-gradient(135deg, ${u.value}, ${d.value})`:R.background="transparent",R.borderRadius=`${c.value}%`,R}));for(let le=0;le<o.value;le++){p.value[le]=!1,g.value[le]=!1;const R=window.innerWidth,Y=window.innerHeight,X=n.value,z=a.value,Z=10,se=Math.floor(R/(X+Z)),P=Math.floor(le/se);let K=20+le%se*(X+Z),oe=Y-100-P*(z+Z);K=Math.max(0,K),K=Math.min(K,R-X),oe=Math.max(0,oe),oe=Math.min(oe,Y-z),f.value[le]={x:K,y:oe,width:X+"px",height:z+"px"},v.value[le]={left:`${f.value[le].x}px`,top:`${f.value[le].y}px`,width:`${X}px`,height:`${z}px`}}const k=(le,R)=>{le.target.closest(".weilin_prompt_ui_floating-ball")&&(g.value[R]=!0,document.addEventListener("mousemove",X=>A(X,R)),document.addEventListener("mouseup",X=>U(X,R)))},A=(le,R)=>{if(g.value[R]){const Y=window.innerWidth,X=window.innerHeight,z=n.value,Z=a.value;let se=le.clientX-z/2,P=le.clientY-Z/2;se=Math.max(0,se),se=Math.min(se,Y-z),P=Math.max(0,P),P=Math.min(P,X-Z),f.value[R]={x:se,y:P,width:z+"px",height:Z+"px"},v.value[R]={left:`${f.value[R].x}px`,top:`${f.value[R].y}px`,width:`${z}px`,height:`${Z}px`}}},U=(le,R)=>{g.value[R]=!1,document.removeEventListener("mousemove",Y=>A(Y,R)),document.removeEventListener("mouseup",Y=>U(Y,R))},w=()=>{},O=le=>{switch(le){case"item1":window.parent.postMessage({type:"weilin_prompt_ui_open_global_prompt_box"},"*");break;case"item2":window.parent.postMessage({type:"weilin_prompt_ui_open_global_tag_manager"},"*");break;case"item3":window.parent.postMessage({type:"weilin_prompt_ui_open_global_lora_manager"},"*");break;case"item4":window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*");break;case"item5":window.parent.postMessage({type:"weilin_prompt_ui_restore_window"},"*");break;case"item6":window.parent.postMessage({type:"weilin_prompt_ui_open_node_list_window"},"*");break;case"item7":V();break;case"item8":b.value.open();break}},W=_(),V=()=>{W.value.open()},H=le=>{if(le.data.type==="weilin_prompt_ui_floating_ball_setting"){o.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1,n.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66,a.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize"))||n.value,s.value=localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default",l.value=localStorage.getItem("weilin_prompt_ui_customSkinUrl")||"",r.value=localStorage.getItem("weilin_prompt_ui_bgType")||"gradient",u.value=localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb",d.value=localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc",c.value=localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50,p.value=[],g.value=[],f.value=[],v.value=[];for(let R=0;R<o.value;R++){p.value[R]=!1,g.value[R]=!1;const Y=window.innerWidth,X=window.innerHeight,z=n.value,Z=a.value,se=10,P=Math.floor(Y/(z+se)),F=Math.floor(R/P);let oe=20+R%P*(z+se),Q=X-100-F*(Z+se);oe=Math.max(0,oe),oe=Math.min(oe,Y-z),Q=Math.max(0,Q),Q=Math.min(Q,X-Z),f.value[R]={x:oe,y:Q,width:z+"px",height:Z+"px"},v.value[R]={left:`${f.value[R].x}px`,top:`${f.value[R].y}px`,width:`${z}px`,height:`${Z}px`,...s.value==="custom"&&l.value?{backgroundImage:`url(${l.value})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}:r.value==="gradient"?{background:`linear-gradient(135deg, ${u.value}, ${d.value})`}:{background:"transparent"},borderRadius:`${c.value}%`}}}},q=le=>{p.value[le]=!0},he=le=>{p.value[le]=!1};return vt(()=>{window.addEventListener("message",H)}),Dn(()=>{window.removeEventListener("message",H),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",U)}),(le,R)=>(T(),C(Oe,null,[(T(!0),C(Oe,null,je(o.value,Y=>(T(),C("div",{class:"weilin_prompt_ui_floating-ball",style:mt(x.value[Y-1]),onMouseenter:X=>q(Y-1),onMouseleave:X=>he(Y-1),onMousedown:X=>k(X,Y-1),onMouseup:X=>U(X,Y-1),key:"floating-ball-"+Y},[i("div",{class:"weilin_prompt_ui_ball-content",onClick:w},h(s.value==="default"?"WeiLin":""),1),p.value[Y-1]?(T(),C("div",{key:0,class:"weilin_prompt_ui_menu-container",onMousedown:R[8]||(R[8]=Je(()=>{},["stop"]))},[i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[0]||(R[0]=X=>O("item1"))},h(m(t)("floatingBall.promptBox")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[1]||(R[1]=X=>O("item2"))},h(m(t)("floatingBall.tagManager")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[2]||(R[2]=X=>O("item3"))},h(m(t)("floatingBall.loraManager")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[3]||(R[3]=X=>O("item4"))},h(m(t)("floatingBall.aiWindow")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[4]||(R[4]=X=>O("item6"))},h(m(t)("floatingBall.openNodeListWindow")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[5]||(R[5]=X=>O("item7"))},h(m(t)("floatingBall.tranToWeb")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[6]||(R[6]=X=>O("item8"))},h(m(t)("floatingBall.openSetting")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:R[7]||(R[7]=X=>O("item5"))},h(m(t)("floatingBall.restoreWindow")),1)],32)):me("",!0)],44,RE))),128)),ze(OE,{ref_key:"tranToWebRef",ref:W},null,512),ze(Ip,{ref_key:"settingDialog",ref:b},null,512)],64))}},[["__scopeId","data-v-c4edc822"]]),DE={class:"ai-chat-window"},PE={class:"history-sidebar"},FE={class:"history-list"},BE=["onClick"],UE={key:0},HE=["onKeyup","onBlur"],WE={class:"item-actions"},jE=["onClick"],VE=["onClick"],zE={class:"chat-main"},qE={class:"message-list"},GE={class:"message-content"},QE={key:0,class:"message assistant"},YE={class:"message-content"},KE={class:"input-area"},JE=["placeholder","onKeydown"],XE=["disabled"],ZE=xt({__name:"ai_window",setup(e){const{t}=wt(),o=_([]),n=_(-1),a=_(""),s=_(!1),l=_({}),r=_(!1),u=_(""),d=O=>{var W;o.value[O]&&(r.value=!0,u.value=((W=o.value[O])==null?void 0:W.title)||`对话 ${O+1}`,n.value=O)},c=O=>{o.value[O]&&(u.value.trim()&&(o.value[O].title=u.value.trim(),k()),r.value=!1)},f=()=>{r.value=!1},g=()=>{Ls.getOpenAiSetting().then(O=>{l.value=O.data}).catch(O=>{te({type:"warn",str:"message.networkError"})})};vt(()=>{g()});const p=ot(()=>o.value[n.value]||{messages:[]}),v=O=>{n.value=O},b=()=>{s.value=!0;const O={title:`对话 ${o.value.length+1}`,messages:[],createdAt:new Date().toISOString()};return o.value.push(O),n.value=o.value.length-1,k(),s.value=!1,O},x=()=>{const O=localStorage.getItem("aiChatHistory");O&&(o.value=JSON.parse(O))},k=()=>{localStorage.setItem("aiChatHistory",JSON.stringify(o.value))};vt(()=>{g(),x()});const A=async()=>{if(!a.value.trim()||s.value)return;(o.value.length===0||n.value===-1)&&b();const O={role:"user",content:a.value,timestamp:new Date().toISOString()};p.value.messages.push(O),k(),a.value="";const W={role:"assistant",content:"",timestamp:new Date().toISOString()};p.value.messages.push(W),k(),s.value=!0;try{await w({messages:p.value.messages},V=>{const H=p.value.messages[p.value.messages.length-1];H.content+=V.content,k()},V=>{console.error("Error:",V);const H=p.value.messages[p.value.messages.length-1];H.content="抱歉，出错了，请稍后再试。",k()},()=>{s.value=!1,k()})}catch(V){console.error("Error:",V),s.value=!1;const H=p.value.messages[p.value.messages.length-1];H.content="请求失败，请检查网络连接。",k()}},U=O=>{o.value.splice(O,1),n.value===O&&(n.value=Math.max(0,O-1)),k()},w=async(O,W,V,H)=>{var q,he;try{const le=await fetch(l.value.base_url+"/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.value.api_key}`},body:JSON.stringify({model:l.value.model,messages:O.messages,stream:!0})});if(!le.ok)throw new Error(`HTTP error! status: ${le.status}`);const R=le.body.getReader(),Y=new TextDecoder;let X="";for(;;){const{done:z,value:Z}=await R.read();if(z){H();break}X+=Y.decode(Z,{stream:!0});const se=X.split(`
`);X=se.pop();for(const P of se)if(P.trim()!==""){if(P==="data: [DONE]"){H();return}try{const F=P.replace(/^data: /,""),oe=((he=(q=JSON.parse(F).choices[0])==null?void 0:q.delta)==null?void 0:he.content)||"";oe&&W({content:oe})}catch{console.error("Failed to parse message:",P)}}}}catch(le){V(le)}};return(O,W)=>(T(),C("div",DE,[i("div",PE,[i("button",{class:"new-chat-btn",onClick:b},h(m(t)("aiWindow.newChat")),1),i("div",FE,[(T(!0),C(Oe,null,je(o.value,(V,H)=>(T(),C("div",{key:H,class:Ee(["history-item",{active:n.value===H}]),onClick:q=>v(H)},[!r.value||n.value!==H?(T(),C("span",UE,h((V==null?void 0:V.title)||m(t)("aiWindow.chatName")+` ${H+1}`),1)):Te((T(),C("input",{key:1,"onUpdate:modelValue":W[0]||(W[0]=q=>u.value=q),onKeyup:[tn(q=>c(H),["enter"]),tn(f,["esc"])],onBlur:q=>c(H),class:"rename-input"},null,40,HE)),[[Ae,u.value]]),i("div",WE,[i("button",{class:"rename-btn",onClick:Je(q=>d(H),["stop"])},"✎",8,jE),r.value?me("",!0):(T(),C("button",{key:0,class:"delete-btn",onClick:Je(q=>U(H),["stop"])},"×",8,VE))])],10,BE))),128))])]),i("div",zE,[i("div",qE,[(T(!0),C(Oe,null,je(p.value.messages,(V,H)=>(T(),C("div",{key:H,class:Ee(["message",V.role])},[i("div",GE,[i("pre",null,h(V.content),1)])],2))),128)),s.value?(T(),C("div",QE,[i("div",YE,[i("pre",null,h(m(t)("aiWindow.thinking")),1)])])):me("",!0)]),i("div",KE,[Te(i("textarea",{class:"ai-chat-textarea","onUpdate:modelValue":W[1]||(W[1]=V=>a.value=V),placeholder:m(t)("aiWindow.inputMessage"),onKeydown:tn(Je(A,["exact","prevent"]),["enter"])},null,40,JE),[[Ae,a.value]]),i("button",{class:"ai-chat-btn",onClick:A,disabled:s.value},h(m(t)("aiWindow.send")),9,XE)])])]))}},[["__scopeId","data-v-0cea2906"]]),eL={class:"lora-info"},tL={class:"lora-header"},nL=["title"],oL={class:"lora-weights"},aL={class:"weight-item"},sL=["title"],lL={class:"weight-item"},rL={class:"center-box"},iL=["onClick"],or="weilin_prompt_ui_",uL=xt({__name:"index",setup(e){const{t}=wt(),o=_([]);window.addEventListener("message",a=>{a.data.type==="weilin_prompt_ui_update_node_list_info"&&(o.value=a.data.nodeList)});const n=a=>{window.postMessage({type:"weilin_prompt_ui_prompt_open_node_wit_seed",seed:a},"*")};return vt(()=>{window.postMessage({type:"weilin_prompt_ui_prompt_get_node_list_info"},"*")}),(a,s)=>(T(),C("div",{class:Ee(`${or}lora-stack`)},[i("div",{class:Ee(`${or}lora-content`)},[i("div",{class:Ee(`${or}lora-body`)},[i("div",{class:Ee(`${or}lora-list`)},[(T(!0),C(Oe,null,je(o.value,l=>(T(),C("div",{key:l.id,class:"lora-item"},[i("div",eL,[i("div",tL,[i("span",{class:"lora-name",title:l.title},"#"+h(l.id)+" - "+h(l.title),9,nL)]),i("div",oL,[i("div",aL,[i("div",{class:"text-label",title:l.text},h(l.text),9,sL)]),i("div",lL,[i("div",rL,[i("button",{onClick:r=>n(l.seed),class:"open-button"},h(m(t)("nodeListWindow.openPromptUI")),9,iL)])])])])]))),128))],2)],2)],2)],2))}},[["__scopeId","data-v-0c15a742"]]),uu={getTreeFromCloud:async e=>await Ie({url:"/cloud/get/tree",method:"post",data:{path:e}}),getLocalInstallPackage:async()=>await Ie({url:"/cloud/get/local/package",method:"post",data:{}}),installSelectPackage:async(e,t)=>await Ie({url:"/cloud/download/file",method:"post",timeout:0,data:{paths:t,path:e}})},cL={class:"cloud-manager"},dL={class:"toolbar"},fL={class:"current-path"},pL={class:"file-list"},gL={class:"file-info"},mL={class:"file-name"},hL={class:"file-type"},vL={class:"file-actions"},_L=["onClick"],yL={key:1,class:"install-container"},bL={key:0,class:"installed-badge"},wL=["onClick","disabled"],xL=xt({__name:"index",setup(e){const{t}=wt(),o=_([]),n=_("tags"),a=_("tags"),s=_([]),l=async b=>{try{const x=await uu.getTreeFromCloud(b);o.value=x.data}catch(x){console.error("获取文件树失败:",x),te({type:"warn",str:"message.networkError"})}},r=async()=>{try{const b=await uu.getLocalInstallPackage();s.value=b.data||[]}catch(b){console.error("获取已安装包列表失败:",b),te({type:"warn",str:"message.networkError"})}},u=b=>s.value.some(x=>x===b),d=async b=>{try{const x=o.value.find(k=>k.path===b);x&&(x.isInstalling=!0,await uu.installSelectPackage(a.value,[b]).then(()=>{r(),te({type:"success",str:"message.installPackageSuccess"})}))}catch(x){console.error("安装包失败:",x),te({type:"warn",str:"message.installPackageFail"})}finally{const x=o.value.find(k=>k.path===b);x&&(x.isInstalling=!1)}},c=()=>{const b=n.value.split("/");b.length>1&&(n.value=b.slice(0,-1).join("/"),l(n.value))},f=()=>{l(n.value),r()},g=b=>{n.value=b,l(b)},p=()=>{a.value="tags",n.value="tags",l(n.value)},v=()=>{a.value="danbooru",n.value="danbooru",l(n.value)};return vt(()=>{l(n.value),r()}),(b,x)=>(T(),C("div",cL,[i("div",dL,[i("button",{class:"refresh-btn",onClick:f},[...x[0]||(x[0]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),i("button",{class:"database-btn",onClick:p},[x[1]||(x[1]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",null,h(m(t)("cloudWindow.tagDatabase")),1)]),i("button",{class:"database-btn",onClick:v},[x[2]||(x[2]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4v4z"})],-1)),i("span",null,h(m(t)("cloudWindow.danbooruDatabase")),1)]),i("div",fL,[i("span",null,h(m(t)("cloudWindow.currentPath"))+": "+h(a.value=="tags"?m(t)("cloudWindow.tagDatabase"):m(t)("cloudWindow.danbooruDatabase")),1)])]),i("div",pL,[n.value!=="tags"&&n.value!=="danbooru"?(T(),C("button",{key:0,class:"back-btn",onClick:c},[x[3]||(x[3]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),qe(" "+h(m(t)("cloudWindow.back")),1)])):me("",!0),(T(!0),C(Oe,null,je(o.value,k=>(T(),C("div",{key:k.path,class:"file-item"},[i("div",gL,[i("span",mL,h(k.name),1),i("span",hL,h(k.type=="dir"?"文件夹":k.type=="file"?"文件":"其它未知文件"),1)]),i("div",vL,[k.type==="dir"?(T(),C("button",{key:0,onClick:A=>g(k.path),class:"open-btn"},h(m(t)("cloudWindow.open")),9,_L)):k.type==="file"?(T(),C("div",yL,[u(k.path)?(T(),C("span",bL,h(m(t)("cloudWindow.installed")),1)):(T(),C("button",{key:1,onClick:A=>d(k.path),class:"install-btn",disabled:k.isInstalling},h(k.isInstalling?m(t)("cloudWindow.installing"):m(t)("cloudWindow.install")),9,wL))])):me("",!0)])]))),128))])]))}},[["__scopeId","data-v-508c00b0"]]),TL={class:"header-actions"},SL=["title"],kL=["onMouseover","onDragstart","onDrop"],CL={class:"lora-info"},EL={class:"lora-header"},LL=["title"],$L={class:"lora-actions"},AL=["onClick","title"],IL=["onClick","title"],ML={class:"lora-weights-row"},OL={class:"weight-item-col"},RL=["onUpdate:modelValue"],NL={class:"weight-item-col"},DL=["onUpdate:modelValue"],PL={class:"switch-item-col"},FL={class:"switch"},BL=["checked","onChange"],Ma="weilin_prompt_ui_",UL=xt({__name:"lora_stack",setup(e,{expose:t}){const{t:o}=wt(),n=_([]),a=_(""),s=_(!1),l=_(""),r=_(100),u=_(0),d=_(),c=_(!1),f=_(!1),g=_(),p=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora_stack",seed:a.value},"*")},v=R=>{R.hidden=!R.hidden},b=(R,Y)=>{if(f.value=!0,l.value===R&&s.value)return;const z=Y.currentTarget.getBoundingClientRect();let se={left:z.left-450-10,top:z.top};se.left<10&&(se.left=z.right+10),se.top=Math.max(10,Math.min(se.top,window.innerHeight-310)),r.value=se.left,u.value=se.top,s.value=!0,l.value=R,Qe(()=>{g.value.refresh()})},x=()=>{f.value=!1,setTimeout(()=>{!c.value&&!f.value&&(s.value=!1,l.value="",c.value=!1)},200)},k=()=>{c.value=!0,f.value=!0},A=()=>{s.value=!1,l.value="",c.value=!1},U=R=>{n.value.find(Y=>Y.name===R.name)||n.value.push({name:R.name,weight:1,text_encoder_weight:1,...R})},w=R=>{const Y=n.value.findIndex(X=>X.name===R.name);Y>-1&&n.value.splice(Y,1)},O=_(),W=R=>{O.value.open({name:R.lora})};window.addEventListener("message",R=>{R.data.type==="weilin_prompt_ui_selectLora_stack_"+a.value&&U(R.data.lora)});const V=(R,Y)=>{if(a.value=Y,R.length>0)try{const X=JSON.parse(R);if(X.lora&&X.lora!=""&&(n.value=X.lora),X.temp_lora&&X.temp_lora.length>0&&X.temp_lora!=""){const z=X.temp_lora;n.value=z}}catch{te({type:"warn",str:"promptBox.settings.errorPrompt"})}};Ze(n,R=>{H()},{deep:!0});const H=()=>{if(n.value.length>0){const R=n.value.filter(z=>!z.hidden);let Y={lora:"",temp_lora:n.value};R.length>0&&(Y.lora=R);const X=JSON.stringify(Y);window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:X},"*")}else{const Y=JSON.stringify({lora:"",temp_lora:""});window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:Y},"*")}},q=_(null),he=R=>{q.value=R},le=R=>{if(q.value===null||q.value===R)return;const Y=n.value.splice(q.value,1)[0];n.value.splice(R,0,Y),q.value=null,H()};return t({initLoraStack:V}),(R,Y)=>(T(),C("div",{class:Ee(`${Ma}lora-stack`)},[i("div",{class:Ee(`${Ma}lora-content`)},[i("div",{class:Ee(`${Ma}lora-header`)},[i("div",TL,[i("button",{class:Ee(`${Ma}add-btn`),onClick:p,title:m(o)("controls.addLora")},[...Y[1]||(Y[1]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])],10,SL)])],2),i("div",{class:Ee(`${Ma}lora-body`)},[i("div",{class:Ee(`${Ma}lora-list`)},[(T(!0),C(Oe,null,je(n.value,(X,z)=>(T(),C("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:d,key:X.name,class:Ee(["lora-item",{"hidden-lora":X.hidden}]),onMouseover:Z=>b(X.lora,Z),onMouseleave:x,draggable:"true",onDragstart:Z=>he(z),onDragover:Y[0]||(Y[0]=Je(()=>{},["prevent"])),onDrop:Z=>le(z)},[i("div",CL,[i("div",EL,[i("span",{class:"lora-name",title:X.name},h(X.name),9,LL),i("div",$L,[i("button",{class:"look-on-btn",onClick:Z=>W(X),title:m(o)("controls.lookOnLora")},[...Y[2]||(Y[2]=[i("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[i("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),i("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),i("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),i("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)])],8,AL),i("button",{class:"remove-btn",onClick:Z=>w(X),title:m(o)("controls.removeLora")},[...Y[3]||(Y[3]=[i("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,IL)])]),i("div",ML,[i("div",OL,[i("label",null,h(m(o)("loraManager.modelWeight")),1),Te(i("input",{type:"number","onUpdate:modelValue":Z=>X.weight=Z,class:"lora-weight",step:"0.1"},null,8,RL),[[Ae,X.weight]])]),i("div",NL,[i("label",null,h(m(o)("loraManager.textEncoderWeight")),1),Te(i("input",{type:"number","onUpdate:modelValue":Z=>X.text_encoder_weight=Z,class:"lora-weight",step:"0.1"},null,8,DL),[[Ae,X.text_encoder_weight]])]),i("div",PL,[i("label",null,h(X.hidden?m(o)("lora.hideLora"):m(o)("lora.showLora")),1),i("label",FL,[i("input",{type:"checkbox",checked:!X.hidden,onChange:Z=>v(X)},null,40,BL),Y[4]||(Y[4]=i("span",{class:"slider"},null,-1))])])])])],42,kL))),128))],2)],2)],2),ze(tr,{ref_key:"loraDetailLoraStackRef",ref:O},null,512),s.value?(T(),yt(ru,{key:0,ref_key:"loraCardItem",ref:g,fileNmae:l.value,paddingLeft:r.value,paddingTop:u.value,onCardLeave:A,onCardenter:k},null,8,["fileNmae","paddingLeft","paddingTop"])):me("",!0)],2))}},[["__scopeId","data-v-c2ab38ea"]]),Oa={searchDanbooru:async(e="",t=1,o=100)=>await Ie({url:"/danbooru/get_tags",method:"post",data:{search:e,page:t,limit:o}}),addDanbooruTag:async e=>await Ie({url:"/danbooru/add_tag",method:"post",data:e}),updateDanbooruTag:async e=>await Ie({url:"/danbooru/update_tag",method:"post",timeout:0,data:e}),deleteDanbooruTag:async e=>await Ie({url:"/danbooru/delete_tag",method:"post",timeout:0,data:{id:e}}),batchDeleteDanbooruTags:async e=>await Ie({url:"/danbooru/batch_delete_tag",method:"post",timeout:0,data:{values:e}}),runSQLToServer:async e=>await Ie({url:"/danbooru/run_sql_text",method:"post",timeout:0,data:{sql:e}})},HL={key:0,class:"loading-overlay"},WL={class:"settings-content"},jL={style:{"margin-bottom":"16px"}},VL=["placeholder"],zL={style:{"margin-bottom":"16px"}},qL=["placeholder"],GL=["placeholder"],QL=["placeholder"],YL={class:"data-container"},KL={key:0},JL={key:0},XL={class:"tag-group-container"},ZL={key:0},e$={key:1},t$={style:{display:"flex","align-items":"center"}},n$={key:0},o$=["placeholder"],a$=["placeholder"],s$=["placeholder"],l$=["placeholder"],r$=["onClick"],i$=["onClick"],u$=["onClick"],c$={key:1},d$={class:"tag-group-container"},f$={key:0},p$={key:1},g$={style:{display:"flex","align-items":"center"}},m$={key:0},h$=["placeholder"],v$=["placeholder"],_$=["placeholder"],y$=["placeholder"],b$=["onClick"],w$=["onClick"],x$=["onClick"],T$=xt({__name:"import_danbooru",setup(e,{expose:t}){const{t:o}=wt(),n=_(!1),a=_(""),s=_(""),l=_(""),r=_(""),u=_(""),d=_(""),c=_(""),f=_(""),g=_(""),p=_([]),v=_(-1),b=_(""),x=_(""),k=_(null);_(null);const A=_(null),U=_(!1),w=_(""),O=_(0),W=_(0);function V(){a.value="",s.value="",O.value=0,W.value=0,l.value="",r.value="",u.value="",d.value="",c.value="",f.value="",g.value="",p.value=[],v.value=-1,b.value="",x.value="",U.value=!1}function H(de){V();const M=de.target.files[0];if(M){const G=new FileReader;G.onload=ae=>{ae.target.result.split(";").filter(L=>L.trim()).forEach(L=>{if((L.includes("tag_groups")||L.includes("tag_subgroups"))&&L.includes("p_uuid"))if(L.includes("g_uuid")){u.value=L+";";const B=L.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);B&&(g.value=B[1]);const ne=L.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);ne&&(c.value=ne[1].replace(/''/g,"'"))}else{r.value=L+";";const B=L.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);B&&(f.value=B[1]);const ne=L.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);ne&&(d.value=ne[1].replace(/''/g,"'"))}else L.includes("tag_tags")&&p.value.push(L+";")})},G.readAsText(M)}de.target.value=""}function q(de){const M=de.target.files[0];if(M){const G=new FileReader;G.onload=ae=>{ae.target.result.split(`
`).filter(L=>L.trim()).forEach(L=>{const E=L.split(",");if(E.length>=2){let B,ne,ge,ve;E.length===2?(B=E[0].trim(),ve=E[1].trim(),ne=0,ge=0):E.length>=3&&(B=E[0].trim(),ne=parseInt(E[1].trim())||0,ge=parseInt(E[2].trim())||0,ve=E.slice(3).join(",").trim(),ve=ve.replace(/^"(.*)"$/,"$1"));const S=B.replace(/'/g,"''"),y=ve.replace(/'/g,"''"),N=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${S}', '', '${y}', ${ge}, ${ne});`;p.value.push(N)}})},G.readAsText(M)}de.target.value=""}function he(){A.value.click()}function le(){let de;p.value.length>0&&Y(p.value[0])?de=[...p.value].join(`
`):de=[r.value,u.value,...p.value].join(`
`);const M=new Blob([de],{type:"text/sql"}),G=document.createElement("a");if(G.href=URL.createObjectURL(M),w.value.length<=0){const ae=parseInt(new Date().getTime()/1e3);G.download="export_"+ae+".sql"}else G.download=w.value+".sql";G.click()}function R(de){const M=de.match(/VALUES\s*\([^']*'([^']+)'/),G=de.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:M?M[1].replace(/''/g,"'"):"",desc:G?G[1].replace(/''/g,"'"):""}}function Y(de){return de.includes("danbooru_tag")}function X(de){const M=de.match(/VALUES\s*\(\s*'([^']+)'\s*,\s*'([^']*)'\s*,\s*'([^']*)'\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);return M?{tag:M[1].replace(/''/g,"'"),color_id:M[2],translate:M[3].replace(/''/g,"'"),hot:parseInt(M[4]),aliases:parseInt(M[5])}:{tag:"",color_id:"",translate:"",hot:0,aliases:0}}const z=_(0),Z=_(0);function se(de){const M=p.value[de];if(Y(M)){const G=X(M);b.value=G.tag,x.value=G.translate,z.value=G.hot,Z.value=G.aliases}else{const G=R(M);b.value=G.text,x.value=G.desc}v.value=de}function P(de){const M=b.value.replace(/'/g,"''"),G=x.value.replace(/'/g,"''");if(Y(p.value[de])){const ae=X(p.value[de]),D=parseInt(z.value)||0,ee=parseInt(Z.value)||0;p.value[de]=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${M}', '${ae.color_id}', '${G}', ${D}, ${ee});`}else p.value[de]=p.value[de].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${M}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${G}'`);v.value=-1}function F(){v.value=-1,b.value="",x.value="",z.value=0,Z.value=0}function K(de){p.value.splice(de,1)}function oe(){const de=a.value.replace(/'/g,"''"),M=s.value.replace(/'/g,"''"),G=parseInt(O.value)||0,ae=parseInt(W.value)||0,D=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${de}', '', '${M}', ${G}, ${ae});`;p.value.push(D),a.value="",s.value="",O.value=0,W.value=0}const Q=_(!1),ie=async de=>{Q.value=!0;try{await Oa.runSQLToServer(de).then(M=>{if(M.code!=200){te({type:"warn",str:M.message});return}else re(),te({type:"success",str:"importDialog.successImport"})}).catch(M=>{console.error(M),te({type:"warn",str:"importDialog.importFail"})})}catch(M){console.error(M),te({type:"warn",str:"importDialog.importFail"})}finally{Q.value=!1}},re=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ye=async()=>{if(p.value.length>0&&Y(p.value[0])){const de=[...p.value];await ie(de)}else if(U.value){if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}const de=[...p.value];await ie(de)}else{if(r.value.length<=0||u.value.length<=0){te({type:"warn",str:"importDialog.pleaseFullRequest"});return}const de=[r.value,u.value,...p.value];await ie(de)}};return Ze(r,(de,M)=>{var D,ee;if(!de||de===M)return;const G=(D=de.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:D[1],ae=(ee=M==null?void 0:M.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:ee[1];G&&ae&&u.value&&(u.value=u.value.replace(new RegExp(`'${ae}'`,"g"),`'${G}'`))}),Ze(u,(de,M)=>{var D,ee;if(!de||de===M)return;const G=(D=de.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:D[1],ae=(ee=M==null?void 0:M.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:ee[1];G&&ae&&p.value.length>0&&(p.value=p.value.map(L=>L.replace(new RegExp(`'${ae}'`,"g"),`'${G}'`)))}),t({open:()=>{n.value=!0}}),(de,M)=>(T(),C(Oe,null,[Q.value?(T(),C("div",HL,[...M[19]||(M[19]=[i("div",{class:"loading-spinner"},null,-1)])])):me("",!0),ze(Es,{modelValue:n.value,"onUpdate:modelValue":M[18]||(M[18]=G=>n.value=G),title:m(o)("danbooruManager.importBatchTitle")},{footer:ht(()=>[i("button",{onClick:M[17]||(M[17]=G=>n.value=!1)},h(m(o)("promptBox.settings.close")),1),i("button",{onClick:ye},h(m(o)("importDialog.sure")),1)]),default:ht(()=>[i("div",WL,[i("div",jL,[i("button",{onClick:V,class:"upload-btn"},h(m(o)("importDialog.cleanAll")),1),i("button",{style:{"margin-left":"10px"},onClick:le},h(m(o)("importDialog.dumpSQL")),1),Te(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":M[0]||(M[0]=G=>w.value=G),placeholder:m(o)("importDialog.settingOutputName")},null,8,VL),[[Ae,w.value]]),i("input",{type:"file",ref_key:"fileInput",ref:k,onChange:H,accept:".sql",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"danbooruTxtFileInput",ref:A,onChange:q,accept:".txt,.csv",style:{display:"none"}},null,544)]),i("div",zL,[Te(i("input",{"onUpdate:modelValue":M[1]||(M[1]=G=>a.value=G),placeholder:"Tag"},null,512),[[Ae,a.value]]),Te(i("input",{"onUpdate:modelValue":M[2]||(M[2]=G=>s.value=G),placeholder:m(o)("importDialog.translater")},null,8,qL),[[Ae,s.value]]),Te(i("input",{"onUpdate:modelValue":M[3]||(M[3]=G=>O.value=G),placeholder:m(o)("danbooruManager.hot"),type:"number"},null,8,GL),[[Ae,O.value]]),Te(i("input",{"onUpdate:modelValue":M[4]||(M[4]=G=>W.value=G),placeholder:m(o)("danbooruManager.aliases"),type:"number"},null,8,QL),[[Ae,W.value]]),i("button",{onClick:oe},h(m(o)("importDialog.add")),1),i("button",{style:{"margin-left":"10px"},onClick:he,class:"upload-btn"},h(m(o)("danbooruManager.import")),1)]),i("div",YL,[r.value?(T(),C("div",KL,[i("h3",null,h(R(r.value).text),1),u.value?(T(),C("div",JL,[i("h4",null,h(R(u.value).text),1),i("div",XL,[(T(!0),C(Oe,null,je(p.value,(G,ae)=>(T(),C("div",{key:ae,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Y(G)?(T(),C("p",ZL,h(X(G).tag)+" - "+h(X(G).translate)+" ("+h(m(o)("danbooruManager.hot"))+": "+h(X(G).hot)+", "+h(m(o)("danbooruManager.aliases"))+": "+h(X(G).aliases)+")",1)):(T(),C("p",e$,h(R(G).text)+" - "+h(R(G).desc),1)),i("div",t$,[v.value===ae?(T(),C("div",n$,[Y(G)?Te((T(),C("input",{key:0,"onUpdate:modelValue":M[5]||(M[5]=D=>b.value=D),placeholder:"Tag"},null,512)),[[Ae,b.value]]):Te((T(),C("input",{key:1,"onUpdate:modelValue":M[6]||(M[6]=D=>b.value=D),placeholder:"Tag"},null,512)),[[Ae,b.value]]),Y(G)?Te((T(),C("input",{key:2,"onUpdate:modelValue":M[7]||(M[7]=D=>x.value=D),placeholder:m(o)("importDialog.translate")},null,8,o$)),[[Ae,x.value]]):Te((T(),C("input",{key:3,"onUpdate:modelValue":M[8]||(M[8]=D=>x.value=D),placeholder:m(o)("importDialog.translater")},null,8,a$)),[[Ae,x.value]]),Y(G)?Te((T(),C("input",{key:4,"onUpdate:modelValue":M[9]||(M[9]=D=>z.value=D),placeholder:m(o)("danbooruManager.hot"),type:"number"},null,8,s$)),[[Ae,z.value]]):me("",!0),Y(G)?Te((T(),C("input",{key:5,"onUpdate:modelValue":M[10]||(M[10]=D=>Z.value=D),placeholder:m(o)("danbooruManager.aliases"),type:"number"},null,8,l$)),[[Ae,Z.value]]):me("",!0),i("button",{onClick:D=>P(ae)},h(m(o)("importDialog.sureYes")),9,r$),i("button",{style:{"margin-left":"10px"},onClick:F},h(m(o)("importDialog.cancel")),1)])):(T(),C("button",{key:1,onClick:D=>se(ae)},h(m(o)("importDialog.edit")),9,i$)),i("button",{style:{"margin-left":"10px"},onClick:D=>K(ae)},h(m(o)("importDialog.delete")),9,u$)])]))),128))])])):me("",!0)])):p.value.length>0?(T(),C("div",c$,[i("h3",null,h(m(o)("danbooruManager.importTitle")),1),i("div",d$,[(T(!0),C(Oe,null,je(p.value,(G,ae)=>(T(),C("div",{key:ae,style:{display:"flex","flex-direction":"column","align-items":"center"}},[Y(G)?(T(),C("p",f$,h(X(G).tag)+" - "+h(X(G).translate)+" (热度: "+h(X(G).hot)+", 别名: "+h(X(G).aliases)+")",1)):(T(),C("p",p$,h(R(G).text)+" - "+h(R(G).desc),1)),i("div",g$,[v.value===ae?(T(),C("div",m$,[Y(G)?Te((T(),C("input",{key:0,"onUpdate:modelValue":M[11]||(M[11]=D=>b.value=D),placeholder:"Tag"},null,512)),[[Ae,b.value]]):Te((T(),C("input",{key:1,"onUpdate:modelValue":M[12]||(M[12]=D=>b.value=D),placeholder:"Tag"},null,512)),[[Ae,b.value]]),Y(G)?Te((T(),C("input",{key:2,"onUpdate:modelValue":M[13]||(M[13]=D=>x.value=D),placeholder:m(o)("importDialog.translater")},null,8,h$)),[[Ae,x.value]]):Te((T(),C("input",{key:3,"onUpdate:modelValue":M[14]||(M[14]=D=>x.value=D),placeholder:m(o)("importDialog.translater")},null,8,v$)),[[Ae,x.value]]),Y(G)?Te((T(),C("input",{key:4,"onUpdate:modelValue":M[15]||(M[15]=D=>z.value=D),placeholder:m(o)("danbooruManager.hot"),type:"number"},null,8,_$)),[[Ae,z.value]]):me("",!0),Y(G)?Te((T(),C("input",{key:5,"onUpdate:modelValue":M[16]||(M[16]=D=>Z.value=D),placeholder:m(o)("danbooruManager.aliases"),type:"number"},null,8,y$)),[[Ae,Z.value]]):me("",!0),i("button",{onClick:D=>P(ae)},h(m(o)("importDialog.sureYes")),9,b$),i("button",{style:{"margin-left":"10px"},onClick:F},h(m(o)("importDialog.cancel")),1)])):(T(),C("button",{key:1,onClick:D=>se(ae)},h(m(o)("importDialog.edit")),9,w$)),i("button",{style:{"margin-left":"10px"},onClick:D=>K(ae)},h(m(o)("importDialog.delete")),9,x$)])]))),128))])])):me("",!0)])])]),_:1},8,["modelValue","title"])],64))}},[["__scopeId","data-v-4dfbaa15"]]),S$={class:"danbooru-manager"},k$={class:"title"},C$={class:"action-bar"},E$={class:"search-box"},L$=["placeholder"],$$=["disabled"],A$={class:"pagination"},I$=["disabled"],M$={class:"page-info"},O$=["disabled"],R$={class:"page-size-control"},N$={key:0,class:"tag-list"},D$={style:{"table-layout":"fixed",overflow:"auto"}},P$={class:"checkbox-column"},F$=["checked"],B$={class:"tag-column"},U$={class:"translate-column"},H$={class:"color-column"},W$={class:"hot-column"},j$={class:"aliases-column"},V$={class:"control-column"},z$=["value"],q$=["onClick"],G$=["onClick"],Q$={key:1,class:"no-results"},Y$={key:2,class:"weilin-tools-dialog"},K$={class:"weilin-tools-dialog-content"},J$={class:"form-group"},X$=["placeholder"],Z$={class:"form-group"},eA=["placeholder"],tA={class:"form-group"},nA=["value"],oA={class:"form-group"},aA={key:0,class:"form-group"},sA={class:"weilin-tools-dialog-actions"},lA={key:3,class:"weilin-tools-dialog"},rA={class:"weilin-tools-dialog-content"},iA={class:"weilin-tools-dialog-actions"},uA={key:4,class:"weilin-tools-dialog"},cA={class:"weilin-tools-dialog-content"},dA={class:"weilin-tools-dialog-actions"},fA={key:5,class:"overlay"},pA=xt({__name:"danbooru_manager",setup(e){const{t}=wt(),o=_(""),n=_([]),a=_(1),s=_(1),l=_(100),r=_(!1),u=_(!1),d=_(!1),c=_(!1),f=_(!1),g=_(null),p=_({tag:"",translate:"",color_id:0,hot:0,aliases:0}),v=[{name:"默认",color:"#888888"},{name:"红色",color:"#FF6666"},{name:"绿色",color:"#66FF66"},{name:"蓝色",color:"#6666FF"},{name:"黄色",color:"#FFFF66"},{name:"紫色",color:"#FF66FF"},{name:"青色",color:"#66FFFF"},{name:"橙色",color:"#FF9966"},{name:"粉色",color:"#FF99CC"},{name:"棕色",color:"#996633"}],b=P=>v[P]?v[P].color:v[0].color;let x=null;const k=()=>{x&&clearTimeout(x),x=setTimeout(()=>{a.value=1,A()},300)},A=async()=>{r.value=!0,le.value=[];try{const P=await Oa.searchDanbooru(o.value,a.value,l.value);P&&P.data?(n.value=P.data.data||[],s.value=P.data.total_pages||1):(n.value=[],s.value=1)}catch(P){console.error("搜索标签失败:",P),te({type:"error",str:t("message.searchFailed")}),n.value=[]}finally{r.value=!1}},U=P=>{P<1||P>s.value||(a.value=P,A())},w=()=>{l.value<10&&(l.value=10),l.value>500&&(l.value=500),a.value=1,le.value=[],A()},O=()=>{f.value=!1,p.value={tag:"",translate:"",color_id:0,hot:0,aliases:0},u.value=!0},W=P=>{f.value=!0,g.value=P,p.value={id:P.id_index,tag:P.tag,translate:P.translate||"",color_id:P.color_id||0,hot:P.hot||0,aliases:P.aliases||0},u.value=!0},V=()=>{u.value=!1},H=async()=>{if(!p.value.tag){te({type:"error",str:t("tagManager.textRequired")});return}try{if(f.value){const P=await Oa.updateDanbooruTag({id:p.value.id,update_data:{tag:p.value.tag,translate:p.value.translate,color_id:p.value.color_id,hot:p.value.hot,aliases:p.value.aliases}});P&&P.code===200?(te({type:"success",str:t("message.editSuccess")}),A()):te({type:"error",str:t("message.editFailed")})}else{const P=await Oa.addDanbooruTag({tag:p.value.tag,translate:p.value.translate,color_id:p.value.color_id,hot:p.value.hot,aliases:p.value.aliases});P&&P.code===200?(te({type:"success",str:t("message.addSuccess")}),A()):te({type:"error",str:t("message.addFailed")})}V()}catch(P){console.error("提交表单失败:",P),te({type:"error",str:f.value?t("message.editFailed"):t("message.addFailed")})}},q=P=>{g.value=P,d.value=!0},he=async()=>{if(!(!g.value||!g.value.id_index))try{const P=await Oa.deleteDanbooruTag(g.value.id_index);P&&P.code===200?(te({type:"success",str:t("message.deleteSuccess")}),A()):te({type:"error",str:t("message.deleteFailed")}),d.value=!1}catch(P){console.error("删除标签失败:",P),te({type:"error",str:t("message.deleteFailed")})}},le=_([]),R=ot(()=>n.value.length>0&&le.value.length===n.value.length),Y=()=>{R.value?le.value=[]:le.value=n.value.map(P=>P.id_index)},X=()=>{le.value.length!==0&&(c.value=!0)},z=async()=>{if(le.value.length!==0){try{const P=await Oa.batchDeleteDanbooruTags(le.value);P&&P.code===200?(te({type:"success",str:`成功删除 ${le.value.length} 个标签`}),le.value=[],A()):te({type:"error",str:"批量删除失败"})}catch(P){console.error("批量删除失败:",P),te({type:"error",str:"批量删除失败"})}c.value=!1}},Z=_(),se=()=>{Z.value.open()};return vt(()=>{A()}),(P,F)=>{var K;return T(),C("div",S$,[i("h2",k$,h(m(t)("danbooruManager.title")),1),i("div",C$,[i("div",E$,[Te(i("input",{"onUpdate:modelValue":F[0]||(F[0]=oe=>o.value=oe),type:"text",placeholder:m(t)("danbooruManager.searchPlaceholder"),onInput:k},null,40,L$),[[Ae,o.value]]),i("button",{class:"search-btn",onClick:A},h(m(t)("tagManager.search")),1)]),i("button",{class:"add-btn",onClick:O},h(m(t)("danbooruManager.add")),1),i("button",{class:"add-btn",onClick:se},h(m(t)("tagManager.importDanbooru")),1),i("button",{class:Ee(["batch-delete-btn",{disabled:le.value.length===0}]),disabled:le.value.length===0,onClick:X},h(m(t)("tagManager.hasDeleteAction"))+" ("+h(le.value.length)+") ",11,$$)]),i("div",A$,[i("button",{disabled:a.value<=1,onClick:F[1]||(F[1]=oe=>U(a.value-1)),class:"page-btn"},h(m(t)("loraManager.prevPage")),9,I$),i("span",M$,h(a.value)+" / "+h(s.value),1),i("button",{disabled:a.value>=s.value,onClick:F[2]||(F[2]=oe=>U(a.value+1)),class:"page-btn"},h(m(t)("loraManager.nextPage")),9,O$),i("div",R$,[i("label",null,h(m(t)("danbooruManager.pageShow")),1),Te(i("input",{"onUpdate:modelValue":F[3]||(F[3]=oe=>l.value=oe),type:"number",min:"10",max:"500",onChange:w,class:"page-size-input"},null,544),[[Ae,l.value,void 0,{number:!0}]]),i("span",null,h(m(t)("danbooruManager.pageLimit")),1)])]),n.value.length>0?(T(),C("div",N$,[i("table",D$,[i("thead",null,[i("tr",null,[i("th",P$,[i("input",{type:"checkbox",checked:R.value,onChange:Y},null,40,F$)]),F[12]||(F[12]=i("th",{class:"id-column"},"ID",-1)),i("th",B$,h(m(t)("tagManager.description")),1),i("th",U$,h(m(t)("promptBox.translate")),1),i("th",H$,h(m(t)("tagManager.backgroundColor")),1),i("th",W$,h(m(t)("danbooruManager.hot")),1),i("th",j$,h(m(t)("danbooruManager.aliases")),1),i("th",V$,h(m(t)("danbooruManager.controle")),1)])]),i("tbody",null,[(T(!0),C(Oe,null,je(n.value,oe=>(T(),C("tr",{key:oe.id_index},[i("td",null,[Te(i("input",{type:"checkbox",value:oe.id_index,"onUpdate:modelValue":F[4]||(F[4]=Q=>le.value=Q)},null,8,z$),[[Bt,le.value]])]),i("td",null,h(oe.id_index),1),i("td",null,h(oe.tag),1),i("td",null,h(oe.translate),1),i("td",null,[i("div",{class:"color-box",style:mt({backgroundColor:b(oe.color_id)})},null,4)]),i("td",null,h(oe.hot),1),i("td",null,h(oe.aliases),1),i("td",null,[i("button",{class:"edit-btn",onClick:Q=>W(oe)},h(m(t)("common.edit")),9,q$),i("button",{style:{"margin-left":"10px"},class:"delete-btn",onClick:Q=>q(oe)},h(m(t)("common.delete")),9,G$)])]))),128))])])])):(T(),C("div",Q$,h(m(t)("tagManager.noResults")),1)),u.value?(T(),C("div",Y$,[i("div",K$,[i("h3",null,h(f.value?m(t)("danbooruManager.edit"):m(t)("danbooruManager.add")),1),i("div",J$,[i("label",null,h(m(t)("tagManager.description")),1),Te(i("input",{"onUpdate:modelValue":F[5]||(F[5]=oe=>p.value.tag=oe),type:"text",placeholder:m(t)("tagManager.descriptionPlaceholder")},null,8,X$),[[Ae,p.value.tag]])]),i("div",Z$,[i("label",null,h(m(t)("promptBox.translate")),1),Te(i("input",{"onUpdate:modelValue":F[6]||(F[6]=oe=>p.value.translate=oe),type:"text",placeholder:m(t)("danbooruManager.translatePlaceholder")},null,8,eA),[[Ae,p.value.translate]])]),i("div",tA,[i("label",null,h(m(t)("tagManager.backgroundColor")),1),Te(i("select",{"onUpdate:modelValue":F[7]||(F[7]=oe=>p.value.color_id=oe)},[(T(),C(Oe,null,je(v,(oe,Q)=>i("option",{key:Q,value:Q},h(oe.name),9,nA)),64))],512),[[cn,p.value.color_id]]),i("div",{class:"color-preview",style:mt({backgroundColor:b(p.value.color_id)})},null,4)]),i("div",oA,[F[13]||(F[13]=i("label",null,"Hot",-1)),Te(i("input",{"onUpdate:modelValue":F[8]||(F[8]=oe=>p.value.hot=oe),type:"number",min:"0"},null,512),[[Ae,p.value.hot,void 0,{number:!0}]])]),f.value?me("",!0):(T(),C("div",aA,[F[14]||(F[14]=i("label",null,"Aliases",-1)),Te(i("input",{"onUpdate:modelValue":F[9]||(F[9]=oe=>p.value.aliases=oe),type:"number",min:"0"},null,512),[[Ae,p.value.aliases,void 0,{number:!0}]])])),i("div",sA,[i("button",{onClick:V},h(m(t)("common.cancel")),1),i("button",{onClick:H},h(m(t)("common.save")),1)])])])):me("",!0),d.value?(T(),C("div",lA,[i("div",rA,[i("h3",null,h(m(t)("common.confirmDelete")),1),i("p",null,h(m(t)("tagManager.deleteTagConfirm",{name:((K=g.value)==null?void 0:K.tag)||""})),1),i("div",iA,[i("button",{onClick:F[10]||(F[10]=oe=>d.value=!1)},h(m(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:he},h(m(t)("common.delete")),1)])])])):me("",!0),c.value?(T(),C("div",uA,[i("div",cA,[i("h3",null,h(m(t)("danbooruManager.sureBatchDelete")),1),i("p",null,h(m(t)("danbooruManager.sureBatchDeleteTips1"))+" "+h(le.value.length)+" "+h(m(t)("danbooruManager.sureBatchDeleteTips2")),1),i("div",dA,[i("button",{onClick:F[11]||(F[11]=oe=>c.value=!1)},h(m(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:z},h(m(t)("danbooruManager.sureDelete")),1)])])])):me("",!0),u.value||d.value||c.value?(T(),C("div",fA)):me("",!0),ze(T$,{ref_key:"importDanbooruDialog",ref:Z},null,512)])}}},[["__scopeId","data-v-0c23bf70"]]),gA={id:"weilin_comfyui_tools_prompt_ui_div"},mA={key:10,class:"version-update-notification"},hA={class:"version-update-content"},Ra="weilin_tools_",vA=xt({__name:"App",setup(e){Rl();const t=_(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true");localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")||(localStorage.setItem("weilin_prompt_ui_floatingBallEnabled","true"),t.value=!0);const{t:o}=wt(),n=_(""),a=_("look"),s=_("manager"),l=_("prompt_global"),r=_(!1),u=`${Ra}theme`,d=_(localStorage.getItem(u)==="dark"),c=_(""),f=_(!1),g=_(""),p=_(null),v=`${Ra}version_update_remind`,b=()=>{f.value=!1,p.value&&(clearTimeout(p.value),p.value=null)},x=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank"),b()},k=()=>{localStorage.setItem(v,"false"),b()},A={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:500}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:300,height:600}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}},U=()=>{try{const P=localStorage.getItem(`${Ra}windowStates`);if(P){const F=JSON.parse(P),K={...A};for(const oe in F)oe in K&&(K[oe]={...A[oe],...F[oe],visible:F[oe].is_default_close?!1:F[oe].visible});return K}}catch(P){console.error("Error loading window states:",P)}return{...A}},w=_(U());Ze(w,P=>{try{localStorage.setItem(`${Ra}windowStates`,JSON.stringify(P))}catch(F){console.error("Error saving window states:",F)}},{deep:!0}),vt(()=>{Object.keys(w.value).forEach(P=>{Ue.registerWindow(P)}),O(),window.addEventListener("message",Z),se()});const O=()=>{let P=localStorage.getItem(u);P||(localStorage.setItem(u,"dark"),P="dark",d.value=!0),d.value=P==="dark";const F=document.getElementById("weilin_comfyui_tools_prompt_ui_div");F&&F.setAttribute("data-theme",d.value?"dark":"light")};Dn(()=>{Object.keys(w.value).forEach(P=>{Ue.unregisterWindow(P)}),window.removeEventListener("message",Z),p.value&&(clearTimeout(p.value),p.value=null)});const W=P=>{P==="prompt"&&(n.value=""),w.value[P].visible=!1},V=(P,F)=>{w.value[P]&&(w.value[P].position={...F})},H=(P,F)=>{w.value[P]&&(w.value[P].size={...F})},q=()=>{const P={loraDetail:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}}},F={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:400}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:400,height:800}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}};localStorage.setItem(`${Ra}windowStates`,JSON.stringify(F)),localStorage.setItem(`${Ra}loraDetailState`,JSON.stringify(P)),w.value=U()};(()=>{An.getTranslateSetting().then(P=>{localStorage.setItem("weilin_prompt_ui_translater_setting",P.data)}).catch(P=>{message({type:"warn",str:"message.getTranslaterFail"})})})();const le=_(),R=_(),Y=_(),X=_(),z=_(),Z=P=>{P.data.type==="weilin_prompt_ui_openTagManager"?(s.value="manager",w.value.tag.visible=!0,Ue.setActiveWindow("tag")):P.data.type==="weilin_prompt_ui_openTagManager_prompt"?(s.value="prompt",w.value.tag.visible=!0,Ue.setActiveWindow("tag")):P.data.type==="weilin_prompt_ui_openPromptBox"?(n.value=P.data.id,l.value="prompt",w.value.prompt.visible=!0,r.value=!1,P.data.node==="WeiLinPromptUI"&&(r.value=!0),Qe(()=>{le.value.setPromptText(P.data.prompt)}),Ue.setActiveWindow("prompt")):P.data.type==="weilin_prompt_ui_openLoraManager"?(a.value="look",w.value.lora.visible=!0,Ue.setActiveWindow("lora")):P.data.type==="weilin_prompt_ui_openLoraManager_addLora"?(a.value="addLora",w.value.lora.visible=!0,Qe(()=>{Y.value.openSetSeed(0,"")}),Ue.setActiveWindow("lora")):P.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack"?(a.value="addLora",w.value.lora.visible=!0,Qe(()=>{Y.value.openSetSeed(1,P.data.seed)}),Ue.setActiveWindow("lora")):P.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack_node"?(a.value="addLora",w.value.lora.visible=!0,Qe(()=>{Y.value.openSetSeed(2,P.data.seed)}),Ue.setActiveWindow("lora")):P.data.type==="weilin_prompt_ui_openHistoryManager"?(w.value.history.visible=!0,Ue.setActiveWindow("history")):P.data.type==="weilin_prompt_ui_openAiWindow"?(w.value.ai_window.visible=!0,Ue.setActiveWindow("ai_window")):P.data.type==="weilin_prompt_ui_open_node_list_window"?(w.value.node_list_window.visible=!0,Ue.setActiveWindow("node_list_window")):P.data.type==="weilin_prompt_ui_prompt_finish_prompt"?window.postMessage({type:"weilin_prompt_ui_prompt_update_prompt_"+n.value,data:P.data.data},"*"):P.data.type==="weilin_prompt_ui_open_global_prompt_box"?(l.value="prompt_global",n.value="global",w.value.prompt.visible=!0,r.value=!1,Qe(()=>{le.value.setPromptText(c.value)}),Ue.setActiveWindow("prompt")):P.data.type==="weilin_prompt_ui_open_global_tag_manager"?(s.value="manager",w.value.tag.visible=!0,Ue.setActiveWindow("tag")):P.data.type==="weilin_prompt_ui_open_global_lora_manager"?(a.value="look",w.value.lora.visible=!0,Ue.setActiveWindow("lora")):P.data.type==="weilin_prompt_ui_prompt_update_prompt_global"?c.value=P.data.data:P.data.type==="weilin_prompt_ui_floating_ball_setting"?t.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true":P.data.type==="weilin_prompt_ui_restore_window"?q():P.data.type==="weilin_prompt_ui_open_cloud_window"?(w.value.cloud_window.visible=!0,Ue.setActiveWindow("cloud_window")):P.data.type==="weilin_prompt_ui_open_node_lora_stack_window"?(w.value.lora_stack_window.visible=!0,Qe(()=>{R.value.initLoraStack(P.data.prompt,P.data.seed)}),Ue.setActiveWindow("lora_stack_window")):P.data.type==="weilin_prompt_ui_openLoraDetail"?X.value.open({name:P.data.lora}):P.data.type==="weilin_prompt_ui_open_danbooru_manager_window"?(w.value.danbooru_manager_window.visible=!0,Ue.setActiveWindow("danbooru_manager_window")):P.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_get_template_"+n.value,data:P.data.data},"*"):P.data.type==="weilin_prompt_ui_get_template_response"?n.value===P.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response",data:P.data.data},"*"):P.data.type==="weilin_prompt_ui_prompt_inner_update_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_update_template_"+n.value,data:P.data.data},"*"):P.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"?window.postMessage({type:"weilin_prompt_ui_get_template_go_random_"+n.value,data:P.data.data},"*"):P.data.type==="weilin_prompt_ui_get_template_go_random_response"&&n.value===P.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response",data:P.data.data},"*")},se=async()=>{try{if(localStorage.getItem(v)==="false"){console.info("WeiLin-Comfyui-Tools 版本更新提醒已禁用");return}const F=await fetch("https://raw.githubusercontent.com/weilin9999/WeiLin-Comfyui-Tools/refs/heads/main/src/src/utils/version.js");if(!F.ok){console.error("获取版本信息失败:",F.status);return}const oe=(await F.text()).match(/export const version = "([^"]+)"/);if(oe&&oe[1]){const Q=oe[1];console.info(`WeiLin-Comfyui-Tools GitHub版本： ${Q}`),Q!==vo&&(g.value=`WeiLin-Comfyui-Tools 发现新版本 ${Q}，当前版本 ${vo}`,f.value=!0,p.value&&clearTimeout(p.value),p.value=setTimeout(()=>{f.value=!1,p.value=null},1e4),console.info(`WeiLin-Comfyui-Tools 发现新版本 ${Q}，当前版本 ${vo} GitHub链接：https://github.com/weilin9999/WeiLin-Comfyui-Tools`))}}catch(P){console.error("WeiLin-Comfyui-Tools 检查更新失败:",P)}};return(P,F)=>(T(),C("div",gA,[w.value.prompt.visible?(T(),yt(xn,{key:0,name:"promptBox",title:l.value==="prompt"?m(o)("promptBox.windowTitle"):m(o)("promptBox.windowTitleGlobal"),position:w.value.prompt.position,size:w.value.prompt.size,"z-index":m(Ue).getZIndex("prompt"),"onUpdate:position":F[0]||(F[0]=K=>V("prompt",K)),"onUpdate:size":F[1]||(F[1]=K=>H("prompt",K)),onActive:F[2]||(F[2]=K=>m(Ue).setActiveWindow("prompt")),onClose:F[3]||(F[3]=K=>W("prompt"))},{default:ht(()=>[ze(NC,{promptManager:l.value,hasPromptLoraStack:r.value,ref_key:"promptBoxRef",ref:le},null,8,["promptManager","hasPromptLoraStack"])]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.tag.visible?(T(),yt(xn,{key:1,name:"tagManager",title:m(o)("tagManager.windowTitle"),position:w.value.tag.position,size:w.value.tag.size,"z-index":m(Ue).getZIndex("tag"),"onUpdate:position":F[4]||(F[4]=K=>V("tag",K)),"onUpdate:size":F[5]||(F[5]=K=>H("tag",K)),onActive:F[6]||(F[6]=K=>m(Ue).setActiveWindow("tag")),onClose:F[7]||(F[7]=K=>W("tag"))},{default:ht(()=>[ze(Dg,{tagManager:s.value},null,8,["tagManager"])]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.lora.visible?(T(),yt(xn,{key:2,name:"loraManager",title:m(o)("loraManager.windowTitle"),position:w.value.lora.position,size:w.value.lora.size,"z-index":m(Ue).getZIndex("lora"),"onUpdate:position":F[8]||(F[8]=K=>V("lora",K)),"onUpdate:size":F[9]||(F[9]=K=>H("lora",K)),onActive:F[10]||(F[10]=K=>m(Ue).setActiveWindow("lora")),onClose:F[11]||(F[11]=K=>W("lora"))},{default:ht(()=>[ze(zg,{loraManager:a.value,ref_key:"loraManagerRef",ref:Y},null,8,["loraManager"])]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.history.visible?(T(),yt(xn,{key:3,name:"historyManager",title:m(o)("history.windowTitle"),position:w.value.history.position,size:w.value.history.size,"z-index":m(Ue).getZIndex("history"),"onUpdate:position":F[12]||(F[12]=K=>V("history",K)),"onUpdate:size":F[13]||(F[13]=K=>H("history",K)),onActive:F[14]||(F[14]=K=>m(Ue).setActiveWindow("history")),onClose:F[15]||(F[15]=K=>W("history"))},{default:ht(()=>[ze(LE)]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.ai_window.visible?(T(),yt(xn,{key:4,name:"aiWindow",title:m(o)("aiWindow.windowTitle"),position:w.value.ai_window.position,size:w.value.ai_window.size,"z-index":m(Ue).getZIndex("ai_window"),"onUpdate:position":F[16]||(F[16]=K=>V("ai_window",K)),"onUpdate:size":F[17]||(F[17]=K=>H("ai_window",K)),onActive:F[18]||(F[18]=K=>m(Ue).setActiveWindow("ai_window")),onClose:F[19]||(F[19]=K=>W("ai_window"))},{default:ht(()=>[ze(ZE)]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.node_list_window.visible?(T(),yt(xn,{key:5,name:"nodeListWindow",title:m(o)("nodeListWindow.windowTitle"),position:w.value.node_list_window.position,size:w.value.node_list_window.size,"z-index":m(Ue).getZIndex("node_list_window"),"onUpdate:position":F[20]||(F[20]=K=>V("node_list_window",K)),"onUpdate:size":F[21]||(F[21]=K=>H("node_list_window",K)),onActive:F[22]||(F[22]=K=>m(Ue).setActiveWindow("node_list_window")),onClose:F[23]||(F[23]=K=>W("node_list_window"))},{default:ht(()=>[ze(uL)]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.cloud_window.visible?(T(),yt(xn,{key:6,name:"cloudWindow",title:m(o)("cloudWindow.windowTitle"),position:w.value.cloud_window.position,size:w.value.cloud_window.size,"z-index":m(Ue).getZIndex("cloud_window"),"onUpdate:position":F[24]||(F[24]=K=>V("cloud_window",K)),"onUpdate:size":F[25]||(F[25]=K=>H("cloud_window",K)),onActive:F[26]||(F[26]=K=>m(Ue).setActiveWindow("cloud_window")),onClose:F[27]||(F[27]=K=>W("cloud_window"))},{default:ht(()=>[ze(xL)]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.lora_stack_window.visible?(T(),yt(xn,{key:7,name:"loraStackWindow",title:m(o)("controls.loraStack"),position:w.value.lora_stack_window.position,size:w.value.lora_stack_window.size,"z-index":m(Ue).getZIndex("lora_stack_window"),"onUpdate:position":F[28]||(F[28]=K=>V("lora_stack_window",K)),"onUpdate:size":F[29]||(F[29]=K=>H("lora_stack_window",K)),onActive:F[30]||(F[30]=K=>m(Ue).setActiveWindow("lora_stack_window")),onClose:F[31]||(F[31]=K=>W("lora_stack_window"))},{default:ht(()=>[ze(UL,{ref_key:"loraStackRef",ref:R},null,512)]),_:1},8,["title","position","size","z-index"])):me("",!0),w.value.danbooru_manager_window.visible?(T(),yt(xn,{key:8,name:"DanbooruManagerWindow",title:m(o)("controls.danbooruManager"),position:w.value.danbooru_manager_window.position,size:w.value.danbooru_manager_window.size,"z-index":m(Ue).getZIndex("danbooru_manager_window"),"onUpdate:position":F[32]||(F[32]=K=>V("danbooru_manager_window",K)),"onUpdate:size":F[33]||(F[33]=K=>H("danbooru_manager_window",K)),onActive:F[34]||(F[34]=K=>m(Ue).setActiveWindow("danbooru_manager_window")),onClose:F[35]||(F[35]=K=>W("danbooru_manager_window"))},{default:ht(()=>[ze(pA,{ref_key:"danbooruManagerRef",ref:z},null,512)]),_:1},8,["title","position","size","z-index"])):me("",!0),t.value?(T(),yt(NE,{key:9})):me("",!0),ze(tr,{ref_key:"loraDetailLoraStackRef",ref:X},null,512),f.value?(T(),C("div",mA,[i("div",hA,[i("span",null,h(g.value),1),i("div",{class:"version-update-actions"},[i("button",{class:"goto-github-btn",onClick:x},"前往GitHub"),i("button",{class:"no-remind-btn",onClick:k},"不再提醒"),i("button",{class:"close-version-update",onClick:b},"×")])])])):me("",!0)]))}},[["__scopeId","data-v-a6646a15"]]);var ar={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var _A=ar.exports,Jg;function yA(){return Jg||(Jg=1,(function(e,t){(function(n,a){e.exports=a()})(_A,function(){return(function(){var o={686:(function(s,l,r){r.d(l,{default:function(){return oe}});var u=r(279),d=r.n(u),c=r(370),f=r.n(c),g=r(817),p=r.n(g);function v(Q){try{return document.execCommand(Q)}catch{return!1}}var b=function(ie){var re=p()(ie);return v("cut"),re},x=b;function k(Q){var ie=document.documentElement.getAttribute("dir")==="rtl",re=document.createElement("textarea");re.style.fontSize="12pt",re.style.border="0",re.style.padding="0",re.style.margin="0",re.style.position="absolute",re.style[ie?"right":"left"]="-9999px";var ye=window.pageYOffset||document.documentElement.scrollTop;return re.style.top="".concat(ye,"px"),re.setAttribute("readonly",""),re.value=Q,re}var A=function(ie,re){var ye=k(ie);re.container.appendChild(ye);var de=p()(ye);return v("copy"),ye.remove(),de},U=function(ie){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ye="";return typeof ie=="string"?ye=A(ie,re):ie instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ie==null?void 0:ie.type)?ye=A(ie.value,re):(ye=p()(ie),v("copy")),ye},w=U;function O(Q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(re){return typeof re}:O=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},O(Q)}var W=function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=ie.action,ye=re===void 0?"copy":re,de=ie.container,M=ie.target,G=ie.text;if(ye!=="copy"&&ye!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(M!==void 0)if(M&&O(M)==="object"&&M.nodeType===1){if(ye==="copy"&&M.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ye==="cut"&&(M.hasAttribute("readonly")||M.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(G)return w(G,{container:de});if(M)return ye==="cut"?x(M):w(M,{container:de})},V=W;function H(Q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(re){return typeof re}:H=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},H(Q)}function q(Q,ie){if(!(Q instanceof ie))throw new TypeError("Cannot call a class as a function")}function he(Q,ie){for(var re=0;re<ie.length;re++){var ye=ie[re];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(Q,ye.key,ye)}}function le(Q,ie,re){return ie&&he(Q.prototype,ie),re&&he(Q,re),Q}function R(Q,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(ie&&ie.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),ie&&Y(Q,ie)}function Y(Q,ie){return Y=Object.setPrototypeOf||function(ye,de){return ye.__proto__=de,ye},Y(Q,ie)}function X(Q){var ie=se();return function(){var ye=P(Q),de;if(ie){var M=P(this).constructor;de=Reflect.construct(ye,arguments,M)}else de=ye.apply(this,arguments);return z(this,de)}}function z(Q,ie){return ie&&(H(ie)==="object"||typeof ie=="function")?ie:Z(Q)}function Z(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function P(Q){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(re){return re.__proto__||Object.getPrototypeOf(re)},P(Q)}function F(Q,ie){var re="data-clipboard-".concat(Q);if(ie.hasAttribute(re))return ie.getAttribute(re)}var K=(function(Q){R(re,Q);var ie=X(re);function re(ye,de){var M;return q(this,re),M=ie.call(this),M.resolveOptions(de),M.listenClick(ye),M}return le(re,[{key:"resolveOptions",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof de.action=="function"?de.action:this.defaultAction,this.target=typeof de.target=="function"?de.target:this.defaultTarget,this.text=typeof de.text=="function"?de.text:this.defaultText,this.container=H(de.container)==="object"?de.container:document.body}},{key:"listenClick",value:function(de){var M=this;this.listener=f()(de,"click",function(G){return M.onClick(G)})}},{key:"onClick",value:function(de){var M=de.delegateTarget||de.currentTarget,G=this.action(M)||"copy",ae=V({action:G,container:this.container,target:this.target(M),text:this.text(M)});this.emit(ae?"success":"error",{action:G,text:ae,trigger:M,clearSelection:function(){M&&M.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(de){return F("action",de)}},{key:"defaultTarget",value:function(de){var M=F("target",de);if(M)return document.querySelector(M)}},{key:"defaultText",value:function(de){return F("text",de)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(de){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return w(de,M)}},{key:"cut",value:function(de){return x(de)}},{key:"isSupported",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],M=typeof de=="string"?[de]:de,G=!!document.queryCommandSupported;return M.forEach(function(ae){G=G&&!!document.queryCommandSupported(ae)}),G}}]),re})(d()),oe=K}),828:(function(s){var l=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function u(d,c){for(;d&&d.nodeType!==l;){if(typeof d.matches=="function"&&d.matches(c))return d;d=d.parentNode}}s.exports=u}),438:(function(s,l,r){var u=r(828);function d(g,p,v,b,x){var k=f.apply(this,arguments);return g.addEventListener(v,k,x),{destroy:function(){g.removeEventListener(v,k,x)}}}function c(g,p,v,b,x){return typeof g.addEventListener=="function"?d.apply(null,arguments):typeof v=="function"?d.bind(null,document).apply(null,arguments):(typeof g=="string"&&(g=document.querySelectorAll(g)),Array.prototype.map.call(g,function(k){return d(k,p,v,b,x)}))}function f(g,p,v,b){return function(x){x.delegateTarget=u(x.target,p),x.delegateTarget&&b.call(g,x)}}s.exports=c}),879:(function(s,l){l.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},l.nodeList=function(r){var u=Object.prototype.toString.call(r);return r!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in r&&(r.length===0||l.node(r[0]))},l.string=function(r){return typeof r=="string"||r instanceof String},l.fn=function(r){var u=Object.prototype.toString.call(r);return u==="[object Function]"}}),370:(function(s,l,r){var u=r(879),d=r(438);function c(v,b,x){if(!v&&!b&&!x)throw new Error("Missing required arguments");if(!u.string(b))throw new TypeError("Second argument must be a String");if(!u.fn(x))throw new TypeError("Third argument must be a Function");if(u.node(v))return f(v,b,x);if(u.nodeList(v))return g(v,b,x);if(u.string(v))return p(v,b,x);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(v,b,x){return v.addEventListener(b,x),{destroy:function(){v.removeEventListener(b,x)}}}function g(v,b,x){return Array.prototype.forEach.call(v,function(k){k.addEventListener(b,x)}),{destroy:function(){Array.prototype.forEach.call(v,function(k){k.removeEventListener(b,x)})}}}function p(v,b,x){return d(document.body,v,b,x)}s.exports=c}),817:(function(s){function l(r){var u;if(r.nodeName==="SELECT")r.focus(),u=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var d=r.hasAttribute("readonly");d||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),d||r.removeAttribute("readonly"),u=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var c=window.getSelection(),f=document.createRange();f.selectNodeContents(r),c.removeAllRanges(),c.addRange(f),u=c.toString()}return u}s.exports=l}),279:(function(s){function l(){}l.prototype={on:function(r,u,d){var c=this.e||(this.e={});return(c[r]||(c[r]=[])).push({fn:u,ctx:d}),this},once:function(r,u,d){var c=this;function f(){c.off(r,f),u.apply(d,arguments)}return f._=u,this.on(r,f,d)},emit:function(r){var u=[].slice.call(arguments,1),d=((this.e||(this.e={}))[r]||[]).slice(),c=0,f=d.length;for(c;c<f;c++)d[c].fn.apply(d[c].ctx,u);return this},off:function(r,u){var d=this.e||(this.e={}),c=d[r],f=[];if(c&&u)for(var g=0,p=c.length;g<p;g++)c[g].fn!==u&&c[g].fn._!==u&&f.push(c[g]);return f.length?d[r]=f:delete d[r],this}},s.exports=l,s.exports.TinyEmitter=l})},n={};function a(s){if(n[s])return n[s].exports;var l=n[s]={exports:{}};return o[s](l,l.exports,a),l.exports}return(function(){a.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(l,{a:l}),l}})(),(function(){a.d=function(s,l){for(var r in l)a.o(l,r)&&!a.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:l[r]})}})(),(function(){a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)}})(),a(686)})().default})})(ar)),ar.exports}var bA=yA();const wA=jg(bA),xA=e=>({toClipboard(t,o){return new Promise((n,a)=>{const s=document.createElement("button"),l=new wA(s,{text:()=>t,action:()=>"copy",container:o!==void 0?o:document.body});l.on("success",r=>{l.destroy(),n(r)}),l.on("error",r=>{l.destroy(),a(r)}),document.body.appendChild(s),s.click(),document.body.removeChild(s)})}}),TA=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,SA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,kA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function CA(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){EA(e);return}return t}function EA(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function LA(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const o=e.trim();if(o.length<=9)switch(o.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!kA.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(TA.test(e)||SA.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,CA)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function $A(e,t){if(e==null)return;let o=e;for(let n=0;n<t.length;n++){if(o==null||o[t[n]]==null)return;o=o[t[n]]}return o}function cu(e,t,o){if(o.length===0)return t;const n=o[0];return o.length>1&&(t=cu(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,n)?Number.isInteger(Number(o[1]))?[]:{}:e[n],t,Array.prototype.slice.call(o,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function Xg(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const o={};for(const n in e)o[n]=e[n];return delete o[t[0]],o}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const o={};for(const n in e)o[n]=e[n];return o}return cu(e,Xg(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Zg(e,t){return t.map(o=>o.split(".")).map(o=>[o,$A(e,o)]).filter(o=>o[1]!==void 0).reduce((o,n)=>cu(o,n[1],n[0]),{})}function em(e,t){return t.map(o=>o.split(".")).reduce((o,n)=>Xg(o,n),e)}function tm(e,{storage:t,serializer:o,key:n,debug:a,pick:s,omit:l,beforeHydrate:r,afterHydrate:u},d,c=!0){try{c&&(r==null||r(d));const f=t.getItem(n);if(f){const g=o.deserialize(f),p=s?Zg(g,s):g,v=l?em(p,l):p;e.$patch(v)}c&&(u==null||u(d))}catch(f){a&&console.error("[pinia-plugin-persistedstate]",f)}}function nm(e,{storage:t,serializer:o,key:n,debug:a,pick:s,omit:l}){try{const r=s?Zg(e,s):e,u=l?em(r,l):r,d=o.serialize(u);t.setItem(n,d)}catch(r){a&&console.error("[pinia-plugin-persistedstate]",r)}}function AA(e,t,o){const{pinia:n,store:a,options:{persist:s=o}}=e;if(!s)return;if(!(a.$id in n.state.value)){const u=n._s.get(a.$id.replace("__hot:",""));u&&Promise.resolve().then(()=>u.$persist());return}const r=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(t);a.$hydrate=({runHooks:u=!0}={})=>{r.forEach(d=>{tm(a,d,e,u)})},a.$persist=()=>{r.forEach(u=>{nm(a.$state,u)})},r.forEach(u=>{tm(a,u,e),a.$subscribe((d,c)=>nm(c,u),{detached:!0})})}function IA(e={}){return function(t){AA(t,o=>({key:(e.key?e.key:n=>n)(o.key??t.store.$id),debug:o.debug??e.debug??!1,serializer:o.serializer??e.serializer??{serialize:n=>JSON.stringify(n),deserialize:n=>LA(n)},storage:o.storage??e.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit}),e.auto??!1)}}var MA=IA();const{toClipboard:OA}=xA(),du=document.createElement("div");du.id="weilin_comfyui_tools_prompt_ui_div",document.querySelector("body").appendChild(du);const om=X0();om.use(MA);const sr=Qv(vA);sr.use(om),sr.use(Cs),A2(),sr.config.globalProperties.$copyText=OA,sr.mount(du),console.log("WeiLin Prompt UI is running - version "+vo),console.log("WeiLin 节点插件已运行 - 版本 "+vo)}));
//# sourceMappingURL=main.entry.js.map
