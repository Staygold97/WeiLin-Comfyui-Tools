(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return a=>a in t}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend$2=Object.assign,remove=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn$1=(e,t)=>hasOwnProperty$3.call(e,t),isArray$2=Array.isArray,isMap=e=>toTypeString$1(e)==="[object Map]",isSet=e=>toTypeString$1(e)==="[object Set]",isDate$2=e=>toTypeString$1(e)==="[object Date]",isFunction$2=e=>typeof e=="function",isString$2=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject$3=e=>e!==null&&typeof e=="object",isPromise$1=e=>(isObject$3(e)||isFunction$2(e))&&isFunction$2(e.then)&&isFunction$2(e.catch),objectToString$1=Object.prototype.toString,toTypeString$1=e=>objectToString$1.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$3=e=>toTypeString$1(e)==="[object Object]",isIntegerKey=e=>isString$2(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,a)=>a?a.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},def=(e,t,a,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:a})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t},toNumber=e=>{const t=isString$2(e)?Number(e):NaN;return isNaN(t)?e:t};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$2(e)){const t={};for(let a=0;a<e.length;a++){const n=e[a],o=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(isString$2(e)||isObject$3(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(a=>{if(a){const n=a.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString$2(e))t=e;else if(isArray$2(e))for(let a=0;a<e.length;a++){const n=normalizeClass(e[a]);n&&(t+=n+" ")}else if(isObject$3(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let a=!0;for(let n=0;a&&n<e.length;n++)a=looseEqual(e[n],t[n]);return a}function looseEqual(e,t){if(e===t)return!0;let a=isDate$2(e),n=isDate$2(t);if(a||n)return a&&n?e.getTime()===t.getTime():!1;if(a=isSymbol(e),n=isSymbol(t),a||n)return e===t;if(a=isArray$2(e),n=isArray$2(t),a||n)return a&&n?looseCompareArrays(e,t):!1;if(a=isObject$3(e),n=isObject$3(t),a||n){if(!a||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const s in e){const l=e.hasOwnProperty(s),c=t.hasOwnProperty(s);if(l&&!c||!l&&c||!looseEqual(e[s],t[s]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex(a=>looseEqual(a,t))}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString$1=e=>isString$2(e)?e:e==null?"":isArray$2(e)||isObject$3(e)&&(e.toString===objectToString$1||!isFunction$2(e.toString))?isRef$1(e)?toDisplayString$1(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((a,[n,o],r)=>(a[stringifySymbol(n,r)+" =>"]=o,a),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(a=>stringifySymbol(a))}:isSymbol(t)?stringifySymbol(t):isObject$3(t)&&!isArray$2(t)&&!isPlainObject$3(t)?String(t):t,stringifySymbol=(e,t="")=>{var a;return isSymbol(e)?`Symbol(${(a=e.description)!=null?a:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].pause();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].resume();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].resume()}}run(t){if(this._active){const a=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=a}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){this._active=!1;let a,n;for(a=0,n=this.effects.length;a<n;a++)this.effects[a].stop();for(this.effects.length=0,a=0,n=this.cleanups.length;a<n;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,n=this.scopes.length;a<n;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function effectScope(e){return new EffectScope(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e,t=!1){activeEffectScope&&activeEffectScope.cleanups.push(e)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const t=activeSub,a=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=t,shouldTrack=a,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)removeSub(t);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let t=batchedComputed;for(batchedComputed=void 0;t;){const a=t.next;t.next=void 0,t.flags&=-9,t=a}}let e;for(;batchedSub;){let t=batchedSub;for(batchedSub=void 0;t;){const a=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=a}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,a=e.depsTail,n=a;for(;n;){const o=n.prevDep;n.version===-1?(n===a&&(a=o),removeSub(n),removeDep(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=a}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion))return;e.globalVersion=globalVersion;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!isDirty(e)){e.flags&=-3;return}const a=activeSub,n=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const o=e.fn(e._value);(t.version===0||hasChanged(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{activeSub=a,shouldTrack=n,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:a,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),a.subs===e&&(a.subs=n,!n&&a.computed)){a.computed.flags&=-5;for(let r=a.computed.deps;r;r=r.nextDep)removeSub(r,!0)}!t&&!--a.sc&&a.map&&a.map.delete(a.key)}function removeDep(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const a=activeSub;activeSub=void 0;try{t()}finally{activeSub=a}}}let globalVersion=0;class Link{constructor(t,a){this.sub=t,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==activeSub)a=this.activeLink=new Link(activeSub,this),activeSub.deps?(a.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=a,activeSub.depsTail=a):activeSub.deps=activeSub.depsTail=a,addSub(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const n=a.nextDep;n.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=n),a.prevDep=activeSub.depsTail,a.nextDep=void 0,activeSub.depsTail.nextDep=a,activeSub.depsTail=a,activeSub.deps===a&&(activeSub.deps=n)}return a}trigger(t){this.version++,globalVersion++,this.notify(t)}notify(t){startBatch();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)addSub(n)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,a){if(shouldTrack&&activeSub){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let o=n.get(a);o||(n.set(a,o=new Dep),o.map=n,o.key=a),o.track()}}function trigger(e,t,a,n,o,r){const s=targetMap.get(e);if(!s){globalVersion++;return}const l=c=>{c&&c.trigger()};if(startBatch(),t==="clear")s.forEach(l);else{const c=isArray$2(e),f=c&&isIntegerKey(a);if(c&&a==="length"){const u=Number(n);s.forEach((d,m)=>{(m==="length"||m===ARRAY_ITERATE_KEY||!isSymbol(m)&&m>=u)&&l(d)})}else switch((a!==void 0||s.has(void 0))&&l(s.get(a)),f&&l(s.get(ARRAY_ITERATE_KEY)),t){case"add":c?f&&l(s.get("length")):(l(s.get(ITERATE_KEY)),isMap(e)&&l(s.get(MAP_KEY_ITERATE_KEY)));break;case"delete":c||(l(s.get(ITERATE_KEY)),isMap(e)&&l(s.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&l(s.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(e,t){const a=targetMap.get(e);return a&&a.get(t)}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(t=>isArray$2(t)?reactiveReadArray(t):t))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply$1(this,"every",e,t,void 0,arguments)},filter(e,t){return apply$1(this,"filter",e,t,a=>a.map(toReactive),arguments)},find(e,t){return apply$1(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply$1(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply$1(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply$1(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply$1(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply$1(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply$1(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,a){const n=shallowReadArray(e),o=n[t]();return n!==e&&!isShallow(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.value&&(r.value=a(r.value)),r}),o}const arrayProto=Array.prototype;function apply$1(e,t,a,n,o,r){const s=shallowReadArray(e),l=s!==e&&!isShallow(e),c=s[t];if(c!==arrayProto[t]){const d=c.apply(e,r);return l?toReactive(d):d}let f=a;s!==e&&(l?f=function(d,m){return a.call(this,toReactive(d),m,e)}:a.length>2&&(f=function(d,m){return a.call(this,d,m,e)}));const u=c.call(s,f,n);return l&&o?o(u):u}function reduce(e,t,a,n){const o=shallowReadArray(e);let r=a;return o!==e&&(isShallow(e)?a.length>3&&(r=function(s,l,c){return a.call(this,s,l,c,e)}):r=function(s,l,c){return a.call(this,s,toReactive(l),c,e)}),o[t](r,...n)}function searchProxy(e,t,a){const n=toRaw(e);track(n,"iterate",ARRAY_ITERATE_KEY);const o=n[t](...a);return(o===-1||o===!1)&&isProxy(a[0])?(a[0]=toRaw(a[0]),n[t](...a)):o}function noTracking(e,t,a=[]){pauseTracking(),startBatch();const n=toRaw(e)[t].apply(e,a);return endBatch(),resetTracking(),n}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol));function hasOwnProperty$2(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,n){if(a==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(a==="__v_isReactive")return!o;if(a==="__v_isReadonly")return o;if(a==="__v_isShallow")return r;if(a==="__v_raw")return n===(o?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const s=isArray$2(t);if(!o){let c;if(s&&(c=arrayInstrumentations[a]))return c;if(a==="hasOwnProperty")return hasOwnProperty$2}const l=Reflect.get(t,a,isRef(t)?t:n);return(isSymbol(a)?builtInSymbols.has(a):isNonTrackableKeys(a))||(o||track(t,"get",a),r)?l:isRef(l)?s&&isIntegerKey(a)?l:l.value:isObject$3(l)?o?readonly(l):reactive(l):l}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,a,n,o){let r=t[a];if(!this._isShallow){const c=isReadonly(r);if(!isShallow(n)&&!isReadonly(n)&&(r=toRaw(r),n=toRaw(n)),!isArray$2(t)&&isRef(r)&&!isRef(n))return c?!1:(r.value=n,!0)}const s=isArray$2(t)&&isIntegerKey(a)?Number(a)<t.length:hasOwn$1(t,a),l=Reflect.set(t,a,n,isRef(t)?t:o);return t===toRaw(o)&&(s?hasChanged(n,r)&&trigger(t,"set",a,n):trigger(t,"add",a,n)),l}deleteProperty(t,a){const n=hasOwn$1(t,a);t[a];const o=Reflect.deleteProperty(t,a);return o&&n&&trigger(t,"delete",a,void 0),o}has(t,a){const n=Reflect.has(t,a);return(!isSymbol(a)||!builtInSymbols.has(a))&&track(t,"has",a),n}ownKeys(t){return track(t,"iterate",isArray$2(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,a){return function(...n){const o=this.__v_raw,r=toRaw(o),s=isMap(r),l=e==="entries"||e===Symbol.iterator&&s,c=e==="keys"&&s,f=o[e](...n),u=a?toShallow:t?toReadonly:toReactive;return!t&&track(r,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:d,done:m}=f.next();return m?{value:d,done:m}:{value:l?[u(d[0]),u(d[1])]:u(d),done:m}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,t){const a={get(o){const r=this.__v_raw,s=toRaw(r),l=toRaw(o);e||(hasChanged(o,l)&&track(s,"get",o),track(s,"get",l));const{has:c}=getProto(s),f=t?toShallow:e?toReadonly:toReactive;if(c.call(s,o))return f(r.get(o));if(c.call(s,l))return f(r.get(l));r!==s&&r.get(o)},get size(){const o=this.__v_raw;return!e&&track(toRaw(o),"iterate",ITERATE_KEY),Reflect.get(o,"size",o)},has(o){const r=this.__v_raw,s=toRaw(r),l=toRaw(o);return e||(hasChanged(o,l)&&track(s,"has",o),track(s,"has",l)),o===l?r.has(o):r.has(o)||r.has(l)},forEach(o,r){const s=this,l=s.__v_raw,c=toRaw(l),f=t?toShallow:e?toReadonly:toReactive;return!e&&track(c,"iterate",ITERATE_KEY),l.forEach((u,d)=>o.call(r,f(u),f(d),s))}};return extend$2(a,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(o){!t&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const r=toRaw(this);return getProto(r).has.call(r,o)||(r.add(o),trigger(r,"add",o,o)),this},set(o,r){!t&&!isShallow(r)&&!isReadonly(r)&&(r=toRaw(r));const s=toRaw(this),{has:l,get:c}=getProto(s);let f=l.call(s,o);f||(o=toRaw(o),f=l.call(s,o));const u=c.call(s,o);return s.set(o,r),f?hasChanged(r,u)&&trigger(s,"set",o,r):trigger(s,"add",o,r),this},delete(o){const r=toRaw(this),{has:s,get:l}=getProto(r);let c=s.call(r,o);c||(o=toRaw(o),c=s.call(r,o)),l&&l.call(r,o);const f=r.delete(o);return c&&trigger(r,"delete",o,void 0),f},clear(){const o=toRaw(this),r=o.size!==0,s=o.clear();return r&&trigger(o,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(o=>{a[o]=createIterableMethod(o,e,t)}),a}function createInstrumentationGetter(e,t){const a=createInstrumentations(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(hasOwn$1(a,o)&&o in n?a:n,o,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,a,n,o){if(!isObject$3(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const s=getTargetType(e);if(s===0)return e;const l=new Proxy(e,s===2?n:a);return o.set(e,l),l}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn$1(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject$3(e)?reactive(e):e,toReadonly=e=>isObject$3(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,a){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?t:toRaw(t),this._value=a?t:toReactive(t),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(t){const a=this._rawValue,n=this.__v_isShallow||isShallow(t)||isReadonly(t);t=n?t:toRaw(t),hasChanged(t,a)&&(this._rawValue=t,this._value=n?t:toReactive(t),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,a)=>t==="__v_raw"?e:unref(Reflect.get(e,t,a)),set:(e,t,a,n)=>{const o=e[t];return isRef(o)&&!isRef(a)?(o.value=a,!0):Reflect.set(e,t,a,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const t=isArray$2(e)?new Array(e.length):{};for(const a in e)t[a]=propertyToRef(e,a);return t}class ObjectRefImpl{constructor(t,a,n){this._object=t,this._key=a,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function propertyToRef(e,t,a){const n=e[t];return isRef(n)?n:new ObjectRefImpl(e,t,a)}class ComputedRefImpl{constructor(t,a,n){this.fn=t,this.setter=a,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const t=this.dep.track();return refreshComputed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function computed$1(e,t,a=!1){let n,o;return isFunction$2(e)?n=e:(n=e.get,o=e.set),new ComputedRefImpl(n,o,a)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,a=activeWatcher){if(a){let n=cleanupMap.get(a);n||cleanupMap.set(a,n=[]),n.push(e)}}function watch$1(e,t,a=EMPTY_OBJ){const{immediate:n,deep:o,once:r,scheduler:s,augmentJob:l,call:c}=a,f=y=>o?y:isShallow(y)||o===!1||o===0?traverse(y,1):traverse(y);let u,d,m,g,v=!1,b=!1;if(isRef(e)?(d=()=>e.value,v=isShallow(e)):isReactive(e)?(d=()=>f(e),v=!0):isArray$2(e)?(b=!0,v=e.some(y=>isReactive(y)||isShallow(y)),d=()=>e.map(y=>{if(isRef(y))return y.value;if(isReactive(y))return f(y);if(isFunction$2(y))return c?c(y,2):y()})):isFunction$2(e)?t?d=c?()=>c(e,2):e:d=()=>{if(m){pauseTracking();try{m()}finally{resetTracking()}}const y=activeWatcher;activeWatcher=u;try{return c?c(e,3,[g]):e(g)}finally{activeWatcher=y}}:d=NOOP,t&&o){const y=d,E=o===!0?1/0:o;d=()=>traverse(y(),E)}const $=getCurrentScope(),w=()=>{u.stop(),$&&$.active&&remove($.effects,u)};if(r&&t){const y=t;t=(...E)=>{y(...E),w()}}let C=b?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=y=>{if(!(!(u.flags&1)||!u.dirty&&!y))if(t){const E=u.run();if(o||v||(b?E.some((R,F)=>hasChanged(R,C[F])):hasChanged(E,C))){m&&m();const R=activeWatcher;activeWatcher=u;try{const F=[E,C===INITIAL_WATCHER_VALUE?void 0:b&&C[0]===INITIAL_WATCHER_VALUE?[]:C,g];c?c(t,3,F):t(...F),C=E}finally{activeWatcher=R}}}else u.run()};return l&&l(P),u=new ReactiveEffect(d),u.scheduler=s?()=>s(P,!1):P,g=y=>onWatcherCleanup(y,!1,u),m=u.onStop=()=>{const y=cleanupMap.get(u);if(y){if(c)c(y,4);else for(const E of y)E();cleanupMap.delete(u)}},t?n?P(!0):C=u.run():s?s(P.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function traverse(e,t=1/0,a){if(t<=0||!isObject$3(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,isRef(e))traverse(e.value,t,a);else if(isArray$2(e))for(let n=0;n<e.length;n++)traverse(e[n],t,a);else if(isSet(e)||isMap(e))e.forEach(n=>{traverse(n,t,a)});else if(isPlainObject$3(e)){for(const n in e)traverse(e[n],t,a);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&traverse(e[n],t,a)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const a=stack.length?stack[stack.length-1].component:null,n=a&&a.appContext.config.warnHandler,o=getComponentTrace();if(n)callWithErrorHandling(n,a,11,[e+t.map(r=>{var s,l;return(l=(s=r.toString)==null?void 0:s.call(r))!=null?l:JSON.stringify(r)}).join(""),a&&a.proxy,o.map(({vnode:r})=>`at <${formatComponentName(a,r.type)}>`).join(`
`),o]);else{const r=[`[Vue warn]: ${e}`,...t];o.length&&r.push(`
`,...formatTrace(o)),console.warn(...r)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const a=t[0];a&&a.vnode===e?a.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function formatTrace(e){const t=[];return e.forEach((a,n)=>{t.push(...n===0?[]:[`
`],...formatTraceEntry(a))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const a=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,o=` at <${formatComponentName(e.component,e.type,n)}`,r=">"+a;return e.props?[o,...formatProps(e.props),r]:[o+r]}function formatProps(e){const t=[],a=Object.keys(e);return a.slice(0,3).forEach(n=>{t.push(...formatProp(n,e[n]))}),a.length>3&&t.push(" ..."),t}function formatProp(e,t,a){return isString$2(t)?(t=JSON.stringify(t),a?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?a?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),a?t:[`${e}=Ref<`,t,">"]):isFunction$2(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),a?t:[`${e}=`,t])}function callWithErrorHandling(e,t,a,n){try{return n?e(...n):e()}catch(o){handleError(o,t,a)}}function callWithAsyncErrorHandling(e,t,a,n){if(isFunction$2(e)){const o=callWithErrorHandling(e,t,a,n);return o&&isPromise$1(o)&&o.catch(r=>{handleError(r,t,a)}),o}if(isArray$2(e)){const o=[];for(let r=0;r<e.length;r++)o.push(callWithAsyncErrorHandling(e[r],t,a,n));return o}}function handleError(e,t,a,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||EMPTY_OBJ;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${a}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,c,f)===!1)return}l=l.parent}if(r){pauseTracking(),callWithErrorHandling(r,null,10,[e,c,f]),resetTracking();return}}logError(e,a,o,n,s)}function logError(e,t,a,n=!0,o=!1){if(o)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,a=queue.length;for(;t<a;){const n=t+a>>>1,o=queue[n],r=getId(o);r<e||r===e&&o.flags&2?t=n+1:a=n}return t}function queueJob(e){if(!(e.flags&1)){const t=getId(e),a=queue[queue.length-1];!a||!(e.flags&2)&&t>=getId(a)?queue.push(e):queue.splice(findInsertionIndex(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray$2(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,a=flushIndex+1){for(;a<queue.length;a++){const n=queue[a];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;queue.splice(a,1),a--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((a,n)=>getId(a)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const a=activePostFlushCbs[postFlushIndex];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),callWithErrorHandling(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&(t.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,a){if(!t||e._n)return e;const n=(...o)=>{n._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(t);let s;try{s=e(...o)}finally{setCurrentRenderingInstance(r),n._d&&setBlockTracking(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function withDirectives(e,t){if(currentRenderingInstance===null)return e;const a=getComponentPublicInstance(currentRenderingInstance),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,s,l,c=EMPTY_OBJ]=t[o];r&&(isFunction$2(r)&&(r={mounted:r,updated:r}),r.deep&&traverse(s),n.push({dir:r,instance:a,value:s,oldValue:void 0,arg:l,modifiers:c}))}return e}function invokeDirectiveHook(e,t,a,n){const o=e.dirs,r=t&&t.dirs;for(let s=0;s<o.length;s++){const l=o[s];r&&(l.oldValue=r[s].value);let c=l.dir[n];c&&(pauseTracking(),callWithAsyncErrorHandling(c,a,8,[e.el,l,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTeleportDeferred=e=>e&&(e.defer||e.defer===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,isTargetMathML=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,resolveTarget=(e,t)=>{const a=e&&e.to;return isString$2(a)?t?t(a):null:a},TeleportImpl={name:"Teleport",__isTeleport:!0,process(e,t,a,n,o,r,s,l,c,f){const{mc:u,pc:d,pbc:m,o:{insert:g,querySelector:v,createText:b,createComment:$}}=f,w=isTeleportDisabled(t.props);let{shapeFlag:C,children:P,dynamicChildren:y}=t;if(e==null){const E=t.el=b(""),R=t.anchor=b("");g(E,a,n),g(R,a,n);const F=(j,fe)=>{C&16&&(o&&o.isCE&&(o.ce._teleportTarget=j),u(P,j,fe,o,r,s,l,c))},H=()=>{const j=t.target=resolveTarget(t.props,v),fe=prepareAnchor(j,t,b,g);j&&(s!=="svg"&&isTargetSVG(j)?s="svg":s!=="mathml"&&isTargetMathML(j)&&(s="mathml"),w||(F(j,fe),updateCssVars(t,!1)))};w&&(F(a,R),updateCssVars(t,!0)),isTeleportDeferred(t.props)?queuePostRenderEffect(()=>{H(),t.el.__isMounted=!0},r):H()}else{if(isTeleportDeferred(t.props)&&!e.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(e,t,a,n,o,r,s,l,c,f),delete e.el.__isMounted},r);return}t.el=e.el,t.targetStart=e.targetStart;const E=t.anchor=e.anchor,R=t.target=e.target,F=t.targetAnchor=e.targetAnchor,H=isTeleportDisabled(e.props),j=H?a:R,fe=H?E:F;if(s==="svg"||isTargetSVG(R)?s="svg":(s==="mathml"||isTargetMathML(R))&&(s="mathml"),y?(m(e.dynamicChildren,y,j,o,r,s,l),traverseStaticChildren(e,t,!0)):c||d(e,t,j,fe,o,r,s,l,!1),w)H?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):moveTeleport(t,a,E,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const oe=t.target=resolveTarget(t.props,v);oe&&moveTeleport(t,oe,null,f,0)}else H&&moveTeleport(t,R,F,f,1);updateCssVars(t,w)}},remove(e,t,a,{um:n,o:{remove:o}},r){const{shapeFlag:s,children:l,anchor:c,targetStart:f,targetAnchor:u,target:d,props:m}=e;if(d&&(o(f),o(u)),r&&o(c),s&16){const g=r||!isTeleportDisabled(m);for(let v=0;v<l.length;v++){const b=l[v];n(b,t,a,g,!!b.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,a,{o:{insert:n},m:o},r=2){r===0&&n(e.targetAnchor,t,a);const{el:s,anchor:l,shapeFlag:c,children:f,props:u}=e,d=r===2;if(d&&n(s,t,a),(!d||isTeleportDisabled(u))&&c&16)for(let m=0;m<f.length;m++)o(f[m],t,a,2);d&&n(l,t,a)}function hydrateTeleport(e,t,a,n,o,r,{o:{nextSibling:s,parentNode:l,querySelector:c,insert:f,createText:u}},d){const m=t.target=resolveTarget(t.props,c);if(m){const g=isTeleportDisabled(t.props),v=m._lpa||m.firstChild;if(t.shapeFlag&16)if(g)t.anchor=d(s(e),t,l(e),a,n,o,r),t.targetStart=v,t.targetAnchor=v&&s(v);else{t.anchor=s(e);let b=v;for(;b;){if(b&&b.nodeType===8){if(b.data==="teleport start anchor")t.targetStart=b;else if(b.data==="teleport anchor"){t.targetAnchor=b,m._lpa=t.targetAnchor&&s(t.targetAnchor);break}}b=s(b)}t.targetAnchor||prepareAnchor(m,t,u,f),d(v&&s(v),t,m,a,n,o,r)}updateCssVars(t,g)}return t.anchor&&s(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(e,t){const a=e.ctx;if(a&&a.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",a.uid),n=n.nextSibling;a.ut()}}function prepareAnchor(e,t,a,n){const o=t.targetStart=a(""),r=t.targetAnchor=a("");return o[TeleportEndKey]=r,e&&(n(o,e),n(r,e)),r}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=e=>{const t=e.subTree;return t.component?recursiveGetSubtree(t.component):t},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:t}){const a=getCurrentInstance(),n=useTransitionState();return()=>{const o=t.default&&getTransitionRawChildren(t.default(),!0);if(!o||!o.length)return;const r=findNonCommentChild(o),s=toRaw(e),{mode:l}=s;if(n.isLeaving)return emptyPlaceholder(r);const c=getInnerChild$1(r);if(!c)return emptyPlaceholder(r);let f=resolveTransitionHooks(c,s,n,a,d=>f=d);c.type!==Comment&&setTransitionHooks(c,f);let u=a.subTree&&getInnerChild$1(a.subTree);if(u&&u.type!==Comment&&!isSameVNodeType(c,u)&&recursiveGetSubtree(a).type!==Comment){let d=resolveTransitionHooks(u,s,n,a);if(setTransitionHooks(u,d),l==="out-in"&&c.type!==Comment)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,a.job.flags&8||a.update(),delete d.afterLeave,u=void 0},emptyPlaceholder(r);l==="in-out"&&c.type!==Comment?d.delayLeave=(m,g,v)=>{const b=getLeavingNodesForType(n,u);b[String(u.key)]=u,m[leaveCbKey]=()=>{g(),m[leaveCbKey]=void 0,delete f.delayedLeave,u=void 0},f.delayedLeave=()=>{v(),delete f.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function findNonCommentChild(e){let t=e[0];if(e.length>1){for(const a of e)if(a.type!==Comment){t=a;break}}return t}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:a}=e;let n=a.get(t.type);return n||(n=Object.create(null),a.set(t.type,n)),n}function resolveTransitionHooks(e,t,a,n,o){const{appear:r,mode:s,persisted:l=!1,onBeforeEnter:c,onEnter:f,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:m,onLeave:g,onAfterLeave:v,onLeaveCancelled:b,onBeforeAppear:$,onAppear:w,onAfterAppear:C,onAppearCancelled:P}=t,y=String(e.key),E=getLeavingNodesForType(a,e),R=(j,fe)=>{j&&callWithAsyncErrorHandling(j,n,9,fe)},F=(j,fe)=>{const oe=fe[1];R(j,fe),isArray$2(j)?j.every(V=>V.length<=1)&&oe():j.length<=1&&oe()},H={mode:s,persisted:l,beforeEnter(j){let fe=c;if(!a.isMounted)if(r)fe=$||c;else return;j[leaveCbKey]&&j[leaveCbKey](!0);const oe=E[y];oe&&isSameVNodeType(e,oe)&&oe.el[leaveCbKey]&&oe.el[leaveCbKey](),R(fe,[j])},enter(j){let fe=f,oe=u,V=d;if(!a.isMounted)if(r)fe=w||f,oe=C||u,V=P||d;else return;let q=!1;const Q=j[enterCbKey$1]=O=>{q||(q=!0,O?R(V,[j]):R(oe,[j]),H.delayedLeave&&H.delayedLeave(),j[enterCbKey$1]=void 0)};fe?F(fe,[j,Q]):Q()},leave(j,fe){const oe=String(e.key);if(j[enterCbKey$1]&&j[enterCbKey$1](!0),a.isUnmounting)return fe();R(m,[j]);let V=!1;const q=j[leaveCbKey]=Q=>{V||(V=!0,fe(),Q?R(b,[j]):R(v,[j]),j[leaveCbKey]=void 0,E[oe]===e&&delete E[oe])};E[oe]=e,g?F(g,[j,q]):q()},clone(j){const fe=resolveTransitionHooks(j,t,a,n,o);return o&&o(fe),fe}};return H}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getInnerChild$1(e){if(!isKeepAlive(e))return isTeleport(e.type)&&e.children?findNonCommentChild(e.children):e;const{shapeFlag:t,children:a}=e;if(a){if(t&16)return a[0];if(t&32&&isFunction$2(a.default))return a.default()}}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,a){let n=[],o=0;for(let r=0;r<e.length;r++){let s=e[r];const l=a==null?s.key:String(a)+String(s.key!=null?s.key:r);s.type===Fragment?(s.patchFlag&128&&o++,n=n.concat(getTransitionRawChildren(s.children,t,l))):(t||s.type!==Comment)&&n.push(l!=null?cloneVNode(s,{key:l}):s)}if(o>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return isFunction$2(e)?extend$2({name:e.name},t,{setup:e}):e}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function setRef(e,t,a,n,o=!1){if(isArray$2(e)){e.forEach((v,b)=>setRef(v,t&&(isArray$2(t)?t[b]:t),a,n,o));return}if(isAsyncWrapper(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&setRef(e,t,a,n.component.subTree);return}const r=n.shapeFlag&4?getComponentPublicInstance(n.component):n.el,s=o?null:r,{i:l,r:c}=e,f=t&&t.r,u=l.refs===EMPTY_OBJ?l.refs={}:l.refs,d=l.setupState,m=toRaw(d),g=d===EMPTY_OBJ?()=>!1:v=>hasOwn$1(m,v);if(f!=null&&f!==c&&(isString$2(f)?(u[f]=null,g(f)&&(d[f]=null)):isRef(f)&&(f.value=null)),isFunction$2(c))callWithErrorHandling(c,l,12,[s,u]);else{const v=isString$2(c),b=isRef(c);if(v||b){const $=()=>{if(e.f){const w=v?g(c)?d[c]:u[c]:c.value;o?isArray$2(w)&&remove(w,r):isArray$2(w)?w.includes(r)||w.push(r):v?(u[c]=[r],g(c)&&(d[c]=u[c])):(c.value=[r],e.k&&(u[e.k]=c.value))}else v?(u[c]=s,g(c)&&(d[c]=s)):b&&(c.value=s,e.k&&(u[e.k]=s))};s?($.id=-1,queuePostRenderEffect($,a)):$()}}}getGlobalThis$1().requestIdleCallback,getGlobalThis$1().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,a=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let o=a;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(injectHook(t,n,a),a){let o=a.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(n,t,a,o),o=o.parent}}function injectToKeepAliveRoot(e,t,a,n){const o=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],o)},a)}function injectHook(e,t,a=currentInstance,n=!1){if(a){const o=a[e]||(a[e]=[]),r=t.__weh||(t.__weh=(...s)=>{pauseTracking();const l=setCurrentInstance(a),c=callWithAsyncErrorHandling(t,a,e,s);return l(),resetTracking(),c});return n?o.unshift(r):o.push(r),r}}const createHook=e=>(t,a=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...n)=>t(...n),a)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(e,t,a=!0,n=!1){const o=currentRenderingInstance||currentInstance;if(o){const r=o.type;{const l=getComponentName(r,!1);if(l&&(l===t||l===camelize(t)||l===capitalize$1(camelize(t))))return r}const s=resolve(o[e]||r[e],t)||resolve(o.appContext[e],t);return!s&&n?r:s}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$1(camelize(t))])}function renderList(e,t,a,n){let o;const r=a,s=isArray$2(e);if(s||isString$2(e)){const l=s&&isReactive(e);let c=!1;l&&(c=!isShallow(e),e=shallowReadArray(e)),o=new Array(e.length);for(let f=0,u=e.length;f<u;f++)o[f]=t(c?toReactive(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r)}else if(isObject$3(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const u=l[c];o[c]=t(e[u],u,c,r)}}else o=[];return o}function renderSlot(e,t,a={},n,o){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return t!=="default"&&(a.name=t),openBlock(),createBlock(Fragment,null,[createVNode("slot",a,n&&n())],64);let r=e[t];r&&r._c&&(r._d=!1),openBlock();const s=r&&ensureValidVNode(r(a)),l=a.key||s&&s.key,c=createBlock(Fragment,{key:(l&&!isSymbol(l)?l:`_${t}`)+(!s&&n?"_fb":"")},s||(n?n():[]),s&&e._===1?64:-2);return!o&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),r&&r._c&&(r._d=!0),c}function ensureValidVNode(e){return e.some(t=>isVNode$1(t)?!(t.type===Comment||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?e:null}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:n,data:o,props:r,accessCache:s,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const g=s[t];if(g!==void 0)switch(g){case 1:return n[t];case 2:return o[t];case 4:return a[t];case 3:return r[t]}else{if(hasSetupBinding(n,t))return s[t]=1,n[t];if(o!==EMPTY_OBJ&&hasOwn$1(o,t))return s[t]=2,o[t];if((f=e.propsOptions[0])&&hasOwn$1(f,t))return s[t]=3,r[t];if(a!==EMPTY_OBJ&&hasOwn$1(a,t))return s[t]=4,a[t];shouldCacheAccess&&(s[t]=0)}}const u=publicPropertiesMap[t];let d,m;if(u)return t==="$attrs"&&track(e.attrs,"get",""),u(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(a!==EMPTY_OBJ&&hasOwn$1(a,t))return s[t]=4,a[t];if(m=c.config.globalProperties,hasOwn$1(m,t))return m[t]},set({_:e},t,a){const{data:n,setupState:o,ctx:r}=e;return hasSetupBinding(o,t)?(o[t]=a,!0):n!==EMPTY_OBJ&&hasOwn$1(n,t)?(n[t]=a,!0):hasOwn$1(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:n,appContext:o,propsOptions:r}},s){let l;return!!a[s]||e!==EMPTY_OBJ&&hasOwn$1(e,s)||hasSetupBinding(t,s)||(l=r[0])&&hasOwn$1(l,s)||hasOwn$1(n,s)||hasOwn$1(publicPropertiesMap,s)||hasOwn$1(o.config.globalProperties,s)},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:hasOwn$1(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function normalizePropsOrEmits(e){return isArray$2(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),a=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:s,watch:l,provide:c,inject:f,created:u,beforeMount:d,mounted:m,beforeUpdate:g,updated:v,activated:b,deactivated:$,beforeDestroy:w,beforeUnmount:C,destroyed:P,unmounted:y,render:E,renderTracked:R,renderTriggered:F,errorCaptured:H,serverPrefetch:j,expose:fe,inheritAttrs:oe,components:V,directives:q,filters:Q}=t;if(f&&resolveInjections(f,n,null),s)for(const ee in s){const A=s[ee];isFunction$2(A)&&(n[ee]=A.bind(a))}if(o){const ee=o.call(a,a);isObject$3(ee)&&(e.data=reactive(ee))}if(shouldCacheAccess=!0,r)for(const ee in r){const A=r[ee],L=isFunction$2(A)?A.bind(a,a):isFunction$2(A.get)?A.get.bind(a,a):NOOP,W=!isFunction$2(A)&&isFunction$2(A.set)?A.set.bind(a):NOOP,ae=computed({get:L,set:W});Object.defineProperty(n,ee,{enumerable:!0,configurable:!0,get:()=>ae.value,set:Y=>ae.value=Y})}if(l)for(const ee in l)createWatcher(l[ee],n,a,ee);if(c){const ee=isFunction$2(c)?c.call(a):c;Reflect.ownKeys(ee).forEach(A=>{provide(A,ee[A])})}u&&callHook$1(u,e,"c");function G(ee,A){isArray$2(A)?A.forEach(L=>ee(L.bind(a))):A&&ee(A.bind(a))}if(G(onBeforeMount,d),G(onMounted,m),G(onBeforeUpdate,g),G(onUpdated,v),G(onActivated,b),G(onDeactivated,$),G(onErrorCaptured,H),G(onRenderTracked,R),G(onRenderTriggered,F),G(onBeforeUnmount,C),G(onUnmounted,y),G(onServerPrefetch,j),isArray$2(fe))if(fe.length){const ee=e.exposed||(e.exposed={});fe.forEach(A=>{Object.defineProperty(ee,A,{get:()=>a[A],set:L=>a[A]=L})})}else e.exposed||(e.exposed={});E&&e.render===NOOP&&(e.render=E),oe!=null&&(e.inheritAttrs=oe),V&&(e.components=V),q&&(e.directives=q),j&&markAsyncBoundary(e)}function resolveInjections(e,t,a=NOOP){isArray$2(e)&&(e=normalizeInject(e));for(const n in e){const o=e[n];let r;isObject$3(o)?"default"in o?r=inject(o.from||n,o.default,!0):r=inject(o.from||n):r=inject(o),isRef(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:s=>r.value=s}):t[n]=r}}function callHook$1(e,t,a){callWithAsyncErrorHandling(isArray$2(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,a)}function createWatcher(e,t,a,n){let o=n.includes(".")?createPathGetter(a,n):()=>a[n];if(isString$2(e)){const r=t[e];isFunction$2(r)&&watch(o,r)}else if(isFunction$2(e))watch(o,e.bind(a));else if(isObject$3(e))if(isArray$2(e))e.forEach(r=>createWatcher(r,t,a,n));else{const r=isFunction$2(e.handler)?e.handler.bind(a):t[e.handler];isFunction$2(r)&&watch(o,r,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:a,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:s}}=e.appContext,l=r.get(t);let c;return l?c=l:!o.length&&!a&&!n?c=t:(c={},o.length&&o.forEach(f=>mergeOptions(c,f,s,!0)),mergeOptions(c,t,s)),isObject$3(t)&&r.set(t,c),c}function mergeOptions(e,t,a,n=!1){const{mixins:o,extends:r}=t;r&&mergeOptions(e,r,a,!0),o&&o.forEach(s=>mergeOptions(e,s,a,!0));for(const s in t)if(!(n&&s==="expose")){const l=internalOptionMergeStrats[s]||a&&a[s];e[s]=l?l(e[s],t[s]):t[s]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$2(isFunction$2(e)?e.call(this,this):e,isFunction$2(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$2(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$2(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$2(e)&&isArray$2(t)?[...new Set([...e,...t])]:extend$2(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const a=extend$2(Object.create(null),e);for(const n in t)a[n]=mergeAsArray(e[n],t[n]);return a}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,o=null){isFunction$2(n)||(n=extend$2({},n)),o!=null&&!isObject$3(o)&&(o=null);const r=createAppContext(),s=new WeakSet,l=[];let c=!1;const f=r.app={_uid:uid$1++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:version$1,get config(){return r.config},set config(u){},use(u,...d){return s.has(u)||(u&&isFunction$2(u.install)?(s.add(u),u.install(f,...d)):isFunction$2(u)&&(s.add(u),u(f,...d))),f},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),f},component(u,d){return d?(r.components[u]=d,f):r.components[u]},directive(u,d){return d?(r.directives[u]=d,f):r.directives[u]},mount(u,d,m){if(!c){const g=f._ceVNode||createVNode(n,o);return g.appContext=r,m===!0?m="svg":m===!1&&(m=void 0),e(g,u,m),c=!0,f._container=u,u.__vue_app__=f,getComponentPublicInstance(g.component)}},onUnmount(u){l.push(u)},unmount(){c&&(callWithAsyncErrorHandling(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(u,d){return r.provides[u]=d,f},runWithContext(u){const d=currentApp;currentApp=f;try{return u()}finally{currentApp=d}}};return f}}let currentApp=null;function provide(e,t){if(currentInstance){let a=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===a&&(a=currentInstance.provides=Object.create(n)),a[e]=t}}function inject(e,t,a=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){const o=currentApp?currentApp._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return a&&isFunction$2(t)?t.call(n&&n.proxy):t}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,a,n=!1){const o={},r=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,o,r);for(const s in e.propsOptions[0])s in o||(o[s]=void 0);a?e.props=n?o:shallowReactive(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function updateProps(e,t,a,n){const{props:o,attrs:r,vnode:{patchFlag:s}}=e,l=toRaw(o),[c]=e.propsOptions;let f=!1;if((n||s>0)&&!(s&16)){if(s&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let m=u[d];if(isEmitListener(e.emitsOptions,m))continue;const g=t[m];if(c)if(hasOwn$1(r,m))g!==r[m]&&(r[m]=g,f=!0);else{const v=camelize(m);o[v]=resolvePropValue(c,l,v,g,e,!1)}else g!==r[m]&&(r[m]=g,f=!0)}}}else{setFullProps(e,t,o,r)&&(f=!0);let u;for(const d in l)(!t||!hasOwn$1(t,d)&&((u=hyphenate(d))===d||!hasOwn$1(t,u)))&&(c?a&&(a[d]!==void 0||a[u]!==void 0)&&(o[d]=resolvePropValue(c,l,d,void 0,e,!0)):delete o[d]);if(r!==l)for(const d in r)(!t||!hasOwn$1(t,d))&&(delete r[d],f=!0)}f&&trigger(e.attrs,"set","")}function setFullProps(e,t,a,n){const[o,r]=e.propsOptions;let s=!1,l;if(t)for(let c in t){if(isReservedProp(c))continue;const f=t[c];let u;o&&hasOwn$1(o,u=camelize(c))?!r||!r.includes(u)?a[u]=f:(l||(l={}))[u]=f:isEmitListener(e.emitsOptions,c)||(!(c in n)||f!==n[c])&&(n[c]=f,s=!0)}if(r){const c=toRaw(a),f=l||EMPTY_OBJ;for(let u=0;u<r.length;u++){const d=r[u];a[d]=resolvePropValue(o,c,d,f[d],e,!hasOwn$1(f,d))}}return s}function resolvePropValue(e,t,a,n,o,r){const s=e[a];if(s!=null){const l=hasOwn$1(s,"default");if(l&&n===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&isFunction$2(c)){const{propsDefaults:f}=o;if(a in f)n=f[a];else{const u=setCurrentInstance(o);n=f[a]=c.call(null,t),u()}}else n=c;o.ce&&o.ce._setProp(a,n)}s[0]&&(r&&!l?n=!1:s[1]&&(n===""||n===hyphenate(a))&&(n=!0))}return n}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,a=!1){const n=a?mixinPropsCache:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,s={},l=[];let c=!1;if(!isFunction$2(e)){const u=d=>{c=!0;const[m,g]=normalizePropsOptions(d,t,!0);extend$2(s,m),g&&l.push(...g)};!a&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!c)return isObject$3(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$2(r))for(let u=0;u<r.length;u++){const d=camelize(r[u]);validatePropName(d)&&(s[d]=EMPTY_OBJ)}else if(r)for(const u in r){const d=camelize(u);if(validatePropName(d)){const m=r[u],g=s[d]=isArray$2(m)||isFunction$2(m)?{type:m}:extend$2({},m),v=g.type;let b=!1,$=!0;if(isArray$2(v))for(let w=0;w<v.length;++w){const C=v[w],P=isFunction$2(C)&&C.name;if(P==="Boolean"){b=!0;break}else P==="String"&&($=!1)}else b=isFunction$2(v)&&v.name==="Boolean";g[0]=b,g[1]=$,(b||hasOwn$1(g,"default"))&&l.push(d)}}const f=[s,l];return isObject$3(e)&&n.set(e,f),f}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$2(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,a)=>{if(t._n)return t;const n=withCtx((...o)=>normalizeSlotValue(t(...o)),a);return n._c=!1,n},normalizeObjectSlots=(e,t,a)=>{const n=e._ctx;for(const o in e){if(isInternalKey(o))continue;const r=e[o];if(isFunction$2(r))t[o]=normalizeSlot(o,r,n);else if(r!=null){const s=normalizeSlotValue(r);t[o]=()=>s}}},normalizeVNodeSlots=(e,t)=>{const a=normalizeSlotValue(t);e.slots.default=()=>a},assignSlots=(e,t,a)=>{for(const n in t)(a||n!=="_")&&(e[n]=t[n])},initSlots=(e,t,a)=>{const n=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const o=t._;o?(assignSlots(n,t,a),a&&def(n,"_",o,!0)):normalizeObjectSlots(t,n)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,a)=>{const{vnode:n,slots:o}=e;let r=!0,s=EMPTY_OBJ;if(n.shapeFlag&32){const l=t._;l?a&&l===1?r=!1:assignSlots(o,t,a):(r=!t.$stable,normalizeObjectSlots(t,o)),s=t}else t&&(normalizeVNodeSlots(e,t),s={default:1});if(r)for(const l in o)!isInternalKey(l)&&s[l]==null&&delete o[l]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const a=getGlobalThis$1();a.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:s,createText:l,createComment:c,setText:f,setElementText:u,parentNode:d,nextSibling:m,setScopeId:g=NOOP,insertStaticContent:v}=e,b=(x,S,I,X=null,ie=null,pe=null,T=void 0,_=null,M=!!S.dynamicChildren)=>{if(x===S)return;x&&!isSameVNodeType(x,S)&&(X=B(x),Y(x,ie,pe,!0),x=null),S.patchFlag===-2&&(M=!1,S.dynamicChildren=null);const{type:U,ref:_e,shapeFlag:me}=S;switch(U){case Text:$(x,S,I,X);break;case Comment:w(x,S,I,X);break;case Static:x==null&&C(S,I,X,T);break;case Fragment:V(x,S,I,X,ie,pe,T,_,M);break;default:me&1?E(x,S,I,X,ie,pe,T,_,M):me&6?q(x,S,I,X,ie,pe,T,_,M):(me&64||me&128)&&U.process(x,S,I,X,ie,pe,T,_,M,D)}_e!=null&&ie&&setRef(_e,x&&x.ref,pe,S||x,!S)},$=(x,S,I,X)=>{if(x==null)n(S.el=l(S.children),I,X);else{const ie=S.el=x.el;S.children!==x.children&&f(ie,S.children)}},w=(x,S,I,X)=>{x==null?n(S.el=c(S.children||""),I,X):S.el=x.el},C=(x,S,I,X)=>{[x.el,x.anchor]=v(x.children,S,I,X,x.el,x.anchor)},P=({el:x,anchor:S},I,X)=>{let ie;for(;x&&x!==S;)ie=m(x),n(x,I,X),x=ie;n(S,I,X)},y=({el:x,anchor:S})=>{let I;for(;x&&x!==S;)I=m(x),o(x),x=I;o(S)},E=(x,S,I,X,ie,pe,T,_,M)=>{S.type==="svg"?T="svg":S.type==="math"&&(T="mathml"),x==null?R(S,I,X,ie,pe,T,_,M):j(x,S,ie,pe,T,_,M)},R=(x,S,I,X,ie,pe,T,_)=>{let M,U;const{props:_e,shapeFlag:me,transition:J,dirs:ce}=x;if(M=x.el=s(x.type,pe,_e&&_e.is,_e),me&8?u(M,x.children):me&16&&H(x.children,M,null,X,ie,resolveChildrenNamespace(x,pe),T,_),ce&&invokeDirectiveHook(x,null,X,"created"),F(M,x,x.scopeId,T,X),_e){for(const xe in _e)xe!=="value"&&!isReservedProp(xe)&&r(M,xe,null,_e[xe],pe,X);"value"in _e&&r(M,"value",null,_e.value,pe),(U=_e.onVnodeBeforeMount)&&invokeVNodeHook(U,X,x)}ce&&invokeDirectiveHook(x,null,X,"beforeMount");const Se=needTransition(ie,J);Se&&J.beforeEnter(M),n(M,S,I),((U=_e&&_e.onVnodeMounted)||Se||ce)&&queuePostRenderEffect(()=>{U&&invokeVNodeHook(U,X,x),Se&&J.enter(M),ce&&invokeDirectiveHook(x,null,X,"mounted")},ie)},F=(x,S,I,X,ie)=>{if(I&&g(x,I),X)for(let pe=0;pe<X.length;pe++)g(x,X[pe]);if(ie){let pe=ie.subTree;if(S===pe||isSuspense(pe.type)&&(pe.ssContent===S||pe.ssFallback===S)){const T=ie.vnode;F(x,T,T.scopeId,T.slotScopeIds,ie.parent)}}},H=(x,S,I,X,ie,pe,T,_,M=0)=>{for(let U=M;U<x.length;U++){const _e=x[U]=_?cloneIfMounted(x[U]):normalizeVNode(x[U]);b(null,_e,S,I,X,ie,pe,T,_)}},j=(x,S,I,X,ie,pe,T)=>{const _=S.el=x.el;let{patchFlag:M,dynamicChildren:U,dirs:_e}=S;M|=x.patchFlag&16;const me=x.props||EMPTY_OBJ,J=S.props||EMPTY_OBJ;let ce;if(I&&toggleRecurse(I,!1),(ce=J.onVnodeBeforeUpdate)&&invokeVNodeHook(ce,I,S,x),_e&&invokeDirectiveHook(S,x,I,"beforeUpdate"),I&&toggleRecurse(I,!0),(me.innerHTML&&J.innerHTML==null||me.textContent&&J.textContent==null)&&u(_,""),U?fe(x.dynamicChildren,U,_,I,X,resolveChildrenNamespace(S,ie),pe):T||A(x,S,_,null,I,X,resolveChildrenNamespace(S,ie),pe,!1),M>0){if(M&16)oe(_,me,J,I,ie);else if(M&2&&me.class!==J.class&&r(_,"class",null,J.class,ie),M&4&&r(_,"style",me.style,J.style,ie),M&8){const Se=S.dynamicProps;for(let xe=0;xe<Se.length;xe++){const Ne=Se[xe],Ce=me[Ne],Me=J[Ne];(Me!==Ce||Ne==="value")&&r(_,Ne,Ce,Me,ie,I)}}M&1&&x.children!==S.children&&u(_,S.children)}else!T&&U==null&&oe(_,me,J,I,ie);((ce=J.onVnodeUpdated)||_e)&&queuePostRenderEffect(()=>{ce&&invokeVNodeHook(ce,I,S,x),_e&&invokeDirectiveHook(S,x,I,"updated")},X)},fe=(x,S,I,X,ie,pe,T)=>{for(let _=0;_<S.length;_++){const M=x[_],U=S[_],_e=M.el&&(M.type===Fragment||!isSameVNodeType(M,U)||M.shapeFlag&70)?d(M.el):I;b(M,U,_e,null,X,ie,pe,T,!0)}},oe=(x,S,I,X,ie)=>{if(S!==I){if(S!==EMPTY_OBJ)for(const pe in S)!isReservedProp(pe)&&!(pe in I)&&r(x,pe,S[pe],null,ie,X);for(const pe in I){if(isReservedProp(pe))continue;const T=I[pe],_=S[pe];T!==_&&pe!=="value"&&r(x,pe,_,T,ie,X)}"value"in I&&r(x,"value",S.value,I.value,ie)}},V=(x,S,I,X,ie,pe,T,_,M)=>{const U=S.el=x?x.el:l(""),_e=S.anchor=x?x.anchor:l("");let{patchFlag:me,dynamicChildren:J,slotScopeIds:ce}=S;ce&&(_=_?_.concat(ce):ce),x==null?(n(U,I,X),n(_e,I,X),H(S.children||[],I,_e,ie,pe,T,_,M)):me>0&&me&64&&J&&x.dynamicChildren?(fe(x.dynamicChildren,J,I,ie,pe,T,_),(S.key!=null||ie&&S===ie.subTree)&&traverseStaticChildren(x,S,!0)):A(x,S,I,_e,ie,pe,T,_,M)},q=(x,S,I,X,ie,pe,T,_,M)=>{S.slotScopeIds=_,x==null?S.shapeFlag&512?ie.ctx.activate(S,I,X,T,M):Q(S,I,X,ie,pe,T,M):O(x,S,M)},Q=(x,S,I,X,ie,pe,T)=>{const _=x.component=createComponentInstance(x,X,ie);if(isKeepAlive(x)&&(_.ctx.renderer=D),setupComponent(_,!1,T),_.asyncDep){if(ie&&ie.registerDep(_,G,T),!x.el){const M=_.subTree=createVNode(Comment);w(null,M,S,I)}}else G(_,x,S,I,ie,pe,T)},O=(x,S,I)=>{const X=S.component=x.component;if(shouldUpdateComponent(x,S,I))if(X.asyncDep&&!X.asyncResolved){ee(X,S,I);return}else X.next=S,X.update();else S.el=x.el,X.vnode=S},G=(x,S,I,X,ie,pe,T)=>{const _=()=>{if(x.isMounted){let{next:me,bu:J,u:ce,parent:Se,vnode:xe}=x;{const We=locateNonHydratedAsyncRoot(x);if(We){me&&(me.el=xe.el,ee(x,me,T)),We.asyncDep.then(()=>{x.isUnmounted||_()});return}}let Ne=me,Ce;toggleRecurse(x,!1),me?(me.el=xe.el,ee(x,me,T)):me=xe,J&&invokeArrayFns(J),(Ce=me.props&&me.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ce,Se,me,xe),toggleRecurse(x,!0);const Me=renderComponentRoot(x),Ie=x.subTree;x.subTree=Me,b(Ie,Me,d(Ie.el),B(Ie),x,ie,pe),me.el=Me.el,Ne===null&&updateHOCHostEl(x,Me.el),ce&&queuePostRenderEffect(ce,ie),(Ce=me.props&&me.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ce,Se,me,xe),ie)}else{let me;const{el:J,props:ce}=S,{bm:Se,m:xe,parent:Ne,root:Ce,type:Me}=x,Ie=isAsyncWrapper(S);toggleRecurse(x,!1),Se&&invokeArrayFns(Se),!Ie&&(me=ce&&ce.onVnodeBeforeMount)&&invokeVNodeHook(me,Ne,S),toggleRecurse(x,!0);{Ce.ce&&Ce.ce._injectChildStyle(Me);const We=x.subTree=renderComponentRoot(x);b(null,We,I,X,x,ie,pe),S.el=We.el}if(xe&&queuePostRenderEffect(xe,ie),!Ie&&(me=ce&&ce.onVnodeMounted)){const We=S;queuePostRenderEffect(()=>invokeVNodeHook(me,Ne,We),ie)}(S.shapeFlag&256||Ne&&isAsyncWrapper(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&x.a&&queuePostRenderEffect(x.a,ie),x.isMounted=!0,S=I=X=null}};x.scope.on();const M=x.effect=new ReactiveEffect(_);x.scope.off();const U=x.update=M.run.bind(M),_e=x.job=M.runIfDirty.bind(M);_e.i=x,_e.id=x.uid,M.scheduler=()=>queueJob(_e),toggleRecurse(x,!0),U()},ee=(x,S,I)=>{S.component=x;const X=x.vnode.props;x.vnode=S,x.next=null,updateProps(x,S.props,X,I),updateSlots(x,S.children,I),pauseTracking(),flushPreFlushCbs(x),resetTracking()},A=(x,S,I,X,ie,pe,T,_,M=!1)=>{const U=x&&x.children,_e=x?x.shapeFlag:0,me=S.children,{patchFlag:J,shapeFlag:ce}=S;if(J>0){if(J&128){W(U,me,I,X,ie,pe,T,_,M);return}else if(J&256){L(U,me,I,X,ie,pe,T,_,M);return}}ce&8?(_e&16&&re(U,ie,pe),me!==U&&u(I,me)):_e&16?ce&16?W(U,me,I,X,ie,pe,T,_,M):re(U,ie,pe,!0):(_e&8&&u(I,""),ce&16&&H(me,I,X,ie,pe,T,_,M))},L=(x,S,I,X,ie,pe,T,_,M)=>{x=x||EMPTY_ARR,S=S||EMPTY_ARR;const U=x.length,_e=S.length,me=Math.min(U,_e);let J;for(J=0;J<me;J++){const ce=S[J]=M?cloneIfMounted(S[J]):normalizeVNode(S[J]);b(x[J],ce,I,null,ie,pe,T,_,M)}U>_e?re(x,ie,pe,!0,!1,me):H(S,I,X,ie,pe,T,_,M,me)},W=(x,S,I,X,ie,pe,T,_,M)=>{let U=0;const _e=S.length;let me=x.length-1,J=_e-1;for(;U<=me&&U<=J;){const ce=x[U],Se=S[U]=M?cloneIfMounted(S[U]):normalizeVNode(S[U]);if(isSameVNodeType(ce,Se))b(ce,Se,I,null,ie,pe,T,_,M);else break;U++}for(;U<=me&&U<=J;){const ce=x[me],Se=S[J]=M?cloneIfMounted(S[J]):normalizeVNode(S[J]);if(isSameVNodeType(ce,Se))b(ce,Se,I,null,ie,pe,T,_,M);else break;me--,J--}if(U>me){if(U<=J){const ce=J+1,Se=ce<_e?S[ce].el:X;for(;U<=J;)b(null,S[U]=M?cloneIfMounted(S[U]):normalizeVNode(S[U]),I,Se,ie,pe,T,_,M),U++}}else if(U>J)for(;U<=me;)Y(x[U],ie,pe,!0),U++;else{const ce=U,Se=U,xe=new Map;for(U=Se;U<=J;U++){const ye=S[U]=M?cloneIfMounted(S[U]):normalizeVNode(S[U]);ye.key!=null&&xe.set(ye.key,U)}let Ne,Ce=0;const Me=J-Se+1;let Ie=!1,We=0;const Te=new Array(Me);for(U=0;U<Me;U++)Te[U]=0;for(U=ce;U<=me;U++){const ye=x[U];if(Ce>=Me){Y(ye,ie,pe,!0);continue}let Le;if(ye.key!=null)Le=xe.get(ye.key);else for(Ne=Se;Ne<=J;Ne++)if(Te[Ne-Se]===0&&isSameVNodeType(ye,S[Ne])){Le=Ne;break}Le===void 0?Y(ye,ie,pe,!0):(Te[Le-Se]=U+1,Le>=We?We=Le:Ie=!0,b(ye,S[Le],I,null,ie,pe,T,_,M),Ce++)}const be=Ie?getSequence(Te):EMPTY_ARR;for(Ne=be.length-1,U=Me-1;U>=0;U--){const ye=Se+U,Le=S[ye],Qe=ye+1<_e?S[ye+1].el:X;Te[U]===0?b(null,Le,I,Qe,ie,pe,T,_,M):Ie&&(Ne<0||U!==be[Ne]?ae(Le,I,Qe,2):Ne--)}}},ae=(x,S,I,X,ie=null)=>{const{el:pe,type:T,transition:_,children:M,shapeFlag:U}=x;if(U&6){ae(x.component.subTree,S,I,X);return}if(U&128){x.suspense.move(S,I,X);return}if(U&64){T.move(x,S,I,D);return}if(T===Fragment){n(pe,S,I);for(let me=0;me<M.length;me++)ae(M[me],S,I,X);n(x.anchor,S,I);return}if(T===Static){P(x,S,I);return}if(X!==2&&U&1&&_)if(X===0)_.beforeEnter(pe),n(pe,S,I),queuePostRenderEffect(()=>_.enter(pe),ie);else{const{leave:me,delayLeave:J,afterLeave:ce}=_,Se=()=>n(pe,S,I),xe=()=>{me(pe,()=>{Se(),ce&&ce()})};J?J(pe,Se,xe):xe()}else n(pe,S,I)},Y=(x,S,I,X=!1,ie=!1)=>{const{type:pe,props:T,ref:_,children:M,dynamicChildren:U,shapeFlag:_e,patchFlag:me,dirs:J,cacheIndex:ce}=x;if(me===-2&&(ie=!1),_!=null&&setRef(_,null,I,x,!0),ce!=null&&(S.renderCache[ce]=void 0),_e&256){S.ctx.deactivate(x);return}const Se=_e&1&&J,xe=!isAsyncWrapper(x);let Ne;if(xe&&(Ne=T&&T.onVnodeBeforeUnmount)&&invokeVNodeHook(Ne,S,x),_e&6)ge(x.component,I,X);else{if(_e&128){x.suspense.unmount(I,X);return}Se&&invokeDirectiveHook(x,null,S,"beforeUnmount"),_e&64?x.type.remove(x,S,I,D,X):U&&!U.hasOnce&&(pe!==Fragment||me>0&&me&64)?re(U,S,I,!1,!0):(pe===Fragment&&me&384||!ie&&_e&16)&&re(M,S,I),X&&ne(x)}(xe&&(Ne=T&&T.onVnodeUnmounted)||Se)&&queuePostRenderEffect(()=>{Ne&&invokeVNodeHook(Ne,S,x),Se&&invokeDirectiveHook(x,null,S,"unmounted")},I)},ne=x=>{const{type:S,el:I,anchor:X,transition:ie}=x;if(S===Fragment){te(I,X);return}if(S===Static){y(x);return}const pe=()=>{o(I),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(x.shapeFlag&1&&ie&&!ie.persisted){const{leave:T,delayLeave:_}=ie,M=()=>T(I,pe);_?_(x.el,pe,M):M()}else pe()},te=(x,S)=>{let I;for(;x!==S;)I=m(x),o(x),x=I;o(S)},ge=(x,S,I)=>{const{bum:X,scope:ie,job:pe,subTree:T,um:_,m:M,a:U}=x;invalidateMount(M),invalidateMount(U),X&&invokeArrayFns(X),ie.stop(),pe&&(pe.flags|=8,Y(T,x,S,I)),_&&queuePostRenderEffect(_,S),queuePostRenderEffect(()=>{x.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},re=(x,S,I,X=!1,ie=!1,pe=0)=>{for(let T=pe;T<x.length;T++)Y(x[T],S,I,X,ie)},B=x=>{if(x.shapeFlag&6)return B(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const S=m(x.anchor||x.el),I=S&&S[TeleportEndKey];return I?m(I):S};let z=!1;const Z=(x,S,I)=>{x==null?S._vnode&&Y(S._vnode,null,null,!0):b(S._vnode||null,x,S,null,null,null,I),S._vnode=x,z||(z=!0,flushPreFlushCbs(),flushPostFlushCbs(),z=!1)},D={p:b,um:Y,m:ae,r:ne,mt:Q,mc:H,pc:A,pbc:fe,n:B,o:e};return{render:Z,hydrate:void 0,createApp:createAppAPI(Z)}}function resolveChildrenNamespace({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function toggleRecurse({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,a=!1){const n=e.children,o=t.children;if(isArray$2(n)&&isArray$2(o))for(let r=0;r<n.length;r++){const s=n[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=cloneIfMounted(o[r]),l.el=s.el),!a&&l.patchFlag!==-2&&traverseStaticChildren(s,l)),l.type===Text&&(l.el=s.el)}}function getSequence(e){const t=e.slice(),a=[0];let n,o,r,s,l;const c=e.length;for(n=0;n<c;n++){const f=e[n];if(f!==0){if(o=a[a.length-1],e[o]<f){t[n]=o,a.push(n);continue}for(r=0,s=a.length-1;r<s;)l=r+s>>1,e[a[l]]<f?r=l+1:s=l;f<e[a[r]]&&(r>0&&(t[n]=a[r-1]),a[r]=n)}}for(r=a.length,s=a[r-1];r-- >0;)a[r]=s,s=t[s];return a}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,a){return doWatch(e,t,a)}function doWatch(e,t,a=EMPTY_OBJ){const{immediate:n,deep:o,flush:r,once:s}=a,l=extend$2({},a),c=t&&n||!t&&r!=="post";let f;if(isInSSRComponentSetup){if(r==="sync"){const g=useSSRContext();f=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=NOOP,g.resume=NOOP,g.pause=NOOP,g}}const u=currentInstance;l.call=(g,v,b)=>callWithAsyncErrorHandling(g,u,v,b);let d=!1;r==="post"?l.scheduler=g=>{queuePostRenderEffect(g,u&&u.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(g,v)=>{v?g():queueJob(g)}),l.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const m=watch$1(e,t,l);return isInSSRComponentSetup&&(f?f.push(m):c&&m()),m}function instanceWatch(e,t,a){const n=this.proxy,o=isString$2(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let r;isFunction$2(t)?r=t:(r=t.handler,a=t);const s=setCurrentInstance(this),l=doWatch(o,r.bind(n),a);return s(),l}function createPathGetter(e,t){const a=t.split(".");return()=>{let n=e;for(let o=0;o<a.length&&n;o++)n=n[a[o]];return n}}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...a){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let o=a;const r=t.startsWith("update:"),s=r&&getModelModifiers(n,t.slice(7));s&&(s.trim&&(o=a.map(u=>isString$2(u)?u.trim():u)),s.number&&(o=a.map(looseToNumber)));let l,c=n[l=toHandlerKey(t)]||n[l=toHandlerKey(camelize(t))];!c&&r&&(c=n[l=toHandlerKey(hyphenate(t))]),c&&callWithAsyncErrorHandling(c,e,6,o);const f=n[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,callWithAsyncErrorHandling(f,e,6,o)}}function normalizeEmitsOptions(e,t,a=!1){const n=t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let s={},l=!1;if(!isFunction$2(e)){const c=f=>{const u=normalizeEmitsOptions(f,t,!0);u&&(l=!0,extend$2(s,u))};!a&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!l?(isObject$3(e)&&n.set(e,null),null):(isArray$2(r)?r.forEach(c=>s[c]=null):extend$2(s,r),isObject$3(e)&&n.set(e,s),s)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$1(e,t[0].toLowerCase()+t.slice(1))||hasOwn$1(e,hyphenate(t))||hasOwn$1(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:a,proxy:n,withProxy:o,propsOptions:[r],slots:s,attrs:l,emit:c,render:f,renderCache:u,props:d,data:m,setupState:g,ctx:v,inheritAttrs:b}=e,$=setCurrentRenderingInstance(e);let w,C;try{if(a.shapeFlag&4){const y=o||n,E=y;w=normalizeVNode(f.call(E,y,u,d,g,m,v)),C=l}else{const y=t;w=normalizeVNode(y.length>1?y(d,{attrs:l,slots:s,emit:c}):y(d,null)),C=t.props?l:getFunctionalFallthrough(l)}}catch(y){blockStack.length=0,handleError(y,e,1),w=createVNode(Comment)}let P=w;if(C&&b!==!1){const y=Object.keys(C),{shapeFlag:E}=P;y.length&&E&7&&(r&&y.some(isModelListener)&&(C=filterModelListeners(C,r)),P=cloneVNode(P,C,!1,!0))}return a.dirs&&(P=cloneVNode(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(a.dirs):a.dirs),a.transition&&setTransitionHooks(P,a.transition),w=P,setCurrentRenderingInstance($),w}const getFunctionalFallthrough=e=>{let t;for(const a in e)(a==="class"||a==="style"||isOn(a))&&((t||(t={}))[a]=e[a]);return t},filterModelListeners=(e,t)=>{const a={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(a[n]=e[n]);return a};function shouldUpdateComponent(e,t,a){const{props:n,children:o,component:r}=e,{props:s,children:l,patchFlag:c}=t,f=r.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&c>=0){if(c&1024)return!0;if(c&16)return n?hasPropsChanged(n,s,f):!!s;if(c&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const m=u[d];if(s[m]!==n[m]&&!isEmitListener(f,m))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===s?!1:n?s?hasPropsChanged(n,s,f):!0:!!s;return!1}function hasPropsChanged(e,t,a){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!isEmitListener(a,r))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},a){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=a,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$2(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,a,n,o,r){return setupBlock(createBaseVNode(e,t,a,n,o,r,!0))}function createBlock(e,t,a,n,o){return setupBlock(createVNode(e,t,a,n,o,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?isString$2(e)||isRef(e)||isFunction$2(e)?{i:currentRenderingInstance,r:e,k:t,f:!!a}:e:null);function createBaseVNode(e,t=null,a=null,n=0,o=null,r=e===Fragment?0:1,s=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return l?(normalizeChildren(c,a),r&128&&e.normalize(c)):a&&(c.shapeFlag|=isString$2(a)?8:16),isBlockTreeEnabled>0&&!s&&currentBlock&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(e,t=null,a=null,n=0,o=null,r=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode$1(e)){const l=cloneVNode(e,t,!0);return a&&normalizeChildren(l,a),isBlockTreeEnabled>0&&!r&&currentBlock&&(l.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=l:currentBlock.push(l)),l.patchFlag=-2,l}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:l,style:c}=t;l&&!isString$2(l)&&(t.class=normalizeClass(l)),isObject$3(c)&&(isProxy(c)&&!isArray$2(c)&&(c=extend$2({},c)),t.style=normalizeStyle(c))}const s=isString$2(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$3(e)?4:isFunction$2(e)?2:0;return createBaseVNode(e,t,a,n,o,s,r,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend$2({},e):e:null}function cloneVNode(e,t,a=!1,n=!1){const{props:o,ref:r,patchFlag:s,children:l,transition:c}=e,f=t?mergeProps(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&normalizeKey(f),ref:t&&t.ref?a&&r?isArray$2(r)?r.concat(normalizeRef(t)):[r,normalizeRef(t)]:normalizeRef(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&setTransitionHooks(u,c.clone(u)),u}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$2(e)?createVNode(Fragment,null,e.slice()):isVNode$1(e)?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let a=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray$2(t))a=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),normalizeChildren(e,o()),o._c&&(o._d=!0));return}else{a=32;const o=t._;!o&&!isInternalObject(t)?t._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$2(t)?(t={default:t,_ctx:currentRenderingInstance},a=32):(t=String(t),n&64?(a=16,t=[createTextVNode(t)]):a=8);e.children=t,e.shapeFlag|=a}function mergeProps(...e){const t={};for(let a=0;a<e.length;a++){const n=e[a];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(o==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(o)){const r=t[o],s=n[o];s&&r!==s&&!(isArray$2(r)&&r.includes(s))&&(t[o]=r?[].concat(r,s):s)}else o!==""&&(t[o]=n[o])}return t}function invokeVNodeHook(e,t,a,n=null){callWithAsyncErrorHandling(e,t,7,[a,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,a){const n=e.type,o=(t?t.appContext:e.appContext)||emptyAppContext,r={uid:uid++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,o),emitsOptions:normalizeEmitsOptions(n,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=emit.bind(null,r),e.ce&&e.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis$1(),t=(a,n)=>{let o;return(o=e[a])||(o=e[a]=[]),o.push(n),r=>{o.length>1?o.forEach(s=>s(r)):o[0](r)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",a=>currentInstance=a),setInSSRSetupState=t("__VUE_SSR_SETTERS__",a=>isInSSRComponentSetup=a)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,a=!1){t&&setInSSRSetupState(t);const{props:n,children:o}=e.vnode,r=isStatefulComponent(e);initProps(e,n,r,t),initSlots(e,o,a);const s=r?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),s}function setupStatefulComponent(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:n}=a;if(n){pauseTracking();const o=e.setupContext=n.length>1?createSetupContext(e):null,r=setCurrentInstance(e),s=callWithErrorHandling(n,e,0,[e.props,o]),l=isPromise$1(s);if(resetTracking(),r(),(l||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),l){if(s.then(unsetCurrentInstance,unsetCurrentInstance),t)return s.then(c=>{handleSetupResult(e,c)}).catch(c=>{handleError(c,e,0)});e.asyncDep=s}else handleSetupResult(e,s)}else finishComponentSetup(e)}function handleSetupResult(e,t,a){isFunction$2(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$3(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,a){const n=e.type;e.render||(e.render=n.render||NOOP);{const o=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),o()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in publicPropertiesMap)return publicPropertiesMap[a](e)},has(t,a){return a in t||a in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction$2(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,a=!1){let n=getComponentName(t);if(!n&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(n=o[1])}if(!n&&e&&e.parent){const o=r=>{for(const s in r)if(r[s]===t)return s};n=o(e.components||e.parent.type.components)||o(e.appContext.components)}return n?classify(n):a?"App":"Anonymous"}function isClassComponent(e){return isFunction$2(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,a){const n=arguments.length;return n===2?isObject$3(t)&&!isArray$2(t)?isVNode$1(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(n>3?a=Array.prototype.slice.call(arguments,2):n===3&&isVNode$1(a)&&(a=[a]),createVNode(e,t,a))}const version$1="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,n)=>{const o=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):a?doc.createElement(e,{is:a}):doc.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,n,o,r){const s=a?a.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),a),!(o===r||!(o=o.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=templateContainer.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,a)}return[s?s.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=e=>(e.displayName="Transition",e.props=TransitionPropsValidators,e),Transition=decorate$1((e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t)),callHook=(e,t=[])=>{isArray$2(e)?e.forEach(a=>a(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray$2(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const V in e)V in DOMTransitionPropsValidators||(t[V]=e[V]);if(e.css===!1)return t;const{name:a="v",type:n,duration:o,enterFromClass:r=`${a}-enter-from`,enterActiveClass:s=`${a}-enter-active`,enterToClass:l=`${a}-enter-to`,appearFromClass:c=r,appearActiveClass:f=s,appearToClass:u=l,leaveFromClass:d=`${a}-leave-from`,leaveActiveClass:m=`${a}-leave-active`,leaveToClass:g=`${a}-leave-to`}=e,v=normalizeDuration(o),b=v&&v[0],$=v&&v[1],{onBeforeEnter:w,onEnter:C,onEnterCancelled:P,onLeave:y,onLeaveCancelled:E,onBeforeAppear:R=w,onAppear:F=C,onAppearCancelled:H=P}=t,j=(V,q,Q,O)=>{V._enterCancelled=O,removeTransitionClass(V,q?u:l),removeTransitionClass(V,q?f:s),Q&&Q()},fe=(V,q)=>{V._isLeaving=!1,removeTransitionClass(V,d),removeTransitionClass(V,g),removeTransitionClass(V,m),q&&q()},oe=V=>(q,Q)=>{const O=V?F:C,G=()=>j(q,V,Q);callHook(O,[q,G]),nextFrame(()=>{removeTransitionClass(q,V?c:r),addTransitionClass(q,V?u:l),hasExplicitCallback(O)||whenTransitionEnds(q,n,b,G)})};return extend$2(t,{onBeforeEnter(V){callHook(w,[V]),addTransitionClass(V,r),addTransitionClass(V,s)},onBeforeAppear(V){callHook(R,[V]),addTransitionClass(V,c),addTransitionClass(V,f)},onEnter:oe(!1),onAppear:oe(!0),onLeave(V,q){V._isLeaving=!0;const Q=()=>fe(V,q);addTransitionClass(V,d),V._enterCancelled?(addTransitionClass(V,m),forceReflow()):(forceReflow(),addTransitionClass(V,m)),nextFrame(()=>{V._isLeaving&&(removeTransitionClass(V,d),addTransitionClass(V,g),hasExplicitCallback(y)||whenTransitionEnds(V,n,$,Q))}),callHook(y,[V,Q])},onEnterCancelled(V){j(V,!1,void 0,!0),callHook(P,[V])},onAppearCancelled(V){j(V,!0,void 0,!0),callHook(H,[V])},onLeaveCancelled(V){fe(V),callHook(E,[V])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$3(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){return toNumber(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e[vtcKey]||(e[vtcKey]=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const a=e[vtcKey];a&&(a.delete(t),a.size||(e[vtcKey]=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,a,n){const o=e._endId=++endId,r=()=>{o===e._endId&&n()};if(a!=null)return setTimeout(r,a);const{type:s,timeout:l,propCount:c}=getTransitionInfo(e,t);if(!s)return n();const f=s+"end";let u=0;const d=()=>{e.removeEventListener(f,m),r()},m=g=>{g.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},l+1),e.addEventListener(f,m)}function getTransitionInfo(e,t){const a=window.getComputedStyle(e),n=v=>(a[v]||"").split(", "),o=n(`${TRANSITION}Delay`),r=n(`${TRANSITION}Duration`),s=getTimeout(o,r),l=n(`${ANIMATION}Delay`),c=n(`${ANIMATION}Duration`),f=getTimeout(l,c);let u=null,d=0,m=0;t===TRANSITION?s>0&&(u=TRANSITION,d=s,m=r.length):t===ANIMATION?f>0&&(u=ANIMATION,d=f,m=c.length):(d=Math.max(s,f),u=d>0?s>f?TRANSITION:ANIMATION:null,m=u?u===TRANSITION?r.length:c.length:0);const g=u===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:u,timeout:d,propCount:m,hasTransform:g}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((a,n)=>toMs(a)+toMs(e[n])))}function toMs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(e,t,a){const n=e[vtcKey];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(e,{value:t},{transition:a}){e[vShowOriginalDisplay]=e.style.display==="none"?"":e.style.display,a&&t?a.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:a}){a&&t&&a.enter(e)},updated(e,{value:t,oldValue:a},{transition:n}){!t!=!a&&(n?t?(n.beforeEnter(e),setDisplay(e,!0),n.enter(e)):n.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e[vShowOriginalDisplay]:"none",e[vShowHidden]=!t}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,a){const n=e.style,o=isString$2(a);let r=!1;if(a&&!o){if(t)if(isString$2(t))for(const s of t.split(";")){const l=s.slice(0,s.indexOf(":")).trim();a[l]==null&&setStyle(n,l,"")}else for(const s in t)a[s]==null&&setStyle(n,s,"");for(const s in a)s==="display"&&(r=!0),setStyle(n,s,a[s])}else if(o){if(t!==a){const s=n[CSS_VAR_TEXT];s&&(a+=";"+s),n.cssText=a,r=displayRE.test(a)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=r?n.display:"",e[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,a){if(isArray$2(a))a.forEach(n=>setStyle(e,t,n));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const n=autoPrefix(e,t);importantRE.test(a)?e.setProperty(hyphenate(n),a.replace(importantRE,""),"important"):e[n]=a}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const a=prefixCache[t];if(a)return a;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize$1(n);for(let o=0;o<prefixes.length;o++){const r=prefixes[o]+n;if(r in e)return prefixCache[t]=r}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,a,n,o,r=isSpecialBooleanAttr(t)){n&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,a):a==null||r&&!includeBooleanAttr(a)?e.removeAttribute(t):e.setAttribute(t,r?"":isSymbol(a)?String(a):a)}function patchDOMProp(e,t,a,n,o){if(t==="innerHTML"||t==="textContent"){a!=null&&(e[t]=t==="innerHTML"?unsafeToTrustedHTML(a):a);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,c=a==null?e.type==="checkbox"?"on":"":String(a);(l!==c||!("_value"in e))&&(e.value=c),a==null&&e.removeAttribute(t),e._value=a;return}let s=!1;if(a===""||a==null){const l=typeof e[t];l==="boolean"?a=includeBooleanAttr(a):a==null&&l==="string"?(a="",s=!0):l==="number"&&(a=0,s=!0)}try{e[t]=a}catch{}s&&e.removeAttribute(o||t)}function addEventListener(e,t,a,n){e.addEventListener(t,a,n)}function removeEventListener(e,t,a,n){e.removeEventListener(t,a,n)}const veiKey=Symbol("_vei");function patchEvent(e,t,a,n,o=null){const r=e[veiKey]||(e[veiKey]={}),s=r[t];if(n&&s)s.value=n;else{const[l,c]=parseName(t);if(n){const f=r[t]=createInvoker(n,o);addEventListener(e,l,f,c)}else s&&(removeEventListener(e,l,s,c),r[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const a=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=a.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,a.value),t,5,[n])};return a.value=e,a.attached=getNow(),a}function patchStopImmediatePropagation(e,t){if(isArray$2(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,a,n,o,r)=>{const s=o==="svg";t==="class"?patchClass(e,n,s):t==="style"?patchStyle(e,a,n):isOn(t)?isModelListener(t)||patchEvent(e,t,a,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,s))?(patchDOMProp(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,n,s,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!isString$2(n))?patchDOMProp(e,camelize(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,s))};function shouldSetAsProp(e,t,a,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction$2(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return isNativeOn(t)&&isString$2(a)?!1:t in e}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=e=>(delete e.props.mode,e),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:t}){const a=getCurrentInstance(),n=useTransitionState();let o,r;return onUpdated(()=>{if(!o.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(o[0].el,a.vnode.el,s))return;o.forEach(callPendingCbs),o.forEach(recordPosition);const l=o.filter(applyTranslation);forceReflow(),l.forEach(c=>{const f=c.el,u=f.style;addTransitionClass(f,s),u.transform=u.webkitTransform=u.transitionDuration="";const d=f[moveCbKey]=m=>{m&&m.target!==f||(!m||/transform$/.test(m.propertyName))&&(f.removeEventListener("transitionend",d),f[moveCbKey]=null,removeTransitionClass(f,s))};f.addEventListener("transitionend",d)})}),()=>{const s=toRaw(e),l=resolveTransitionProps(s);let c=s.tag||Fragment;if(o=[],r)for(let f=0;f<r.length;f++){const u=r[f];u.el&&u.el instanceof Element&&(o.push(u),setTransitionHooks(u,resolveTransitionHooks(u,l,n,a)),positionMap.set(u,u.el.getBoundingClientRect()))}r=t.default?getTransitionRawChildren(t.default()):[];for(let f=0;f<r.length;f++){const u=r[f];u.key!=null&&setTransitionHooks(u,resolveTransitionHooks(u,l,n,a))}return createVNode(c,null,r)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const t=e.el;t[moveCbKey]&&t[moveCbKey](),t[enterCbKey]&&t[enterCbKey]()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const t=positionMap.get(e),a=newPositionMap.get(e),n=t.left-a.left,o=t.top-a.top;if(n||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${n}px,${o}px)`,r.transitionDuration="0s",e}}function hasCSSTransform(e,t,a){const n=e.cloneNode(),o=e[vtcKey];o&&o.forEach(l=>{l.split(/\s+/).forEach(c=>c&&n.classList.remove(c))}),a.split(/\s+/).forEach(l=>l&&n.classList.add(l)),n.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(n);const{hasTransform:s}=getTransitionInfo(n);return r.removeChild(n),s}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$2(t)?a=>invokeArrayFns(t,a):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:t,trim:a,number:n}},o){e[assignKey]=getModelAssigner(o);const r=n||o.props&&o.props.type==="number";addEventListener(e,t?"change":"input",s=>{if(s.target.composing)return;let l=e.value;a&&(l=l.trim()),r&&(l=looseToNumber(l)),e[assignKey](l)}),a&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:n,trim:o,number:r}},s){if(e[assignKey]=getModelAssigner(s),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===a||o&&e.value.trim()===c)||(e.value=c))}},vModelCheckbox={deep:!0,created(e,t,a){e[assignKey]=getModelAssigner(a),addEventListener(e,"change",()=>{const n=e._modelValue,o=getValue(e),r=e.checked,s=e[assignKey];if(isArray$2(n)){const l=looseIndexOf(n,o),c=l!==-1;if(r&&!c)s(n.concat(o));else if(!r&&c){const f=[...n];f.splice(l,1),s(f)}}else if(isSet(n)){const l=new Set(n);r?l.add(o):l.delete(o),s(l)}else s(getCheckboxValue(e,r))})},mounted:setChecked,beforeUpdate(e,t,a){e[assignKey]=getModelAssigner(a),setChecked(e,t,a)}};function setChecked(e,{value:t,oldValue:a},n){e._modelValue=t;let o;if(isArray$2(t))o=looseIndexOf(t,n.props.value)>-1;else if(isSet(t))o=t.has(n.props.value);else{if(t===a)return;o=looseEqual(t,getCheckboxValue(e,!0))}e.checked!==o&&(e.checked=o)}const vModelRadio={created(e,{value:t},a){e.checked=looseEqual(t,a.props.value),e[assignKey]=getModelAssigner(a),addEventListener(e,"change",()=>{e[assignKey](getValue(e))})},beforeUpdate(e,{value:t,oldValue:a},n){e[assignKey]=getModelAssigner(n),t!==a&&(e.checked=looseEqual(t,n.props.value))}},vModelSelect={deep:!0,created(e,{value:t,modifiers:{number:a}},n){const o=isSet(t);addEventListener(e,"change",()=>{const r=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>a?looseToNumber(getValue(s)):getValue(s));e[assignKey](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,nextTick(()=>{e._assigning=!1})}),e[assignKey]=getModelAssigner(n)},mounted(e,{value:t}){setSelected(e,t)},beforeUpdate(e,t,a){e[assignKey]=getModelAssigner(a)},updated(e,{value:t}){e._assigning||setSelected(e,t)}};function setSelected(e,t){const a=e.multiple,n=isArray$2(t);if(!(a&&!n&&!isSet(t))){for(let o=0,r=e.options.length;o<r;o++){const s=e.options[o],l=getValue(s);if(a)if(n){const c=typeof l;c==="string"||c==="number"?s.selected=t.some(f=>String(f)===String(l)):s.selected=looseIndexOf(t,l)>-1}else s.selected=t.has(l);else if(looseEqual(getValue(s),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function getValue(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,t){const a=t?"_trueValue":"_falseValue";return a in e?e[a]:t}const vModelDynamic={created(e,t,a){callModelHook(e,t,a,null,"created")},mounted(e,t,a){callModelHook(e,t,a,null,"mounted")},beforeUpdate(e,t,a,n){callModelHook(e,t,a,n,"beforeUpdate")},updated(e,t,a,n){callModelHook(e,t,a,n,"updated")}};function resolveDynamicModel(e,t){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(t){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,t,a,n,o){const s=resolveDynamicModel(e.tagName,a.props&&a.props.type)[o];s&&s(e,t,a,n)}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(a=>e[`${a}Key`]&&!t.includes(a))},withModifiers=(e,t)=>{const a=e._withMods||(e._withMods={}),n=t.join(".");return a[n]||(a[n]=(o,...r)=>{for(let s=0;s<t.length;s++){const l=modifierGuards[t[s]];if(l&&l(o,t))return}return e(o,...r)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>{const a=e._withKeys||(e._withKeys={}),n=t.join(".");return a[n]||(a[n]=o=>{if(!("key"in o))return;const r=hyphenate(o.key);if(t.some(s=>s===r||keyNames[s]===r))return e(o)})},rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$1=(...e)=>{ensureRenderer().render(...e)},createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:a}=t;return t.mount=n=>{const o=normalizeContainer(n);if(!o)return;const r=t._component;!isFunction$2(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const s=a(o,!1,resolveRootNamespace(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString$2(e)?document.querySelector(e):e}/*!
  * shared v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol=(e,t=!1)=>t?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,t,a)=>friendlyJSONstringify({l:e,k:t,s:a}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$1=e=>typeof e=="number"&&isFinite(e),isDate$1=e=>toTypeString(e)==="[object Date]",isRegExp$1=e=>toTypeString(e)==="[object RegExp]",isEmptyObject=e=>isPlainObject$2(e)&&Object.keys(e).length===0,assign$1=Object.assign,_create=Object.create,create=(e=null)=>_create(e);let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:create());function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(e,t){return hasOwnProperty$1.call(e,t)}const isArray$1=Array.isArray,isFunction$1=e=>typeof e=="function",isString$1=e=>typeof e=="string",isBoolean$2=e=>typeof e=="boolean",isObject$2=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$2(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),isPlainObject$2=e=>toTypeString(e)==="[object Object]",toDisplayString=e=>e==null?"":isArray$1(e)||isPlainObject$2(e)&&e.toString===objectToString?JSON.stringify(e,null,2):String(e);function join(e,t=""){return e.reduce((a,n,o)=>o===0?a+n:a+t+n,"")}function warn(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const isNotObjectOrIsArray=e=>!isObject$2(e)||isArray$1(e);function deepCopy(e,t){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(t))throw new Error("Invalid value");const a=[{src:e,des:t}];for(;a.length;){const{src:n,des:o}=a.pop();Object.keys(n).forEach(r=>{r!=="__proto__"&&(isObject$2(n[r])&&!isObject$2(o[r])&&(o[r]=Array.isArray(n[r])?[]:create()),isNotObjectOrIsArray(o[r])||isNotObjectOrIsArray(n[r])?o[r]=n[r]:a.push({src:n[r],des:o[r]}))})}}/*!
  * message-compiler v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,t,a){return{line:e,column:t,offset:a}}function createLocation(e,t,a){return{start:e,end:t}}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},COMPILE_ERROR_CODES_EXTEND_POINT=17;function createCompileError(e,t,a={}){const{domain:n,messages:o,args:r}=a,s=e,l=new SyntaxError(String(s));return l.code=e,t&&(l.location=t),l.domain=n,l}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(e){const t=e;let a=0,n=1,o=1,r=0;const s=F=>t[F]===CHAR_CR&&t[F+1]===CHAR_LF,l=F=>t[F]===CHAR_LF,c=F=>t[F]===CHAR_PS,f=F=>t[F]===CHAR_LS,u=F=>s(F)||l(F)||c(F)||f(F),d=()=>a,m=()=>n,g=()=>o,v=()=>r,b=F=>s(F)||c(F)||f(F)?CHAR_LF:t[F],$=()=>b(a),w=()=>b(a+r);function C(){return r=0,u(a)&&(n++,o=0),s(a)&&a++,a++,o++,t[a]}function P(){return s(a+r)&&r++,r++,t[a+r]}function y(){a=0,n=1,o=1,r=0}function E(F=0){r=F}function R(){const F=a+r;for(;F!==a;)C();r=0}return{index:d,line:m,column:g,peekOffset:v,charAt:b,currentChar:$,currentPeek:w,next:C,peek:P,reset:y,resetPeek:E,skipToPeek:R}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,t={}){const a=t.location!==!1,n=createScanner(e),o=()=>n.index(),r=()=>createPosition(n.line(),n.column(),n.index()),s=r(),l=o(),c={currentType:13,offset:l,startLoc:s,endLoc:s,lastType:13,lastOffset:l,lastStartLoc:s,lastEndLoc:s,braceNest:0,inLinked:!1,text:""},f=()=>c,{onError:u}=t;function d(T,_,M,...U){const _e=f();if(_.column+=M,_.offset+=M,u){const me=a?createLocation(_e.startLoc,_):null,J=createCompileError(T,me,{domain:ERROR_DOMAIN$3,args:U});u(J)}}function m(T,_,M){T.endLoc=r(),T.currentType=_;const U={type:_};return a&&(U.loc=createLocation(T.startLoc,T.endLoc)),M!=null&&(U.value=M),U}const g=T=>m(T,13);function v(T,_){return T.currentChar()===_?(T.next(),_):(d(CompileErrorCodes.EXPECTED_TOKEN,r(),0,_),"")}function b(T){let _="";for(;T.currentPeek()===CHAR_SP||T.currentPeek()===CHAR_LF;)_+=T.currentPeek(),T.peek();return _}function $(T){const _=b(T);return T.skipToPeek(),_}function w(T){if(T===EOF)return!1;const _=T.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_===95}function C(T){if(T===EOF)return!1;const _=T.charCodeAt(0);return _>=48&&_<=57}function P(T,_){const{currentType:M}=_;if(M!==2)return!1;b(T);const U=w(T.currentPeek());return T.resetPeek(),U}function y(T,_){const{currentType:M}=_;if(M!==2)return!1;b(T);const U=T.currentPeek()==="-"?T.peek():T.currentPeek(),_e=C(U);return T.resetPeek(),_e}function E(T,_){const{currentType:M}=_;if(M!==2)return!1;b(T);const U=T.currentPeek()===LITERAL_DELIMITER;return T.resetPeek(),U}function R(T,_){const{currentType:M}=_;if(M!==7)return!1;b(T);const U=T.currentPeek()===".";return T.resetPeek(),U}function F(T,_){const{currentType:M}=_;if(M!==8)return!1;b(T);const U=w(T.currentPeek());return T.resetPeek(),U}function H(T,_){const{currentType:M}=_;if(!(M===7||M===11))return!1;b(T);const U=T.currentPeek()===":";return T.resetPeek(),U}function j(T,_){const{currentType:M}=_;if(M!==9)return!1;const U=()=>{const me=T.currentPeek();return me==="{"?w(T.peek()):me==="@"||me==="|"||me===":"||me==="."||me===CHAR_SP||!me?!1:me===CHAR_LF?(T.peek(),U()):oe(T,!1)},_e=U();return T.resetPeek(),_e}function fe(T){b(T);const _=T.currentPeek()==="|";return T.resetPeek(),_}function oe(T,_=!0){const M=(_e=!1,me="")=>{const J=T.currentPeek();return J==="{"||J==="@"||!J?_e:J==="|"?!(me===CHAR_SP||me===CHAR_LF):J===CHAR_SP?(T.peek(),M(!0,CHAR_SP)):J===CHAR_LF?(T.peek(),M(!0,CHAR_LF)):!0},U=M();return _&&T.resetPeek(),U}function V(T,_){const M=T.currentChar();return M===EOF?EOF:_(M)?(T.next(),M):null}function q(T){const _=T.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_>=48&&_<=57||_===95||_===36}function Q(T){return V(T,q)}function O(T){const _=T.charCodeAt(0);return _>=97&&_<=122||_>=65&&_<=90||_>=48&&_<=57||_===95||_===36||_===45}function G(T){return V(T,O)}function ee(T){const _=T.charCodeAt(0);return _>=48&&_<=57}function A(T){return V(T,ee)}function L(T){const _=T.charCodeAt(0);return _>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102}function W(T){return V(T,L)}function ae(T){let _="",M="";for(;_=A(T);)M+=_;return M}function Y(T){let _="";for(;;){const M=T.currentChar();if(M==="{"||M==="}"||M==="@"||M==="|"||!M)break;if(M===CHAR_SP||M===CHAR_LF)if(oe(T))_+=M,T.next();else{if(fe(T))break;_+=M,T.next()}else _+=M,T.next()}return _}function ne(T){$(T);let _="",M="";for(;_=G(T);)M+=_;return T.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),M}function te(T){$(T);let _="";return T.currentChar()==="-"?(T.next(),_+=`-${ae(T)}`):_+=ae(T),T.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),_}function ge(T){return T!==LITERAL_DELIMITER&&T!==CHAR_LF}function re(T){$(T),v(T,"'");let _="",M="";for(;_=V(T,ge);)_==="\\"?M+=B(T):M+=_;const U=T.currentChar();return U===CHAR_LF||U===EOF?(d(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),U===CHAR_LF&&(T.next(),v(T,"'")),M):(v(T,"'"),M)}function B(T){const _=T.currentChar();switch(_){case"\\":case"'":return T.next(),`\\${_}`;case"u":return z(T,_,4);case"U":return z(T,_,6);default:return d(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,r(),0,_),""}}function z(T,_,M){v(T,_);let U="";for(let _e=0;_e<M;_e++){const me=W(T);if(!me){d(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${_}${U}${T.currentChar()}`);break}U+=me}return`\\${_}${U}`}function Z(T){return T!=="{"&&T!=="}"&&T!==CHAR_SP&&T!==CHAR_LF}function D(T){$(T);let _="",M="";for(;_=V(T,Z);)M+=_;return M}function K(T){let _="",M="";for(;_=Q(T);)M+=_;return M}function x(T){const _=M=>{const U=T.currentChar();return U==="{"||U==="@"||U==="|"||U==="("||U===")"||!U||U===CHAR_SP?M:(M+=U,T.next(),_(M))};return _("")}function S(T){$(T);const _=v(T,"|");return $(T),_}function I(T,_){let M=null;switch(T.currentChar()){case"{":return _.braceNest>=1&&d(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),T.next(),M=m(_,2,"{"),$(T),_.braceNest++,M;case"}":return _.braceNest>0&&_.currentType===2&&d(CompileErrorCodes.EMPTY_PLACEHOLDER,r(),0),T.next(),M=m(_,3,"}"),_.braceNest--,_.braceNest>0&&$(T),_.inLinked&&_.braceNest===0&&(_.inLinked=!1),M;case"@":return _.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),M=X(T,_)||g(_),_.braceNest=0,M;default:{let _e=!0,me=!0,J=!0;if(fe(T))return _.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),M=m(_,1,S(T)),_.braceNest=0,_.inLinked=!1,M;if(_.braceNest>0&&(_.currentType===4||_.currentType===5||_.currentType===6))return d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),_.braceNest=0,ie(T,_);if(_e=P(T,_))return M=m(_,4,ne(T)),$(T),M;if(me=y(T,_))return M=m(_,5,te(T)),$(T),M;if(J=E(T,_))return M=m(_,6,re(T)),$(T),M;if(!_e&&!me&&!J)return M=m(_,12,D(T)),d(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,M.value),$(T),M;break}}return M}function X(T,_){const{currentType:M}=_;let U=null;const _e=T.currentChar();switch((M===7||M===8||M===11||M===9)&&(_e===CHAR_LF||_e===CHAR_SP)&&d(CompileErrorCodes.INVALID_LINKED_FORMAT,r(),0),_e){case"@":return T.next(),U=m(_,7,"@"),_.inLinked=!0,U;case".":return $(T),T.next(),m(_,8,".");case":":return $(T),T.next(),m(_,9,":");default:return fe(T)?(U=m(_,1,S(T)),_.braceNest=0,_.inLinked=!1,U):R(T,_)||H(T,_)?($(T),X(T,_)):F(T,_)?($(T),m(_,11,K(T))):j(T,_)?($(T),_e==="{"?I(T,_)||U:m(_,10,x(T))):(M===7&&d(CompileErrorCodes.INVALID_LINKED_FORMAT,r(),0),_.braceNest=0,_.inLinked=!1,ie(T,_))}}function ie(T,_){let M={type:13};if(_.braceNest>0)return I(T,_)||g(_);if(_.inLinked)return X(T,_)||g(_);switch(T.currentChar()){case"{":return I(T,_)||g(_);case"}":return d(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,r(),0),T.next(),m(_,3,"}");case"@":return X(T,_)||g(_);default:{if(fe(T))return M=m(_,1,S(T)),_.braceNest=0,_.inLinked=!1,M;if(oe(T))return m(_,0,Y(T));break}}return M}function pe(){const{currentType:T,offset:_,startLoc:M,endLoc:U}=c;return c.lastType=T,c.lastOffset=_,c.lastStartLoc=M,c.lastEndLoc=U,c.offset=o(),c.startLoc=r(),n.currentChar()===EOF?m(c,13):ie(n,c)}return{nextToken:pe,currentOffset:o,currentPosition:r,context:f}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,t,a){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(t||a,16);return n<=55295||n>=57344?String.fromCodePoint(n):"�"}}}function createParser(e={}){const t=e.location!==!1,{onError:a}=e;function n(w,C,P,y,...E){const R=w.currentPosition();if(R.offset+=y,R.column+=y,a){const F=t?createLocation(P,R):null,H=createCompileError(C,F,{domain:ERROR_DOMAIN$2,args:E});a(H)}}function o(w,C,P){const y={type:w};return t&&(y.start=C,y.end=C,y.loc={start:P,end:P}),y}function r(w,C,P,y){t&&(w.end=C,w.loc&&(w.loc.end=P))}function s(w,C){const P=w.context(),y=o(3,P.offset,P.startLoc);return y.value=C,r(y,w.currentOffset(),w.currentPosition()),y}function l(w,C){const P=w.context(),{lastOffset:y,lastStartLoc:E}=P,R=o(5,y,E);return R.index=parseInt(C,10),w.nextToken(),r(R,w.currentOffset(),w.currentPosition()),R}function c(w,C){const P=w.context(),{lastOffset:y,lastStartLoc:E}=P,R=o(4,y,E);return R.key=C,w.nextToken(),r(R,w.currentOffset(),w.currentPosition()),R}function f(w,C){const P=w.context(),{lastOffset:y,lastStartLoc:E}=P,R=o(9,y,E);return R.value=C.replace(KNOWN_ESCAPES,fromEscapeSequence),w.nextToken(),r(R,w.currentOffset(),w.currentPosition()),R}function u(w){const C=w.nextToken(),P=w.context(),{lastOffset:y,lastStartLoc:E}=P,R=o(8,y,E);return C.type!==11?(n(w,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,P.lastStartLoc,0),R.value="",r(R,y,E),{nextConsumeToken:C,node:R}):(C.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,P.lastStartLoc,0,getTokenCaption(C)),R.value=C.value||"",r(R,w.currentOffset(),w.currentPosition()),{node:R})}function d(w,C){const P=w.context(),y=o(7,P.offset,P.startLoc);return y.value=C,r(y,w.currentOffset(),w.currentPosition()),y}function m(w){const C=w.context(),P=o(6,C.offset,C.startLoc);let y=w.nextToken();if(y.type===8){const E=u(w);P.modifier=E.node,y=E.nextConsumeToken||w.nextToken()}switch(y.type!==9&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(y)),y=w.nextToken(),y.type===2&&(y=w.nextToken()),y.type){case 10:y.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(y)),P.key=d(w,y.value||"");break;case 4:y.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(y)),P.key=c(w,y.value||"");break;case 5:y.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(y)),P.key=l(w,y.value||"");break;case 6:y.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(y)),P.key=f(w,y.value||"");break;default:{n(w,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,C.lastStartLoc,0);const E=w.context(),R=o(7,E.offset,E.startLoc);return R.value="",r(R,E.offset,E.startLoc),P.key=R,r(P,E.offset,E.startLoc),{nextConsumeToken:y,node:P}}}return r(P,w.currentOffset(),w.currentPosition()),{node:P}}function g(w){const C=w.context(),P=C.currentType===1?w.currentOffset():C.offset,y=C.currentType===1?C.endLoc:C.startLoc,E=o(2,P,y);E.items=[];let R=null;do{const j=R||w.nextToken();switch(R=null,j.type){case 0:j.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(j)),E.items.push(s(w,j.value||""));break;case 5:j.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(j)),E.items.push(l(w,j.value||""));break;case 4:j.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(j)),E.items.push(c(w,j.value||""));break;case 6:j.value==null&&n(w,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,getTokenCaption(j)),E.items.push(f(w,j.value||""));break;case 7:{const fe=m(w);E.items.push(fe.node),R=fe.nextConsumeToken||null;break}}}while(C.currentType!==13&&C.currentType!==1);const F=C.currentType===1?C.lastOffset:w.currentOffset(),H=C.currentType===1?C.lastEndLoc:w.currentPosition();return r(E,F,H),E}function v(w,C,P,y){const E=w.context();let R=y.items.length===0;const F=o(1,C,P);F.cases=[],F.cases.push(y);do{const H=g(w);R||(R=H.items.length===0),F.cases.push(H)}while(E.currentType!==13);return R&&n(w,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,P,0),r(F,w.currentOffset(),w.currentPosition()),F}function b(w){const C=w.context(),{offset:P,startLoc:y}=C,E=g(w);return C.currentType===13?E:v(w,P,y,E)}function $(w){const C=createTokenizer(w,assign$1({},e)),P=C.context(),y=o(0,P.offset,P.startLoc);return t&&y.loc&&(y.loc.source=w),y.body=b(C),e.onCacheKey&&(y.cacheKey=e.onCacheKey(w)),P.currentType!==13&&n(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,P.lastStartLoc,0,w[P.offset]||""),r(y,C.currentOffset(),C.currentPosition()),y}return{parse:$}}function getTokenCaption(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function createTransformer(e,t={}){const a={ast:e,helpers:new Set};return{context:()=>a,helper:r=>(a.helpers.add(r),r)}}function traverseNodes(e,t){for(let a=0;a<e.length;a++)traverseNode(e[a],t)}function traverseNode(e,t){switch(e.type){case 1:traverseNodes(e.cases,t),t.helper("plural");break;case 2:traverseNodes(e.items,t);break;case 6:{traverseNode(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function transform(e,t={}){const a=createTransformer(e);a.helper("normalize"),e.body&&traverseNode(e.body,a);const n=a.context();e.helpers=Array.from(n.helpers)}function optimize(e){const t=e.body;return t.type===2?optimizeMessageNode(t):t.cases.forEach(a=>optimizeMessageNode(a)),e}function optimizeMessageNode(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let a=0;a<e.items.length;a++){const n=e.items[a];if(!(n.type===3||n.type===9)||n.value==null)break;t.push(n.value)}if(t.length===e.items.length){e.static=join(t);for(let a=0;a<e.items.length;a++){const n=e.items[a];(n.type===3||n.type===9)&&delete n.value}}}}function minify(e){switch(e.t=e.type,e.type){case 0:{const t=e;minify(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,a=t.cases;for(let n=0;n<a.length;n++)minify(a[n]);t.c=a,delete t.cases;break}case 2:{const t=e,a=t.items;for(let n=0;n<a.length;n++)minify(a[n]);t.i=a,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;minify(t.key),t.k=t.key,delete t.key,t.modifier&&(minify(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function createCodeGenerator(e,t){const{filename:a,breakLineCode:n,needIndent:o}=t,r=t.location!==!1,s={filename:a,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:o,indentLevel:0};r&&e.loc&&(s.source=e.loc.source);const l=()=>s;function c(b,$){s.code+=b}function f(b,$=!0){const w=$?n:"";c(o?w+"  ".repeat(b):w)}function u(b=!0){const $=++s.indentLevel;b&&f($)}function d(b=!0){const $=--s.indentLevel;b&&f($)}function m(){f(s.indentLevel)}return{context:l,push:c,indent:u,deindent:d,newline:m,helper:b=>`_${b}`,needIndent:()=>s.needIndent}}function generateLinkedNode(e,t){const{helper:a}=e;e.push(`${a("linked")}(`),generateNode(e,t.key),t.modifier?(e.push(", "),generateNode(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,t){const{helper:a,needIndent:n}=e;e.push(`${a("normalize")}([`),e.indent(n());const o=t.items.length;for(let r=0;r<o&&(generateNode(e,t.items[r]),r!==o-1);r++)e.push(", ");e.deindent(n()),e.push("])")}function generatePluralNode(e,t){const{helper:a,needIndent:n}=e;if(t.cases.length>1){e.push(`${a("plural")}([`),e.indent(n());const o=t.cases.length;for(let r=0;r<o&&(generateNode(e,t.cases[r]),r!==o-1);r++)e.push(", ");e.deindent(n()),e.push("])")}}function generateResource(e,t){t.body?generateNode(e,t.body):e.push("null")}function generateNode(e,t){const{helper:a}=e;switch(t.type){case 0:generateResource(e,t);break;case 1:generatePluralNode(e,t);break;case 2:generateMessageNode(e,t);break;case 6:generateLinkedNode(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${a("interpolate")}(${a("list")}(${t.index}))`,t);break;case 4:e.push(`${a("interpolate")}(${a("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const generate=(e,t={})=>{const a=isString$1(t.mode)?t.mode:"normal",n=isString$1(t.filename)?t.filename:"message.intl";t.sourceMap;const o=t.breakLineCode!=null?t.breakLineCode:a==="arrow"?";":`
`,r=t.needIndent?t.needIndent:a!=="arrow",s=e.helpers||[],l=createCodeGenerator(e,{filename:n,breakLineCode:o,needIndent:r});l.push(a==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(r),s.length>0&&(l.push(`const { ${join(s.map(u=>`${u}: _${u}`),", ")} } = ctx`),l.newline()),l.push("return "),generateNode(l,e),l.deindent(r),l.push("}"),delete e.helpers;const{code:c,map:f}=l.context();return{ast:e,code:c,map:f?f.toJSON():void 0}};function baseCompile$1(e,t={}){const a=assign$1({},t),n=!!a.jit,o=!!a.minify,r=a.optimize==null?!0:a.optimize,l=createParser(a).parse(e);return n?(r&&optimize(l),o&&minify(l),{ast:l,code:""}):(transform(l,a),generate(l,a))}/*!
  * core-base v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function format(e){return a=>formatParts(a,e)}function formatParts(e,t){const a=resolveBody(t);if(a==null)throw createUnhandleNodeError(0);if(resolveType(a)===1){const r=resolveCases(a);return e.plural(r.reduce((s,l)=>[...s,formatMessageParts(e,l)],[]))}else return formatMessageParts(e,a)}const PROPS_BODY=["b","body"];function resolveBody(e){return resolveProps(e,PROPS_BODY)}const PROPS_CASES=["c","cases"];function resolveCases(e){return resolveProps(e,PROPS_CASES,[])}function formatMessageParts(e,t){const a=resolveStatic(t);if(a!=null)return e.type==="text"?a:e.normalize([a]);{const n=resolveItems(t).reduce((o,r)=>[...o,formatMessagePart(e,r)],[]);return e.normalize(n)}}const PROPS_STATIC=["s","static"];function resolveStatic(e){return resolveProps(e,PROPS_STATIC)}const PROPS_ITEMS=["i","items"];function resolveItems(e){return resolveProps(e,PROPS_ITEMS,[])}function formatMessagePart(e,t){const a=resolveType(t);switch(a){case 3:return resolveValue$1(t,a);case 9:return resolveValue$1(t,a);case 4:{const n=t;if(hasOwn(n,"k")&&n.k)return e.interpolate(e.named(n.k));if(hasOwn(n,"key")&&n.key)return e.interpolate(e.named(n.key));throw createUnhandleNodeError(a)}case 5:{const n=t;if(hasOwn(n,"i")&&isNumber$1(n.i))return e.interpolate(e.list(n.i));if(hasOwn(n,"index")&&isNumber$1(n.index))return e.interpolate(e.list(n.index));throw createUnhandleNodeError(a)}case 6:{const n=t,o=resolveLinkedModifier(n),r=resolveLinkedKey(n);return e.linked(formatMessagePart(e,r),o?formatMessagePart(e,o):void 0,e.type)}case 7:return resolveValue$1(t,a);case 8:return resolveValue$1(t,a);default:throw new Error(`unhandled node on format message part: ${a}`)}}const PROPS_TYPE=["t","type"];function resolveType(e){return resolveProps(e,PROPS_TYPE)}const PROPS_VALUE=["v","value"];function resolveValue$1(e,t){const a=resolveProps(e,PROPS_VALUE);if(a)return a;throw createUnhandleNodeError(t)}const PROPS_MODIFIER=["m","modifier"];function resolveLinkedModifier(e){return resolveProps(e,PROPS_MODIFIER)}const PROPS_KEY=["k","key"];function resolveLinkedKey(e){const t=resolveProps(e,PROPS_KEY);if(t)return t;throw createUnhandleNodeError(6)}function resolveProps(e,t,a){for(let n=0;n<t.length;n++){const o=t[n];if(hasOwn(e,o)&&e[o]!=null)return e[o]}return a}function createUnhandleNodeError(e){return new Error(`unhandled node type: ${e}`)}const defaultOnCacheKey=e=>e;let compileCache=create();function isMessageAST(e){return isObject$2(e)&&resolveType(e)===0&&(hasOwn(e,"b")||hasOwn(e,"body"))}function baseCompile(e,t={}){let a=!1;const n=t.onError||defaultOnError;return t.onError=o=>{a=!0,n(o)},{...baseCompile$1(e,t),detectError:a}}function compile(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$1(e)){isBoolean$2(t.warnHtmlMessage)&&t.warnHtmlMessage;const n=(t.onCacheKey||defaultOnCacheKey)(e),o=compileCache[n];if(o)return o;const{ast:r,detectError:s}=baseCompile(e,{...t,location:!1,jit:!0}),l=format(r);return s?l:compileCache[n]=l}else{const a=e.cacheKey;if(a){const n=compileCache[a];return n||(compileCache[a]=format(e))}else return format(e)}}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,t,a){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:a})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(e){return t=>devtools&&devtools.emit(e,t)}const CoreErrorCodes={INVALID_ARGUMENT:COMPILE_ERROR_CODES_EXTEND_POINT,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CORE_ERROR_CODES_EXTEND_POINT=24;function createCoreError(e){return createCompileError(e,null,void 0)}function getLocale(e,t){return t.locale!=null?resolveLocale(t.locale):resolveLocale(e.locale)}let _resolveLocale;function resolveLocale(e){if(isString$1(e))return e;if(isFunction$1(e)){if(e.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(e.constructor.name==="Function"){const t=e();if(isPromise(t))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=t}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(e,t,a){return[...new Set([a,...isArray$1(t)?t:isObject$2(t)?Object.keys(t):isString$1(t)?[t]:[a]])]}function fallbackWithLocaleChain(e,t,a){const n=isString$1(a)?a:DEFAULT_LOCALE,o=e;o.__localeChainCache||(o.__localeChainCache=new Map);let r=o.__localeChainCache.get(n);if(!r){r=[];let s=[a];for(;isArray$1(s);)s=appendBlockToChain(r,s,t);const l=isArray$1(t)||!isPlainObject$2(t)?t:t.default?t.default:null;s=isString$1(l)?[l]:l,isArray$1(s)&&appendBlockToChain(r,s,!1),o.__localeChainCache.set(n,r)}return r}function appendBlockToChain(e,t,a){let n=!0;for(let o=0;o<t.length&&isBoolean$2(n);o++){const r=t[o];isString$1(r)&&(n=appendLocaleToChain(e,t[o],a))}return n}function appendLocaleToChain(e,t,a){let n;const o=t.split("-");do{const r=o.join("-");n=appendItemToChain(e,r,a),o.splice(-1,1)}while(o.length&&n===!0);return n}function appendItemToChain(e,t,a){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";const o=t.replace(/!/g,"");e.push(o),(isArray$1(a)||isPlainObject$2(a))&&a[o]&&(n=a[o])}return n}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]},pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]},pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]},pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]},pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const t=e.charCodeAt(0),a=e.charCodeAt(e.length-1);return t===a&&(t===34||t===39)?e.slice(1,-1):e}function getPathCharType(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:isLiteral(t)?stripQuotes(t):"*"+t}function parse(e){const t=[];let a=-1,n=0,o=0,r,s,l,c,f,u,d;const m=[];m[0]=()=>{s===void 0?s=l:s+=l},m[1]=()=>{s!==void 0&&(t.push(s),s=void 0)},m[2]=()=>{m[0](),o++},m[3]=()=>{if(o>0)o--,n=4,m[0]();else{if(o=0,s===void 0||(s=formatSubPath(s),s===!1))return!1;m[1]()}};function g(){const v=e[a+1];if(n===5&&v==="'"||n===6&&v==='"')return a++,l="\\"+v,m[0](),!0}for(;n!==null;)if(a++,r=e[a],!(r==="\\"&&g())){if(c=getPathCharType(r),d=pathStateMachine[n],f=d[c]||d.l||8,f===8||(n=f[0],f[1]!==void 0&&(u=m[f[1]],u&&(l=r,u()===!1))))return;if(n===7)return t}}const cache=new Map;function resolveWithKeyValue(e,t){return isObject$2(e)?e[t]:null}function resolveValue(e,t){if(!isObject$2(e))return null;let a=cache.get(t);if(a||(a=parse(t),a&&cache.set(t,a)),!a)return null;const n=a.length;let o=e,r=0;for(;r<n;){const s=o[a[r]];if(s===void 0||isFunction$1(o))return null;o=s,r++}return o}const VERSION$3="11.1.2",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,t)=>t==="text"&&isString$1(e)?e.toUpperCase():t==="vnode"&&isObject$2(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&isString$1(e)?e.toLowerCase():t==="vnode"&&isObject$2(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&isString$1(e)?capitalize(e):t==="vnode"&&isObject$2(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}let _resolver;function registerMessageResolver(e){_resolver=e}let _fallbacker;function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const t=isFunction$1(e.onWarn)?e.onWarn:warn,a=isString$1(e.version)?e.version:VERSION$3,n=isString$1(e.locale)||isFunction$1(e.locale)?e.locale:DEFAULT_LOCALE,o=isFunction$1(n)?DEFAULT_LOCALE:n,r=isArray$1(e.fallbackLocale)||isPlainObject$2(e.fallbackLocale)||isString$1(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:o,s=isPlainObject$2(e.messages)?e.messages:createResources(o),l=isPlainObject$2(e.datetimeFormats)?e.datetimeFormats:createResources(o),c=isPlainObject$2(e.numberFormats)?e.numberFormats:createResources(o),f=assign$1(create(),e.modifiers,getDefaultLinkedModifiers()),u=e.pluralRules||create(),d=isFunction$1(e.missing)?e.missing:null,m=isBoolean$2(e.missingWarn)||isRegExp$1(e.missingWarn)?e.missingWarn:!0,g=isBoolean$2(e.fallbackWarn)||isRegExp$1(e.fallbackWarn)?e.fallbackWarn:!0,v=!!e.fallbackFormat,b=!!e.unresolving,$=isFunction$1(e.postTranslation)?e.postTranslation:null,w=isPlainObject$2(e.processor)?e.processor:null,C=isBoolean$2(e.warnHtmlMessage)?e.warnHtmlMessage:!0,P=!!e.escapeParameter,y=isFunction$1(e.messageCompiler)?e.messageCompiler:_compiler,E=isFunction$1(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,R=isFunction$1(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,F=isObject$2(e.fallbackContext)?e.fallbackContext:void 0,H=e,j=isObject$2(H.__datetimeFormatters)?H.__datetimeFormatters:new Map,fe=isObject$2(H.__numberFormatters)?H.__numberFormatters:new Map,oe=isObject$2(H.__meta)?H.__meta:{};_cid++;const V={version:a,cid:_cid,locale:n,fallbackLocale:r,messages:s,modifiers:f,pluralRules:u,missing:d,missingWarn:m,fallbackWarn:g,fallbackFormat:v,unresolving:b,postTranslation:$,processor:w,warnHtmlMessage:C,escapeParameter:P,messageCompiler:y,messageResolver:E,localeFallbacker:R,fallbackContext:F,onWarn:t,__meta:oe};return V.datetimeFormats=l,V.numberFormats=c,V.__datetimeFormatters=j,V.__numberFormatters=fe,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(V,a,oe),V}const createResources=e=>({[e]:create()});function handleMissing(e,t,a,n,o){const{missing:r,onWarn:s}=e;if(r!==null){const l=r(e,a,t,o);return isString$1(l)?l:t}else return t}function updateFallbackLocale(e,t,a){const n=e;n.__localeChainCache=new Map,e.localeFallbacker(e,a,t)}function isAlmostSameLocale(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function isImplicitFallback(e,t){const a=t.indexOf(e);if(a===-1)return!1;for(let n=a+1;n<t.length;n++)if(isAlmostSameLocale(e,t[n]))return!0;return!1}function datetime(e,...t){const{datetimeFormats:a,unresolving:n,fallbackLocale:o,onWarn:r,localeFallbacker:s}=e,{__datetimeFormatters:l}=e,[c,f,u,d]=parseDateTimeArgs(...t),m=isBoolean$2(u.missingWarn)?u.missingWarn:e.missingWarn;isBoolean$2(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const g=!!u.part,v=getLocale(e,u),b=s(e,o,v);if(!isString$1(c)||c==="")return new Intl.DateTimeFormat(v,d).format(f);let $={},w,C=null;const P="datetime format";for(let R=0;R<b.length&&(w=b[R],$=a[w]||{},C=$[c],!isPlainObject$2(C));R++)handleMissing(e,c,w,m,P);if(!isPlainObject$2(C)||!isString$1(w))return n?NOT_REOSLVED:c;let y=`${w}__${c}`;isEmptyObject(d)||(y=`${y}__${JSON.stringify(d)}`);let E=l.get(y);return E||(E=new Intl.DateTimeFormat(w,assign$1({},C,d)),l.set(y,E)),g?E.formatToParts(f):E.format(f)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[t,a,n,o]=e,r=create();let s=create(),l;if(isString$1(t)){const c=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const f=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();l=new Date(f);try{l.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(t)){if(isNaN(t.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);l=t}else if(isNumber$1(t))l=t;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(a)?r.key=a:isPlainObject$2(a)&&Object.keys(a).forEach(c=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(c)?s[c]=a[c]:r[c]=a[c]}),isString$1(n)?r.locale=n:isPlainObject$2(n)&&(s=n),isPlainObject$2(o)&&(s=o),[r.key||"",l,r,s]}function clearDateTimeFormat(e,t,a){const n=e;for(const o in a){const r=`${t}__${o}`;n.__datetimeFormatters.has(r)&&n.__datetimeFormatters.delete(r)}}function number(e,...t){const{numberFormats:a,unresolving:n,fallbackLocale:o,onWarn:r,localeFallbacker:s}=e,{__numberFormatters:l}=e,[c,f,u,d]=parseNumberArgs(...t),m=isBoolean$2(u.missingWarn)?u.missingWarn:e.missingWarn;isBoolean$2(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const g=!!u.part,v=getLocale(e,u),b=s(e,o,v);if(!isString$1(c)||c==="")return new Intl.NumberFormat(v,d).format(f);let $={},w,C=null;const P="number format";for(let R=0;R<b.length&&(w=b[R],$=a[w]||{},C=$[c],!isPlainObject$2(C));R++)handleMissing(e,c,w,m,P);if(!isPlainObject$2(C)||!isString$1(w))return n?NOT_REOSLVED:c;let y=`${w}__${c}`;isEmptyObject(d)||(y=`${y}__${JSON.stringify(d)}`);let E=l.get(y);return E||(E=new Intl.NumberFormat(w,assign$1({},C,d)),l.set(y,E)),g?E.formatToParts(f):E.format(f)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[t,a,n,o]=e,r=create();let s=create();if(!isNumber$1(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const l=t;return isString$1(a)?r.key=a:isPlainObject$2(a)&&Object.keys(a).forEach(c=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(c)?s[c]=a[c]:r[c]=a[c]}),isString$1(n)?r.locale=n:isPlainObject$2(n)&&(s=n),isPlainObject$2(o)&&(s=o),[r.key||"",l,r,s]}function clearNumberFormat(e,t,a){const n=e;for(const o in a){const r=`${t}__${o}`;n.__numberFormatters.has(r)&&n.__numberFormatters.delete(r)}}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>e.length===0?"":join(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const t=isNumber$1(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber$1(e.named.count)||isNumber$1(e.named.n))?isNumber$1(e.named.count)?e.named.count:isNumber$1(e.named.n)?e.named.n:t:t}function normalizeNamed(e,t){t.count||(t.count=e),t.n||(t.n=e)}function createMessageContext(e={}){const t=e.locale,a=getPluralIndex(e),n=isObject$2(e.pluralRules)&&isString$1(t)&&isFunction$1(e.pluralRules[t])?e.pluralRules[t]:pluralDefault,o=isObject$2(e.pluralRules)&&isString$1(t)&&isFunction$1(e.pluralRules[t])?pluralDefault:void 0,r=w=>w[n(a,w.length,o)],s=e.list||[],l=w=>s[w],c=e.named||create();isNumber$1(e.pluralIndex)&&normalizeNamed(a,c);const f=w=>c[w];function u(w,C){const P=isFunction$1(e.messages)?e.messages(w,!!C):isObject$2(e.messages)?e.messages[w]:!1;return P||(e.parent?e.parent.message(w):DEFAULT_MESSAGE)}const d=w=>e.modifiers?e.modifiers[w]:DEFAULT_MODIFIER,m=isPlainObject$2(e.processor)&&isFunction$1(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,g=isPlainObject$2(e.processor)&&isFunction$1(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,v=isPlainObject$2(e.processor)&&isString$1(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,$={list:l,named:f,plural:r,linked:(w,...C)=>{const[P,y]=C;let E="text",R="";C.length===1?isObject$2(P)?(R=P.modifier||R,E=P.type||E):isString$1(P)&&(R=P||R):C.length===2&&(isString$1(P)&&(R=P||R),isString$1(y)&&(E=y||E));const F=u(w,!0)($),H=E==="vnode"&&isArray$1(F)&&R?F[0]:F;return R?d(R)(H,E):H},message:u,type:v,interpolate:g,normalize:m,values:assign$1(create(),s,c)};return $}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction$1(e);function translate$1(e,...t){const{fallbackFormat:a,postTranslation:n,unresolving:o,messageCompiler:r,fallbackLocale:s,messages:l}=e,[c,f]=parseTranslateArgs(...t),u=isBoolean$2(f.missingWarn)?f.missingWarn:e.missingWarn,d=isBoolean$2(f.fallbackWarn)?f.fallbackWarn:e.fallbackWarn,m=isBoolean$2(f.escapeParameter)?f.escapeParameter:e.escapeParameter,g=!!f.resolvedMessage,v=isString$1(f.default)||isBoolean$2(f.default)?isBoolean$2(f.default)?r?c:()=>c:f.default:a?r?c:()=>c:null,b=a||v!=null&&(isString$1(v)||isFunction$1(v)),$=getLocale(e,f);m&&escapeParams(f);let[w,C,P]=g?[c,$,l[$]||create()]:resolveMessageFormat(e,c,$,s,d,u),y=w,E=c;if(!g&&!(isString$1(y)||isMessageAST(y)||isMessageFunction(y))&&b&&(y=v,E=y),!g&&(!(isString$1(y)||isMessageAST(y)||isMessageFunction(y))||!isString$1(C)))return o?NOT_REOSLVED:c;let R=!1;const F=()=>{R=!0},H=isMessageFunction(y)?y:compileMessageFormat(e,c,C,y,E,F);if(R)return y;const j=getMessageContextOptions(e,C,P,f),fe=createMessageContext(j),oe=evaluateMessage(e,H,fe),V=n?n(oe,c):oe;if(__INTLIFY_PROD_DEVTOOLS__){const q={timestamp:Date.now(),key:isString$1(c)?c:isMessageFunction(y)?y.key:"",locale:C||(isMessageFunction(y)?y.locale:""),format:isString$1(y)?y:isMessageFunction(y)?y.source:"",message:V};q.meta=assign$1({},e.__meta,getAdditionalMeta()||{}),translateDevTools(q)}return V}function escapeParams(e){isArray$1(e.list)?e.list=e.list.map(t=>isString$1(t)?escapeHtml(t):t):isObject$2(e.named)&&Object.keys(e.named).forEach(t=>{isString$1(e.named[t])&&(e.named[t]=escapeHtml(e.named[t]))})}function resolveMessageFormat(e,t,a,n,o,r){const{messages:s,onWarn:l,messageResolver:c,localeFallbacker:f}=e,u=f(e,n,a);let d=create(),m,g=null;const v="translate";for(let b=0;b<u.length&&(m=u[b],d=s[m]||create(),(g=c(d,t))===null&&(g=d[t]),!(isString$1(g)||isMessageAST(g)||isMessageFunction(g)));b++)if(!isImplicitFallback(m,u)){const $=handleMissing(e,t,m,r,v);$!==t&&(g=$)}return[g,m,d]}function compileMessageFormat(e,t,a,n,o,r){const{messageCompiler:s,warnHtmlMessage:l}=e;if(isMessageFunction(n)){const f=n;return f.locale=f.locale||a,f.key=f.key||t,f}if(s==null){const f=()=>n;return f.locale=a,f.key=t,f}const c=s(n,getCompileContext(e,a,o,n,l,r));return c.locale=a,c.key=t,c.source=n,c}function evaluateMessage(e,t,a){return t(a)}function parseTranslateArgs(...e){const[t,a,n]=e,o=create();if(!isString$1(t)&&!isNumber$1(t)&&!isMessageFunction(t)&&!isMessageAST(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const r=isNumber$1(t)?String(t):(isMessageFunction(t),t);return isNumber$1(a)?o.plural=a:isString$1(a)?o.default=a:isPlainObject$2(a)&&!isEmptyObject(a)?o.named=a:isArray$1(a)&&(o.list=a),isNumber$1(n)?o.plural=n:isString$1(n)?o.default=n:isPlainObject$2(n)&&assign$1(o,n),[r,o]}function getCompileContext(e,t,a,n,o,r){return{locale:t,key:a,warnHtmlMessage:o,onError:s=>{throw r&&r(s),s},onCacheKey:s=>generateFormatCacheKey(t,a,s)}}function getMessageContextOptions(e,t,a,n){const{modifiers:o,pluralRules:r,messageResolver:s,fallbackLocale:l,fallbackWarn:c,missingWarn:f,fallbackContext:u}=e,m={locale:t,modifiers:o,pluralRules:r,messages:(g,v)=>{let b=s(a,g);if(b==null&&(u||v)){const[,,$]=resolveMessageFormat(u||e,g,t,l,c,f);b=s($,g)}if(isString$1(b)||isMessageAST(b)){let $=!1;const C=compileMessageFormat(e,g,t,b,g,()=>{$=!0});return $?NOOP_MESSAGE_FUNCTION:C}else return isMessageFunction(b)?b:NOOP_MESSAGE_FUNCTION}};return e.processor&&(m.processor=e.processor),n.list&&(m.list=n.list),n.named&&(m.named=n.named),isNumber$1(n.plural)&&(m.pluralIndex=n.plural),m}initFeatureFlags$1();/*!
  * vue-i18n v11.1.2
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$2="11.1.2";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const I18nErrorCodes={UNEXPECTED_RETURN_TYPE:CORE_ERROR_CODES_EXTEND_POINT,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function createI18nError(e,...t){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$2(e))return e;for(const t in e)if(hasOwn(e,t))if(!t.includes("."))isObject$2(e[t])&&handleFlatJson(e[t]);else{const a=t.split("."),n=a.length-1;let o=e,r=!1;for(let s=0;s<n;s++){if(a[s]==="__proto__")throw new Error(`unsafe key: ${a[s]}`);if(a[s]in o||(o[a[s]]=create()),!isObject$2(o[a[s]])){r=!0;break}o=o[a[s]]}r||(o[a[n]]=e[t],delete e[t]),isObject$2(o[a[n]])&&handleFlatJson(o[a[n]])}return e}function getLocaleMessages(e,t){const{messages:a,__i18n:n,messageResolver:o,flatJson:r}=t,s=isPlainObject$2(a)?a:isArray$1(n)?create():{[e]:create()};if(isArray$1(n)&&n.forEach(l=>{if("locale"in l&&"resource"in l){const{locale:c,resource:f}=l;c?(s[c]=s[c]||create(),deepCopy(f,s[c])):deepCopy(f,s)}else isString$1(l)&&deepCopy(JSON.parse(l),s)}),o==null&&r)for(const l in s)hasOwn(s,l)&&handleFlatJson(s[l]);return s}function getComponentOptions(e){return e.type}function adjustI18nResources(e,t,a){let n=isObject$2(t.messages)?t.messages:create();"__i18nGlobal"in a&&(n=getLocaleMessages(e.locale.value,{messages:n,__i18n:a.__i18nGlobal}));const o=Object.keys(n);o.length&&o.forEach(r=>{e.mergeLocaleMessage(r,n[r])});{if(isObject$2(t.datetimeFormats)){const r=Object.keys(t.datetimeFormats);r.length&&r.forEach(s=>{e.mergeDateTimeFormat(s,t.datetimeFormats[s])})}if(isObject$2(t.numberFormats)){const r=Object.keys(t.numberFormats);r.length&&r.forEach(s=>{e.mergeNumberFormat(s,t.numberFormats[s])})}}}function createTextNode(e){return createVNode(Text,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(e){return(t,a,n,o)=>e(a,n,getCurrentInstance()||void 0,o)}const getMetaInfo=()=>{const e=getCurrentInstance();let t=null;return e&&(t=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:t}:null};function createComposer(e={}){const{__root:t,__injectWithOption:a}=e,n=t===void 0,o=e.flatJson,r=inBrowser?ref:shallowRef;let s=isBoolean$2(e.inheritLocale)?e.inheritLocale:!0;const l=r(t&&s?t.locale.value:isString$1(e.locale)?e.locale:DEFAULT_LOCALE),c=r(t&&s?t.fallbackLocale.value:isString$1(e.fallbackLocale)||isArray$1(e.fallbackLocale)||isPlainObject$2(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:l.value),f=r(getLocaleMessages(l.value,e)),u=r(isPlainObject$2(e.datetimeFormats)?e.datetimeFormats:{[l.value]:{}}),d=r(isPlainObject$2(e.numberFormats)?e.numberFormats:{[l.value]:{}});let m=t?t.missingWarn:isBoolean$2(e.missingWarn)||isRegExp$1(e.missingWarn)?e.missingWarn:!0,g=t?t.fallbackWarn:isBoolean$2(e.fallbackWarn)||isRegExp$1(e.fallbackWarn)?e.fallbackWarn:!0,v=t?t.fallbackRoot:isBoolean$2(e.fallbackRoot)?e.fallbackRoot:!0,b=!!e.fallbackFormat,$=isFunction$1(e.missing)?e.missing:null,w=isFunction$1(e.missing)?defineCoreMissingHandler(e.missing):null,C=isFunction$1(e.postTranslation)?e.postTranslation:null,P=t?t.warnHtmlMessage:isBoolean$2(e.warnHtmlMessage)?e.warnHtmlMessage:!0,y=!!e.escapeParameter;const E=t?t.modifiers:isPlainObject$2(e.modifiers)?e.modifiers:{};let R=e.pluralRules||t&&t.pluralRules,F;F=(()=>{n&&setFallbackContext(null);const J={version:VERSION$2,locale:l.value,fallbackLocale:c.value,messages:f.value,modifiers:E,pluralRules:R,missing:w===null?void 0:w,missingWarn:m,fallbackWarn:g,fallbackFormat:b,unresolving:!0,postTranslation:C===null?void 0:C,warnHtmlMessage:P,escapeParameter:y,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};J.datetimeFormats=u.value,J.numberFormats=d.value,J.__datetimeFormatters=isPlainObject$2(F)?F.__datetimeFormatters:void 0,J.__numberFormatters=isPlainObject$2(F)?F.__numberFormatters:void 0;const ce=createCoreContext(J);return n&&setFallbackContext(ce),ce})(),updateFallbackLocale(F,l.value,c.value);function j(){return[l.value,c.value,f.value,u.value,d.value]}const fe=computed({get:()=>l.value,set:J=>{F.locale=J,l.value=J}}),oe=computed({get:()=>c.value,set:J=>{F.fallbackLocale=J,c.value=J,updateFallbackLocale(F,l.value,J)}}),V=computed(()=>f.value),q=computed(()=>u.value),Q=computed(()=>d.value);function O(){return isFunction$1(C)?C:null}function G(J){C=J,F.postTranslation=J}function ee(){return $}function A(J){J!==null&&(w=defineCoreMissingHandler(J)),$=J,F.missing=w}const L=(J,ce,Se,xe,Ne,Ce)=>{j();let Me;try{__INTLIFY_PROD_DEVTOOLS__,n||(F.fallbackContext=t?getFallbackContext():void 0),Me=J(F)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(F.fallbackContext=void 0)}if(Se!=="translate exists"&&isNumber$1(Me)&&Me===NOT_REOSLVED||Se==="translate exists"&&!Me){const[Ie,We]=ce();return t&&v?xe(t):Ne(Ie)}else{if(Ce(Me))return Me;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function W(...J){return L(ce=>Reflect.apply(translate$1,null,[ce,...J]),()=>parseTranslateArgs(...J),"translate",ce=>Reflect.apply(ce.t,ce,[...J]),ce=>ce,ce=>isString$1(ce))}function ae(...J){const[ce,Se,xe]=J;if(xe&&!isObject$2(xe))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return W(ce,Se,assign$1({resolvedMessage:!0},xe||{}))}function Y(...J){return L(ce=>Reflect.apply(datetime,null,[ce,...J]),()=>parseDateTimeArgs(...J),"datetime format",ce=>Reflect.apply(ce.d,ce,[...J]),()=>MISSING_RESOLVE_VALUE,ce=>isString$1(ce))}function ne(...J){return L(ce=>Reflect.apply(number,null,[ce,...J]),()=>parseNumberArgs(...J),"number format",ce=>Reflect.apply(ce.n,ce,[...J]),()=>MISSING_RESOLVE_VALUE,ce=>isString$1(ce))}function te(J){return J.map(ce=>isString$1(ce)||isNumber$1(ce)||isBoolean$2(ce)?createTextNode(String(ce)):ce)}const re={normalize:te,interpolate:J=>J,type:"vnode"};function B(...J){return L(ce=>{let Se;const xe=ce;try{xe.processor=re,Se=Reflect.apply(translate$1,null,[xe,...J])}finally{xe.processor=null}return Se},()=>parseTranslateArgs(...J),"translate",ce=>ce[TranslateVNodeSymbol](...J),ce=>[createTextNode(ce)],ce=>isArray$1(ce))}function z(...J){return L(ce=>Reflect.apply(number,null,[ce,...J]),()=>parseNumberArgs(...J),"number format",ce=>ce[NumberPartsSymbol](...J),NOOP_RETURN_ARRAY,ce=>isString$1(ce)||isArray$1(ce))}function Z(...J){return L(ce=>Reflect.apply(datetime,null,[ce,...J]),()=>parseDateTimeArgs(...J),"datetime format",ce=>ce[DatetimePartsSymbol](...J),NOOP_RETURN_ARRAY,ce=>isString$1(ce)||isArray$1(ce))}function D(J){R=J,F.pluralRules=R}function K(J,ce){return L(()=>{if(!J)return!1;const Se=isString$1(ce)?ce:l.value,xe=I(Se),Ne=F.messageResolver(xe,J);return isMessageAST(Ne)||isMessageFunction(Ne)||isString$1(Ne)},()=>[J],"translate exists",Se=>Reflect.apply(Se.te,Se,[J,ce]),NOOP_RETURN_FALSE,Se=>isBoolean$2(Se))}function x(J){let ce=null;const Se=fallbackWithLocaleChain(F,c.value,l.value);for(let xe=0;xe<Se.length;xe++){const Ne=f.value[Se[xe]]||{},Ce=F.messageResolver(Ne,J);if(Ce!=null){ce=Ce;break}}return ce}function S(J){const ce=x(J);return ce??(t?t.tm(J)||{}:{})}function I(J){return f.value[J]||{}}function X(J,ce){if(o){const Se={[J]:ce};for(const xe in Se)hasOwn(Se,xe)&&handleFlatJson(Se[xe]);ce=Se[J]}f.value[J]=ce,F.messages=f.value}function ie(J,ce){f.value[J]=f.value[J]||{};const Se={[J]:ce};if(o)for(const xe in Se)hasOwn(Se,xe)&&handleFlatJson(Se[xe]);ce=Se[J],deepCopy(ce,f.value[J]),F.messages=f.value}function pe(J){return u.value[J]||{}}function T(J,ce){u.value[J]=ce,F.datetimeFormats=u.value,clearDateTimeFormat(F,J,ce)}function _(J,ce){u.value[J]=assign$1(u.value[J]||{},ce),F.datetimeFormats=u.value,clearDateTimeFormat(F,J,ce)}function M(J){return d.value[J]||{}}function U(J,ce){d.value[J]=ce,F.numberFormats=d.value,clearNumberFormat(F,J,ce)}function _e(J,ce){d.value[J]=assign$1(d.value[J]||{},ce),F.numberFormats=d.value,clearNumberFormat(F,J,ce)}composerID++,t&&inBrowser&&(watch(t.locale,J=>{s&&(l.value=J,F.locale=J,updateFallbackLocale(F,l.value,c.value))}),watch(t.fallbackLocale,J=>{s&&(c.value=J,F.fallbackLocale=J,updateFallbackLocale(F,l.value,c.value))}));const me={id:composerID,locale:fe,fallbackLocale:oe,get inheritLocale(){return s},set inheritLocale(J){s=J,J&&t&&(l.value=t.locale.value,c.value=t.fallbackLocale.value,updateFallbackLocale(F,l.value,c.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:V,get modifiers(){return E},get pluralRules(){return R||{}},get isGlobal(){return n},get missingWarn(){return m},set missingWarn(J){m=J,F.missingWarn=m},get fallbackWarn(){return g},set fallbackWarn(J){g=J,F.fallbackWarn=g},get fallbackRoot(){return v},set fallbackRoot(J){v=J},get fallbackFormat(){return b},set fallbackFormat(J){b=J,F.fallbackFormat=b},get warnHtmlMessage(){return P},set warnHtmlMessage(J){P=J,F.warnHtmlMessage=J},get escapeParameter(){return y},set escapeParameter(J){y=J,F.escapeParameter=J},t:W,getLocaleMessage:I,setLocaleMessage:X,mergeLocaleMessage:ie,getPostTranslationHandler:O,setPostTranslationHandler:G,getMissingHandler:ee,setMissingHandler:A,[SetPluralRulesSymbol]:D};return me.datetimeFormats=q,me.numberFormats=Q,me.rt=ae,me.te=K,me.tm=S,me.d=Y,me.n=ne,me.getDateTimeFormat=pe,me.setDateTimeFormat=T,me.mergeDateTimeFormat=_,me.getNumberFormat=M,me.setNumberFormat=U,me.mergeNumberFormat=_e,me[InejctWithOptionSymbol]=a,me[TranslateVNodeSymbol]=B,me[DatetimePartsSymbol]=Z,me[NumberPartsSymbol]=z,me}function convertComposerOptions(e){const t=isString$1(e.locale)?e.locale:DEFAULT_LOCALE,a=isString$1(e.fallbackLocale)||isArray$1(e.fallbackLocale)||isPlainObject$2(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,n=isFunction$1(e.missing)?e.missing:void 0,o=isBoolean$2(e.silentTranslationWarn)||isRegExp$1(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,r=isBoolean$2(e.silentFallbackWarn)||isRegExp$1(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,s=isBoolean$2(e.fallbackRoot)?e.fallbackRoot:!0,l=!!e.formatFallbackMessages,c=isPlainObject$2(e.modifiers)?e.modifiers:{},f=e.pluralizationRules,u=isFunction$1(e.postTranslation)?e.postTranslation:void 0,d=isString$1(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,m=!!e.escapeParameterHtml,g=isBoolean$2(e.sync)?e.sync:!0;let v=e.messages;if(isPlainObject$2(e.sharedMessages)){const E=e.sharedMessages;v=Object.keys(E).reduce((F,H)=>{const j=F[H]||(F[H]={});return assign$1(j,E[H]),F},v||{})}const{__i18n:b,__root:$,__injectWithOption:w}=e,C=e.datetimeFormats,P=e.numberFormats,y=e.flatJson;return{locale:t,fallbackLocale:a,messages:v,flatJson:y,datetimeFormats:C,numberFormats:P,missing:n,missingWarn:o,fallbackWarn:r,fallbackRoot:s,fallbackFormat:l,modifiers:c,pluralRules:f,postTranslation:u,warnHtmlMessage:d,escapeParameter:m,messageResolver:e.messageResolver,inheritLocale:g,__i18n:b,__root:$,__injectWithOption:w}}function createVueI18n(e={}){const t=createComposer(convertComposerOptions(e)),{__extender:a}=e,n={id:t.id,get locale(){return t.locale.value},set locale(o){t.locale.value=o},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(o){t.fallbackLocale.value=o},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(o){t.setMissingHandler(o)},get silentTranslationWarn(){return isBoolean$2(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(o){t.missingWarn=isBoolean$2(o)?!o:o},get silentFallbackWarn(){return isBoolean$2(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(o){t.fallbackWarn=isBoolean$2(o)?!o:o},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(o){t.fallbackFormat=o},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(o){t.setPostTranslationHandler(o)},get sync(){return t.inheritLocale},set sync(o){t.inheritLocale=o},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){t.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(o){t.escapeParameter=o},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...o){return Reflect.apply(t.t,t,[...o])},rt(...o){return Reflect.apply(t.rt,t,[...o])},te(o,r){return t.te(o,r)},tm(o){return t.tm(o)},getLocaleMessage(o){return t.getLocaleMessage(o)},setLocaleMessage(o,r){t.setLocaleMessage(o,r)},mergeLocaleMessage(o,r){t.mergeLocaleMessage(o,r)},d(...o){return Reflect.apply(t.d,t,[...o])},getDateTimeFormat(o){return t.getDateTimeFormat(o)},setDateTimeFormat(o,r){t.setDateTimeFormat(o,r)},mergeDateTimeFormat(o,r){t.mergeDateTimeFormat(o,r)},n(...o){return Reflect.apply(t.n,t,[...o])},getNumberFormat(o){return t.getNumberFormat(o)},setNumberFormat(o,r){t.setNumberFormat(o,r)},mergeNumberFormat(o,r){t.mergeNumberFormat(o,r)}};return n.__extender=a,n}function defineMixin(e,t,a){return{beforeCreate(){const n=getCurrentInstance();if(!n)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const r=o.i18n;if(o.__i18n&&(r.__i18n=o.__i18n),r.__root=t,this===this.$root)this.$i18n=mergeToGlobal(e,r);else{r.__injectWithOption=!0,r.__extender=a.__vueI18nExtend,this.$i18n=createVueI18n(r);const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}}else if(o.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,o);else{this.$i18n=createVueI18n({__i18n:o.__i18n,__injectWithOption:!0,__extender:a.__vueI18nExtend,__root:t});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=e;o.__i18nGlobal&&adjustI18nResources(t,o,o),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$te=(r,s)=>this.$i18n.te(r,s),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),a.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const n=getCurrentInstance();if(!n)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,o.__disposer&&(o.__disposer(),delete o.__disposer,delete o.__extender),a.__deleteInstance(n),delete this.$i18n}}}function mergeToGlobal(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[SetPluralRulesSymbol](t.pluralizationRules||e.pluralizationRules);const a=getLocaleMessages(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(a).forEach(n=>e.mergeLocaleMessage(n,a[n])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n])),t.numberFormats&&Object.keys(t.numberFormats).forEach(n=>e.mergeNumberFormat(n,t.numberFormats[n])),e}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((n,o)=>[...n,...o.type===Fragment?o.children:[o]],[]):t.reduce((a,n)=>{const o=e[n];return o&&(a[n]=o()),a},create())}function getFragmentableTag(){return Fragment}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber$1(e)||!isNaN(e)}},baseFormatProps),setup(e,t){const{slots:a,attrs:n}=t,o=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const r=Object.keys(a).filter(d=>d!=="_"),s=create();e.locale&&(s.locale=e.locale),e.plural!==void 0&&(s.plural=isString$1(e.plural)?+e.plural:e.plural);const l=getInterpolateArg(t,r),c=o[TranslateVNodeSymbol](e.keypath,l,s),f=assign$1(create(),n),u=isString$1(e.tag)||isObject$2(e.tag)?e.tag:getFragmentableTag();return h(u,f,c)}}}),Translation=TranslationImpl;function isVNode(e){return isArray$1(e)&&!isString$1(e[0])}function renderFormatter(e,t,a,n){const{slots:o,attrs:r}=t;return()=>{const s={part:!0};let l=create();e.locale&&(s.locale=e.locale),isString$1(e.format)?s.key=e.format:isObject$2(e.format)&&(isString$1(e.format.key)&&(s.key=e.format.key),l=Object.keys(e.format).reduce((m,g)=>a.includes(g)?assign$1(create(),m,{[g]:e.format[g]}):m,create()));const c=n(e.value,s,l);let f=[s.key];isArray$1(c)?f=c.map((m,g)=>{const v=o[m.type],b=v?v({[m.type]:m.value,index:g,parts:c}):[m.value];return isVNode(b)&&(b[0].key=`${m.type}-${g}`),b}):isString$1(c)&&(f=[c]);const u=assign$1(create(),r),d=isString$1(e.tag)||isObject$2(e.tag)?e.tag:getFragmentableTag();return h(d,u,f)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,t){const a=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,t,NUMBER_FORMAT_OPTIONS_KEYS,(...n)=>a[NumberPartsSymbol](...n))}}),NumberFormat=NumberFormatImpl;function getComposer$1(e,t){const a=e;if(e.mode==="composition")return a.__getInstance(t)||e.global;{const n=a.__getInstance(t);return n!=null?n.__composer:e.global.__composer}}function vTDirective(e){const t=s=>{const{instance:l,value:c}=s;if(!l||!l.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const f=getComposer$1(e,l.$),u=parseValue(c);return[Reflect.apply(f.t,f,[...makeParams(u)]),f]};return{created:(s,l)=>{const[c,f]=t(l);inBrowser&&e.global===f&&(s.__i18nWatcher=watch(f.locale,()=>{l.instance&&l.instance.$forceUpdate()})),s.__composer=f,s.textContent=c},unmounted:s=>{inBrowser&&s.__i18nWatcher&&(s.__i18nWatcher(),s.__i18nWatcher=void 0,delete s.__i18nWatcher),s.__composer&&(s.__composer=void 0,delete s.__composer)},beforeUpdate:(s,{value:l})=>{if(s.__composer){const c=s.__composer,f=parseValue(l);s.textContent=Reflect.apply(c.t,c,[...makeParams(f)])}},getSSRProps:s=>{const[l]=t(s);return{textContent:l}}}}function parseValue(e){if(isString$1(e))return{path:e};if(isPlainObject$2(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:t,locale:a,args:n,choice:o,plural:r}=e,s={},l=n||{};return isString$1(a)&&(s.locale=a),isNumber$1(o)&&(s.plural=o),isNumber$1(r)&&(s.plural=r),[t,l,s]}function apply(e,t,...a){const n=isPlainObject$2(a[0])?a[0]:{};(isBoolean$2(n.globalInstall)?n.globalInstall:!0)&&([Translation.name,"I18nT"].forEach(r=>e.component(r,Translation)),[NumberFormat.name,"I18nN"].forEach(r=>e.component(r,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(r=>e.component(r,DatetimeFormat))),e.directive("t",vTDirective(t))}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={}){const t=__VUE_I18N_LEGACY_API__&&isBoolean$2(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,a=isBoolean$2(e.globalInjection)?e.globalInjection:!0,n=new Map,[o,r]=createGlobal(e,t),s=makeSymbol("");function l(d){return n.get(d)||null}function c(d,m){n.set(d,m)}function f(d){n.delete(d)}const u={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(d,...m){if(d.__VUE_I18N_SYMBOL__=s,d.provide(d.__VUE_I18N_SYMBOL__,u),isPlainObject$2(m[0])){const b=m[0];u.__composerExtend=b.__composerExtend,u.__vueI18nExtend=b.__vueI18nExtend}let g=null;!t&&a&&(g=injectGlobalFields(d,u.global)),__VUE_I18N_FULL_INSTALL__&&apply(d,u,...m),__VUE_I18N_LEGACY_API__&&t&&d.mixin(defineMixin(r,r.__composer,u));const v=d.unmount;d.unmount=()=>{g&&g(),u.dispose(),v()}},get global(){return r},dispose(){o.stop()},__instances:n,__getInstance:l,__setInstance:c,__deleteInstance:f};return u}function useI18n(e={}){const t=getCurrentInstance();if(t==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const a=getI18nInstance(t),n=getGlobalComposer(a),o=getComponentOptions(t),r=getScope(e,o);if(r==="global")return adjustI18nResources(n,e,o),n;if(r==="parent"){let c=getComposer(a,t,e.__useComponent);return c==null&&(c=n),c}const s=a;let l=s.__getInstance(t);if(l==null){const c=assign$1({},e);"__i18n"in o&&(c.__i18n=o.__i18n),n&&(c.__root=n),l=createComposer(c),s.__composerExtend&&(l[DisposeSymbol]=s.__composerExtend(l)),setupLifeCycle(s,t,l),s.__setInstance(t,l)}return l}function createGlobal(e,t){const a=effectScope(),n=__VUE_I18N_LEGACY_API__&&t?a.run(()=>createVueI18n(e)):a.run(()=>createComposer(e));if(n==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[a,n]}function getI18nInstance(e){const t=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return t}function getScope(e,t){return isEmptyObject(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.mode==="composition"?e.global:e.global.__composer}function getComposer(e,t,a=!1){let n=null;const o=t.root;let r=getParentComponentInstance(t,a);for(;r!=null;){const s=e;if(e.mode==="composition")n=s.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const l=s.__getInstance(r);l!=null&&(n=l.__composer,a&&n&&!n[InejctWithOptionSymbol]&&(n=null))}if(n!=null||o===r)break;r=r.parent}return n}function getParentComponentInstance(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function setupLifeCycle(e,t,a){onMounted(()=>{},t),onUnmounted(()=>{const n=a;e.__deleteInstance(t);const o=n[DisposeSymbol];o&&(o(),delete n[DisposeSymbol])},t)}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,t){const a=Object.create(null);return globalExportProps.forEach(o=>{const r=Object.getOwnPropertyDescriptor(t,o);if(!r)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=isRef(r.value)?{get(){return r.value.value},set(l){r.value.value=l}}:{get(){return r.get&&r.get()}};Object.defineProperty(a,o,s)}),e.config.globalProperties.$i18n=a,globalExportMethods.forEach(o=>{const r=Object.getOwnPropertyDescriptor(t,o);if(!r||!r.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${o}`,r)}),()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach(o=>{delete e.config.globalProperties[`$${o}`]})}}const DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,t){const a=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,t,DATETIME_FORMAT_OPTIONS_KEYS,(...n)=>a[DatetimePartsSymbol](...n))}}),DatetimeFormat=DatetimeFormatImpl;if(initFeatureFlags(),registerMessageCompiler(compile),registerMessageResolver(resolveValue),registerLocaleFallbacker(fallbackWithLocaleChain),__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const _export_sfc=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a},_hoisted_1$s={class:"weilin_prompt_ui_window-title"},_hoisted_2$p=["title"],_sfc_main$t={__name:"DraggableWindow",props:{title:{type:String,required:!0},position:{type:Object,required:!0},size:{type:Object,required:!0},zIndex:{type:Number,default:1},name:{type:String,default:"default_window_name"}},emits:["update:position","update:size","active","close"],setup(e,{emit:t}){const a=e,{t:n}=useI18n(),o=t,r=ref({x:0,y:0}),s=ref({width:600,height:400});watch(()=>a.position,R=>{R&&(r.value={...R},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${a.name}_position`},"*"))},{immediate:!0,deep:!0}),watch(()=>a.size,R=>{R&&(s.value={...R},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${a.name}_size`},"*"))},{immediate:!0,deep:!0});const l=()=>{window.parent.postMessage({type:`weilin_prompt_ui_window_change_${a.name}_scroll`},"*")};onMounted(()=>{var R;if(a.position){const F=window.innerWidth,H=window.innerHeight,j=100;let fe=a.position.x,oe=a.position.y;fe=Math.max(j-(((R=a.size)==null?void 0:R.width)||s.value.width),fe),fe=Math.min(fe,F-100),oe=Math.max(100,oe),oe=Math.min(oe,H-100),r.value={x:fe,y:oe}}a.size&&(s.value={...a.size})});const c=ref(!1),f=ref({x:0,y:0}),u=R=>{c.value=!0,f.value={x:R.clientX-r.value.x,y:R.clientY-r.value.y},document.addEventListener("mousemove",d),document.addEventListener("mouseup",m)},d=R=>{if(c.value){const F=window.innerWidth,H=window.innerHeight,j=100;let fe=R.clientX-f.value.x,oe=R.clientY-f.value.y;fe=Math.max(j-s.value.width,fe),fe=Math.min(fe,F-100),oe=Math.max(100,oe),oe=Math.min(oe,H-100);const V={x:fe,y:oe};r.value=V,o("update:position",V)}},m=()=>{c.value=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m)},g=ref(!1),v=ref({x:0,y:0}),b=ref({width:0,height:0}),$=R=>{g.value=!0,v.value={x:R.clientX,y:R.clientY},b.value={...s.value},document.addEventListener("mousemove",w),document.addEventListener("mouseup",C)},w=R=>{if(g.value){const F=R.clientX-v.value.x,H=R.clientY-v.value.y,j={width:Math.max(200,b.value.width+F),height:Math.max(200,b.value.height+H)};s.value=j,o("update:size",j)}},C=()=>{g.value=!1,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",C)},P=()=>{o("active")},y=()=>{o("close")},E=R=>{P(),u(R)};return(R,F)=>(openBlock(),createBlock(Teleport,{to:"#weilin_comfyui_tools_prompt_ui_div"},[createBaseVNode("div",{class:"weilin_prompt_ui_draggable-window",style:normalizeStyle({left:`${r.value.x}px`,top:`${r.value.y}px`,width:`${s.value.width}px`,height:`${s.value.height}px`,zIndex:e.zIndex}),onMousedown:P},[createBaseVNode("div",{class:"weilin_prompt_ui_window-header",onMousedown:withModifiers(E,["stop"])},[createBaseVNode("div",_hoisted_1$s,toDisplayString$1(e.title),1),createBaseVNode("button",{class:"weilin_prompt_ui_close-btn",onClick:y},"×")],32),createBaseVNode("div",{class:"weilin_prompt_ui_window-content",onScroll:l},[renderSlot(R.$slots,"default",{},void 0,!0)],32),createBaseVNode("div",{class:"weilin_prompt_ui_resize-handle",title:unref(n)("common.windowSize"),onMousedown:withModifiers($,["stop"])},null,40,_hoisted_2$p)],36)]))}},DraggableWindow=_export_sfc(_sfc_main$t,[["__scopeId","data-v-5d02be5b"]]),version="v0.0.67",zh_CN={promptBox:{placeholder:"请输入文本...",delete:"删除",newline:"换行",tab:"制表符",windowTitle:"WeiLin提示词UI窗口 "+version,windowTitleGlobal:"WeiLin全局提示词UI窗口 "+version,translate:"翻译",translatePlaceholder:"请输入要翻译的文本,回车即可",weight:"权重",weightPlaceholder:"请输入权重",addBracket:"添加括号",removeLayer:"减去括号",hiddenHint:"双击显示提示词",tagTips:"鼠标左键双击屏蔽Tag<br>鼠标左键单击Tag可以编辑<br>鼠标左键拖动可以拖动Tag",oneClickRandomTag:"一键随机Tag",randomTagSettings:"设置随机Tag规则",oneClickTranslate:"一键翻译Tag",modelWeight:"模型权重",textWeight:"文本权重",favour:"收藏",lineToken:"换行",addLineToken:"添加换行符",settings:{title:"设置",cancel:"取消",save:"保存",translator:"翻译设置",sourceLanguage:"源语言",targetLanguage:"目标语言",chinese_simplified:"简体中文",english:"英语",close:"关闭",auto_detect:"自动检测",setting_floating_ball:"悬浮球设置",setting_prompt_box:"提示词设置",enablePromptCommaShow:"显示提示词逗号",floatingBallCount:"悬浮球数量",floatingBallCountPlaceholder:"请输入悬浮球数量",floatingBallSize:"悬浮球宽度",floatingBallSizePlaceholder:"请输入悬浮球宽度",floatingBallHeight:"悬浮球高度",floatingBallHeightPlaceholder:"请输入悬浮球高度",enableFloatingBall:"启用悬浮球",enableCommaConversion:"启用逗号转换，全角逗号转为半角逗号",enablePeriodConversion:"启用句号转换，全角句号转为半角句号",enableBracketConversion:"启用括号转换，全角括号转为半角括号",enableAngleBracketConversion:"启用尖括号转换，全角尖括号转为半角尖括号",enableUnderscoreToBracket:"启用下划线转换，下划线转换为空格",enableBracketEscape:"启用括号转义，自动添加\\转义括号",enableCommaCloseAutocomplete:"启动逗号关闭补全，输入逗号立即关闭补全列表",setting_openai_box:"OpenAI设置",openai_api_key:"API Key",openai_api_key_placeholder:"请输入API Key",openai_api_key_save:"保存",openaiSettings:"OpenAI设置",openai_base_url:"Base URL",openai_base_url_placeholder:"请输入Base URL",openai_model:"模型",openai_model_placeholder:"请输入模型",not_set:"未设置",edit:"编辑",delete:"删除",selectedOpenaiConfig:"当前选择的OpenAI配置",addNewConfig:"添加OpenAI配置",setting_sponsor_me:"赞助我",sponsorMe:"赞助我",sponsorMeTip:"赞助我，支持我继续开发",sponsorMeLink:"唯一赞助链接 https://afdian.com/a/weilin9999",setting_start_panel:"启动面板",startPanel:"启动面板",startPanelTip:"点击启动面板，启动成功后会自动打开面板页面",selectTranslater:"选择翻译器",selectOptionNetworkTranslater:"三方网络翻译",selectOptionPythonTranslater:"翻译库翻译",apply:"应用",selectOptionNetworkTranslaterTitle:"三方网络翻译设置",selectOptionPythonTranslaterTitle:"翻译库设置",selectOptionNetworkTranslaterInfo:"使用的三方工具是（仅网络翻译）",selectOptionPythonTranslaterInfo:"使用的翻译包为translators",install:"安装",nowTranlaterPackageState:"当前翻译包状态：",tranlaterPackageStateTrue:"已安装",tranlaterPackageStateFlase:"未安装",installed:"正在安装中...",installTranslaterPackageInfo:"当前正在安装翻译库中，请不要关闭窗口！等待安装完成",translaterSetting:"翻译设置",chooseTranslaterSetting:"选择翻译服务：",translaterLangSourceSetting:"翻译语言：",translaterLangTargeSetting:"翻译目标语言：",saveTranslaterSetting:"保存设置",testTranslaterTitle:"测试翻译",inputTestTranslater:"输入翻译内容：",outPutTestTranslater:"翻译结果：",testingTranslater:"测试翻译",inputTestTranslaterPlaceholder:"请输入要翻译的内容",outPutTestTranslaterPlaceholder:"翻译结果将显示在这里",errorPrompt:"读取节点提示词失败！",setting_auto_complete_limit:"补全提示设置",show_auto_limit:"显示补全提示数量",showAutoLimitPlaceholder:"请输入要显示的数量",settingAutoCompleteWidth:"设置补全提示框宽度",settingAutoCompleteWidthPlaceholder:"请输入宽度",settingAutoCompleteHeight:"设置补全提示框最大高度",settingAutoCompleteHeightPlaceholder:"请输入最大高度",skinSetting:"皮肤设置",defaultSkin:"默认皮肤",customSkin:"自定义皮肤",uploadSkin:"上传皮肤",bgSetting:"背景设置",gradientBg:"渐变颜色",transparentBg:"透明",gradientColor:"渐变颜色选择",borderRadius:"圆角设置",resetToDefault:"恢复默认"}},controls:{language:"语言",settings:"设置",switchTheme:"切换主题",darkMode:"夜间模式",lightMode:"日间模式",tagManager:"标签管理",loraStack:"Lora堆",loraManager:"Lora管理",history:"历史记录",addLora:"添加Lora",removeLora:"移除Lora",lookOnLora:"查看Lora",aiChat:"AI对话",github:"Github主页",shareCloudData:"共享云数据",tutorialVideo:"教程视频",sponsor:"赞助我",danbooruManager:"Danbooru管理器"},theme:{toggle:"切换主题"},common:{confirmDelete:"确认删除",delete:"删除",cancel:"取消",confirm:"确定",edit:"编辑",save:"保存",refresh:"刷新",copy:"复制",copySuccess:"复制成功",copyFailed:"复制失败",windowSize:"调节窗口大小",showMore:"显示更多",showLess:"收起"},cloudWindow:{windowTitle:"共享云仓库",back:"返回上一级",currentPath:"当前路径",tagDatabase:"Tag 数据库",danbooruDatabase:"Danbooru 数据库",open:"打开文件夹",installed:"已安装",install:"安装",installing:"正在安装..."},nodeListWindow:{windowTitle:"节点列表",openPromptUI:"打开提示词编辑器"},lora:{title:"Lora 信息",rawTitle:"LoraRaw",file:"文件",hash:"Hash值",civitai:"Civitai",viewOnCivitai:"在 Civitai 上查看",fetchFromCivitai:"从 Civitai 获取信息",modelNotFound:"模型未找到",modelNotFoundTip:"该模型在 Civitai 上未找到，可能是私有模型或已被删除",name:"名称",nameTip:"模型的显示名称",type:"类型",baseModel:"基础模型",trainedWords:"训练词",trainedWordsTip:"模型训练时使用的关键词，点击可选择复制",selectedWords:"已选择 {count} 个词",strengthMin:"最小强度",strengthMinTip:"推荐的最小强度值",strengthMax:"最大强度",strengthMaxTip:"推荐的最大强度值",promptWords:"提示词",promptWordsTip:"使用该模型时的推荐提示词",loraWorks:"Lora提示词",strWeight:"文本强度权重",hideLora:"禁用Lora",showLora:"启用Lora",baseModel:"基础模型",skipClip:"跳过层",seeLoraRaw:"查看LoraRaw",addDiyFiled:"添加自定义字段",getCivitData:"获取Civitai信息",copy:"复制"},tagManager:{deletePrimaryCategoryConfirm:"确定要删除分类 {name} 吗？",deleteGroupConfirm:"确定要删除分组 {name} 吗？",deleteTagConfirm:"确定要删除标签 {name} 吗？",windowTitle:"标签管理器",categories:"分类管理",groups:"分组管理",selectCategory:"请选择分类",selectGroup:"请选择分组",addPrimaryCategory:"添加分类",addGroup:"添加分组",editPrimaryCategory:"编辑分类",editGroup:"编辑分组",editTag:"编辑标签",categoryName:"分类名称",categoryNamePlaceholder:"请输入分类名称",categoryNameRequired:"分类名称不能为空",groupName:"分组名称",groupNamePlaceholder:"请输入分组名称",groupNameRequired:"分组名称不能为空",addTag:"添加Tag",text:"Tag描述",textPlaceholder:"请输入Tag描述",description:"Tag",descriptionPlaceholder:"请输入Tag",textRequired:"Tag和Tag描述不能为空",favourRequired:"Tag和Tag描述不能为空，且必须选择分组",backgroundColor:"背景颜色",colorPickerTitle:"选择颜色",opacity:"透明度",searchPlaceholder:"搜索Tag...",noResults:"未找到相关结果",searchInCategory:"在分类中",searchInTag:"在Tag中",save:"保存",cancel:"取消",confirm:"确定",delete:"删除",addSubCategory:"添加子分类",editSubCategory:"编辑子分类",subCategoryName:"子分类名称",subCategoryNamePlaceholder:"请输入子分类名称",subCategoryNameRequired:"子分类名称不能为空",deleteConfirmTitle:"确认删除",deleteConfirmMessage:"此操作将永久删除该{type}，是否继续？",deleteSuccess:"删除成功",deleteFailed:"删除失败",saveSuccess:"保存成功",saveFailed:"保存失败",colorPickerAlpha:"透明度",colorPickerHex:"十六进制颜色值",colorPreview:"颜色预览",dragToSort:"拖动排序",searchTags:"搜索标签",noTagsFound:"未找到标签",noGroupsFound:"未找到分组",noCategoriesFound:"未找到分类",refresh:"刷新",refreshing:"刷新中...",refreshSuccess:"刷新成功",refreshFailed:"刷新失败",search:"搜索",searching:"搜索中...",searchResult:"搜索结果",searchInPath:"位于: {path}",category:"分类",group:"分组",tag:"标签",resultType:{category:"分类",group:"分组",tag:"标签"},hasDeleteAction:"批量删除",deleteSelected:"删除选中",confirmDeleteSelected:"确定要删除选中标签吗？",cancelDelete:"取消删除",moveTag:"移动标签",targetTag:"目标标签",movePosition:"移动位置",moveBefore:"移动到目标标签之前",moveAfter:"移动到目标标签之后",editTag:"编辑标签",deleteTag:"删除标签",editGroupMode:"编辑模式",exitEditMode:"退出编辑模式",autoAddSearchTag:"搜索的Tag自动添加到提示词中",importTags:"批量导入Tag",share:"分享",delete:"删除",edit:"编辑",outputSuccess:"分享成功",noTagsSelected:"没有选择要分享的Tag",shareSelected:"分享选择的Tag",batchShare:"批量分享Tag",cancelShare:"取消分享",moveGroup:"移动分组",targetGroup:"目标分组",moveGroupBefore:"移动到目标分组之前",moveGroupAfter:"移动到目标分组之后",importDanbooru:"批量导入",modifyTabSize:"修改标签尺寸",tabSizeConfig:"标签尺寸配置",primaryTabConfig:"一级分类标签配置",groupTabConfig:"二级分类标签配置",tabWidth:"标签宽度",tabHeight:"标签高度",fontSize:"字体大小",fitContent:"自适应内容",customWidth:"自定义宽度",resetDefault:"重置为默认值",tabSizeConfigSaved:"标签尺寸配置已保存",tabSizeConfigSaveFailed:"标签尺寸配置保存失败"},loraManager:{windowTitle:"Lora管理",modelWeight:"模型权重",textEncoderWeight:"文本权重",all:"全部",root:"根目录",refresh:"刷新",cacheAll:"缓存全部Lora信息",searchPlaceholder:"搜索Lora...",prevPage:"上一页",nextPage:"下一页",noResults:"未找到相关结果",loadingMore:"正在加载更多...",noMoreData:"没有更多结果了"},message:{copySuccess:"复制成功",copyFailed:"复制失败",saveSuccess:"保存成功",saveFailed:"保存失败",deleteSuccess:"删除成功",deleteFailed:"删除失败",operationSuccess:"操作成功",operationFailed:"操作失败",networkError:"网络错误",unknownError:"未知错误",refreshSuccess:"刷新成功",refreshFailed:"刷新失败",loadingData:"加载数据中...",dataLoaded:"数据加载完成",editSuccess:"编辑成功",editFailed:"编辑失败",addSuccess:"添加成功",addFailed:"添加失败",addFavoriteSuccess:"已添加到收藏夹",addFavoriteIsExist:"已添加到收藏夹",error:"错误",editNameExist:"名称已存在",moveSuccess:"移动成功",moveFailed:"移动失败",setLanguageSuccess:"设置语言成功",setLanguageFailed:"设置语言失败",startPanelSuccess:"启动面板成功",startPanelFailed:"启动面板失败",isLoading:"已在执行中请等待",loaddingPrc:"执行进度 {name}%",loaddingSuccess:"已全部加载成功",noFinishKuo:"括号不完整，请检查输入",getTranslaterFail:"获取翻译设置失败",applyTranslaterFail:"应用翻译设置失败",applyToTranslaterFail:"切换翻译库翻译需要安装翻译库，请先安装翻译库再应用设置",applyTranslaterSuccess:"应用翻译设置成功",tranlaterPackageInstallFail:"等待安装超时，请查看后台安装情况，若安装成功再次点击安装即可验证",tranlaterPackageInstallSuccess:"安装翻译包成功",translaterTestFail:"翻译失败，请使用其它的翻译服务进行尝试",installPackageSuccess:"安装共享数据成功！",installPackageFail:"安装共享数据失败，请查看后台错误",loadFailed:"加载失败",jsonErrorMesg:"JSON文件格式错误",pleaseAddSub:"请先添加二级分类",pleaseAddMainCeb:"请先添加一级分类",pleaseSelectGroup:"请选择完整的分组路径",isLoadingPleaseWait:"正在执行中，请查看后台进度",shareGroupError:"分享失败，获取分组信息失败",shareTagError:"分享失败，获取组Tag信息失败"},history:{title:"历史记录",search_placeholder:"搜索历史记录...",search:"搜索",windowTitle:"历史记录",favorites:"收藏夹",history:"历史记录",refresh:"刷新",refresh_history:"刷新历史记录",refresh_favorites:"刷新收藏夹",add_to_favorites:"添加到收藏夹",delete_history:"删除历史记录",use_item:"使用",add_new:"添加收藏",bulk_delete:"批量删除",deleteHistoryConfirm:"确定要删除历史记录 {name} 吗？",deleteFavoriteConfirm:"确定要删除收藏夹 {name} 吗？",confirmDeleteSelected:"确定要删除选中的信息吗？",cancel_delete:"取消删除",sure_delete:"确定删除",deleteSelected:"删除选中",dialog:{add_tag:"添加收藏",edit_tag:"编辑收藏",name:"名称",name_placeholder:"请输入名称",tag:"标签",tag_placeholder:"请输入标签",background_color:"背景颜色",background_color_placeholder:"请选择背景颜色",edit_favorite:"编辑收藏",delete_favorite:"删除收藏"},edit_favorite:"编辑收藏",delete_favorite:"删除收藏",use_favorite:"使用收藏"},floatingBall:{promptBox:"打开全局提示词",tagManager:"打开标签管理",loraManager:"打开Lora管理",aiWindow:"打开AI对话",restoreWindow:"重置所有窗口",openNodeListWindow:"打开节点列表",tranToWeb:"图片转换工具",openSetting:"打开设置"},aiWindow:{windowTitle:"AI对话窗口",newChat:"新建对话",chatName:"对话",thinking:"思考中...",send:"发送",inputMessage:"输入你的消息..."},translaterService:{niutrans:"小牛翻译",mymemory:"MyMemory",alibaba:"阿里巴巴翻译",baidu:"百度翻译",modernmt:"ModernMT",volcengine:"火山翻译",iciba:"金山词霸",iflytek:"科大讯飞翻译",google:"谷歌翻译",bing:"必应翻译",lingvanex:"Lingvanex",yandex:"Yandex翻译",itranslate:"iTranslate",systran:"SYSTRAN",argos:"Argos翻译",apertium:"Apertium",reverso:"Reverso翻译",deepl:"DeepL翻译",cloudtranslation:"云翻译",qqtransmart:"腾讯翻译君",translatecom:"Translate.com",sogou:"搜狗翻译",tilde:"Tilde翻译",caiyun:"彩云小译",qqfanyi:"腾讯翻译",translateme:"TranslateMe",papago:"Papago翻译",mirai:"未来翻译",youdao:"有道翻译",iflyrec:"讯飞听见翻译",hujiang:"沪江翻译",yeekit:"译库翻译",languagewire:"LanguageWire",elia:"Elia翻译",judic:"Judic翻译",mglip:"蒙古语翻译",utibet:"藏语翻译"},translaterLanguage:{english:"英语",chinese:"中文",arabic:"阿拉伯语",russian:"俄语",french:"法语",german:"德语",spanish:"西班牙语",portuguese:"葡萄牙语",italian:"意大利语",japanese:"日语",korean:"韩语",greek:"希腊语",dutch:"荷兰语",hindi:"印地语",turkish:"土耳其语",malay:"马来语",thai:"泰语",vietnamese:"越南语",indonesian:"印度尼西亚语",hebrew:"希伯来语",polish:"波兰语",mongolian:"蒙古语",czech:"捷克语",hungarian:"匈牙利语",estonian:"爱沙尼亚语",bulgarian:"保加利亚语",danish:"丹麦语",finnish:"芬兰语",romanian:"罗马尼亚语",swedish:"瑞典语",slovenian:"斯洛文尼亚语","persian/farsi":"波斯语/波斯语",bosnian:"波斯尼亚语",serbian:"塞尔维亚语",fijian:"斐济语",filipino:"菲律宾语",haitiancreole:"海地克里奥尔语",catalan:"加泰罗尼亚语",croatian:"克罗地亚语",latvian:"拉脱维亚语",lithuanian:"立陶宛语",urdu:"乌尔都语",ukrainian:"乌克兰语",welsh:"威尔士语",tahiti:"塔希提语",tongan:"汤加语",swahili:"斯瓦希里语",samoan:"萨摩亚语",slovak:"斯洛伐克语",afrikaans:"南非荷兰语",norwegian:"挪威语",bengali:"孟加拉语",malagasy:"马达加斯加语",maltese:"马耳他语","queretaro otomi":"克雷塔罗奥托米语","klingon/tlhingan hol":"克林贡语",gujarati:"古吉拉特语",tamil:"泰米尔语",telugu:"泰卢固语",punjabi:"旁遮普语",amharic:"阿姆哈拉语",azerbaijani:"阿塞拜疆语",bashkir:"巴什基尔语",belarusian:"白俄罗斯语",cebuano:"宿务语",chuvash:"楚瓦什语",esperanto:"世界语",basque:"巴斯克语",irish:"爱尔兰语"},utils:{tranToWeb:"转换图片为HTML",dropOrPasteImage:"点击本区域可以上传文件也可以拖动图片或粘贴图片到此处",downloadHtml:"下载HTML",copyHtml:"复制HTML",copySuccess:"HTML已复制",copyFailed:"复制HTML失败",clear:"清空内容"},importDialog:{title:"批量导入Tag",sure:"确认并导入",cleanAll:"清空所有",dumpSQL:"导出所有SQL",uploadSQL:"上传原始SQL文件",setMainCeb:"设置一级分类",setSubCeb:"设置二级分类",addTag:"添加Tag",fromJSONImput:"从JSON文件批量导入Tag",fromTxtInput:"从TXT文件批量导入Tag",fromYmalInput:"从YAML文件批量导入Tag",selectMainCeb:"选择一级分类",selectSubCeb:"选择二级分类",selectGroup:"选择已有分类",sureSelect:"确认选择",pleaseAddGroupName:"请填写一级分类名称",pleaseAddSubGroupName:"请填写二级分类名称",pleaseFullRequest:"请填写完整一级分类和二级分类信息",successImport:"导入成功",importFail:"导入失败",dumpOnlySQL:"仅导出Tag的SQL",settingOutputName:"设置导出文件名称",sureYes:"确认",cancel:"取消",edit:"编辑",delete:"删除",add:"添加Tag",pleaseMainCebUuid:"一级分原UUID，增量更新才需要",pleaseSubGroupUuid:"二级分原UUID，增量更新才需要",pleaseSubGroup:"二级分类名称",pleaseMainCeb:"一级分类名称",translater:"描述",tips1:"使用教程：",tips1text:"B站视频教程",tips2:"Tag云仓库：",tips2text:"GitHub仓库",tips3:"在线批量编辑：",tips3text:"在线编辑器",selectTitle:"选择分类",selectedCategories:"已选择的分类",clearAll:"清除全部",primaryCategories:"一级分类",subCategories:"二级分类",noSelectedCategories:"暂无选择的分类",selectCategory:"选择此分类",selectSubcategory:"选择此子分类",sureSelect:"确认选择"},randomUtils:{title:"随机Tag规则设置",generalSettings:"通用设置",totalTags:"随机Tag总数量（规则范围超过总数量按总数量算最大范围）",rules:"规则",addRule:"添加规则",rule:"规则",range:"范围",tagType:"标签类型",category:"Tag数据",specificTags:"特定标签",selectCategory:"选择分类",addTagPlaceholder:"输入标签并按回车",addTag:"添加标签",testRandom:"测试随机",generatedTags:"生成的标签",selectTagGroup:"选择Tag分组",ruleTemplates:"规则模板",saveAsTemplate:"保存为模板",selectTemplate:"选择模板",applyTemplate:"应用模板",templateNamePlaceholder:"输入模板名称",templateNameRequired:"请输入模板名称",templateSaved:"模板已保存",templateApplied:"模板已应用",errorSavingTemplates:"保存模板时出错",save:"保存",cancel:"取消",editTemplate:"修改名称",deleteTemplate:"删除模板",confirmDeleteTemplate:"确定要删除此模板吗？",templateDeleted:"模板已删除",templateUpdated:"模板名称已更新",errorUpdatingTemplate:"更新模板失败",errorLoadingTemplate:"加载模板失败",errorDeletingTemplate:"删除模板失败",errorApplyingTemplate:"应用模板失败",pleaseChooseTemplate:"请选择模板",errorSavingTemplate:"保存模板失败",newTemplate:"新建模板",rulesReminder:"提醒：第一个规则的范围必须从1开始！如果范围区间超过了随机的总数则直接显示全部不会随机！"},danbooruManager:{title:"Danbooru管理器",controle:"操作",translatePlaceholder:"请输入对应的翻译文本",searchPlaceholder:"输入需要搜索的Danbooru标签...",pageShow:"每页显示:",pageLimit:"条",hot:"热度",aliases:"分区",sureBatchDelete:"批量删除确认",sureBatchDeleteTips1:"您确定要删除选中的",sureBatchDeleteTips2:"个标签吗？此操作不可撤销。",sureDelete:"确认删除",import:"Danbooru格式导入",importBatchTitle:"批量导入Danbooru数据",importTitle:"Danbooru 导入数据展示",add:"添加Danbooru标签",edit:"编辑Danbooru标签"}},en_US={promptBox:{placeholder:"Please enter text...",delete:"Delete",newline:"New Line",tab:"Tab",windowTitle:"WeiLin Prompt UI Window "+version,windowTitleGlobal:"WeiLin Global Prompt UI Window "+version,translate:"Translate",translatePlaceholder:"Please enter the text to be translated",weight:"Weight",weightPlaceholder:"Please enter the weight",addBracket:"Add Bracket",removeLayer:"Remove Bracket",hiddenHint:"Double-click to show",tagTips:"Double-click the left mouse button to mask the Tag<br>click the Tag to edit<br>and drag the Tag to drag",oneClickRandomTag:"one Click Random Tag",randomTagSettings:"setting Random Tag",oneClickTranslate:"one Click Translate Tag",modelWeight:"Model Weight",textWeight:"Text Weight",favour:"Favour",lineToken:"Line Break",addLineToken:"Add Line Break Token",settings:{title:"Settings",cancel:"Cancel",save:"Save",translator:"Translator",sourceLanguage:"Source Language",targetLanguage:"Target Language",chinese_simplified:"Chinese Simplified",english:"English",close:"Close",auto_detect:"Auto Detect",setting_floating_ball:"Setting Floating Ball",setting_prompt_box:"Setting Prompt Box",enablePromptCommaShow:"Show Prompt Comma",floatingBallCount:"Floating Ball Count",floatingBallCountPlaceholder:"Please enter the number of floating balls",floatingBallSize:"Width of suspended ball",floatingBallSizePlaceholder:"Please enter the width of the suspension ball",floatingBallHeight:"Height of suspended ball",floatingBallHeightPlaceholder:"Please input the height of the suspension ball",enableFloatingBall:"Enable Floating Ball",enableCommaConversion:"Enable Comma Conversion",enablePeriodConversion:"Enable Period Conversion",enableBracketConversion:"Enable Bracket Conversion",enableAngleBracketConversion:"Enable Angle Bracket Conversion",enableUnderscoreToBracket:"Enable Underscore to Bracket",setting_openai_box:"OpenAI Settings",openai_api_key:"API Key",openai_api_key_placeholder:"Please enter API Key",openai_api_key_save:"Save",openaiSettings:"OpenAI Settings",openaiSettings_api_key:"API Key",openaiSettings_api_key_placeholder:"Please enter API Key",openaiSettings_api_key_save:"Save",openai_base_url:"Base URL",openai_base_url_placeholder:"Please enter Base URL",openai_model:"Model",openai_model_placeholder:"Please enter Model",not_set:"Not Set",edit:"Edit",delete:"Delete",selectedOpenaiConfig:"Selected OpenAI Config",addNewConfig:"Add New Config",setting_sponsor_me:"Sponsor Me",sponsorMe:"Sponsor Me",sponsorMeTip:"Sponsor Me, Support Me to Continue Development",sponsorMeLink:"Unique Sponsor Link https://afdian.com/a/weilin9999",setting_start_panel:"Start Panel",startPanel:"Start Panel",startPanelTip:"Click Start Panel, after successful startup, the panel page will be automatically opened",selectTranslater:"select translater",selectOptionNetworkTranslater:"Three party online translation",selectOptionPythonTranslater:"Translation Library Translation",apply:"Apply",selectOptionNetworkTranslaterTitle:"Three party network translation settings",selectOptionPythonTranslaterTitle:"Translation library settings",selectOptionNetworkTranslaterInfo:"The third-party tool used is (only for online translation)",selectOptionPythonTranslaterInfo:"The translation package used is translators",install:"Install",nowTranlaterPackageState:"now transtler package state:",tranlaterPackageStateTrue:"installed",tranlaterPackageStateFlase:"not installed",installed:"is installed ....",installTranslaterPackageInfo:"Currently installing translation library, please do not close the window! Wait for installation to complete",translaterSetting:"Translation Settings",chooseTranslaterSetting:"Choose a translation service:",translaterLangSourceSetting:"Translation language:",translaterLangTargeSetting:"Translation target language:",saveTranslaterSetting:"Save Settings",testTranslaterTitle:"Test translation",inputTestTranslater:"Enter translation content:",outPutTestTranslater:"Translation result:",testingTranslater:"Test translation",inputTestTranslaterPlaceholder:"Please enter the content to be translated",outPutTestTranslaterPlaceholder:"The translation result will be displayed here",errorPrompt:"Read the prompt node failed",skinSetting:"skin setting",defaultSkin:"default skin",customSkin:"custom skin",uploadSkin:"upload skin",bgSetting:"background setting",gradientBg:"gradient color",transparentBg:"transparent",gradientColor:"gradient color select",borderRadius:"border radius",resetToDefault:"reset to default"}},controls:{language:"Language",settings:"Settings",switchTheme:"Switch Theme",darkMode:"Dark Mode",lightMode:"Light Mode",tagManager:"Tag Manager",loraStack:"Lora Stack",loraManager:"Lora Manager",history:"History",addLora:"Add Lora",removeLora:"Remove Lora",lookOnLora:"Look On Lora",aiChat:"AI Chat",github:"Github Home",shareCloudData:"Share Cloud Data",tutorialVideo:"Tutorial Video",sponsor:"Sponsor Me",danbooruManager:"danbooru Manager"},theme:{toggle:"Switch Theme"},lora:{title:"Lora Information",rawTitle:"LoraRaw",file:"File",hash:"Hash",civitai:"Civitai",viewOnCivitai:"View on Civitai",fetchFromCivitai:"Fetch from Civitai",modelNotFound:"Model not found",modelNotFoundTip:"The model was not found on Civitai. It might be private or deleted",name:"Name",nameTip:"Display name of the model",type:"Type",baseModel:"Base Model",trainedWords:"Trained Words",trainedWordsTip:"Keywords used in model training, click to select for copying",selectedWords:"{count} words selected",strengthMin:"Min Strength",strengthMinTip:"Recommended minimum strength value",strengthMax:"Max Strength",strengthMaxTip:"Recommended maximum strength value",promptWords:"Prompt Words",promptWordsTip:"Recommended prompt words when using this model",loraWorks:"Lora Prompt Words",strWeight:"Text Strength Weight",hideLora:"Disable Lora",showLora:"Enable Lora",baseModel:"Base Model",skipClip:"Clip Skip",seeLoraRaw:"LoraRaw",addDiyFiled:"Add DIY Filed",getCivitData:"Get Civitai Data",copy:"Copy"},common:{confirmDelete:"Confirm Delete",delete:"Delete",cancel:"Cancel",confirm:"Confirm",edit:"Edit",save:"Save",refresh:"Refresh",copy:"Copy",copySuccess:"Copied successfully",copyFailed:"Copy failed",windowSize:"Adjust window size",showMore:"show more",showLess:"show less"},nodeListWindow:{windowTitle:"Node List",openPromptUI:"Open Prompt UI"},tagManager:{deletePrimaryCategoryConfirm:"Are you sure you want to delete category {name}?",deleteGroupConfirm:"Are you sure you want to delete group {name}?",deleteTagConfirm:"Are you sure you want to delete tag {name}?",windowTitle:"Tag Manager",categories:"Categories",groups:"Groups",selectCategory:"Please select a category",selectGroup:"Please select a group",addPrimaryCategory:"Add Category",addGroup:"Add Group",editPrimaryCategory:"Edit Category",editGroup:"Edit Group",editTag:"Edit Tag",categoryName:"Category Name",categoryNamePlaceholder:"Enter category name",categoryNameRequired:"Category name is required",groupName:"Group Name",groupNamePlaceholder:"Enter group name",groupNameRequired:"Group name is required",addTag:"Add Tag",text:"Tag Description",textPlaceholder:"Enter tag Description",description:"Tag",descriptionPlaceholder:"Enter tag",textRequired:"Tag and Tag description cannot be empty",favourRequired:"Tag and Tag description cannot be empty, and a group must be selected",backgroundColor:"Background Color",colorPickerTitle:"Select Color",opacity:"Opacity",searchPlaceholder:"Search tags...",noResults:"No results found",searchInCategory:"in category",searchInTag:"in tag",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",addSubCategory:"Add Sub-category",editSubCategory:"Edit Sub-category",subCategoryName:"Sub-category Name",subCategoryNamePlaceholder:"Enter sub-category name",subCategoryNameRequired:"Sub-category name is required",deleteConfirmTitle:"Confirm Delete",deleteConfirmMessage:"This action will permanently delete this {type}. Continue?",deleteSuccess:"Deleted successfully",deleteFailed:"Delete failed",saveSuccess:"Saved successfully",saveFailed:"Save failed",colorPickerAlpha:"Opacity",colorPickerHex:"Hex Color Value",colorPreview:"Color Preview",dragToSort:"Drag to Sort",searchTags:"Search Tags",noTagsFound:"No tags found",noGroupsFound:"No groups found",noCategoriesFound:"No categories found",refresh:"Refresh",refreshing:"Refreshing...",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",search:"Search",searching:"Searching...",searchResult:"Search Result",searchInPath:"Located in: {path}",category:"Category",group:"Group",tag:"Tag",resultType:{category:"Category",group:"Group",tag:"Tag"},hasDeleteAction:"Batch Delete",deleteSelected:"Delete Selected",confirmDeleteSelected:"Are you sure you want to delete the selected tags?",cancelDelete:"Cancel Delete",moveTag:"Move Tag",targetTag:"Target Tag",movePosition:"Move Position",moveBefore:"Move Before",moveAfter:"Move After",editTag:"Edit Tag",deleteTag:"Delete Tag",editGroupMode:"Edit Group Mode",exitEditMode:"Exit Edit Mode",autoAddSearchTag:"Auto Add Search Tag With Prompt",importTags:"Import Tags",share:"Share",delete:"Delete",edit:"Edit",outputSuccess:"Share successfully",noTagsSelected:"No share tags selected",shareSelected:"Share selected Tag",batchShare:"Batch Share Tag",cancelShare:"Cancel Share",moveGroup:"Move Group",targetGroup:"Target Group",moveGroupBefore:"Move Before",moveGroupAfter:"Move After",importDanbooru:"Batch import",modifyTabSize:"Modify Tag Size",tabSizeConfig:"Tag Size Configuration",primaryTabConfig:"Primary Category Tab Configuration",groupTabConfig:"Group Category Tab Configuration",tabWidth:"Tab Width",tabHeight:"Tab Height",fontSize:"Font Size",fitContent:"Fit Content",customWidth:"Custom Width",resetDefault:"Reset to Default",tabSizeConfigSaved:"Tag size configuration saved",tabSizeConfigSaveFailed:"Failed to save tag size configuration"},loraManager:{windowTitle:"Lora Manager",modelWeight:"Model Weight",textEncoderWeight:"Text Encoder Weight",all:"All",root:"Root",refresh:"Refresh",cacheAll:"Cache all Lora information",searchPlaceholder:"Search Lora...",noResults:"No results found",prevPage:"prev page",nextPage:"next page",loadingMore:"Loadding more ...",noMoreData:"No more data"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",saveSuccess:"Save successful",saveFailed:"Save failed",deleteSuccess:"Delete successful",deleteFailed:"Delete failed",operationSuccess:"Operation successful",operationFailed:"Operation failed",networkError:"Network error",unknownError:"Unknown error",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",loadingData:"Loading data...",dataLoaded:"Data loaded",editSuccess:"Edit successful",editFailed:"Edit failed",addSuccess:"Add successful",addFailed:"Add failed",addFavoriteSuccess:"Added to favorites",addFavoriteIsExist:"Added to favorites",error:"Error",moveSuccess:"Move successful",moveFailed:"Move failed",setLanguageSuccess:"Set language successful",setLanguageFailed:"Set language failed",startPanelSuccess:"Start panel successful",startPanelFailed:"Start panel failed",isLoading:"Loading...",loaddingPrc:"Execution progress {name}%",loaddingSuccess:"All loaded successfully",noFinishKuo:"The parentheses are incomplete. Please check the input",getTranslaterFail:"Get translator failed",applyTranslaterFail:"Apply translator failed",applyToTranslaterFail:"Switching to a translation library requires installing a translation library. Please install the translation library first and then apply the settings",applyTranslaterSuccess:"Apply translator successful",tranlaterPackageInstallFail:"Waiting for installation timeout, please check the background installation status. If the installation is successful, click install again to verify",tranlaterPackageInstallSuccess:"Successfully installed translation package",translaterTestFail:"Translation failed, please try using another translation service",installPackageSuccess:"Successfully installed translation package",installPackageFail:"Failed to install translation package, please check the background installation status",loadFailed:"load failed",jsonErrorMesg:"The format of the JSON file is incorrect",pleaseAddSub:"Please add the secondary classification first",pleaseAddMainCeb:"Please add the first-level category first",pleaseSelectGroup:"Please select the complete grouping path",isLoadingPleaseWait:"It is being executed. Please check the progress in the background",shareGroupError:"Failed to share and failed to obtain group information",shareTagError:"Failed to share and failed to obtain group tag information"},cloudWindow:{windowTitle:"Share Cloud Window",back:"Back",currentPath:"Current Path",tagDatabase:"Tag Database",danbooruDatabase:"Danbooru Database",open:"Open Folder",installed:"Installed",install:"Install",installing:"Installing..."},history:{title:"History",search_placeholder:"Search history...",windowTitle:"History",search:"Search",favorites:"Favorites",history:"History",refresh:"Refresh",refresh_history:"Refresh history",refresh_favorites:"Refresh favorites",add_to_favorites:"Add to favorites",delete_history:"Delete history",use_item:"Use",add_new:"Add new",bulk_delete:"Bulk delete",deleteHistoryConfirm:"Are you sure you want to delete history {name}?",deleteFavoriteConfirm:"Are you sure you want to delete favorite {name}?",confirmDeleteSelected:"Are you sure you want to delete selected information?",cancel_delete:"Cancel delete",sure_delete:"Sure delete",deleteSelected:"Delete selected",dialog:{add_tag:"Add favorite",edit_tag:"Edit favorite",name:"Name",name_placeholder:"Please enter name",tag:"Tag",tag_placeholder:"Please enter tag",background_color:"Background color",background_color_placeholder:"Please select background color",edit_favorite:"Edit favorite",delete_favorite:"Delete favorite"},edit_favorite:"Edit favorite",delete_favorite:"Delete favorite",use_favorite:"Use favorite"},floatingBall:{promptBox:"open Global Prompt Box",tagManager:"open Tag Manager",loraManager:"open Lora Manager",aiWindow:"open AI Chat",restoreWindow:"reset all windows",openNodeListWindow:"open Node List",tranToWeb:"Image to Web Utils",openSetting:"open Setting"},aiWindow:{windowTitle:"AI Chat Window",newChat:"New Chat",chatName:"Chat",thinking:"Thinking...",send:"Send",inputMessage:"Enter your message..."},translaterService:{niutrans:"niutrans",mymemory:"mymemory",alibaba:"alibaba",baidu:"baidu",modernmt:"modernmt",volcengine:"volcengine",iciba:"iciba",iflytek:"iflytek",google:"google",bing:"bing",lingvanex:"lingvanex",yandex:"yandex",itranslate:"itranslate",systran:"systran",argos:"argos",apertium:"apertium",reverso:"reverso",deepl:"deepl",cloudtranslation:"cloudtranslation",qqtransmart:"qqtransmart",translatecom:"translatecom",sogou:"sogou",tilde:"tilde",caiyun:"caiyun",qqfanyi:"qqfanyi",translateme:"translateme",papago:"papago",mirai:"mirai",youdao:"youdao",iflyrec:"iflyrec",hujiang:"hujiang",yeekit:"yeekit",languagewire:"languagewire",elia:"elia",judic:"judic",mglip:"mglip",utibet:"utibet"},translaterLanguage:{english:"english",chinese:"chinese",arabic:"arabic",russian:"russian",french:"french",german:"german",spanish:"spanish",portuguese:"portuguese",italian:"italian",japanese:"japanese",korean:"korean",greek:"greek",dutch:"dutch",hindi:"hindi",turkish:"turkish",malay:"malay",thai:"thai",vietnamese:"vietnamese",indonesian:"indonesian",hebrew:"hebrew",polish:"polish",mongolian:"mongolian",czech:"czech",hungarian:"hungarian",estonian:"estonian",bulgarian:"bulgarian",danish:"danish",finnish:"finnish",romanian:"romanian",swedish:"swedish",slovenian:"slovenian","persian/farsi":"persian/farsi",bosnian:"bosnian",serbian:"serbian",fijian:"fijian",filipino:"filipino",haitiancreole:"haitiancreole",catalan:"catalan",croatian:"croatian",latvian:"latvian",lithuanian:"lithuanian",urdu:"urdu",ukrainian:"ukrainian",welsh:"welsh",tahiti:"tahiti",tongan:"tongan",swahili:"swahili",samoan:"samoan",slovak:"slovak",afrikaans:"afrikaans",norwegian:"norwegian",bengali:"bengali",malagasy:"malagasy",maltese:"maltese","queretaro otomi":"queretaro otomi","klingon/tlhingan hol":"klingon/tlhingan hol",gujarati:"gujarati",tamil:"tamil",telugu:"telugu",punjabi:"punjabi",amharic:"amharic",azerbaijani:"azerbaijani",bashkir:"bashkir",belarusian:"belarusian",cebuano:"cebuano",chuvash:"chuvash",esperanto:"esperanto",basque:"basque",irish:"irish"},utils:{tranToWeb:"Image to HTML",dropOrPasteImage:"Drop or paste image here",downloadHtml:"Download HTML",copyHtml:"Copy HTML",copySuccess:"HTML copied to clipboard",copyFailed:"Failed to copy HTML",clear:"Clear"},importDialog:{title:"Batch import of Tags",sure:"Confirm and import",cleanAll:"Empty all",dumpSQL:"Export All SQL",uploadSQL:"Upload the original SQL file",setMainCeb:"Set up a first-level classification",setSubCeb:"Set up secondary classification",addTag:"Add Tag",fromJSONImput:"Import tags from the JSON file",fromTxtInput:"Batch import tags from TXT files",fromYmalInput:"Batch import tags from YMAL files",selectMainCeb:"Select the first-level classification",selectSubCeb:"Select the secondary classification",selectGroup:"Select the existing classification",sureSelect:"Confirm the selection",pleaseAddGroupName:"Please fill in the name of the first-level classification",pleaseAddSubGroupName:"Please fill in the name of the secondary classification",pleaseFullRequest:"Please fill in the information of the first-level and second-level classifications completely",successImport:"Import successful",importFail:"Import failed",dumpOnlySQL:"Only export the SQL of the Tag",settingOutputName:"Set the name of the export file",sureYes:"Sure",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add Tag",pleaseMainCebUuid:"The original UUID of the first-level division is only required for incremental updates and cannot be modified",pleaseSubGroupUuid:"The secondary division of the original UUID is only required for incremental updates and cannot be modified",pleaseSubGroup:"Secondary classification name",pleaseMainCeb:"First-level classification name",translater:"Description",tips1:"Usage Tutorial:",tips1text:"Bilibili video tutorial",tips2:"Tag Cloud Warehouse:",tips2text:"GitHub repository",tips3:"Online batch editing:",tips3text:"Online editor",selectTitle:"Select Category",selectedCategories:"Selected Categories",clearAll:"Clear All",primaryCategories:"Primary Categories",subCategories:"Sub Categories",noSelectedCategories:"No categories selected",selectCategory:"Select this category",selectSubcategory:"Select this subcategory",sureSelect:"Confirm Selection"},randomUtils:{title:"Random Tag Rules Settings",generalSettings:"General Settings",totalTags:"Random Tag Total Number (If the rule range exceeds the total quantity, the maximum range is calculated by the total quantity)",rules:"Rules",addRule:"Add Rule",rule:"Rule",range:"Range",tagType:"Tag Type",category:"Tag Category",specificTags:"Specific Tags",selectCategory:"Select Category",addTagPlaceholder:"Enter tag and press Enter",addTag:"Add Tag",testRandom:"Test Random",generatedTags:"Generated Tags",selectTagGroup:"Select Tag Group",ruleTemplates:"Rule Templates",saveAsTemplate:"Save as Template",selectTemplate:"Select Template",applyTemplate:"Apply Template",templateNamePlaceholder:"Enter template name",templateNameRequired:"Template name is required",templateSaved:"Template saved",templateApplied:"Template applied",errorSavingTemplates:"Error saving templates",save:"Save",cancel:"Cancel",editTemplate:"Edit Name",deleteTemplate:"Delete",confirmDeleteTemplate:"Are you sure you want to delete this template?",templateDeleted:"Template deleted",templateUpdated:"Template name updated",errorUpdatingTemplate:"Update template failed",errorLoadingTemplate:"Load template failed",errorDeletingTemplate:"Delete template failed",pleaseChooseTemplate:"Please choose a template",errorApplyingTemplate:"Apply template failed",errorSavingTemplate:"Save template failed",newTemplate:"New Template",rulesReminder:"Reminder: The range of the first rule must start at 1! If the range exceeds the total number of random, it will simply display all not random!"},danbooruManager:{title:"Danbooru Manager",controle:"Controle",translatePlaceholder:"Please enter the tag to be translated",searchPlaceholder:"Input need search danbooru tag",pageShow:"Display per page:",pageLimit:"article",hot:"hot",aliases:"aliases",sureBatchDelete:"Batch deletion confirmation",sureBatchDeleteTips1:"You are sure you want to delete the selected one",sureBatchDeleteTips2:"A label? This operation is irrevocable.",sureDelete:"Confirm deletion",import:"Import in Danbooru format",importBatchTitle:"Batch import Danbooru data",importTitle:"Danbooru Import data display",add:"Add Danbooru Tag",edit:"Edit Danbooru Tag"}};/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject$1(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var MutationType;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const e=effectScope(!0),t=e.run(()=>ref({}));let a=[],n=[];const o=markRaw({install(r){setActivePinia(o),o._a=r,r.provide(piniaSymbol,o),r.config.globalProperties.$pinia=o,n.forEach(s=>a.push(s)),n=[]},use(r){return this._a?a.push(r):n.push(r),this},_p:a,_a:null,_e:e,_s:new Map,state:t});return o}const noop$1=()=>{};function addSubscription(e,t,a,n=noop$1){e.push(t);const o=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),n())};return!a&&getCurrentScope()&&onScopeDispose(o),o}function triggerSubscriptions(e,...t){e.slice().forEach(a=>{a(...t)})}const fallbackRunWithContext=e=>e(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map?t.forEach((a,n)=>e.set(n,a)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const a in t){if(!t.hasOwnProperty(a))continue;const n=t[a],o=e[a];isPlainObject$1(o)&&isPlainObject$1(n)&&e.hasOwnProperty(a)&&!isRef(n)&&!isReactive(n)?e[a]=mergeReactiveObjects(o,n):e[a]=n}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject$1(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(e){return!!(isRef(e)&&e.effect)}function createOptionsStore(e,t,a,n){const{state:o,actions:r,getters:s}=t,l=a.state.value[e];let c;function f(){l||(a.state.value[e]=o?o():{});const u=toRefs(a.state.value[e]);return assign(u,r,Object.keys(s||{}).reduce((d,m)=>(d[m]=markRaw(computed(()=>{setActivePinia(a);const g=a._s.get(e);return s[m].call(g,g)})),d),{}))}return c=createSetupStore(e,f,t,a,n,!0),c}function createSetupStore(e,t,a={},n,o,r){let s;const l=assign({actions:{}},a),c={deep:!0};let f,u,d=[],m=[],g;const v=n.state.value[e];!r&&!v&&(n.state.value[e]={}),ref({});let b;function $(H){let j;f=u=!1,typeof H=="function"?(H(n.state.value[e]),j={type:MutationType.patchFunction,storeId:e,events:g}):(mergeReactiveObjects(n.state.value[e],H),j={type:MutationType.patchObject,payload:H,storeId:e,events:g});const fe=b=Symbol();nextTick().then(()=>{b===fe&&(f=!0)}),u=!0,triggerSubscriptions(d,j,n.state.value[e])}const w=r?function(){const{state:j}=a,fe=j?j():{};this.$patch(oe=>{assign(oe,fe)})}:noop$1;function C(){s.stop(),d=[],m=[],n._s.delete(e)}const P=(H,j="")=>{if(ACTION_MARKER in H)return H[ACTION_NAME]=j,H;const fe=function(){setActivePinia(n);const oe=Array.from(arguments),V=[],q=[];function Q(ee){V.push(ee)}function O(ee){q.push(ee)}triggerSubscriptions(m,{args:oe,name:fe[ACTION_NAME],store:E,after:Q,onError:O});let G;try{G=H.apply(this&&this.$id===e?this:E,oe)}catch(ee){throw triggerSubscriptions(q,ee),ee}return G instanceof Promise?G.then(ee=>(triggerSubscriptions(V,ee),ee)).catch(ee=>(triggerSubscriptions(q,ee),Promise.reject(ee))):(triggerSubscriptions(V,G),G)};return fe[ACTION_MARKER]=!0,fe[ACTION_NAME]=j,fe},y={_p:n,$id:e,$onAction:addSubscription.bind(null,m),$patch:$,$reset:w,$subscribe(H,j={}){const fe=addSubscription(d,H,j.detached,()=>oe()),oe=s.run(()=>watch(()=>n.state.value[e],V=>{(j.flush==="sync"?u:f)&&H({storeId:e,type:MutationType.direct,events:g},V)},assign({},c,j)));return fe},$dispose:C},E=reactive(y);n._s.set(e,E);const F=(n._a&&n._a.runWithContext||fallbackRunWithContext)(()=>n._e.run(()=>(s=effectScope()).run(()=>t({action:P}))));for(const H in F){const j=F[H];if(isRef(j)&&!isComputed(j)||isReactive(j))r||(v&&shouldHydrate(j)&&(isRef(j)?j.value=v[H]:mergeReactiveObjects(j,v[H])),n.state.value[e][H]=j);else if(typeof j=="function"){const fe=P(j,H);F[H]=fe,l.actions[H]=j}}return assign(E,F),assign(toRaw(E),F),Object.defineProperty(E,"$state",{get:()=>n.state.value[e],set:H=>{$(j=>{assign(j,H)})}}),n._p.forEach(H=>{assign(E,s.run(()=>H({store:E,app:n._a,pinia:n,options:l})))}),v&&r&&a.hydrate&&a.hydrate(E.$state,v),f=!0,u=!0,E}/*! #__NO_SIDE_EFFECTS__ */function defineStore(e,t,a){let n;const o=typeof t=="function";n=o?a:t;function r(s,l){const c=hasInjectionContext();return s=s||(c?inject(piniaSymbol,null):null),s&&setActivePinia(s),s=activePinia,s._s.has(e)||(o?createSetupStore(e,t,n,s):createOptionsStore(e,n,s)),s._s.get(e)}return r.$id=e,r}const useTagStore=defineStore("tag",()=>{const e=ref([]),t=ref({user_lang:"zh_CN"}),a=ref(0);return{categories:e,setCategories:s=>{e.value=s},userSetting:t,setUserSetting:s=>{t.value=s},isFirstLoading:a,setisFirstLoading:s=>{a.value=s}}});function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>t=>{const a=toString.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=e=>e!==null&&typeof e=="object",isBoolean$1=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject$1(e)&&isFunction(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),isArray(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let l;for(n=0;n<s;n++)l=r[n],t.call(null,e[l],l,e)}}function findKey(e,t){t=t.toLowerCase();const a=Object.keys(e);let n=a.length,o;for(;n-- >0;)if(o=a[n],t===o.toLowerCase())return o;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge$1(){const{caseless:e}=isContextDefined(this)&&this||{},t={},a=(n,o)=>{const r=e&&findKey(t,o)||o;isPlainObject(t[r])&&isPlainObject(n)?t[r]=merge$1(t[r],n):isPlainObject(n)?t[r]=merge$1({},n):isArray(n)?t[r]=n.slice():t[r]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&forEach(arguments[n],a);return t}const extend$1=(e,t,a,{allOwnKeys:n}={})=>(forEach(t,(o,r)=>{a&&isFunction(o)?e[r]=bind(o,a):e[r]=o},{allOwnKeys:n}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,a,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject=(e,t,a,n)=>{let o,r,s;const l={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),r=o.length;r-- >0;)s=o[r],(!n||n(s,e,t))&&!l[s]&&(t[s]=e[s],l[s]=!0);e=a!==!1&&getPrototypeOf(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const n=e.indexOf(t,a);return n!==-1&&n===a},toArray$1=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const r=o.value;t.call(e,r[0],r[1])}},matchAll=(e,t)=>{let a;const n=[];for(;(a=e.exec(t))!==null;)n.push(a);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,o){return n.toUpperCase()+o}),hasOwnProperty=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),n={};forEach(a,(o,r)=>{let s;(s=t(o,r,e))!==!1&&(n[r]=s||o)}),Object.defineProperties(e,n)},freezeMethods=e=>{reduceDescriptors(e,(t,a)=>{if(isFunction(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=e[a];if(isFunction(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},toObjectSet=(e,t)=>{const a={},n=o=>{o.forEach(r=>{a[r]=!0})};return isArray(e)?n(e):n(String(e).split(t)),a},noop=()=>{},toFiniteNumber=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const toJSONObject=e=>{const t=new Array(10),a=(n,o)=>{if(isObject$1(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[o]=n;const r=isArray(n)?[]:{};return forEach(n,(s,l)=>{const c=a(s,o+1);!isUndefined(c)&&(r[l]=c)}),t[o]=void 0,r}}return n};return a(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject$1(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),_setImmediate=((e,t)=>e?setImmediate:t?((a,n)=>(_global.addEventListener("message",({source:o,data:r})=>{o===_global&&r===a&&n.length&&n.shift()()},!1),o=>{n.push(o),_global.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(e,t,a,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}}),Object.defineProperties(AxiosError$1,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError$1.from=(e,t,a,n,o,r)=>{const s=Object.create(prototype$1);return utils$1.toFlatObject(e,s,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),AxiosError$1.call(s,e.message,t,a,n,o),s.cause=e,s.name=e.name,r&&Object.assign(s,r),s};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,a){return e?e.concat(t).map(function(o,r){return o=removeBrackets(o),!a&&r?"["+o+"]":o}).join(a?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(e,t,a){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=utils$1.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,$){return!utils$1.isUndefined($[b])});const n=a.metaTokens,o=a.visitor||u,r=a.dots,s=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(o))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(utils$1.isDate(v))return v.toISOString();if(!c&&utils$1.isBlob(v))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(v)||utils$1.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,b,$){let w=v;if(v&&!$&&typeof v=="object"){if(utils$1.endsWith(b,"{}"))b=n?b:b.slice(0,-2),v=JSON.stringify(v);else if(utils$1.isArray(v)&&isFlatArray(v)||(utils$1.isFileList(v)||utils$1.endsWith(b,"[]"))&&(w=utils$1.toArray(v)))return b=removeBrackets(b),w.forEach(function(P,y){!(utils$1.isUndefined(P)||P===null)&&t.append(s===!0?renderKey([b],y,r):s===null?b:b+"[]",f(P))}),!1}return isVisitable(v)?!0:(t.append(renderKey($,b,r),f(v)),!1)}const d=[],m=Object.assign(predicates,{defaultVisitor:u,convertValue:f,isVisitable});function g(v,b){if(!utils$1.isUndefined(v)){if(d.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(v),utils$1.forEach(v,function(w,C){(!(utils$1.isUndefined(w)||w===null)&&o.call(t,w,utils$1.isString(C)?C.trim():C,b,m))===!0&&g(w,b?b.concat(C):[C])}),d.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return g(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,a){this._pairs.push([t,a])},prototype.toString=function(t){const a=t?function(n){return t.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(o){return a(o[0])+"="+a(o[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,a){if(!t)return e;const n=a&&a.encode||encode;utils$1.isFunction(a)&&(a={serialize:a});const o=a&&a.serialize;let r;if(o?r=o(t,a):r=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,a).toString(n),r){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,a,n){return this.handlers.push({fulfilled:t,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(n){n!==null&&t(n)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(a,n,o,r){return platform.isNode&&utils$1.isBuffer(a)?(this.append(n,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},a=Object.keys(e);let n;const o=a.length;let r;for(n=0;n<o;n++)r=a[n],t[r]=e[r];return t}function formDataToJSON(e){function t(a,n,o,r){let s=a[r++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),c=r>=a.length;return s=!s&&utils$1.isArray(o)?o.length:s,c?(utils$1.hasOwnProp(o,s)?o[s]=[o[s],n]:o[s]=n,!l):((!o[s]||!utils$1.isObject(o[s]))&&(o[s]=[]),t(a,n,o[s],r)&&utils$1.isArray(o[s])&&(o[s]=arrayToObject(o[s])),!l)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const a={};return utils$1.forEachEntry(e,(n,o)=>{t(parsePropPath(n),o,a,0)}),a}return null}function stringifySafely(e,t,a){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const n=a.getContentType()||"",o=n.indexOf("application/json")>-1,r=utils$1.isObject(t);if(r&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return o?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((l=utils$1.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return toFormData$1(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||o?(a.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const a=this.transitional||defaults.transitional,n=a&&a.forcedJSONParsing,o=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(n&&!this.responseType||o)){const s=!(a&&a.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(l){if(s)throw l.name==="SyntaxError"?AxiosError$1.from(l,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let a,n,o;return e&&e.split(`
`).forEach(function(s){o=s.indexOf(":"),a=s.substring(0,o).trim().toLowerCase(),n=s.substring(o+1).trim(),!(!a||t[a]&&ignoreDuplicateOf[a])&&(a==="set-cookie"?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)t[n[1]]=n[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,a,n,o){if(utils$1.isFunction(n))return n.call(this,t,a);if(o&&(t=a),!!utils$1.isString(t)){if(utils$1.isString(n))return t.indexOf(n)!==-1;if(utils$1.isRegExp(n))return n.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,n)=>a.toUpperCase()+n)}function buildAccessors(e,t){const a=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(o,r,s){return this[n].call(this,t,o,r,s)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,a,n){const o=this;function r(l,c,f){const u=normalizeHeader(c);if(!u)throw new Error("header name must be a non-empty string");const d=utils$1.findKey(o,u);(!d||o[d]===void 0||f===!0||f===void 0&&o[d]!==!1)&&(o[d||c]=normalizeValue(l))}const s=(l,c)=>utils$1.forEach(l,(f,u)=>r(f,u,c));if(utils$1.isPlainObject(t)||t instanceof this.constructor)s(t,a);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))s(parseHeaders(t),a);else if(utils$1.isHeaders(t))for(const[l,c]of t.entries())r(c,l,n);else t!=null&&r(a,t,n);return this}get(t,a){if(t=normalizeHeader(t),t){const n=utils$1.findKey(this,t);if(n){const o=this[n];if(!a)return o;if(a===!0)return parseTokens(o);if(utils$1.isFunction(a))return a.call(this,o,n);if(utils$1.isRegExp(a))return a.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=normalizeHeader(t),t){const n=utils$1.findKey(this,t);return!!(n&&this[n]!==void 0&&(!a||matchHeaderValue(this,this[n],n,a)))}return!1}delete(t,a){const n=this;let o=!1;function r(s){if(s=normalizeHeader(s),s){const l=utils$1.findKey(n,s);l&&(!a||matchHeaderValue(n,n[l],l,a))&&(delete n[l],o=!0)}}return utils$1.isArray(t)?t.forEach(r):r(t),o}clear(t){const a=Object.keys(this);let n=a.length,o=!1;for(;n--;){const r=a[n];(!t||matchHeaderValue(this,this[r],r,t,!0))&&(delete this[r],o=!0)}return o}normalize(t){const a=this,n={};return utils$1.forEach(this,(o,r)=>{const s=utils$1.findKey(n,r);if(s){a[s]=normalizeValue(o),delete a[r];return}const l=t?formatHeader(r):String(r).trim();l!==r&&delete a[r],a[l]=normalizeValue(o),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return utils$1.forEach(this,(n,o)=>{n!=null&&n!==!1&&(a[o]=t&&utils$1.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const n=new this(t);return a.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function r(s){const l=normalizeHeader(s);n[l]||(buildAccessors(o,s),n[l]=!0)}return utils$1.isArray(t)?t.forEach(r):r(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[a]=n}}}),utils$1.freezeMethods(AxiosHeaders$1);function transformData(e,t){const a=this||defaults,n=t||a,o=AxiosHeaders$1.from(n.headers);let r=n.data;return utils$1.forEach(e,function(l){r=l.call(a,r,o.normalize(),t?t.status:void 0)}),o.normalize(),r}function isCancel$1(e){return!!(e&&e.__CANCEL__)}function CanceledError$1(e,t,a){AxiosError$1.call(this,e??"canceled",AxiosError$1.ERR_CANCELED,t,a),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(e,t,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?e(a):t(new AxiosError$1("Request failed with status code "+a.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const a=new Array(e),n=new Array(e);let o=0,r=0,s;return t=t!==void 0?t:1e3,function(c){const f=Date.now(),u=n[r];s||(s=f),a[o]=c,n[o]=f;let d=r,m=0;for(;d!==o;)m+=a[d++],d=d%e;if(o=(o+1)%e,o===r&&(r=(r+1)%e),f-s<t)return;const g=u&&f-u;return g?Math.round(m*1e3/g):void 0}}function throttle(e,t){let a=0,n=1e3/t,o,r;const s=(f,u=Date.now())=>{a=u,o=null,r&&(clearTimeout(r),r=null),e.apply(null,f)};return[(...f)=>{const u=Date.now(),d=u-a;d>=n?s(f,u):(o=f,r||(r=setTimeout(()=>{r=null,s(o)},n-d)))},()=>o&&s(o)]}const progressEventReducer=(e,t,a=3)=>{let n=0;const o=speedometer(50,250);return throttle(r=>{const s=r.loaded,l=r.lengthComputable?r.total:void 0,c=s-n,f=o(c),u=s<=l;n=s;const d={loaded:s,total:l,progress:l?s/l:void 0,bytes:c,rate:f||void 0,estimated:f&&l&&u?(l-s)/f:void 0,event:r,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(d)},a)},progressEventDecorator=(e,t)=>{const a=e!=null;return[n=>t[0]({lengthComputable:a,total:e,loaded:n}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,platform.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,a,n,o,r){const s=[e+"="+encodeURIComponent(t)];utils$1.isNumber(a)&&s.push("expires="+new Date(a).toGMTString()),utils$1.isString(n)&&s.push("path="+n),utils$1.isString(o)&&s.push("domain="+o),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,a){let n=!isAbsoluteURL(t);return e&&n||a==!1?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const a={};function n(f,u,d,m){return utils$1.isPlainObject(f)&&utils$1.isPlainObject(u)?utils$1.merge.call({caseless:m},f,u):utils$1.isPlainObject(u)?utils$1.merge({},u):utils$1.isArray(u)?u.slice():u}function o(f,u,d,m){if(utils$1.isUndefined(u)){if(!utils$1.isUndefined(f))return n(void 0,f,d,m)}else return n(f,u,d,m)}function r(f,u){if(!utils$1.isUndefined(u))return n(void 0,u)}function s(f,u){if(utils$1.isUndefined(u)){if(!utils$1.isUndefined(f))return n(void 0,f)}else return n(void 0,u)}function l(f,u,d){if(d in t)return n(f,u);if(d in e)return n(void 0,f)}const c={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(f,u,d)=>o(headersToObject(f),headersToObject(u),d,!0)};return utils$1.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=c[u]||o,m=d(e[u],t[u],u);utils$1.isUndefined(m)&&d!==l||(a[u]=m)}),a}const resolveConfig=e=>{const t=mergeConfig$1({},e);let{data:a,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:r,headers:s,auth:l}=t;t.headers=s=AxiosHeaders$1.from(s),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(utils$1.isFormData(a)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[f,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];s.setContentType([f||"multipart/form-data",...u].join("; "))}}if(platform.hasStandardBrowserEnv&&(n&&utils$1.isFunction(n)&&(n=n(t)),n||n!==!1&&isURLSameOrigin(t.url))){const f=o&&r&&cookies.read(r);f&&s.set(o,f)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(a,n){const o=resolveConfig(e);let r=o.data;const s=AxiosHeaders$1.from(o.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:f}=o,u,d,m,g,v;function b(){g&&g(),v&&v(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let $=new XMLHttpRequest;$.open(o.method.toUpperCase(),o.url,!0),$.timeout=o.timeout;function w(){if(!$)return;const P=AxiosHeaders$1.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:P,config:e,request:$};settle(function(F){a(F),b()},function(F){n(F),b()},E),$=null}"onloadend"in $?$.onloadend=w:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(w)},$.onabort=function(){$&&(n(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,$)),$=null)},$.onerror=function(){n(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let y=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const E=o.transitional||transitionalDefaults;o.timeoutErrorMessage&&(y=o.timeoutErrorMessage),n(new AxiosError$1(y,E.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,$)),$=null},r===void 0&&s.setContentType(null),"setRequestHeader"in $&&utils$1.forEach(s.toJSON(),function(y,E){$.setRequestHeader(E,y)}),utils$1.isUndefined(o.withCredentials)||($.withCredentials=!!o.withCredentials),l&&l!=="json"&&($.responseType=o.responseType),f&&([m,v]=progressEventReducer(f,!0),$.addEventListener("progress",m)),c&&$.upload&&([d,g]=progressEventReducer(c),$.upload.addEventListener("progress",d),$.upload.addEventListener("loadend",g)),(o.cancelToken||o.signal)&&(u=P=>{$&&(n(!P||P.type?new CanceledError$1(null,e,$):P),$.abort(),$=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const C=parseProtocol(o.url);if(C&&platform.protocols.indexOf(C)===-1){n(new AxiosError$1("Unsupported protocol "+C+":",AxiosError$1.ERR_BAD_REQUEST,e));return}$.send(r||null)})},composeSignals=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let n=new AbortController,o;const r=function(f){if(!o){o=!0,l();const u=f instanceof Error?f:this.reason;n.abort(u instanceof AxiosError$1?u:new CanceledError$1(u instanceof Error?u.message:u))}};let s=t&&setTimeout(()=>{s=null,r(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const l=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(r):f.removeEventListener("abort",r)}),e=null)};e.forEach(f=>f.addEventListener("abort",r));const{signal:c}=n;return c.unsubscribe=()=>utils$1.asap(l),c}},streamChunk=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let n=0,o;for(;n<a;)o=n+t,yield e.slice(n,o),n=o},readBytes=async function*(e,t){for await(const a of readStream(e))yield*streamChunk(a,t)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:n}=await t.read();if(a)break;yield n}}finally{await t.cancel()}},trackStream=(e,t,a,n)=>{const o=readBytes(e,t);let r=0,s,l=c=>{s||(s=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:f,value:u}=await o.next();if(f){l(),c.close();return}let d=u.byteLength;if(a){let m=r+=d;a(m)}c.enqueue(new Uint8Array(u))}catch(f){throw l(f),f}},cancel(c){return l(c),o.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let e=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(e=>e.body)};isFetchSupported&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!resolvers[t]&&(resolvers[t]=utils$1.isFunction(e[t])?a=>a[t]():(a,n)=>{throw new AxiosError$1(`Response type '${t}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,n)})})})(new Response);const getBodyLength=async e=>{if(e==null)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e))return(await new Request(platform.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e))return e.byteLength;if(utils$1.isURLSearchParams(e)&&(e=e+""),utils$1.isString(e))return(await encodeText(e)).byteLength},resolveBodyLength=async(e,t)=>{const a=utils$1.toFiniteNumber(e.getContentLength());return a??getBodyLength(t)},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:a,data:n,signal:o,cancelToken:r,timeout:s,onDownloadProgress:l,onUploadProgress:c,responseType:f,headers:u,withCredentials:d="same-origin",fetchOptions:m}=resolveConfig(e);f=f?(f+"").toLowerCase():"text";let g=composeSignals([o,r&&r.toAbortSignal()],s),v;const b=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let $;try{if(c&&supportsRequestStream&&a!=="get"&&a!=="head"&&($=await resolveBodyLength(u,n))!==0){let E=new Request(t,{method:"POST",body:n,duplex:"half"}),R;if(utils$1.isFormData(n)&&(R=E.headers.get("content-type"))&&u.setContentType(R),E.body){const[F,H]=progressEventDecorator($,progressEventReducer(asyncDecorator(c)));n=trackStream(E.body,DEFAULT_CHUNK_SIZE,F,H)}}utils$1.isString(d)||(d=d?"include":"omit");const w="credentials"in Request.prototype;v=new Request(t,{...m,signal:g,method:a.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:w?d:void 0});let C=await fetch(v);const P=supportsResponseStream&&(f==="stream"||f==="response");if(supportsResponseStream&&(l||P&&b)){const E={};["status","statusText","headers"].forEach(j=>{E[j]=C[j]});const R=utils$1.toFiniteNumber(C.headers.get("content-length")),[F,H]=l&&progressEventDecorator(R,progressEventReducer(asyncDecorator(l),!0))||[];C=new Response(trackStream(C.body,DEFAULT_CHUNK_SIZE,F,()=>{H&&H(),b&&b()}),E)}f=f||"text";let y=await resolvers[utils$1.findKey(resolvers,f)||"text"](C,e);return!P&&b&&b(),await new Promise((E,R)=>{settle(E,R,{data:y,headers:AxiosHeaders$1.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:v})})}catch(w){throw b&&b(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,v),{cause:w.cause||w}):AxiosError$1.from(w,w&&w.code,e,v)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let a,n;const o={};for(let r=0;r<t;r++){a=e[r];let s;if(n=a,!isResolvedHandle(a)&&(n=knownAdapters[(s=String(a)).toLowerCase()],n===void 0))throw new AxiosError$1(`Unknown adapter '${s}'`);if(n)break;o[s||"#"+r]=n}if(!n){const r=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=t?r.length>1?`since :
`+r.map(renderReason).join(`
`):" "+renderReason(r[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults.adapter)(e).then(function(n){return throwIfCancellationRequested(e),n.data=transformData.call(e,e.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel$1(n)||(throwIfCancellationRequested(e),n&&n.response&&(n.response.data=transformData.call(e,e.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const VERSION$1="1.8.3",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,a,n){function o(r,s){return"[Axios v"+VERSION$1+"] Transitional option '"+r+"'"+s+(n?". "+n:"")}return(r,s,l)=>{if(t===!1)throw new AxiosError$1(o(s," has been removed"+(a?" in "+a:"")),AxiosError$1.ERR_DEPRECATED);return a&&!deprecatedWarnings[s]&&(deprecatedWarnings[s]=!0,console.warn(o(s," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(r,s,l):!0}},validators$1.spelling=function(t){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function assertOptions(e,t,a){if(typeof e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const r=n[o],s=t[r];if(s){const l=e[r],c=l===void 0||s(l,r,e);if(c!==!0)throw new AxiosError$1("option "+r+" must be "+c,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new AxiosError$1("Unknown option "+r,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,a){try{return await this._request(t,a)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const r=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=mergeConfig$1(this.defaults,a);const{transitional:n,paramsSerializer:o,headers:r}=a;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils$1.isFunction(o)?a.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),validator.assertOptions(a,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let s=r&&utils$1.merge(r.common,r[a.method]);r&&utils$1.forEach(["delete","get","head","post","put","patch","common"],v=>{delete r[v]}),a.headers=AxiosHeaders$1.concat(s,r);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(a)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const f=[];this.interceptors.response.forEach(function(b){f.push(b.fulfilled,b.rejected)});let u,d=0,m;if(!c){const v=[dispatchRequest.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,f),m=v.length,u=Promise.resolve(a);d<m;)u=u.then(v[d++],v[d++]);return u}m=l.length;let g=a;for(d=0;d<m;){const v=l[d++],b=l[d++];try{g=v(g)}catch($){b.call(this,$);break}}try{u=dispatchRequest.call(this,g)}catch(v){return Promise.reject(v)}for(d=0,m=f.length;d<m;)u=u.then(f[d++],f[d++]);return u}getUri(t){t=mergeConfig$1(this.defaults,t);const a=buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls);return buildURL(a,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(a,n){return this.request(mergeConfig$1(n||{},{method:t,url:a,data:(n||{}).data}))}}),utils$1.forEach(["post","put","patch"],function(t){function a(n){return function(r,s,l){return this.request(mergeConfig$1(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Axios$1.prototype[t]=a(),Axios$1.prototype[t+"Form"]=a(!0)});let CancelToken$1=class la{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const n=this;this.promise.then(o=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](o);n._listeners=null}),this.promise.then=o=>{let r;const s=new Promise(l=>{n.subscribe(l),r=l}).then(o);return s.cancel=function(){n.unsubscribe(r)},s},t(function(r,s,l){n.reason||(n.reason=new CanceledError$1(r,s,l),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=n=>{t.abort(n)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new la(function(o){t=o}),cancel:t}}};function spread$1(e){return function(a){return e.apply(null,a)}}function isAxiosError$1(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});function createInstance(e){const t=new Axios$1(e),a=bind(Axios$1.prototype.request,t);return utils$1.extend(a,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(a,t,null,{allOwnKeys:!0}),a.create=function(o){return createInstance(mergeConfig$1(e,o))},a}const axios=createInstance(defaults);axios.Axios=Axios$1,axios.CanceledError=CanceledError$1,axios.CancelToken=CancelToken$1,axios.isCancel=isCancel$1,axios.VERSION=VERSION$1,axios.toFormData=toFormData$1,axios.AxiosError=AxiosError$1,axios.Cancel=axios.CanceledError,axios.all=function(t){return Promise.all(t)},axios.spread=spread$1,axios.isAxiosError=isAxiosError$1,axios.mergeConfig=mergeConfig$1,axios.AxiosHeaders=AxiosHeaders$1,axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode$1,axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,baseUrl="/weilin/prompt_ui/api",request=axios.create({baseURL:baseUrl,timeout:3e4,headers:{"Content-Type":"application/json"}});request.interceptors.request.use(e=>e,e=>Promise.reject(e)),request.interceptors.response.use(e=>e.data,e=>Promise.reject(e));const languageApi={getUserSetting:async()=>await request({url:"/user_init/get_settings",method:"get"}),setUserLanguage:async e=>await request({url:"/user_init/set_user_lang",method:"post",data:{user_lang:e}}),startPanel:async()=>await request({url:"/panel/start",method:"post"})},getTagStore=()=>useTagStore(),i18n=createI18n({legacy:!1,locale:"zh_CN",fallbackLocale:"zh_CN",messages:{zh_CN,en_US}}),initLocale=()=>{const e=getTagStore();languageApi.getUserSetting().then(t=>{var n;e.setUserSetting(t.data);const a=((n=e.userSetting)==null?void 0:n.user_lang)||"zh_CN";i18n.global.locale.value=a})},setLocale=e=>{i18n.global.locale.value=e,getTagStore().setUserSetting({user_lang:e})},initI18n=()=>{initLocale()},_sfc_main$s={name:"popmessage",props:{type:{type:String,default:"success"},str:{type:String,default:"登陆成功"}},setup(){const e={warn:{color:"#E6A23C",backgroundColor:"rgb(253, 246, 236)",borderColor:"rgb(250, 236, 216)"},error:{color:"#F56C6C",backgroundColor:"rgb(254, 240, 240)",borderColor:"rgb(253, 226, 226)"},success:{color:"#67C23A",backgroundColor:"rgb(240, 249, 235)",borderColor:"rgb(225, 243, 216)"}},t=ref(!1);return onMounted(()=>{t.value=!0}),{style:e,visible:t}}},_hoisted_1$r={class:"text"};function _sfc_render(e,t,a,n,o,r){return withDirectives((openBlock(),createElementBlock("div",{class:"pop-message",style:normalizeStyle(n.style[a.type])},[createBaseVNode("i",{class:normalizeClass(["icon",[n.style[a.type].icon]])},null,2),createBaseVNode("span",_hoisted_1$r,toDisplayString$1(a.str),1)],4)),[[vShow,n.visible]])}const tip=_export_sfc(_sfc_main$s,[["render",_sfc_render],["__scopeId","data-v-ccb6bb2b"]]),div$1=document.createElement("div");document.body.appendChild(div$1);let timer=null;const message$1=({str:e,type:t,name:a=""})=>{let n=i18n.global.t(e);a.length>0&&(n=i18n.global.t(e,{name:a}));const o=createVNode(tip,{str:n,type:t});render$1(o,div$1),timer&&clearTimeout(timer),timer=setTimeout(()=>{render$1(null,div$1)},2e3)},_hoisted_1$q={class:"language-selector-content"},_hoisted_2$o=["onClick"],_hoisted_3$o={class:"lang-name"},_sfc_main$r={__name:"LanguageSwitcher",emits:["close"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(null),r=useTagStore(),s=computed(()=>r.userSetting.user_lang),l=[{code:"zh_CN",name:"简体中文"},{code:"en_US",name:"English"}],c=a,f=m=>{u(m),c("close",{})},u=m=>{languageApi.setUserLanguage(m).then(g=>{setLocale(m),window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*"),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.setLanguageSuccess"})}).catch(g=>{message$1({type:"warn",str:"message.setLanguageFailed"})})};return t({setPosition:m=>{if(!o.value)return;const g=o.value;g.style.position="fixed",g.style.top=`${m.bottom}px`}}),(m,g)=>(openBlock(),createElementBlock("div",{class:"language-selector",ref_key:"selectorRef",ref:o},[createBaseVNode("div",_hoisted_1$q,[(openBlock(),createElementBlock(Fragment,null,renderList(l,(v,b)=>createBaseVNode("div",{style:normalizeStyle({"margin-top":b===0?"0":"2px"}),key:v.code,class:normalizeClass(["language-option",{active:s.value===v.code}]),onClick:$=>f(v.code)},[createBaseVNode("span",_hoisted_3$o,toDisplayString$1(v.name),1)],14,_hoisted_2$o)),64))])],512))}},LanguageSwitcher=_export_sfc(_sfc_main$r,[["__scopeId","data-v-1a0e3baa"]]),prefix$5="weilin_prompt_ui_",_sfc_main$q={__name:"Dialog",props:{modelValue:Boolean,title:{type:String,default:"标题"},closeOnClickOverlay:{type:Boolean,default:!1},width:{type:String,default:"60%"}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,o=()=>{n("update:modelValue",!1)},r=()=>{a.closeOnClickOverlay&&o()};return(s,l)=>(openBlock(),createBlock(Teleport,{to:"#weilin_comfyui_tools_prompt_ui_div"},[createVNode(Transition,{name:`${prefix$5}dialog-fade`},{default:withCtx(()=>[e.modelValue?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${prefix$5}dialog-overlay`),onClick:r},[createVNode(Transition,{name:`${prefix$5}dialog-slide`},{default:withCtx(()=>[createBaseVNode("div",{style:normalizeStyle({width:e.width}),class:normalizeClass(`${prefix$5}dialog`),onClick:l[0]||(l[0]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",{class:normalizeClass(`${prefix$5}dialog-header`)},[createBaseVNode("h3",{class:normalizeClass(`${prefix$5}dialog-title`)},toDisplayString$1(e.title),3),createBaseVNode("button",{class:normalizeClass(`${prefix$5}dialog-close`),onClick:o},l[1]||(l[1]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),2)],2),createBaseVNode("div",{class:normalizeClass(`${prefix$5}dialog-content`)},[renderSlot(s.$slots,"default")],2),s.$slots.footer?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${prefix$5}dialog-footer`)},[renderSlot(s.$slots,"footer")],2)):createCommentVNode("",!0)],6)]),_:3},8,["name"])],2)):createCommentVNode("",!0)]),_:3},8,["name"])]))}},Dialog=_export_sfc(_sfc_main$q,[["__scopeId","data-v-d2e9c495"]]),translatorApi={getTranslateLocal:async e=>await request({url:"/prompt/local/translate",method:"post",data:{phrase:e}}),getTranslatePackagesState:async()=>await request({url:"/translate/get/packages/state",method:"post",data:{}}),getTranslateSetting:async()=>await request({url:"/translate/get/setting",method:"post",data:{}}),applyTranslateSetting:async e=>await request({url:"/translate/apply_setting",method:"post",data:{setting:e}}),installTranslatePackage:async()=>await request({url:"/translate/install/translaterpackage",method:"post",timeout:0,data:{}}),getTranslateBuktSetting:async()=>await request({url:"/translate/get/tran_setting",method:"post",data:{}}),saveTranslateSetting:async(e,t,a)=>await request({url:"/translate/save_tran/setting",method:"post",data:{service:e,source_lang:t,target_lang:a}}),translaterText:async(e,t)=>await request({url:"/translate/tran/text",method:"post",timeout:0,data:{str_object:e,text:t}}),translaterInputText:async(e,t)=>await request({url:"/translate/tran/input",method:"post",timeout:0,data:{str_object:e,text:t}})},autocompleteApi={getAutocomplete:async e=>await request({url:"/prompt/fast/autocomplete",method:"post",data:{query:e}}),getAutocompleteLimit:async()=>await request({url:"/get/setting/get_auto_limit_setting",method:"post"}),updateAutocompleteLimit:async e=>await request({url:"/update/setting/update_auto_limit_setting",method:"post",data:{limit:e}})},openaiApi={updateOpenAiSetting:async e=>await request({url:"/prompt/openai/update_settings",method:"post",data:e}),addOpenAiSetting:async e=>await request({url:"/prompt/openai/add_setting",method:"post",data:e}),deleteOpenAiSetting:async e=>await request({url:"/prompt/openai/delete_setting",method:"post",data:e}),setOpenAiSelect:async e=>await request({url:"/prompt/openai/set_select",method:"post",data:e}),getOpenAiSetting:async()=>await request({url:"/prompt/openai/get_settings",method:"get"})},translaterSerives=["alibaba","baidu","bing","deepl","youdao","qqtransmart","sogou","niutrans","mymemory","modernmt","volcengine","iciba","iflytek","google","lingvanex","yandex","itranslate","systran","argos","apertium","reverso","cloudtranslation","translatecom","tilde","caiyun","qqfanyi","translateme","papago","mirai","iflyrec","hujiang","yeekit","languagewire","elia","judic","mglip","utibet"],language=[{language:"chinese",translator:"zh"},{language:"english",translator:"en"},{language:"arabic",translator:"ar"},{language:"russian",translator:"ru"},{language:"french",translator:"fr"},{language:"german",translator:"de"},{language:"spanish",translator:"es"},{language:"portuguese",translator:"pt"},{language:"italian",translator:"it"},{language:"japanese",translator:"ja"},{language:"korean",translator:"ko"},{language:"greek",translator:"el"},{language:"dutch",translator:"nl"},{language:"hindi",translator:"hi"},{language:"turkish",translator:"tr"},{language:"malay",translator:"ms"},{language:"thai",translator:"th"},{language:"vietnamese",translator:"vi"},{language:"indonesian",translator:"id"},{language:"hebrew",translator:"he"},{language:"polish",translator:"pl"},{language:"mongolian",translator:"mn"},{language:"czech",translator:"cs"},{language:"hungarian",translator:"hu"},{language:"estonian",translator:"et"},{language:"bulgarian",translator:"bg"},{language:"danish",translator:"da"},{language:"finnish",translator:"fi"},{language:"romanian",translator:"ro"},{language:"swedish",translator:"sv"},{language:"slovenian",translator:"sl"},{language:"persian/farsi",translator:"fa"},{language:"bosnian",translator:"bs"},{language:"serbian",translator:"sr"},{language:"fijian",translator:"fj"},{language:"filipino",translator:"tl"},{language:"haitiancreole",translator:"ht"},{language:"catalan",translator:"ca"},{language:"croatian",translator:"hr"},{language:"latvian",translator:"lv"},{language:"lithuanian",translator:"lt"},{language:"urdu",translator:"ur"},{language:"ukrainian",translator:"uk"},{language:"welsh",translator:"cy"},{language:"tahiti",translator:"ty"},{language:"tongan",translator:"to"},{language:"swahili",translator:"sw"},{language:"samoan",translator:"sm"},{language:"slovak",translator:"sk"},{language:"afrikaans",translator:"af"},{language:"norwegian",translator:"no"},{language:"bengali",translator:"bn"},{language:"malagasy",translator:"mg"},{language:"maltese",translator:"mt"},{language:"queretaro otomi",translator:"otq"},{language:"klingon/tlhingan hol",translator:"tlh"},{language:"gujarati",translator:"gu"},{language:"tamil",translator:"ta"},{language:"telugu",translator:"te"},{language:"punjabi",translator:"pa"},{language:"amharic",translator:"am"},{language:"azerbaijani",translator:"az"},{language:"bashkir",translator:"ba"},{language:"belarusian",translator:"be"},{language:"cebuano",translator:"ceb"},{language:"chuvash",translator:"cv"},{language:"esperanto",translator:"eo"},{language:"basque",translator:"eu"},{language:"irish",translator:"ga"}],aiServerApi={getAiServerSetting:async e=>await request({url:"/ai_server/get_settings",method:"post",data:{}}),updateAiServerSetting:async e=>await request({url:"/ai_server/update_settings",method:"post",data:e}),getAiModels:async()=>await request({url:"/ai_server/get_ai_models",method:"post",data:{}})},_hoisted_1$p={class:"ai-server-setting-panel"},_hoisted_2$n={class:"weilin-comfyui-translater-setting-box"},_hoisted_3$n={class:"weilin-comfyui-setting-item"},_hoisted_4$m={class:"weilin-comfyui-setting-item"},_hoisted_5$k={class:"weilin-comfyui-setting-item"},_hoisted_6$k={style:{display:"flex",gap:"10px"}},_hoisted_7$k=["value"],_hoisted_8$k={class:"weilin-comfyui-translater-setting-box"},_hoisted_9$k={class:"weilin-comfyui-setting-small-titile"},_hoisted_10$j={class:"weilin-comfyui-language-selectors"},_hoisted_11$i={class:"weilin-comfyui-setting-item"},_hoisted_12$i=["index","value"],_hoisted_13$g={class:"weilin-comfyui-setting-item"},_hoisted_14$e=["index","value"],_hoisted_15$e={class:"weilin-comfyui-translater-setting-box"},_hoisted_16$e={class:"weilin-comfyui-setting-small-titile"},_hoisted_17$e={class:"weilin-comfyui-setting-item"},_hoisted_18$b=["placeholder"],_hoisted_19$b={class:"weilin-comfyui-setting-item"},_hoisted_20$b=["placeholder"],_sfc_main$p={__name:"ai_server_setting",setup(e){const{t}=useI18n(),a=ref(""),n=ref(""),o=ref(""),r=ref(""),s=ref(""),l=ref({api_key:"",base_url:"https://api.siliconflow.cn/v1",model:"",temperature:0,top_p:.7,max_tokens:4096}),c=ref({object:"list",data:[]}),f=()=>{aiServerApi.updateAiServerSetting(l.value).then(b=>{b.info=="ok"?message$1({type:"success",str:"message.saveSuccess"}):message$1({type:"warn",str:"message.saveFailed"})}).catch(b=>{message$1({type:"warn",str:"message.saveFailed"})})},u=()=>{aiServerApi.getAiServerSetting().then(b=>{l.value=b.data}).catch(b=>{message$1({type:"warn",str:"message.getTranslaterFail"})})},d=()=>{aiServerApi.getAiModels().then(b=>{c.value=b.data}).catch(b=>{message$1({type:"warn",str:"message.getTranslaterFail"})})},m=()=>{translatorApi.getTranslateBuktSetting().then(b=>{a.value=b.data.translate_service,n.value=b.data.translate_source_lang,o.value=b.data.translate_target_lang}).catch(b=>{message$1({type:"warn",str:"message.getTranslaterFail"})})},g=()=>{translatorApi.saveTranslateSetting(a.value,n.value,o.value).then(b=>{b.info=="ok"?message$1({type:"success",str:"message.saveSuccess"}):message$1({type:"warn",str:"message.saveFailed"})}).catch(b=>{message$1({type:"warn",str:"message.saveFailed"})})},v=()=>{r.value="";let b={text:s.value,translate:""};const $=JSON.stringify(b);translatorApi.translaterInputText($,"").then(w=>{if(w&&w.data){const C=JSON.parse(w.data);r.value=C.translate}}).catch(w=>{message$1({type:"warn",str:"message.translaterTestFail"})})};return onMounted(()=>{u(),d(),m()}),(b,$)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[createBaseVNode("div",_hoisted_2$n,[createBaseVNode("div",_hoisted_3$n,[$[7]||($[7]=createBaseVNode("label",null,"API Key",-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":$[0]||($[0]=w=>l.value.api_key=w),placeholder:"请输入API Key",class:"weilin-comfyui-common-select"},null,512),[[vModelText,l.value.api_key]])]),createBaseVNode("div",_hoisted_4$m,[$[9]||($[9]=createBaseVNode("label",null,"AI平台",-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":$[1]||($[1]=w=>l.value.base_url=w),disabled:"",class:"weilin-comfyui-common-select"},$[8]||($[8]=[createBaseVNode("option",{value:"https://api.siliconflow.cn/v1"},"硅基AI",-1)]),512),[[vModelSelect,l.value.base_url]])]),createBaseVNode("div",_hoisted_5$k,[$[10]||($[10]=createBaseVNode("label",null,"Model（获取前请先填写完API Key点击保存后再获取！）",-1)),createBaseVNode("div",_hoisted_6$k,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":$[2]||($[2]=w=>l.value.model=w),class:"weilin-comfyui-common-select",style:{flex:"1"}},[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value.data,w=>(openBlock(),createElementBlock("option",{key:w.id,value:w.id},toDisplayString$1(w.id),9,_hoisted_7$k))),128))],512),[[vModelSelect,l.value.model]]),createBaseVNode("button",{type:"button",class:"weilin-comfyui-install-button",style:{width:"auto","min-width":"120px"},onClick:d}," 获取模型列表 ")])]),createBaseVNode("button",{class:"weilin-comfyui-save-button",onClick:f},"保存AI平台设置")]),createBaseVNode("div",_hoisted_8$k,[createBaseVNode("div",_hoisted_9$k,toDisplayString$1(unref(t)("promptBox.settings.translaterSetting")),1),createBaseVNode("div",_hoisted_10$j,[createBaseVNode("div",_hoisted_11$i,[createBaseVNode("label",null,toDisplayString$1(unref(t)("promptBox.settings.translaterLangSourceSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":$[3]||($[3]=w=>n.value=w)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(language),(w,C)=>(openBlock(),createElementBlock("option",{index:C,key:"lan-item_"+C,value:w.translator},toDisplayString$1(unref(t)("translaterLanguage."+w.language)),9,_hoisted_12$i))),128))],512),[[vModelSelect,n.value]])]),createBaseVNode("div",_hoisted_13$g,[createBaseVNode("label",null,toDisplayString$1(unref(t)("promptBox.settings.translaterLangTargeSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":$[4]||($[4]=w=>o.value=w)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(language),(w,C)=>(openBlock(),createElementBlock("option",{index:C,key:"lan-mu-item_"+C,value:w.translator},toDisplayString$1(unref(t)("translaterLanguage."+w.language)),9,_hoisted_14$e))),128))],512),[[vModelSelect,o.value]])])]),createBaseVNode("button",{class:"weilin-comfyui-install-button",onClick:g},toDisplayString$1(unref(t)("promptBox.settings.saveTranslaterSetting")),1)]),createBaseVNode("div",_hoisted_15$e,[createBaseVNode("div",_hoisted_16$e,toDisplayString$1(unref(t)("promptBox.settings.testTranslaterTitle")),1),createBaseVNode("div",_hoisted_17$e,[createBaseVNode("label",null,toDisplayString$1(unref(t)("promptBox.settings.inputTestTranslater")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":$[5]||($[5]=w=>s.value=w),placeholder:unref(t)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,_hoisted_18$b),[[vModelText,s.value]])]),createBaseVNode("div",_hoisted_19$b,[createBaseVNode("label",null,toDisplayString$1(unref(t)("promptBox.settings.outPutTestTranslater")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":$[6]||($[6]=w=>r.value=w),readonly:"",placeholder:unref(t)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,_hoisted_20$b),[[vModelText,r.value]])]),createBaseVNode("button",{class:"weilin-comfyui-install-button",onClick:v},toDisplayString$1(unref(t)("promptBox.settings.testingTranslater")),1)])]))}},aiServerSetting=_export_sfc(_sfc_main$p,[["__scopeId","data-v-731441c6"]]),_hoisted_1$o={class:"weilin-comfyui-settings-content"},_hoisted_2$m={class:"weilin-comfyui-settings-sidebar"},_hoisted_3$m={class:"weilin-comfyui-settings-main"},_hoisted_4$l={key:0},_hoisted_5$j={class:"weilin-comfyui-setting-select"},_hoisted_6$j={class:"weilin-comfyui-translator-settings"},_hoisted_7$j={key:0,class:"weilin-comfyui-group-box"},_hoisted_8$j={key:1,class:"weilin-comfyui-group-box"},_hoisted_9$j={class:"weilin-comfyui-group-title"},_hoisted_10$i={class:"weilin-comfyui-note-top"},_hoisted_11$h={class:"weilin-comfyui-setting-item"},_hoisted_12$h={value:"auto"},_hoisted_13$f={value:"chinese_simplified"},_hoisted_14$d={value:"english"},_hoisted_15$d={class:"weilin-comfyui-setting-item"},_hoisted_16$d={value:"chinese_simplified"},_hoisted_17$d={value:"english"},_hoisted_18$a={key:2,class:"weilin-comfyui-group-box"},_hoisted_19$a={class:"weilin-comfyui-group-title"},_hoisted_20$a={class:"weilin-comfyui-note-top"},_hoisted_21$a={class:"weilin-comfyui-translater-innstall-status"},_hoisted_22$a={class:"weilin-comfyui-translater-install-label"},_hoisted_23$a={key:0,class:"weilin-comfyui-translater-install-label"},_hoisted_24$a={key:1,class:"weilin-comfyui-translater-install-control"},_hoisted_25$a=["disabled"],_hoisted_26$a={key:0,class:"weilin-comfyui-translater-setting-box"},_hoisted_27$a={class:"weilin-comfyui-setting-small-titile"},_hoisted_28$9={class:"weilin-comfyui-setting-item"},_hoisted_29$9=["index","value"],_hoisted_30$9={class:"weilin-comfyui-language-selectors"},_hoisted_31$9={class:"weilin-comfyui-setting-item"},_hoisted_32$9=["index","value"],_hoisted_33$8={class:"weilin-comfyui-setting-item"},_hoisted_34$8=["index","value"],_hoisted_35$8={key:1,class:"weilin-comfyui-tranlater-text-box"},_hoisted_36$8={class:"weilin-comfyui-setting-small-titile"},_hoisted_37$7={class:"weilin-comfyui-setting-item"},_hoisted_38$7=["placeholder"],_hoisted_39$7={class:"weilin-comfyui-setting-item"},_hoisted_40$7=["placeholder"],_hoisted_41$7={key:1},_hoisted_42$7={class:"weilin-comfyui-floating-ball-settings"},_hoisted_43$7={class:"weilin-comfyui-setting-item"},_hoisted_44$6=["placeholder"],_hoisted_45$6={class:"weilin-comfyui-setting-item"},_hoisted_46$5=["placeholder"],_hoisted_47$4={class:"weilin-comfyui-setting-item"},_hoisted_48$4=["placeholder"],_hoisted_49$4={key:2},_hoisted_50$4={class:"weilin-comfyui-floating-ball-settings",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"15px"}},_hoisted_51$4={class:"weilin-comfyui-settings-column"},_hoisted_52$4={class:"weilin-comfyui-setting-item"},_hoisted_53$4={class:"weilin-comfyui-setting-item"},_hoisted_54$3=["placeholder"],_hoisted_55$3={class:"weilin-comfyui-setting-item"},_hoisted_56$3=["placeholder"],_hoisted_57$3={class:"weilin-comfyui-setting-item"},_hoisted_58$3=["placeholder"],_hoisted_59$3={class:"weilin-comfyui-settings-column"},_hoisted_60$3={class:"weilin-comfyui-setting-item"},_hoisted_61$3={value:"default"},_hoisted_62$3={value:"custom"},_hoisted_63$3={key:0,class:"weilin-comfyui-setting-item"},_hoisted_64$3={key:0,class:"weilin-comfyui-skin-preview"},_hoisted_65$3=["src"],_hoisted_66$3={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},_hoisted_67$3={value:"gradient"},_hoisted_68$3={value:"transparent"},_hoisted_69$3={key:0,class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},_hoisted_70$3={style:{display:"flex",gap:"10px","align-items":"center"}},_hoisted_71$3={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},_hoisted_72$3={key:3},_hoisted_73$2={class:"weilin-comfyui-floating-ball-settings"},_hoisted_74$2={class:"weilin-comfyui-setting-item"},_hoisted_75$2={class:"weilin-comfyui-setting-item"},_hoisted_76$2={class:"weilin-comfyui-setting-item"},_hoisted_77$2={class:"weilin-comfyui-setting-item"},_hoisted_78$2={class:"weilin-comfyui-setting-item"},_hoisted_79$2={class:"weilin-comfyui-setting-item"},_hoisted_80$2={class:"weilin-comfyui-setting-item"},_hoisted_81$2={key:4},_hoisted_82$2={class:"weilin-comfyui-openai-settings"},_hoisted_83$2={class:"weilin-comfyui-setting-item"},_hoisted_84$2=["value"],_hoisted_85$2={class:"weilin-comfyui-config-list"},_hoisted_86$2={class:"weilin-comfyui-config-header"},_hoisted_87$2={class:"weilin-comfyui-config-actions"},_hoisted_88$2=["onClick"],_hoisted_89$2=["onClick"],_hoisted_90$2={key:0,class:"weilin-comfyui-config-form"},_hoisted_91$2={class:"weilin-comfyui-form-group"},_hoisted_92$2=["placeholder"],_hoisted_93$2={class:"weilin-comfyui-form-group"},_hoisted_94$2=["placeholder"],_hoisted_95$2={class:"weilin-comfyui-form-group"},_hoisted_96$2=["placeholder"],_hoisted_97$2={class:"weilin-comfyui-form-actions"},_hoisted_98$2=["onClick"],_hoisted_99$2={key:1,class:"weilin-comfyui-config-details"},_hoisted_100$2={key:0,class:"weilin-comfyui-config-form"},_hoisted_101$2={class:"weilin-comfyui-form-group"},_hoisted_102$2=["placeholder"],_hoisted_103$2={class:"weilin-comfyui-form-group"},_hoisted_104$2=["placeholder"],_hoisted_105$2={class:"weilin-comfyui-form-group"},_hoisted_106$2=["placeholder"],_hoisted_107$2={class:"weilin-comfyui-form-actions"},_hoisted_108$2={key:5},_hoisted_109$2={class:"weilin-comfyui-sponsor-me-settings"},_hoisted_110$2={key:6},_hoisted_111$2={class:"weilin-comfyui-start-panel-settings"},_sfc_main$o={__name:"setting_dialog",setup(e,{expose:t}){const{t:a}=useI18n(),n=ref(!1),o=ref("translator"),r=ref("baidu"),s=ref(""),l=ref(localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english"),c=ref(localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified"),f=ref(localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1),u=ref(localStorage.getItem("weilin_prompt_ui_floatingBallSize")||66),d=ref(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||u.value),m=ref(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true"),g=ref(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),v=ref(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),b=ref(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),$=ref(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),w=ref(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),C=ref(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50),P=ref(localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true"),y=ref(localStorage.getItem("weilin_prompt_ui_period_conversion")==="true"),E=ref(localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true"),R=ref(localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true"),F=ref(localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"),H=ref(localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true"),j=ref(localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"),fe=ref(""),oe=ref(""),V=ref(""),q=ref(0),Q=ref([]),O=ref(!1),G=ref({api_key:"",base_url:"https://api.openai.com/v1",model:""}),ee=ref(!1),A=ref(-1),L=ref(""),W=ref(!1),ae=ref(!1),Y=ref(""),ne=ref(""),te=ref(25),ge=ref(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),re=ref(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),B=Te=>{o.value=Te,Te=="setting_auto_complete_limit"&&Ie()},z=()=>{localStorage.setItem("weilin_prompt_ui_sourceLanguage",l.value),localStorage.setItem("weilin_prompt_ui_targetLanguage",c.value),window.parent.postMessage({type:"weilin_prompt_ui_translate_setting"},"*"),message$1({type:"success",str:"message.saveSuccess"})},Z=Te=>{const be=Te.target.files[0];if(be){const ye=new FileReader;ye.onload=Le=>{v.value=Le.target.result,localStorage.setItem("weilin_prompt_ui_customSkinUrl",Le.target.result)},ye.readAsDataURL(be)}},D=()=>{$.value="#6a11cb",w.value="#2575fc"},K=()=>{if(f.value<1||u.value<5||d.value<5){message$1({type:"warn",str:"message.error"});return}localStorage.setItem("weilin_prompt_ui_floatingBallEnabled",m.value),localStorage.setItem("weilin_prompt_ui_floatingBallCount",f.value),localStorage.setItem("weilin_prompt_ui_floatingBallSize",u.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",d.value),localStorage.setItem("weilin_prompt_ui_ballSkinType",g.value),localStorage.setItem("weilin_prompt_ui_bgType",b.value),localStorage.setItem("weilin_prompt_ui_gradientColor1",$.value),localStorage.setItem("weilin_prompt_ui_gradientColor2",w.value),localStorage.setItem("weilin_prompt_ui_ballBorderRadius",C.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",d.value),window.parent.postMessage({type:"weilin_prompt_ui_floating_ball_setting"},"*"),message$1({type:"success",str:"message.saveSuccess"})},x=()=>{localStorage.setItem("weilin_prompt_ui_comma_conversion",P.value),localStorage.setItem("weilin_prompt_ui_period_conversion",y.value),localStorage.setItem("weilin_prompt_ui_bracket_conversion",E.value),localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion",R.value),localStorage.setItem("weilin_prompt_ui_underscore_to_bracket",F.value),localStorage.setItem("weilin_prompt_ui_comma_close_autocomplete",H.value),localStorage.setItem("weilin_prompt_ui_bracket_escape",j.value),message$1({type:"success",str:"message.saveSuccess"})},S=()=>{languageApi.getUserSetting().then(Te=>{Q.value=Te.data.openai_settings,q.value=Te.data.select_openai})},I=()=>{G.value={api_key:"",base_url:"https://api.openai.com/v1",model:""},ee.value=!1,O.value=!0},X=Te=>{openaiApi.deleteOpenAiSetting({index:Te}).then(be=>{S(),message$1({type:"success",str:"message.deleteSuccess"})}).catch(be=>{message$1({type:"warn",str:"message.networkError"})})},ie=Te=>{A.value===Te?A.value=-1:(G.value={...Q.value[Te]},A.value=Te)},pe=Te=>{openaiApi.updateOpenAiSetting({index:Te,...G.value}).then(be=>{S(),A.value=-1,message$1({type:"success",str:"message.saveSuccess"})}).catch(be=>{message$1({type:"warn",str:"message.networkError"})})},T=()=>{openaiApi.addOpenAiSetting({...G.value}).then(Te=>{S(),O.value=!1,A.value=-1,message$1({type:"success",str:"message.saveSuccess"})}).catch(Te=>{message$1({type:"warn",str:"message.networkError"})})},_=()=>{O.value=!1,A.value=-1},M=()=>{openaiApi.setOpenAiSelect({index:q.value}).then(Te=>{message$1({type:"success",str:"message.saveSuccess"})}).catch(Te=>{message$1({type:"warn",str:"message.networkError"})})},U=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},_e=()=>{languageApi.startPanel().then(Te=>{message$1({type:"success",str:"message.startPanelSuccess"})}).catch(Te=>{message$1({type:"warn",str:"message.startPanelFailed"})})},me=()=>{translatorApi.getTranslatePackagesState().then(Te=>{Te.info=="ok"?ae.value=!0:ae.value=!1}).catch(Te=>{message$1({type:"warn",str:"message.getTranslaterFail"})})},J=()=>{translatorApi.getTranslateSetting().then(Te=>{localStorage.setItem("weilin_prompt_ui_translater_setting",Te.data),L.value=Te.data}).catch(Te=>{message$1({type:"warn",str:"message.getTranslaterFail"})})},ce=()=>{translatorApi.applyTranslateSetting(L.value).then(Te=>{Te.info=="ok"?(localStorage.setItem("weilin_prompt_ui_translater_setting",L.value),message$1({type:"success",str:"message.applyTranslaterSuccess"})):message$1({type:"warn",str:"message.applyToTranslaterFail"})}).catch(Te=>{message$1({type:"warn",str:"message.applyTranslaterFail"})})},Se=()=>{translatorApi.getTranslateBuktSetting().then(Te=>{fe.value=Te.data.translate_service,oe.value=Te.data.translate_source_lang,V.value=Te.data.translate_target_lang}).catch(Te=>{message$1({type:"warn",str:"message.getTranslaterFail"})})},xe=()=>{translatorApi.saveTranslateSetting(fe.value,oe.value,V.value).then(Te=>{Te.info=="ok"?message$1({type:"success",str:"message.saveSuccess"}):message$1({type:"warn",str:"message.saveFailed"})}).catch(Te=>{message$1({type:"warn",str:"message.saveFailed"})})},Ne=()=>{translatorApi.translaterInputText(Y.value).then(Te=>{ne.value=Te.text}).catch(Te=>{message$1({type:"warn",str:"message.translaterTestFail"})})},Ce=ref(null),Me=()=>{W.value=!0,translatorApi.installTranslatePackage().then(Te=>{W.value=!1,ae.value=!0,message$1({type:"success",str:"message.tranlaterPackageInstallSuccess"})}).catch(Te=>{W.value=!1,message$1({type:"warn",str:"message.tranlaterPackageInstallFail"})})},Ie=async()=>{await autocompleteApi.getAutocompleteLimit().then(Te=>{te.value=Te.data}).catch(Te=>{console.error(Te),message$1({type:"warn",str:"message.networkError"})})},We=async()=>{await autocompleteApi.updateAutocompleteLimit(te.value).then(Te=>{message$1({type:"success",str:"message.saveSuccess"}),localStorage.setItem("weilin_prompt_ui_auto_box_width",ge.value),localStorage.setItem("weilin_prompt_ui_auto_box_height",re.value)}).catch(Te=>{console.error(Te),message$1({type:"warn",str:"message.networkError"})})};return onMounted(()=>{Se(),me(),J(),S()}),onUnmounted(()=>{Ce.value&&clearInterval(Ce.value)}),t({open:()=>{o.value="translator",r.value="baidu",s.value="",l.value=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",c.value=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified",f.value=localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1,u.value=localStorage.getItem("weilin_prompt_ui_floatingBallSize")||5,m.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true",P.value=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",y.value=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",E.value=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",R.value=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true",F.value=localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true",H.value=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",n.value=!0}}),(Te,be)=>(openBlock(),createBlock(Dialog,{modelValue:n.value,"onUpdate:modelValue":be[41]||(be[41]=ye=>n.value=ye),title:unref(a)("promptBox.settings.title")},{footer:withCtx(()=>[createBaseVNode("button",{onClick:be[40]||(be[40]=ye=>n.value=!1)},toDisplayString$1(unref(a)("promptBox.settings.close")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$o,[createBaseVNode("div",_hoisted_2$m,[createBaseVNode("ul",null,[createBaseVNode("li",{class:normalizeClass({"weilin-comfyui-active":o.value==="translator"}),onClick:be[0]||(be[0]=ye=>B("translator"))},toDisplayString$1(unref(a)("promptBox.settings.translator")),3),createBaseVNode("li",{class:normalizeClass({"weilin-comfyui-active":o.value==="setting_auto_complete_limit"}),onClick:be[1]||(be[1]=ye=>B("setting_auto_complete_limit"))},toDisplayString$1(unref(a)("promptBox.settings.setting_auto_complete_limit")),3),createBaseVNode("li",{class:normalizeClass({"weilin-comfyui-active":o.value==="setting_floating_ball"}),onClick:be[2]||(be[2]=ye=>B("setting_floating_ball"))},toDisplayString$1(unref(a)("promptBox.settings.setting_floating_ball")),3),createBaseVNode("li",{class:normalizeClass({"weilin-comfyui-active":o.value==="setting_prompt_box"}),onClick:be[3]||(be[3]=ye=>B("setting_prompt_box"))},toDisplayString$1(unref(a)("promptBox.settings.setting_prompt_box")),3),createBaseVNode("li",{class:normalizeClass({"weilin-comfyui-active":o.value==="setting_openai_box"}),onClick:be[4]||(be[4]=ye=>B("setting_openai_box"))},toDisplayString$1(unref(a)("promptBox.settings.setting_openai_box")),3),createBaseVNode("li",{class:normalizeClass({"weilin-comfyui-active":o.value==="setting_sponsor_me"}),onClick:be[5]||(be[5]=ye=>B("setting_sponsor_me"))},toDisplayString$1(unref(a)("promptBox.settings.setting_sponsor_me")),3)])]),createBaseVNode("div",_hoisted_3$m,[o.value==="translator"?(openBlock(),createElementBlock("div",_hoisted_4$l,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.translator")),1),createBaseVNode("div",_hoisted_5$j,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.selectTranslater")),1),withDirectives(createBaseVNode("select",{style:{"margin-left":"10px"},"onUpdate:modelValue":be[6]||(be[6]=ye=>L.value=ye),class:"weilin-comfyui-common-select"},be[42]||(be[42]=[createBaseVNode("option",{value:"other_ai_plate"},"使用三方AI平台翻译",-1),createBaseVNode("option",{value:"openai"},"OpenAI API 翻译",-1)]),512),[[vModelSelect,L.value]]),createBaseVNode("button",{class:"weilin-comfyui-install-button",onClick:ce},toDisplayString$1(unref(a)("promptBox.settings.apply")),1)]),createBaseVNode("div",_hoisted_6$j,[L.value=="other_ai_plate"?(openBlock(),createElementBlock("div",_hoisted_7$j,[createVNode(aiServerSetting)])):createCommentVNode("",!0),L.value=="network"?(openBlock(),createElementBlock("div",_hoisted_8$j,[createBaseVNode("div",_hoisted_9$j,toDisplayString$1(unref(a)("promptBox.settings.selectOptionNetworkTranslaterTitle")),1),createBaseVNode("div",_hoisted_10$i,toDisplayString$1(unref(a)("promptBox.settings.selectOptionNetworkTranslaterInfo"))+"：https://github.com/xnx3/translate",1),createBaseVNode("div",_hoisted_11$h,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.sourceLanguage")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[7]||(be[7]=ye=>l.value=ye),class:"weilin-comfyui-common-select"},[createBaseVNode("option",_hoisted_12$h,toDisplayString$1(unref(a)("promptBox.settings.auto_detect")),1),createBaseVNode("option",_hoisted_13$f,toDisplayString$1(unref(a)("promptBox.settings.chinese_simplified")),1),createBaseVNode("option",_hoisted_14$d,toDisplayString$1(unref(a)("promptBox.settings.english")),1)],512),[[vModelSelect,l.value]])]),createBaseVNode("div",_hoisted_15$d,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.targetLanguage")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[8]||(be[8]=ye=>c.value=ye),class:"weilin-comfyui-common-select"},[createBaseVNode("option",_hoisted_16$d,toDisplayString$1(unref(a)("promptBox.settings.chinese_simplified")),1),createBaseVNode("option",_hoisted_17$d,toDisplayString$1(unref(a)("promptBox.settings.english")),1)],512),[[vModelSelect,c.value]])]),createBaseVNode("button",{class:"weilin-comfyui-save-button",onClick:z},toDisplayString$1(unref(a)("promptBox.settings.save")),1)])):createCommentVNode("",!0),L.value=="translater"?(openBlock(),createElementBlock("div",_hoisted_18$a,[createBaseVNode("div",_hoisted_19$a,toDisplayString$1(unref(a)("promptBox.settings.selectOptionPythonTranslaterTitle")),1),createBaseVNode("div",_hoisted_20$a,toDisplayString$1(unref(a)("promptBox.settings.selectOptionPythonTranslaterInfo"))+"：https://github.com/UlionTse/translators",1),createBaseVNode("div",_hoisted_21$a,[createBaseVNode("div",_hoisted_22$a,toDisplayString$1(unref(a)("promptBox.settings.nowTranlaterPackageState"))+" "+toDisplayString$1(ae.value?unref(a)("promptBox.settings.tranlaterPackageStateTrue"):unref(a)("promptBox.settings.tranlaterPackageStateFlase")),1),W.value?(openBlock(),createElementBlock("div",_hoisted_23$a,toDisplayString$1(unref(a)("promptBox.settings.installTranslaterPackageInfo")),1)):createCommentVNode("",!0),ae.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_24$a,[createBaseVNode("button",{disabled:W.value,class:"weilin-comfyui-install-button",onClick:Me},toDisplayString$1(W.value?unref(a)("promptBox.settings.installed"):unref(a)("promptBox.settings.install")),9,_hoisted_25$a)]))]),ae.value?(openBlock(),createElementBlock("div",_hoisted_26$a,[createBaseVNode("div",_hoisted_27$a,toDisplayString$1(unref(a)("promptBox.settings.translaterSetting")),1),createBaseVNode("div",_hoisted_28$9,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.chooseTranslaterSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[9]||(be[9]=ye=>fe.value=ye)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(translaterSerives),(ye,Le)=>(openBlock(),createElementBlock("option",{index:Le,key:"tran-item_"+Le,value:ye},toDisplayString$1(unref(a)("translaterService."+ye)),9,_hoisted_29$9))),128))],512),[[vModelSelect,fe.value]])]),createBaseVNode("div",_hoisted_30$9,[createBaseVNode("div",_hoisted_31$9,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.translaterLangSourceSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[10]||(be[10]=ye=>oe.value=ye)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(language),(ye,Le)=>(openBlock(),createElementBlock("option",{index:Le,key:"lan-item_"+Le,value:ye.translator},toDisplayString$1(unref(a)("translaterLanguage."+ye.language)),9,_hoisted_32$9))),128))],512),[[vModelSelect,oe.value]])]),createBaseVNode("div",_hoisted_33$8,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.translaterLangTargeSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[11]||(be[11]=ye=>V.value=ye)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(language),(ye,Le)=>(openBlock(),createElementBlock("option",{index:Le,key:"lan-mu-item_"+Le,value:ye.translator},toDisplayString$1(unref(a)("translaterLanguage."+ye.language)),9,_hoisted_34$8))),128))],512),[[vModelSelect,V.value]])])]),createBaseVNode("button",{class:"weilin-comfyui-install-button",onClick:xe},toDisplayString$1(unref(a)("promptBox.settings.saveTranslaterSetting")),1)])):createCommentVNode("",!0),ae.value?(openBlock(),createElementBlock("div",_hoisted_35$8,[createBaseVNode("div",_hoisted_36$8,toDisplayString$1(unref(a)("promptBox.settings.testTranslaterTitle")),1),createBaseVNode("div",_hoisted_37$7,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.inputTestTranslater")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[12]||(be[12]=ye=>Y.value=ye),placeholder:unref(a)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,_hoisted_38$7),[[vModelText,Y.value]])]),createBaseVNode("div",_hoisted_39$7,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.outPutTestTranslater")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[13]||(be[13]=ye=>ne.value=ye),readonly:"",placeholder:unref(a)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,_hoisted_40$7),[[vModelText,ne.value]])]),createBaseVNode("button",{class:"weilin-comfyui-install-button",onClick:Ne},toDisplayString$1(unref(a)("promptBox.settings.testingTranslater")),1)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])])):createCommentVNode("",!0),o.value==="setting_auto_complete_limit"?(openBlock(),createElementBlock("div",_hoisted_41$7,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.setting_auto_complete_limit")),1),createBaseVNode("div",_hoisted_42$7,[createBaseVNode("div",_hoisted_43$7,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.show_auto_limit")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[14]||(be[14]=ye=>te.value=ye),min:"1",max:"99999999",style:{width:"100px"},placeholder:unref(a)("promptBox.settings.showAutoLimitPlaceholder")},null,8,_hoisted_44$6),[[vModelText,te.value,void 0,{number:!0}]])]),createBaseVNode("div",_hoisted_45$6,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.settingAutoCompleteWidth")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[15]||(be[15]=ye=>ge.value=ye),min:"5",style:{width:"100px"},placeholder:unref(a)("promptBox.settings.settingAutoCompleteWidthPlaceholder")},null,8,_hoisted_46$5),[[vModelText,ge.value,void 0,{number:!0}]])]),createBaseVNode("div",_hoisted_47$4,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.settingAutoCompleteHeight")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[16]||(be[16]=ye=>re.value=ye),min:"5",style:{width:"100px"},placeholder:unref(a)("promptBox.settings.settingAutoCompleteHeightPlaceholder")},null,8,_hoisted_48$4),[[vModelText,re.value,void 0,{number:!0}]])]),createBaseVNode("button",{class:"weilin-comfyui-save-button",onClick:We},toDisplayString$1(unref(a)("promptBox.settings.save")),1)])])):createCommentVNode("",!0),o.value==="setting_floating_ball"?(openBlock(),createElementBlock("div",_hoisted_49$4,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.setting_floating_ball")),1),createBaseVNode("div",_hoisted_50$4,[createBaseVNode("div",_hoisted_51$4,[createBaseVNode("div",_hoisted_52$4,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[17]||(be[17]=ye=>m.value=ye)},null,512),[[vModelCheckbox,m.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableFloatingBall")),1)])]),createBaseVNode("div",_hoisted_53$4,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.floatingBallCount")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[18]||(be[18]=ye=>f.value=ye),min:"1",max:"100",placeholder:unref(a)("promptBox.settings.floatingBallCountPlaceholder")},null,8,_hoisted_54$3),[[vModelText,f.value,void 0,{number:!0}]])]),createBaseVNode("div",_hoisted_55$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.floatingBallSize")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[19]||(be[19]=ye=>u.value=ye),min:"5",max:"999999",placeholder:unref(a)("promptBox.settings.floatingBallSizePlaceholder")},null,8,_hoisted_56$3),[[vModelText,u.value,void 0,{number:!0}]])]),createBaseVNode("div",_hoisted_57$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.floatingBallHeight")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[20]||(be[20]=ye=>d.value=ye),min:"5",max:"999999",placeholder:unref(a)("promptBox.settings.floatingBallHeightPlaceholder")},null,8,_hoisted_58$3),[[vModelText,d.value,void 0,{number:!0}]])])]),createBaseVNode("div",_hoisted_59$3,[createBaseVNode("div",_hoisted_60$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.skinSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[21]||(be[21]=ye=>g.value=ye)},[createBaseVNode("option",_hoisted_61$3,toDisplayString$1(unref(a)("promptBox.settings.defaultSkin")),1),createBaseVNode("option",_hoisted_62$3,toDisplayString$1(unref(a)("promptBox.settings.customSkin")),1)],512),[[vModelSelect,g.value]])]),g.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_63$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.uploadSkin")),1),createBaseVNode("input",{type:"file",accept:"image/*",onChange:Z,ref:"skinUploader"},null,544),v.value?(openBlock(),createElementBlock("div",_hoisted_64$3,[createBaseVNode("img",{src:v.value,alt:"Custom Skin Preview"},null,8,_hoisted_65$3)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_66$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.bgSetting")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[22]||(be[22]=ye=>b.value=ye)},[createBaseVNode("option",_hoisted_67$3,toDisplayString$1(unref(a)("promptBox.settings.gradientBg")),1),createBaseVNode("option",_hoisted_68$3,toDisplayString$1(unref(a)("promptBox.settings.transparentBg")),1)],512),[[vModelSelect,b.value]])]),b.value==="gradient"?(openBlock(),createElementBlock("div",_hoisted_69$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.gradientColor")),1),createBaseVNode("div",_hoisted_70$3,[withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":be[23]||(be[23]=ye=>$.value=ye)},null,512),[[vModelText,$.value]]),withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":be[24]||(be[24]=ye=>w.value=ye)},null,512),[[vModelText,w.value]]),createBaseVNode("button",{onClick:D,style:{"margin-left":"10px",width:"200px"}},toDisplayString$1(unref(a)("promptBox.settings.resetToDefault")),1)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_71$3,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.borderRadius")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":be[25]||(be[25]=ye=>C.value=ye),min:"0",max:"50"},null,512),[[vModelText,C.value,void 0,{number:!0}]])]),createBaseVNode("button",{class:"weilin-comfyui-save-button",style:{"grid-column":"span 2"},onClick:K},toDisplayString$1(unref(a)("promptBox.settings.save")),1)])])):createCommentVNode("",!0),o.value==="setting_prompt_box"?(openBlock(),createElementBlock("div",_hoisted_72$3,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.setting_prompt_box")),1),createBaseVNode("div",_hoisted_73$2,[createBaseVNode("div",_hoisted_74$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[26]||(be[26]=ye=>P.value=ye)},null,512),[[vModelCheckbox,P.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableCommaConversion")),1)])]),createBaseVNode("div",_hoisted_75$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[27]||(be[27]=ye=>y.value=ye)},null,512),[[vModelCheckbox,y.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enablePeriodConversion")),1)])]),createBaseVNode("div",_hoisted_76$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[28]||(be[28]=ye=>E.value=ye)},null,512),[[vModelCheckbox,E.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableBracketConversion")),1)])]),createBaseVNode("div",_hoisted_77$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[29]||(be[29]=ye=>R.value=ye)},null,512),[[vModelCheckbox,R.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableAngleBracketConversion")),1)])]),createBaseVNode("div",_hoisted_78$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[30]||(be[30]=ye=>F.value=ye)},null,512),[[vModelCheckbox,F.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableUnderscoreToBracket")),1)])]),createBaseVNode("div",_hoisted_79$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[31]||(be[31]=ye=>H.value=ye)},null,512),[[vModelCheckbox,H.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableCommaCloseAutocomplete")),1)])]),createBaseVNode("div",_hoisted_80$2,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":be[32]||(be[32]=ye=>j.value=ye)},null,512),[[vModelCheckbox,j.value]]),createTextVNode(" "+toDisplayString$1(unref(a)("promptBox.settings.enableBracketEscape")),1)])]),createBaseVNode("button",{class:"weilin-comfyui-save-button",onClick:x},toDisplayString$1(unref(a)("promptBox.settings.save")),1)])])):createCommentVNode("",!0),o.value==="setting_openai_box"?(openBlock(),createElementBlock("div",_hoisted_81$2,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.openaiSettings")),1),createBaseVNode("div",_hoisted_82$2,[createBaseVNode("div",_hoisted_83$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.selectedOpenaiConfig")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":be[33]||(be[33]=ye=>q.value=ye),onChange:M},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Q.value,(ye,Le)=>(openBlock(),createElementBlock("option",{key:Le,value:Le},toDisplayString$1(ye.model)+" ("+toDisplayString$1(ye.base_url)+") ",9,_hoisted_84$2))),128))],544),[[vModelSelect,q.value]])]),createBaseVNode("div",_hoisted_85$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Q.value,(ye,Le)=>(openBlock(),createElementBlock("div",{key:Le,class:"weilin-comfyui-config-item"},[createBaseVNode("div",_hoisted_86$2,[createBaseVNode("span",null,toDisplayString$1(ye.model),1),createBaseVNode("div",_hoisted_87$2,[createBaseVNode("button",{onClick:Qe=>ie(Le)},toDisplayString$1(A.value===Le?unref(a)("promptBox.settings.cancel"):unref(a)("promptBox.settings.edit")),9,_hoisted_88$2),createBaseVNode("button",{onClick:Qe=>X(Le)},toDisplayString$1(unref(a)("promptBox.settings.delete")),9,_hoisted_89$2)])]),A.value===Le?(openBlock(),createElementBlock("div",_hoisted_90$2,[createBaseVNode("div",_hoisted_91$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.openai_api_key"))+":",1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[34]||(be[34]=Qe=>G.value.api_key=Qe),placeholder:unref(a)("promptBox.settings.openai_api_key_placeholder")},null,8,_hoisted_92$2),[[vModelText,G.value.api_key]])]),createBaseVNode("div",_hoisted_93$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.openai_base_url"))+":",1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[35]||(be[35]=Qe=>G.value.base_url=Qe),placeholder:unref(a)("promptBox.settings.openai_base_url_placeholder")},null,8,_hoisted_94$2),[[vModelText,G.value.base_url]])]),createBaseVNode("div",_hoisted_95$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.openai_model"))+":",1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[36]||(be[36]=Qe=>G.value.model=Qe),placeholder:unref(a)("promptBox.settings.openai_model_placeholder")},null,8,_hoisted_96$2),[[vModelText,G.value.model]])]),createBaseVNode("div",_hoisted_97$2,[createBaseVNode("button",{onClick:Qe=>pe(Le)},toDisplayString$1(unref(a)("promptBox.settings.save")),9,_hoisted_98$2)])])):(openBlock(),createElementBlock("div",_hoisted_99$2,[createBaseVNode("div",null,toDisplayString$1(unref(a)("promptBox.settings.openai_api_key"))+": "+toDisplayString$1(ye.api_key?"******":unref(a)("promptBox.settings.not_set")),1),createBaseVNode("div",null,toDisplayString$1(unref(a)("promptBox.settings.openai_base_url"))+": "+toDisplayString$1(ye.base_url),1)]))]))),128))]),O.value?(openBlock(),createElementBlock("div",_hoisted_100$2,[createBaseVNode("div",_hoisted_101$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.openai_api_key"))+":",1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[37]||(be[37]=ye=>G.value.api_key=ye),placeholder:unref(a)("promptBox.settings.openai_api_key_placeholder")},null,8,_hoisted_102$2),[[vModelText,G.value.api_key]])]),createBaseVNode("div",_hoisted_103$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.openai_base_url"))+":",1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[38]||(be[38]=ye=>G.value.base_url=ye),placeholder:unref(a)("promptBox.settings.openai_base_url_placeholder")},null,8,_hoisted_104$2),[[vModelText,G.value.base_url]])]),createBaseVNode("div",_hoisted_105$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("promptBox.settings.openai_model"))+":",1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":be[39]||(be[39]=ye=>G.value.model=ye),placeholder:unref(a)("promptBox.settings.openai_model_placeholder")},null,8,_hoisted_106$2),[[vModelText,G.value.model]])]),createBaseVNode("div",_hoisted_107$2,[createBaseVNode("button",{onClick:_},toDisplayString$1(unref(a)("promptBox.settings.cancel")),1),createBaseVNode("button",{onClick:T},toDisplayString$1(unref(a)("promptBox.settings.save")),1)])])):createCommentVNode("",!0),O.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,class:"weilin-comfyui-add-button",onClick:I},toDisplayString$1(unref(a)("promptBox.settings.addNewConfig")),1))])])):createCommentVNode("",!0),o.value==="setting_sponsor_me"?(openBlock(),createElementBlock("div",_hoisted_108$2,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.setting_sponsor_me")),1),createBaseVNode("div",_hoisted_109$2,[createBaseVNode("h1",null,toDisplayString$1(unref(a)("promptBox.settings.sponsorMeTip")),1),createBaseVNode("h2",null,toDisplayString$1(unref(a)("promptBox.settings.sponsorMeLink")),1),createBaseVNode("button",{class:"weilin-comfyui-sponsor-me-button",onClick:U},toDisplayString$1(unref(a)("promptBox.settings.sponsorMe")),1)])])):createCommentVNode("",!0),o.value==="setting_start_panel"?(openBlock(),createElementBlock("div",_hoisted_110$2,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("promptBox.settings.setting_start_panel")),1),createBaseVNode("div",_hoisted_111$2,[createBaseVNode("h4",null,toDisplayString$1(unref(a)("promptBox.settings.startPanelTip")),1),createBaseVNode("button",{class:"weilin-comfyui-start-panel-button",onClick:_e},toDisplayString$1(unref(a)("promptBox.settings.startPanel")),1)])])):createCommentVNode("",!0)])])]),_:1},8,["modelValue","title"]))}},SettingDialog=_export_sfc(_sfc_main$o,[["__scopeId","data-v-d84f82b1"]]),_hoisted_1$n=["title"],_hoisted_2$l={class:"switch-icon"},_hoisted_3$l={key:0,class:"moon",viewBox:"0 0 24 24"},_hoisted_4$k={key:1,class:"sun",viewBox:"0 0 24 24"},STORAGE_PREFIX$6="weilin_tools_",_sfc_main$n={__name:"ThemeSwitch",setup(e){const{t}=useI18n(),a=`${STORAGE_PREFIX$6}theme`,n=ref(localStorage.getItem(a)==="dark"),o=()=>{n.value=!n.value;const r=document.getElementById("weilin_comfyui_tools_prompt_ui_div");r&&r.setAttribute("data-theme",n.value?"dark":"light"),localStorage.setItem(a,n.value?"dark":"light")};return(r,s)=>(openBlock(),createElementBlock("button",{class:"theme-switch",onClick:o,title:unref(t)("theme.toggle")},[createBaseVNode("div",_hoisted_2$l,[n.value?(openBlock(),createElementBlock("svg",_hoisted_3$l,s[0]||(s[0]=[createBaseVNode("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)]))):(openBlock(),createElementBlock("svg",_hoisted_4$k,s[1]||(s[1]=[createBaseVNode("circle",{cx:"12",cy:"12",r:"5"},null,-1),createBaseVNode("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])))]),renderSlot(r.$slots,"default",{isDark:n.value},void 0,!0)],8,_hoisted_1$n))}},ThemeSwitch=_export_sfc(_sfc_main$n,[["__scopeId","data-v-43d9cf91"]]),STORAGE_PREFIX$5="weilin_tools_",tagsApi={getTagsList:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/get_group_tags",method:"get",params:{...e,lang:t}})},addPrimaryCategory:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/add_new_f_group",method:"post",data:{...e,lang:t}})},editPrimaryCategory:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/edit_f_group",method:"post",data:{...e,lang:t}})},deletePrimaryCategory:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/delete_f_group",method:"post",data:{...e,lang:t}})},addSubCategory:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/add_new_s_group",method:"post",data:{...e,lang:t}})},editSubCategory:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/edit_s_group",method:"post",data:{...e,lang:t}})},deleteSubCategory:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/delete_s_group",method:"post",data:{...e,lang:t}})},addNewTags:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/new_tags",method:"post",data:{...e,lang:t}})},editTags:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/edit_tags",method:"post",data:{...e,lang:t}})},deleteTags:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/delete_tags",method:"post",data:{...e,lang:t}})},batchDeleteTags:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/batch_delete_tags",method:"post",data:{...e,lang:t}})},moveTag:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/move_tag",method:"post",data:{...e,lang:t}})},getTagsGroupList:async()=>await request({url:"/prompt/get_groups_list",method:"post"}),runSQLToServer:async e=>await request({url:"/prompt/run_sql_text",method:"post",timeout:0,data:{sql:e}}),moveMainGroup:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/move_group",method:"post",data:{...e,lang:t}})},moveSubGroup:async e=>{const t=localStorage.getItem(`${STORAGE_PREFIX$5}userLocale`)||"zh_CN";return await request({url:"/prompt/move_subgroup",method:"post",data:{...e,lang:t}})},getTagMainGroup:async()=>await request({url:"/prompt/get_tag_groups",method:"post"}),getTagSubGroup:async e=>await request({url:"/prompt/get_tag_subgroups",method:"post",data:{p_uuid:e}}),getTagList:async e=>await request({url:"/prompt/get_tag_tags",method:"post",data:{g_uuid:e}}),searchTag:async e=>await request({url:"/prompt/search_tags",method:"post",data:{keyword:e}})};/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * Copyright 2021-2024 LiosK
 *
 * @license Apache-2.0
 * @packageDocumentation
 */const DIGITS="0123456789abcdef";class UUID{constructor(t){this.bytes=t}static ofInner(t){if(t.length!==16)throw new TypeError("not 128-bit length");return new UUID(t)}static fromFieldsV7(t,a,n,o){if(!Number.isInteger(t)||!Number.isInteger(a)||!Number.isInteger(n)||!Number.isInteger(o)||t<0||a<0||n<0||o<0||t>0xffffffffffff||a>4095||n>1073741823||o>4294967295)throw new RangeError("invalid field value");const r=new Uint8Array(16);return r[0]=t/2**40,r[1]=t/2**32,r[2]=t/2**24,r[3]=t/2**16,r[4]=t/2**8,r[5]=t,r[6]=112|a>>>8,r[7]=a,r[8]=128|n>>>24,r[9]=n>>>16,r[10]=n>>>8,r[11]=n,r[12]=o>>>24,r[13]=o>>>16,r[14]=o>>>8,r[15]=o,new UUID(r)}static parse(t){var a,n,o,r;let s;switch(t.length){case 32:s=(a=/^[0-9a-f]{32}$/i.exec(t))===null||a===void 0?void 0:a[0];break;case 36:s=(n=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||n===void 0?void 0:n.slice(1,6).join("");break;case 38:s=(o=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t))===null||o===void 0?void 0:o.slice(1,6).join("");break;case 45:s=(r=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||r===void 0?void 0:r.slice(1,6).join("");break}if(s){const l=new Uint8Array(16);for(let c=0;c<16;c+=4){const f=parseInt(s.substring(2*c,2*c+8),16);l[c+0]=f>>>24,l[c+1]=f>>>16,l[c+2]=f>>>8,l[c+3]=f}return new UUID(l)}else throw new SyntaxError("could not parse UUID string")}toString(){let t="";for(let a=0;a<this.bytes.length;a++)t+=DIGITS.charAt(this.bytes[a]>>>4),t+=DIGITS.charAt(this.bytes[a]&15),(a===3||a===5||a===7||a===9)&&(t+="-");return t}toHex(){let t="";for(let a=0;a<this.bytes.length;a++)t+=DIGITS.charAt(this.bytes[a]>>>4),t+=DIGITS.charAt(this.bytes[a]&15);return t}toJSON(){return this.toString()}getVariant(){const t=this.bytes[8]>>>4;if(t<0)throw new Error("unreachable");if(t<=7)return this.bytes.every(a=>a===0)?"NIL":"VAR_0";if(t<=11)return"VAR_10";if(t<=13)return"VAR_110";if(t<=15)return this.bytes.every(a=>a===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new UUID(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let a=0;a<16;a++){const n=this.bytes[a]-t.bytes[a];if(n!==0)return Math.sign(n)}return 0}}class V7Generator{constructor(t){this.timestamp=0,this.counter=0,this.random=t??getDefaultRandom()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(t,a){let n=this.generateOrAbortCore(t,a);return n===void 0&&(this.timestamp=0,n=this.generateOrAbortCore(t,a)),n}generateOrAbortCore(t,a){if(!Number.isInteger(t)||t<1||t>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(a<0||a>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(t>this.timestamp)this.timestamp=t,this.resetCounter();else if(t+a>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return UUID.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const t=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return t[6]=64|t[6]>>>4,t[8]=128|t[8]>>>2,UUID.ofInner(t)}}const getDefaultRandom=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new BufferedCryptoRandom;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class BufferedCryptoRandom{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let defaultGenerator;const uuidv7=()=>uuidv7obj().toString(),uuidv7obj=()=>(defaultGenerator||(defaultGenerator=new V7Generator)).generate(),_hoisted_1$m={class:"tag-manager"},_hoisted_2$k={class:"category-tabs"},_hoisted_3$k={class:"tabs-wrapper primary-tabs"},_hoisted_4$j={class:"tabs-scroll"},_hoisted_5$i=["onClick"],_hoisted_6$i={class:"tab-text"},_hoisted_7$i={key:0,class:"tabs-wrapper group-tabs"},_hoisted_8$i={class:"tabs-scroll"},_hoisted_9$i=["onClick"],_hoisted_10$h={class:"tab-text"},_sfc_main$m={__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=a,r=ref([]),s=ref(null),l=ref(null),c=ref([]),f=ref(!1),u=ref(!1),d=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},m=async()=>{try{const C=await tagsApi.getTagsGroupList();if(r.value=C.info,l.value){const P=r.value.flatMap(y=>y.groups).find(y=>y.p_uuid===l.value.p_uuid);P?l.value=P:l.value=null}if(s.value){const P=r.value.find(y=>y.p_uuid===s.value.p_uuid);P?s.value=P:s.value=null}}catch(C){console.error("获取标签列表失败:",C)}},g=C=>{if(!C||C==="transparent")return"var(--primary-text)";let P,y,E,R=1;if(C.startsWith("rgba")){const H=C.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);H&&([,P,y,E,R]=H.map(Number))}else if(C.startsWith("rgb")){const H=C.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);H&&([,P,y,E]=H.map(Number))}return R<.5?"var(--primary-text)":(P*299+y*587+E*114)/1e3>128?"#000000":"#ffffff"};onMounted(()=>{window.addEventListener("message",$)}),onBeforeUnmount(()=>{window.removeEventListener("message",$)});const v=C=>{s.value=C,l.value=null,f.value=!1,c.value=[]},b=C=>{l.value=C,f.value=!1,c.value=[]},$=C=>{C.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&m()},w=()=>{if(l.value==null||s.value==null){message$1({type:"warn",str:"message.pleaseSelectGroup"});return}o("sureSelect",{group:s.value,sub:l.value}),u.value=!1};return t({open:()=>{d(),u.value=!0}}),(C,P)=>(openBlock(),createBlock(Dialog,{modelValue:u.value,"onUpdate:modelValue":P[1]||(P[1]=y=>u.value=y),title:unref(n)("importDialog.selectTitle")},{footer:withCtx(()=>[createBaseVNode("button",{onClick:P[0]||(P[0]=y=>u.value=!1)},toDisplayString$1(unref(n)("promptBox.settings.close")),1),createBaseVNode("button",{onClick:w},toDisplayString$1(unref(n)("importDialog.sureSelect")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$m,[createBaseVNode("div",_hoisted_2$k,[createBaseVNode("div",_hoisted_3$k,[createBaseVNode("div",_hoisted_4$j,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(y,E)=>{var R,F,H;return openBlock(),createElementBlock("div",{key:"Tabss-"+E,class:normalizeClass(["tab-item",{active:((R=s.value)==null?void 0:R.name)===y.name}]),style:normalizeStyle({backgroundColor:((F=s.value)==null?void 0:F.name)===y.name?"var(--primary-color)":y.color,color:((H=s.value)==null?void 0:H.name)===y.name?"#ffffff":g(y.color)}),onClick:j=>v(y)},[createBaseVNode("span",_hoisted_6$i,toDisplayString$1(y.name),1)],14,_hoisted_5$i)}),128))])]),s.value?(openBlock(),createElementBlock("div",_hoisted_7$i,[createBaseVNode("div",_hoisted_8$i,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value.groups,(y,E)=>{var R,F,H;return openBlock(),createElementBlock("div",{key:"TabsSw-"+E,class:normalizeClass(["tab-item",{active:((R=l.value)==null?void 0:R.name)===y.name}]),style:normalizeStyle({backgroundColor:((F=l.value)==null?void 0:F.name)===y.name?"var(--primary-color)":y.color,color:((H=l.value)==null?void 0:H.name)===y.name?"#ffffff":g(y.color)}),onClick:j=>b(y)},[createBaseVNode("span",_hoisted_10$h,toDisplayString$1(y.name),1)],14,_hoisted_9$i)}),128))])])):createCommentVNode("",!0)])])]),_:1},8,["modelValue","title"]))}},TagGroupSelect$1=_export_sfc(_sfc_main$m,[["__scopeId","data-v-f6c0f177"]]);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(e){return typeof e>"u"||e===null}function isObject(e){return typeof e=="object"&&e!==null}function toArray(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]}function extend(e,t){var a,n,o,r;if(t)for(r=Object.keys(t),a=0,n=r.length;a<n;a+=1)o=r[a],e[o]=t[o];return e}function repeat(e,t){var a="",n;for(n=0;n<t;n+=1)a+=e;return a}function isNegativeZero(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(e,t){var a="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(a+='in "'+e.mark.name+'" '),a+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(a+=`

`+e.mark.snippet),n+" "+a):n}function YAMLException$1(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype),YAMLException$1.prototype.constructor=YAMLException$1,YAMLException$1.prototype.toString=function(t){return this.name+": "+formatError(this,t)};var exception=YAMLException$1;function getLine(e,t,a,n,o){var r="",s="",l=Math.floor(o/2)-1;return n-t>l&&(r=" ... ",t=n-l+r.length),a-n>l&&(s=" ...",a=n+l-s.length),{str:r+e.slice(t,a).replace(/\t/g,"→")+s,pos:n-t+r.length}}function padStart(e,t){return common.repeat(" ",t-e.length)+e}function makeSnippet(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var a=/\r?\n|\r|\0/g,n=[0],o=[],r,s=-1;r=a.exec(e.buffer);)o.push(r.index),n.push(r.index+r[0].length),e.position<=r.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",c,f,u=Math.min(e.line+t.linesAfter,o.length).toString().length,d=t.maxLength-(t.indent+u+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)f=getLine(e.buffer,n[s-c],o[s-c],e.position-(n[s]-n[s-c]),d),l=common.repeat(" ",t.indent)+padStart((e.line-c+1).toString(),u)+" | "+f.str+`
`+l;for(f=getLine(e.buffer,n[s],o[s],e.position,d),l+=common.repeat(" ",t.indent)+padStart((e.line+1).toString(),u)+" | "+f.str+`
`,l+=common.repeat("-",t.indent+u+3+f.pos)+`^
`,c=1;c<=t.linesAfter&&!(s+c>=o.length);c++)f=getLine(e.buffer,n[s+c],o[s+c],e.position-(n[s]-n[s+c]),d),l+=common.repeat(" ",t.indent)+padStart((e.line+c+1).toString(),u)+" | "+f.str+`
`;return l.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(e){var t={};return e!==null&&Object.keys(e).forEach(function(a){e[a].forEach(function(n){t[String(n)]=a})}),t}function Type$1(e,t){if(t=t||{},Object.keys(t).forEach(function(a){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(a)===-1)throw new exception('Unknown option "'+a+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(a){return a},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=compileStyleAliases(t.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var type=Type$1;function compileList(e,t){var a=[];return e[t].forEach(function(n){var o=a.length;a.forEach(function(r,s){r.tag===n.tag&&r.kind===n.kind&&r.multi===n.multi&&(o=s)}),a[o]=n}),a}function compileMap(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,a;function n(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,a=arguments.length;t<a;t+=1)arguments[t].forEach(n);return e}function Schema$1(e){return this.extend(e)}Schema$1.prototype.extend=function(t){var a=[],n=[];if(t instanceof type)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(a=a.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");a.forEach(function(r){if(!(r instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(r){if(!(r instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(Schema$1.prototype);return o.implicit=(this.implicit||[]).concat(a),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=compileList(o,"implicit"),o.compiledExplicit=compileList(o,"explicit"),o.compiledTypeMap=compileMap(o.compiledImplicit,o.compiledExplicit),o};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function constructYamlNull(){return null}function isNull(e){return e===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function constructYamlBoolean(e){return e==="true"||e==="True"||e==="TRUE"}function isBoolean(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}function resolveYamlInteger(e){if(e===null)return!1;var t=e.length,a=0,n=!1,o;if(!t)return!1;if(o=e[a],(o==="-"||o==="+")&&(o=e[++a]),o==="0"){if(a+1===t)return!0;if(o=e[++a],o==="b"){for(a++;a<t;a++)if(o=e[a],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(a++;a<t;a++)if(o=e[a],o!=="_"){if(!isHexCode(e.charCodeAt(a)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(a++;a<t;a++)if(o=e[a],o!=="_"){if(!isOctCode(e.charCodeAt(a)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;a<t;a++)if(o=e[a],o!=="_"){if(!isDecCode(e.charCodeAt(a)))return!1;n=!0}return!(!n||o==="_")}function constructYamlInteger(e){var t=e,a=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(a=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return a*parseInt(t.slice(2),2);if(t[1]==="x")return a*parseInt(t.slice(2),16);if(t[1]==="o")return a*parseInt(t.slice(2),8)}return a*parseInt(t,10)}function isInteger(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!common.isNegativeZero(e)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(e){return!(e===null||!YAML_FLOAT_PATTERN.test(e)||e[e.length-1]==="_")}function constructYamlFloat(e){var t,a;return t=e.replace(/_/g,"").toLowerCase(),a=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?a===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:a*parseFloat(t,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(e,t){var a;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(e))return"-0.0";return a=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(a)?a.replace("e",".e"):a}function isFloat(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||common.isNegativeZero(e))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(e){return e===null?!1:YAML_DATE_REGEXP.exec(e)!==null||YAML_TIMESTAMP_REGEXP.exec(e)!==null}function constructYamlTimestamp(e){var t,a,n,o,r,s,l,c=0,f=null,u,d,m;if(t=YAML_DATE_REGEXP.exec(e),t===null&&(t=YAML_TIMESTAMP_REGEXP.exec(e)),t===null)throw new Error("Date resolve error");if(a=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(a,n,o));if(r=+t[4],s=+t[5],l=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=+t[10],d=+(t[11]||0),f=(u*60+d)*6e4,t[9]==="-"&&(f=-f)),m=new Date(Date.UTC(a,n,o,r,s,l,c)),f&&m.setTime(m.getTime()-f),m}function representYamlTimestamp(e){return e.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(e){return e==="<<"||e===null}var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(e){if(e===null)return!1;var t,a,n=0,o=e.length,r=BASE64_MAP;for(a=0;a<o;a++)if(t=r.indexOf(e.charAt(a)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function constructYamlBinary(e){var t,a,n=e.replace(/[\r\n=]/g,""),o=n.length,r=BASE64_MAP,s=0,l=[];for(t=0;t<o;t++)t%4===0&&t&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|r.indexOf(n.charAt(t));return a=o%4*6,a===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):a===18?(l.push(s>>10&255),l.push(s>>2&255)):a===12&&l.push(s>>4&255),new Uint8Array(l)}function representYamlBinary(e){var t="",a=0,n,o,r=e.length,s=BASE64_MAP;for(n=0;n<r;n++)n%3===0&&n&&(t+=s[a>>18&63],t+=s[a>>12&63],t+=s[a>>6&63],t+=s[a&63]),a=(a<<8)+e[n];return o=r%3,o===0?(t+=s[a>>18&63],t+=s[a>>12&63],t+=s[a>>6&63],t+=s[a&63]):o===2?(t+=s[a>>10&63],t+=s[a>>4&63],t+=s[a<<2&63],t+=s[64]):o===1&&(t+=s[a>>2&63],t+=s[a<<4&63],t+=s[64],t+=s[64]),t}function isBinary(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(e){if(e===null)return!0;var t=[],a,n,o,r,s,l=e;for(a=0,n=l.length;a<n;a+=1){if(o=l[a],s=!1,_toString$2.call(o)!=="[object Object]")return!1;for(r in o)if(_hasOwnProperty$3.call(o,r))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(r)===-1)t.push(r);else return!1}return!0}function constructYamlOmap(e){return e!==null?e:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(e){if(e===null)return!0;var t,a,n,o,r,s=e;for(r=new Array(s.length),t=0,a=s.length;t<a;t+=1){if(n=s[t],_toString$1.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;r[t]=[o[0],n[o[0]]]}return!0}function constructYamlPairs(e){if(e===null)return[];var t,a,n,o,r,s=e;for(r=new Array(s.length),t=0,a=s.length;t<a;t+=1)n=s[t],o=Object.keys(n),r[t]=[o[0],n[o[0]]];return r}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(e){if(e===null)return!0;var t,a=e;for(t in a)if(_hasOwnProperty$2.call(a,t)&&a[t]!==null)return!1;return!0}function constructYamlSet(e){return e!==null?e:{}}var set$1=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge],explicit:[binary,omap,pairs,set$1]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(e){return Object.prototype.toString.call(e)}function is_EOL(e){return e===10||e===13}function is_WHITE_SPACE(e){return e===9||e===32}function is_WS_OR_EOL(e){return e===9||e===32||e===10||e===13}function is_FLOW_INDICATOR(e){return e===44||e===91||e===93||e===123||e===125}function fromHexCode(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function escapedHexLen(e){return e===120?2:e===117?4:e===85?8:0}function fromDecimalCode(e){return 48<=e&&e<=57?e-48:-1}function simpleEscapeSequence(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||_default,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(e,t){var a={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return a.snippet=snippet(a),new exception(t,a)}function throwError(e,t){throw generateError(e,t)}function throwWarning(e,t){e.onWarning&&e.onWarning.call(null,generateError(e,t))}var directiveHandlers={YAML:function(t,a,n){var o,r,s;t.version!==null&&throwError(t,"duplication of %YAML directive"),n.length!==1&&throwError(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&throwError(t,"ill-formed argument of the YAML directive"),r=parseInt(o[1],10),s=parseInt(o[2],10),r!==1&&throwError(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&throwWarning(t,"unsupported YAML version of the document")},TAG:function(t,a,n){var o,r;n.length!==2&&throwError(t,"TAG directive accepts exactly two arguments"),o=n[0],r=n[1],PATTERN_TAG_HANDLE.test(o)||throwError(t,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(t.tagMap,o)&&throwError(t,'there is a previously declared suffix for "'+o+'" tag handle'),PATTERN_TAG_URI.test(r)||throwError(t,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{throwError(t,"tag prefix is malformed: "+r)}t.tagMap[o]=r}};function captureSegment(e,t,a,n){var o,r,s,l;if(t<a){if(l=e.input.slice(t,a),n)for(o=0,r=l.length;o<r;o+=1)s=l.charCodeAt(o),s===9||32<=s&&s<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(l)&&throwError(e,"the stream contains non-printable characters");e.result+=l}}function mergeMappings(e,t,a,n){var o,r,s,l;for(common.isObject(a)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(a),s=0,l=o.length;s<l;s+=1)r=o[s],_hasOwnProperty$1.call(t,r)||(t[r]=a[r],n[r]=!0)}function storeMappingPair(e,t,a,n,o,r,s,l,c){var f,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),f=0,u=o.length;f<u;f+=1)Array.isArray(o[f])&&throwError(e,"nested arrays are not supported inside keys"),typeof o=="object"&&_class(o[f])==="[object Object]"&&(o[f]="[object Object]");if(typeof o=="object"&&_class(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(f=0,u=r.length;f<u;f+=1)mergeMappings(e,t,r[f],a);else mergeMappings(e,t,r,a);else!e.json&&!_hasOwnProperty$1.call(a,o)&&_hasOwnProperty$1.call(t,o)&&(e.line=s||e.line,e.lineStart=l||e.lineStart,e.position=c||e.position,throwError(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:r}):t[o]=r,delete a[o];return t}function readLineBreak(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function skipSeparationSpace(e,t,a){for(var n=0,o=e.input.charCodeAt(e.position);o!==0;){for(;is_WHITE_SPACE(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(is_EOL(o))for(readLineBreak(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return a!==-1&&n!==0&&e.lineIndent<a&&throwWarning(e,"deficient indentation"),n}function testDocumentSeparator(e){var t=e.position,a;return a=e.input.charCodeAt(t),!!((a===45||a===46)&&a===e.input.charCodeAt(t+1)&&a===e.input.charCodeAt(t+2)&&(t+=3,a=e.input.charCodeAt(t),a===0||is_WS_OR_EOL(a)))}function writeFoldedLines(e,t){t===1?e.result+=" ":t>1&&(e.result+=common.repeat(`
`,t-1))}function readPlainScalar(e,t,a){var n,o,r,s,l,c,f,u,d=e.kind,m=e.result,g;if(g=e.input.charCodeAt(e.position),is_WS_OR_EOL(g)||is_FLOW_INDICATOR(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(o=e.input.charCodeAt(e.position+1),is_WS_OR_EOL(o)||a&&is_FLOW_INDICATOR(o)))return!1;for(e.kind="scalar",e.result="",r=s=e.position,l=!1;g!==0;){if(g===58){if(o=e.input.charCodeAt(e.position+1),is_WS_OR_EOL(o)||a&&is_FLOW_INDICATOR(o))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),is_WS_OR_EOL(n))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||a&&is_FLOW_INDICATOR(g))break;if(is_EOL(g))if(c=e.line,f=e.lineStart,u=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=t){l=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=f,e.lineIndent=u;break}}l&&(captureSegment(e,r,s,!1),writeFoldedLines(e,e.line-c),r=s=e.position,l=!1),is_WHITE_SPACE(g)||(s=e.position+1),g=e.input.charCodeAt(++e.position)}return captureSegment(e,r,s,!1),e.result?!0:(e.kind=d,e.result=m,!1)}function readSingleQuotedScalar(e,t){var a,n,o;if(a=e.input.charCodeAt(e.position),a!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(a=e.input.charCodeAt(e.position))!==0;)if(a===39)if(captureSegment(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),a===39)n=e.position,e.position++,o=e.position;else return!0;else is_EOL(a)?(captureSegment(e,n,o,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),n=o=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(e,t){var a,n,o,r,s,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,a=n=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return captureSegment(e,a,e.position,!0),e.position++,!0;if(l===92){if(captureSegment(e,a,e.position,!0),l=e.input.charCodeAt(++e.position),is_EOL(l))skipSeparationSpace(e,!1,t);else if(l<256&&simpleEscapeCheck[l])e.result+=simpleEscapeMap[l],e.position++;else if((s=escapedHexLen(l))>0){for(o=s,r=0;o>0;o--)l=e.input.charCodeAt(++e.position),(s=fromHexCode(l))>=0?r=(r<<4)+s:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(r),e.position++}else throwError(e,"unknown escape sequence");a=n=e.position}else is_EOL(l)?(captureSegment(e,a,n,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),a=n=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(e,t){var a=!0,n,o,r,s=e.tag,l,c=e.anchor,f,u,d,m,g,v=Object.create(null),b,$,w,C;if(C=e.input.charCodeAt(e.position),C===91)u=93,g=!1,l=[];else if(C===123)u=125,g=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),C=e.input.charCodeAt(++e.position);C!==0;){if(skipSeparationSpace(e,!0,t),C=e.input.charCodeAt(e.position),C===u)return e.position++,e.tag=s,e.anchor=c,e.kind=g?"mapping":"sequence",e.result=l,!0;a?C===44&&throwError(e,"expected the node content, but found ','"):throwError(e,"missed comma between flow collection entries"),$=b=w=null,d=m=!1,C===63&&(f=e.input.charCodeAt(e.position+1),is_WS_OR_EOL(f)&&(d=m=!0,e.position++,skipSeparationSpace(e,!0,t))),n=e.line,o=e.lineStart,r=e.position,composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),$=e.tag,b=e.result,skipSeparationSpace(e,!0,t),C=e.input.charCodeAt(e.position),(m||e.line===n)&&C===58&&(d=!0,C=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,t),composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),w=e.result),g?storeMappingPair(e,l,v,$,b,w,n,o,r):d?l.push(storeMappingPair(e,null,v,$,b,w,n,o,r)):l.push(b),skipSeparationSpace(e,!0,t),C=e.input.charCodeAt(e.position),C===44?(a=!0,C=e.input.charCodeAt(++e.position)):a=!1}throwError(e,"unexpected end of the stream within a flow collection")}function readBlockScalar(e,t){var a,n,o=CHOMPING_CLIP,r=!1,s=!1,l=t,c=0,f=!1,u,d;if(d=e.input.charCodeAt(e.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)CHOMPING_CLIP===o?o=d===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else if((u=fromDecimalCode(d))>=0)u===0?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?throwError(e,"repeat of an indentation width identifier"):(l=t+u-1,s=!0);else break;if(is_WHITE_SPACE(d)){do d=e.input.charCodeAt(++e.position);while(is_WHITE_SPACE(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!is_EOL(d)&&d!==0)}for(;d!==0;){for(readLineBreak(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<l)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>l&&(l=e.lineIndent),is_EOL(d)){c++;continue}if(e.lineIndent<l){o===CHOMPING_KEEP?e.result+=common.repeat(`
`,r?1+c:c):o===CHOMPING_CLIP&&r&&(e.result+=`
`);break}for(n?is_WHITE_SPACE(d)?(f=!0,e.result+=common.repeat(`
`,r?1+c:c)):f?(f=!1,e.result+=common.repeat(`
`,c+1)):c===0?r&&(e.result+=" "):e.result+=common.repeat(`
`,c):e.result+=common.repeat(`
`,r?1+c:c),r=!0,s=!0,c=0,a=e.position;!is_EOL(d)&&d!==0;)d=e.input.charCodeAt(++e.position);captureSegment(e,a,e.position,!1)}return!0}function readBlockSequence(e,t){var a,n=e.tag,o=e.anchor,r=[],s,l=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,throwError(e,"tab characters must not be used in indentation")),!(c!==45||(s=e.input.charCodeAt(e.position+1),!is_WS_OR_EOL(s))));){if(l=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=t){r.push(null),c=e.input.charCodeAt(e.position);continue}if(a=e.line,composeNode(e,t,CONTEXT_BLOCK_IN,!1,!0),r.push(e.result),skipSeparationSpace(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===a||e.lineIndent>t)&&c!==0)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=n,e.anchor=o,e.kind="sequence",e.result=r,!0):!1}function readBlockMapping(e,t,a){var n,o,r,s,l,c,f=e.tag,u=e.anchor,d={},m=Object.create(null),g=null,v=null,b=null,$=!1,w=!1,C;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),C=e.input.charCodeAt(e.position);C!==0;){if(!$&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,throwError(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),r=e.line,(C===63||C===58)&&is_WS_OR_EOL(n))C===63?($&&(storeMappingPair(e,d,m,g,v,null,s,l,c),g=v=b=null),w=!0,$=!0,o=!0):$?($=!1,o=!0):throwError(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,C=n;else{if(s=e.line,l=e.lineStart,c=e.position,!composeNode(e,a,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===r){for(C=e.input.charCodeAt(e.position);is_WHITE_SPACE(C);)C=e.input.charCodeAt(++e.position);if(C===58)C=e.input.charCodeAt(++e.position),is_WS_OR_EOL(C)||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),$&&(storeMappingPair(e,d,m,g,v,null,s,l,c),g=v=b=null),w=!0,$=!1,o=!1,g=e.tag,v=e.result;else if(w)throwError(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=f,e.anchor=u,!0}else if(w)throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=f,e.anchor=u,!0}if((e.line===r||e.lineIndent>t)&&($&&(s=e.line,l=e.lineStart,c=e.position),composeNode(e,t,CONTEXT_BLOCK_OUT,!0,o)&&($?v=e.result:b=e.result),$||(storeMappingPair(e,d,m,g,v,b,s,l,c),g=v=b=null),skipSeparationSpace(e,!0,-1),C=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&C!==0)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return $&&storeMappingPair(e,d,m,g,v,null,s,l,c),w&&(e.tag=f,e.anchor=u,e.kind="mapping",e.result=d),w}function readTagProperty(e){var t,a=!1,n=!1,o,r,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&throwError(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(a=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,a){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(r=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!is_WS_OR_EOL(s);)s===33&&(n?throwError(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),PATTERN_TAG_HANDLE.test(o)||throwError(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),PATTERN_FLOW_INDICATORS.test(r)&&throwError(e,"tag suffix cannot contain flow indicator characters")}r&&!PATTERN_TAG_URI.test(r)&&throwError(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{throwError(e,"tag name is malformed: "+r)}return a?e.tag=r:_hasOwnProperty$1.call(e.tagMap,o)?e.tag=e.tagMap[o]+r:o==="!"?e.tag="!"+r:o==="!!"?e.tag="tag:yaml.org,2002:"+r:throwError(e,'undeclared tag handle "'+o+'"'),!0}function readAnchorProperty(e){var t,a;if(a=e.input.charCodeAt(e.position),a!==38)return!1;for(e.anchor!==null&&throwError(e,"duplication of an anchor property"),a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!is_WS_OR_EOL(a)&&!is_FLOW_INDICATOR(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function readAlias(e){var t,a,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an alias node must contain at least one character"),a=e.input.slice(t,e.position),_hasOwnProperty$1.call(e.anchorMap,a)||throwError(e,'unidentified alias "'+a+'"'),e.result=e.anchorMap[a],skipSeparationSpace(e,!0,-1),!0}function composeNode(e,t,a,n,o){var r,s,l,c=1,f=!1,u=!1,d,m,g,v,b,$;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=s=l=CONTEXT_BLOCK_OUT===a||CONTEXT_BLOCK_IN===a,n&&skipSeparationSpace(e,!0,-1)&&(f=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(f=!0,l=r,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):l=!1;if(l&&(l=f||o),(c===1||CONTEXT_BLOCK_OUT===a)&&(CONTEXT_FLOW_IN===a||CONTEXT_FLOW_OUT===a?b=t:b=t+1,$=e.position-e.lineStart,c===1?l&&(readBlockSequence(e,$)||readBlockMapping(e,$,b))||readFlowCollection(e,b)?u=!0:(s&&readBlockScalar(e,b)||readSingleQuotedScalar(e,b)||readDoubleQuotedScalar(e,b)?u=!0:readAlias(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&throwError(e,"alias node should not have any properties")):readPlainScalar(e,b,CONTEXT_FLOW_IN===a)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(u=l&&readBlockSequence(e,$))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&throwError(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,m=e.implicitTypes.length;d<m;d+=1)if(v=e.implicitTypes[d],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(_hasOwnProperty$1.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,g=e.typeMap.multi[e.kind||"fallback"],d=0,m=g.length;d<m;d+=1)if(e.tag.slice(0,g[d].tag.length)===g[d].tag){v=g[d];break}v||throwError(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function readDocument(e){var t=e.position,a,n,o,r=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(skipSeparationSpace(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(r=!0,s=e.input.charCodeAt(++e.position),a=e.position;s!==0&&!is_WS_OR_EOL(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(a,e.position),o=[],n.length<1&&throwError(e,"directive name must not be less than one character in length");s!==0;){for(;is_WHITE_SPACE(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!is_EOL(s));break}if(is_EOL(s))break;for(a=e.position;s!==0&&!is_WS_OR_EOL(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(a,e.position))}s!==0&&readLineBreak(e),_hasOwnProperty$1.call(directiveHandlers,n)?directiveHandlers[n](e,n,o):throwWarning(e,'unknown document directive "'+n+'"')}if(skipSeparationSpace(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,skipSeparationSpace(e,!0,-1)):r&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(t,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,skipSeparationSpace(e,!0,-1));return}if(e.position<e.length-1)throwError(e,"end of the stream or a document separator is expected");else return}function loadDocuments(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var a=new State$1(e,t),n=e.indexOf("\0");for(n!==-1&&(a.position=n,throwError(a,"null byte is not allowed in input")),a.input+="\0";a.input.charCodeAt(a.position)===32;)a.lineIndent+=1,a.position+=1;for(;a.position<a.length-1;)readDocument(a);return a.documents}function loadAll$1(e,t,a){t!==null&&typeof t=="object"&&typeof a>"u"&&(a=t,t=null);var n=loadDocuments(e,a);if(typeof t!="function")return n;for(var o=0,r=n.length;o<r;o+=1)t(n[o])}function load$1(e,t){var a=loadDocuments(e,t);if(a.length!==0){if(a.length===1)return a[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader={loadAll:loadAll_1,load:load_1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0",ESCAPE_SEQUENCES[7]="\\a",ESCAPE_SEQUENCES[8]="\\b",ESCAPE_SEQUENCES[9]="\\t",ESCAPE_SEQUENCES[10]="\\n",ESCAPE_SEQUENCES[11]="\\v",ESCAPE_SEQUENCES[12]="\\f",ESCAPE_SEQUENCES[13]="\\r",ESCAPE_SEQUENCES[27]="\\e",ESCAPE_SEQUENCES[34]='\\"',ESCAPE_SEQUENCES[92]="\\\\",ESCAPE_SEQUENCES[133]="\\N",ESCAPE_SEQUENCES[160]="\\_",ESCAPE_SEQUENCES[8232]="\\L",ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(e,t){var a,n,o,r,s,l,c;if(t===null)return{};for(a={},n=Object.keys(t),o=0,r=n.length;o<r;o+=1)s=n[o],l=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&_hasOwnProperty.call(c.styleAliases,l)&&(l=c.styleAliases[l]),a[s]=l;return a}function encodeHex(e){var t,a,n;if(t=e.toString(16).toUpperCase(),e<=255)a="x",n=2;else if(e<=65535)a="u",n=4;else if(e<=4294967295)a="U",n=8;else throw new exception("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+a+common.repeat("0",n-t.length)+t}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(e){this.schema=e.schema||_default,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=common.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=compileStyleMap(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,t){for(var a=common.repeat(" ",t),n=0,o=-1,r="",s,l=e.length;n<l;)o=e.indexOf(`
`,n),o===-1?(s=e.slice(n),n=l):(s=e.slice(n,o+1),n=o+1),s.length&&s!==`
`&&(r+=a),r+=s;return r}function generateNextLine(e,t){return`
`+common.repeat(" ",e.indent*t)}function testImplicitResolving(e,t){var a,n,o;for(a=0,n=e.implicitTypes.length;a<n;a+=1)if(o=e.implicitTypes[a],o.resolve(t))return!0;return!1}function isWhitespace(e){return e===CHAR_SPACE||e===CHAR_TAB}function isPrintable(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==CHAR_BOM||65536<=e&&e<=1114111}function isNsCharOrWhitespace(e){return isPrintable(e)&&e!==CHAR_BOM&&e!==CHAR_CARRIAGE_RETURN&&e!==CHAR_LINE_FEED}function isPlainSafe(e,t,a){var n=isNsCharOrWhitespace(e),o=n&&!isWhitespace(e);return(a?n:n&&e!==CHAR_COMMA&&e!==CHAR_LEFT_SQUARE_BRACKET&&e!==CHAR_RIGHT_SQUARE_BRACKET&&e!==CHAR_LEFT_CURLY_BRACKET&&e!==CHAR_RIGHT_CURLY_BRACKET)&&e!==CHAR_SHARP&&!(t===CHAR_COLON&&!o)||isNsCharOrWhitespace(t)&&!isWhitespace(t)&&e===CHAR_SHARP||t===CHAR_COLON&&o}function isPlainSafeFirst(e){return isPrintable(e)&&e!==CHAR_BOM&&!isWhitespace(e)&&e!==CHAR_MINUS&&e!==CHAR_QUESTION&&e!==CHAR_COLON&&e!==CHAR_COMMA&&e!==CHAR_LEFT_SQUARE_BRACKET&&e!==CHAR_RIGHT_SQUARE_BRACKET&&e!==CHAR_LEFT_CURLY_BRACKET&&e!==CHAR_RIGHT_CURLY_BRACKET&&e!==CHAR_SHARP&&e!==CHAR_AMPERSAND&&e!==CHAR_ASTERISK&&e!==CHAR_EXCLAMATION&&e!==CHAR_VERTICAL_LINE&&e!==CHAR_EQUALS&&e!==CHAR_GREATER_THAN&&e!==CHAR_SINGLE_QUOTE&&e!==CHAR_DOUBLE_QUOTE&&e!==CHAR_PERCENT&&e!==CHAR_COMMERCIAL_AT&&e!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(e){return!isWhitespace(e)&&e!==CHAR_COLON}function codePointAt(e,t){var a=e.charCodeAt(t),n;return a>=55296&&a<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(a-55296)*1024+n-56320+65536:a}function needIndentIndicator(e){var t=/^\n* /;return t.test(e)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(e,t,a,n,o,r,s,l){var c,f=0,u=null,d=!1,m=!1,g=n!==-1,v=-1,b=isPlainSafeFirst(codePointAt(e,0))&&isPlainSafeLast(codePointAt(e,e.length-1));if(t||s)for(c=0;c<e.length;f>=65536?c+=2:c++){if(f=codePointAt(e,c),!isPrintable(f))return STYLE_DOUBLE;b=b&&isPlainSafe(f,u,l),u=f}else{for(c=0;c<e.length;f>=65536?c+=2:c++){if(f=codePointAt(e,c),f===CHAR_LINE_FEED)d=!0,g&&(m=m||c-v-1>n&&e[v+1]!==" ",v=c);else if(!isPrintable(f))return STYLE_DOUBLE;b=b&&isPlainSafe(f,u,l),u=f}m=m||g&&c-v-1>n&&e[v+1]!==" "}return!d&&!m?b&&!s&&!o(e)?STYLE_PLAIN:r===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:a>9&&needIndentIndicator(e)?STYLE_DOUBLE:s?r===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:m?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(e,t,a,n,o){e.dump=function(){if(t.length===0)return e.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!e.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(t)!==-1||DEPRECATED_BASE60_SYNTAX.test(t)))return e.quotingType===QUOTING_TYPE_DOUBLE?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,a),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),l=n||e.flowLevel>-1&&a>=e.flowLevel;function c(f){return testImplicitResolving(e,f)}switch(chooseScalarStyle(t,l,e.indent,s,c,e.quotingType,e.forceQuotes&&!n,o)){case STYLE_PLAIN:return t;case STYLE_SINGLE:return"'"+t.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(t,e.indent)+dropEndingNewline(indentString(t,r));case STYLE_FOLDED:return">"+blockHeader(t,e.indent)+dropEndingNewline(indentString(foldString(t,s),r));case STYLE_DOUBLE:return'"'+escapeString(t)+'"';default:throw new exception("impossible error: invalid scalar style")}}()}function blockHeader(e,t){var a=needIndentIndicator(e)?String(t):"",n=e[e.length-1]===`
`,o=n&&(e[e.length-2]===`
`||e===`
`),r=o?"+":n?"":"-";return a+r+`
`}function dropEndingNewline(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function foldString(e,t){for(var a=/(\n+)([^\n]*)/g,n=function(){var f=e.indexOf(`
`);return f=f!==-1?f:e.length,a.lastIndex=f,foldLine(e.slice(0,f),t)}(),o=e[0]===`
`||e[0]===" ",r,s;s=a.exec(e);){var l=s[1],c=s[2];r=c[0]===" ",n+=l+(!o&&!r&&c!==""?`
`:"")+foldLine(c,t),o=r}return n}function foldLine(e,t){if(e===""||e[0]===" ")return e;for(var a=/ [^ ]/g,n,o=0,r,s=0,l=0,c="";n=a.exec(e);)l=n.index,l-o>t&&(r=s>o?s:l,c+=`
`+e.slice(o,r),o=r+1),s=l;return c+=`
`,e.length-o>t&&s>o?c+=e.slice(o,s)+`
`+e.slice(s+1):c+=e.slice(o),c.slice(1)}function escapeString(e){for(var t="",a=0,n,o=0;o<e.length;a>=65536?o+=2:o++)a=codePointAt(e,o),n=ESCAPE_SEQUENCES[a],!n&&isPrintable(a)?(t+=e[o],a>=65536&&(t+=e[o+1])):t+=n||encodeHex(a);return t}function writeFlowSequence(e,t,a){var n="",o=e.tag,r,s,l;for(r=0,s=a.length;r<s;r+=1)l=a[r],e.replacer&&(l=e.replacer.call(a,String(r),l)),(writeNode(e,t,l,!1,!1)||typeof l>"u"&&writeNode(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=o,e.dump="["+n+"]"}function writeBlockSequence(e,t,a,n){var o="",r=e.tag,s,l,c;for(s=0,l=a.length;s<l;s+=1)c=a[s],e.replacer&&(c=e.replacer.call(a,String(s),c)),(writeNode(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&writeNode(e,t+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=generateNextLine(e,t)),e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=r,e.dump=o||"[]"}function writeFlowMapping(e,t,a){var n="",o=e.tag,r=Object.keys(a),s,l,c,f,u;for(s=0,l=r.length;s<l;s+=1)u="",n!==""&&(u+=", "),e.condenseFlow&&(u+='"'),c=r[s],f=a[c],e.replacer&&(f=e.replacer.call(a,c,f)),writeNode(e,t,c,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),writeNode(e,t,f,!1,!1)&&(u+=e.dump,n+=u));e.tag=o,e.dump="{"+n+"}"}function writeBlockMapping(e,t,a,n){var o="",r=e.tag,s=Object.keys(a),l,c,f,u,d,m;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(l=0,c=s.length;l<c;l+=1)m="",(!n||o!=="")&&(m+=generateNextLine(e,t)),f=s[l],u=a[f],e.replacer&&(u=e.replacer.call(a,f,u)),writeNode(e,t+1,f,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,d&&(m+=generateNextLine(e,t)),writeNode(e,t+1,u,!0,d)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,o+=m));e.tag=r,e.dump=o||"{}"}function detectType(e,t,a){var n,o,r,s,l,c;for(o=a?e.explicitTypes:e.implicitTypes,r=0,s=o.length;r<s;r+=1)if(l=o[r],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(a?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(c=e.styleMap[l.tag]||l.defaultStyle,_toString.call(l.represent)==="[object Function]")n=l.represent(t,c);else if(_hasOwnProperty.call(l.represent,c))n=l.represent[c](t,c);else throw new exception("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function writeNode(e,t,a,n,o,r,s){e.tag=null,e.dump=a,detectType(e,a,!1)||detectType(e,a,!0);var l=_toString.call(e.dump),c=n,f;n&&(n=e.flowLevel<0||e.flowLevel>t);var u=l==="[object Object]"||l==="[object Array]",d,m;if(u&&(d=e.duplicates.indexOf(a),m=d!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(o=!1),m&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(u&&m&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),l==="[object Object]")n&&Object.keys(e.dump).length!==0?(writeBlockMapping(e,t,e.dump,o),m&&(e.dump="&ref_"+d+e.dump)):(writeFlowMapping(e,t,e.dump),m&&(e.dump="&ref_"+d+" "+e.dump));else if(l==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?writeBlockSequence(e,t-1,e.dump,o):writeBlockSequence(e,t,e.dump,o),m&&(e.dump="&ref_"+d+e.dump)):(writeFlowSequence(e,t,e.dump),m&&(e.dump="&ref_"+d+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&writeScalar(e,e.dump,t,r,c);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new exception("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(f=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",e.dump=f+" "+e.dump)}return!0}function getDuplicateReferences(e,t){var a=[],n=[],o,r;for(inspectNode(e,a,n),o=0,r=n.length;o<r;o+=1)t.duplicates.push(a[n[o]]);t.usedDuplicates=new Array(r)}function inspectNode(e,t,a){var n,o,r;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)a.indexOf(o)===-1&&a.push(o);else if(t.push(e),Array.isArray(e))for(o=0,r=e.length;o<r;o+=1)inspectNode(e[o],t,a);else for(n=Object.keys(e),o=0,r=n.length;o<r;o+=1)inspectNode(e[n[o]],t,a)}function dump$1(e,t){t=t||{};var a=new State(t);a.noRefs||getDuplicateReferences(e,a);var n=e;return a.replacer&&(n=a.replacer.call({"":n},"",n)),writeNode(a,0,n,!0,!0)?a.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Type=type,Schema=schema,FAILSAFE_SCHEMA=failsafe,JSON_SCHEMA=json,CORE_SCHEMA=core,DEFAULT_SCHEMA=_default,load=loader.load,loadAll=loader.loadAll,dump=dumper.dump,YAMLException=exception,types={binary,float,map,null:_null,pairs,set:set$1,timestamp,bool,int,merge,omap,seq,str},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type,Schema,FAILSAFE_SCHEMA,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load,loadAll,dump,YAMLException,types,safeLoad,safeLoadAll,safeDump};const _hoisted_1$l={key:0,class:"loading-overlay"},_hoisted_2$j={class:"settings-content"},_hoisted_3$j={class:"info-links"},_hoisted_4$i={class:"info-link-item"},_hoisted_5$h={class:"info-link-label"},_hoisted_6$h={href:"https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X",target:"_blank",class:"info-link"},_hoisted_7$h={class:"info-link-item"},_hoisted_8$h={class:"info-link-label"},_hoisted_9$h={href:"https://github.com/weilin9999/WeiLin-Comfyui-Tools-Prompt",target:"_blank",class:"info-link"},_hoisted_10$g={class:"info-link-item"},_hoisted_11$g={class:"info-link-label"},_hoisted_12$g={href:"https://weilin9999.github.io/WeiLin-Share-Prompt-Web/#/",target:"_blank",class:"info-link"},_hoisted_13$e={style:{"margin-bottom":"16px"}},_hoisted_14$c=["placeholder"],_hoisted_15$c={style:{"margin-bottom":"16px"}},_hoisted_16$c=["placeholder"],_hoisted_17$c=["placeholder"],_hoisted_18$9={style:{"margin-bottom":"16px"}},_hoisted_19$9=["placeholder"],_hoisted_20$9=["placeholder"],_hoisted_21$9={style:{"margin-bottom":"16px"}},_hoisted_22$9=["placeholder"],_hoisted_23$9={class:"data-container"},_hoisted_24$9={key:0},_hoisted_25$9={key:0},_hoisted_26$9={class:"tag-group-container"},_hoisted_27$9={style:{display:"flex","align-items":"center"}},_hoisted_28$8={key:0},_hoisted_29$8=["placeholder"],_hoisted_30$8=["onClick"],_hoisted_31$8=["onClick"],_hoisted_32$8=["onClick"],_sfc_main$l={__name:"import_tag",setup(e,{expose:t}){const{t:a}=useI18n(),n=ref(!1),o=ref(""),r=ref(""),s=ref(""),l=ref(""),c=ref(""),f=ref(""),u=ref(""),d=ref(""),m=ref(""),g=ref([]),v=ref(-1),b=ref(""),$=ref(""),w=ref(null),C=ref(null),P=ref(null),y=ref(!1),E=ref(""),R=ref(null);function F(){if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}R.value.click()}function H(){o.value="",r.value="",s.value="",l.value="",c.value="",f.value="",u.value="",d.value="",m.value="",g.value=[],v.value=-1,b.value="",$.value="",y.value=!1}function j(S){const I=S.target.files[0];if(I){const X=new FileReader;X.onload=ie=>{const T=ie.target.result.split(`
`).filter(M=>M.trim());let _=0;T.forEach(M=>{const[U,_e]=M.split(",");if(U&&_e){const me=U.trim().replace(/'/g,"''"),J=_e.trim().replace(/'/g,"''"),ce=uuidv7();_=_+1;const Se=parseInt(new Date().getTime()/1e3)+_,xe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${me}', '${J}', 'rgba(255, 123, 2, .4)', ${Se}, '${m.value}', '${ce}');`;g.value.push(xe)}})},X.readAsText(I)}S.target.value=""}function fe(S){const I=S.target.files[0];if(I){const X=new FileReader;X.onload=ie=>{try{const pe=JSON.parse(ie.target.result);let T=0;Object.entries(pe).forEach(([_,M])=>{const U=_.replace(/'/g,"''"),_e=M.replace(/'/g,"''"),me=uuidv7();T=T+1;const J=parseInt(new Date().getTime()/1e3)+T,ce=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${U}', '${_e}', 'rgba(255, 123, 2, .4)', ${J}, '${m.value}', '${me}');`;g.value.push(ce)})}catch{message$1({type:"warn",str:"message.jsonErrorMesg"})}},X.readAsText(I)}S.target.value=""}function oe(S){const I=S.target.files[0];if(I){const X=new FileReader;X.onload=ie=>{try{const pe=jsYaml.load(ie.target.result);let T=0;Object.entries(pe).forEach(([_,M])=>{const U=_.replace(/'/g,"''"),_e=String(M).replace(/'/g,"''"),me=uuidv7();T=T+1;const J=parseInt(new Date().getTime()/1e3)+T,ce=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${U}', '${_e}', 'rgba(255, 123, 2, .4)', ${J}, '${m.value}', '${me}');`;g.value.push(ce)})}catch{message$1({type:"warn",str:"message.yamlErrorMesg"})}},X.readAsText(I)}S.target.value=""}function V(S){H();const I=S.target.files[0];if(I){const X=new FileReader;X.onload=ie=>{ie.target.result.split(";").filter(_=>_.trim()).forEach(_=>{if((_.includes("tag_groups")||_.includes("tag_subgroups"))&&_.includes("p_uuid"))if(_.includes("g_uuid")){c.value=_+";";const U=_.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);U&&(m.value=U[1]);const _e=_.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);_e&&(u.value=_e[1].replace(/''/g,"'"))}else{l.value=_+";";const U=_.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);U&&(d.value=U[1]);const _e=_.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);_e&&(f.value=_e[1].replace(/''/g,"'"))}else _.includes("tag_tags")&&g.value.push(_+";")})},X.readAsText(I)}S.target.value=""}function q(){if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}P.value.click()}function Q(){if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}C.value.click()}function O(){w.value.click()}function G(){const S=[l.value,c.value,...g.value].join(`
`),I=new Blob([S],{type:"text/sql"}),X=document.createElement("a");if(X.href=URL.createObjectURL(I),E.value.length<=0){const ie=parseInt(new Date().getTime()/1e3);X.download="export_"+ie+".sql"}else X.download=E.value+".sql";X.click()}const ee=()=>{const S=[...g.value].join(`
`),I=new Blob([S],{type:"text/sql"}),X=document.createElement("a");if(X.href=URL.createObjectURL(I),E.value.length<=0){const ie=parseInt(new Date().getTime()/1e3);X.download="export_tags_"+ie+".sql"}else X.download=E.value+".sql";X.click()};function A(S){const I=S.match(/VALUES\s*\([^']*'([^']+)'/),X=S.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:I?I[1].replace(/''/g,"'"):"",desc:X?X[1].replace(/''/g,"'"):""}}function L(S){g.value.splice(S,1)}function W(S){const I=g.value[S],X=A(I);b.value=X.text,$.value=X.desc,v.value=S}function ae(S){const I=b.value.replace(/'/g,"''"),X=$.value.replace(/'/g,"''");g.value[S]=g.value[S].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${I}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${X}'`),v.value=-1}function Y(){v.value=-1}function ne(){if(!m.value){message$1({type:"warn",str:"message.pleaseAddSub"});return}const S=o.value.replace(/'/g,"''"),I=r.value.replace(/'/g,"''"),X=uuidv7(),ie=parseInt(new Date().getTime()/1e3);s.value=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${S}', '${I}', 'rgba(255, 123, 2, .4)', ${ie}, '${m.value}', '${X}');`,g.value.push(s.value)}function te(){if(f.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseAddGroupName"});return}const S=f.value.replace(/'/g,"''");d.value.length<=0&&(d.value=uuidv7());const I=parseInt(new Date().getTime()/1e3);l.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${S}', 'rgba(255, 123, 2, .4)', ${I}, '${d.value}');`}function ge(){if(u.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseAddSubGroupName"});return}if(!d.value){message$1({type:"warn",str:"message.pleaseAddMainCeb"});return}const S=u.value.replace(/'/g,"''");m.value.length<=0&&(m.value=uuidv7());const I=parseInt(new Date().getTime()/1e3);c.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${S}', 'rgba(255, 123, 2, .4)', ${I}, '${d.value}', '${m.value}');`}const re=ref(null),B=()=>{re.value.open()},z=S=>{y.value=!0,f.value=S.group.name,u.value=S.sub.name,d.value=S.group.p_uuid,m.value=S.sub.g_uuid;const I=S.group.name.replace(/'/g,"''"),X=S.sub.name.replace(/'/g,"''");l.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${I}', '${S.group.color}', ${S.group.create_time}, '${S.group.p_uuid}');`,c.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${X}', '${S.sub.color}', ${S.sub.create_time}, '${S.group.p_uuid}', '${S.sub.g_uuid}');`},Z=ref(!1),D=async S=>{Z.value=!0;try{await tagsApi.runSQLToServer(S).then(I=>{if(I.code!=200){message$1({type:"warn",str:I.message});return}else K(),message$1({type:"success",str:"importDialog.successImport"})}).catch(I=>{console.error(I),message$1({type:"warn",str:"importDialog.importFail"})})}catch(I){console.error(I),message$1({type:"warn",str:"importDialog.importFail"})}finally{Z.value=!1}},K=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},x=async()=>{if(y.value){if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}const S=[...g.value];await D(S)}else{if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}const S=[l.value,c.value,...g.value];await D(S)}};return watch(l,(S,I)=>{var pe,T;if(!S||S===I)return;const X=(pe=S.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:pe[1],ie=(T=I==null?void 0:I.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:T[1];X&&ie&&c.value&&(c.value=c.value.replace(new RegExp(`'${ie}'`,"g"),`'${X}'`))}),watch(c,(S,I)=>{var pe,T;if(!S||S===I)return;const X=(pe=S.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:pe[1],ie=(T=I==null?void 0:I.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:T[1];X&&ie&&g.value.length>0&&(g.value=g.value.map(_=>_.replace(new RegExp(`'${ie}'`,"g"),`'${X}'`)))}),t({open:()=>{n.value=!0}}),(S,I)=>(openBlock(),createElementBlock(Fragment,null,[Z.value?(openBlock(),createElementBlock("div",_hoisted_1$l,I[11]||(I[11]=[createBaseVNode("div",{class:"loading-spinner"},null,-1)]))):createCommentVNode("",!0),createVNode(Dialog,{modelValue:n.value,"onUpdate:modelValue":I[10]||(I[10]=X=>n.value=X),title:unref(a)("importDialog.title")},{footer:withCtx(()=>[createBaseVNode("button",{onClick:I[9]||(I[9]=X=>n.value=!1)},toDisplayString$1(unref(a)("promptBox.settings.close")),1),createBaseVNode("button",{onClick:x},toDisplayString$1(unref(a)("importDialog.sure")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$j,[createBaseVNode("div",_hoisted_3$j,[createBaseVNode("div",_hoisted_4$i,[createBaseVNode("span",_hoisted_5$h,toDisplayString$1(unref(a)("importDialog.tips1")),1),createBaseVNode("a",_hoisted_6$h,toDisplayString$1(unref(a)("importDialog.tips1text")),1)]),createBaseVNode("div",_hoisted_7$h,[createBaseVNode("span",_hoisted_8$h,toDisplayString$1(unref(a)("importDialog.tips2")),1),createBaseVNode("a",_hoisted_9$h,toDisplayString$1(unref(a)("importDialog.tips2text")),1)]),createBaseVNode("div",_hoisted_10$g,[createBaseVNode("span",_hoisted_11$g,toDisplayString$1(unref(a)("importDialog.tips3")),1),createBaseVNode("a",_hoisted_12$g,toDisplayString$1(unref(a)("importDialog.tips3text")),1)])]),createBaseVNode("div",_hoisted_13$e,[createBaseVNode("button",{onClick:H,class:"upload-btn"},toDisplayString$1(unref(a)("importDialog.cleanAll")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:O,class:"upload-btn"},toDisplayString$1(unref(a)("importDialog.uploadSQL")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:B},toDisplayString$1(unref(a)("importDialog.selectGroup")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:G},toDisplayString$1(unref(a)("importDialog.dumpSQL")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:ee},toDisplayString$1(unref(a)("importDialog.dumpOnlySQL")),1),withDirectives(createBaseVNode("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":I[0]||(I[0]=X=>E.value=X),placeholder:unref(a)("importDialog.settingOutputName")},null,8,_hoisted_14$c),[[vModelText,E.value]]),createBaseVNode("input",{type:"file",ref_key:"fileInput",ref:w,onChange:V,accept:".sql",style:{display:"none"}},null,544),createBaseVNode("input",{type:"file",ref_key:"jsonFileInput",ref:C,onChange:fe,accept:".json",style:{display:"none"}},null,544),createBaseVNode("input",{type:"file",ref_key:"txtFileInput",ref:P,onChange:j,accept:".txt",style:{display:"none"}},null,544),createBaseVNode("input",{type:"file",ref_key:"yamlFileInput",ref:R,onChange:oe,accept:".yaml,.yml",style:{display:"none"}},null,544)]),createBaseVNode("div",_hoisted_15$c,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":I[1]||(I[1]=X=>f.value=X),placeholder:unref(a)("importDialog.pleaseMainCeb")},null,8,_hoisted_16$c),[[vModelText,f.value]]),createBaseVNode("button",{onClick:te},toDisplayString$1(unref(a)("importDialog.setMainCeb")),1),withDirectives(createBaseVNode("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":I[2]||(I[2]=X=>d.value=X),placeholder:unref(a)("importDialog.pleaseMainCebUuid")},null,8,_hoisted_17$c),[[vModelText,d.value]])]),createBaseVNode("div",_hoisted_18$9,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":I[3]||(I[3]=X=>u.value=X),placeholder:unref(a)("importDialog.pleaseSubGroup")},null,8,_hoisted_19$9),[[vModelText,u.value]]),createBaseVNode("button",{onClick:ge},toDisplayString$1(unref(a)("importDialog.setSubCeb")),1),withDirectives(createBaseVNode("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":I[4]||(I[4]=X=>m.value=X),placeholder:unref(a)("importDialog.pleaseSubGroupUuid")},null,8,_hoisted_20$9),[[vModelText,m.value]])]),createBaseVNode("div",_hoisted_21$9,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":I[5]||(I[5]=X=>o.value=X),placeholder:"Tag"},null,512),[[vModelText,o.value]]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":I[6]||(I[6]=X=>r.value=X),placeholder:unref(a)("importDialog.translater")},null,8,_hoisted_22$9),[[vModelText,r.value]]),createBaseVNode("button",{onClick:ne},toDisplayString$1(unref(a)("importDialog.add")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:Q,class:"upload-btn"},toDisplayString$1(unref(a)("importDialog.fromJSONImput")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:q,class:"upload-btn"},toDisplayString$1(unref(a)("importDialog.fromTxtInput")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:F,class:"upload-btn"},toDisplayString$1(unref(a)("importDialog.fromYmalInput")),1)]),createBaseVNode("div",_hoisted_23$9,[l.value?(openBlock(),createElementBlock("div",_hoisted_24$9,[createBaseVNode("h3",null,toDisplayString$1(A(l.value).text),1),c.value?(openBlock(),createElementBlock("div",_hoisted_25$9,[createBaseVNode("h4",null,toDisplayString$1(A(c.value).text),1),createBaseVNode("div",_hoisted_26$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(X,ie)=>(openBlock(),createElementBlock("div",{key:ie,style:{display:"flex","flex-direction":"column","align-items":"center"}},[createBaseVNode("p",null,toDisplayString$1(A(X).text)+" - "+toDisplayString$1(A(X).desc),1),createBaseVNode("div",_hoisted_27$9,[v.value===ie?(openBlock(),createElementBlock("div",_hoisted_28$8,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":I[7]||(I[7]=pe=>b.value=pe),placeholder:"Tag"},null,512),[[vModelText,b.value]]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":I[8]||(I[8]=pe=>$.value=pe),placeholder:unref(a)("importDialog.translater")},null,8,_hoisted_29$8),[[vModelText,$.value]]),createBaseVNode("button",{onClick:pe=>ae(ie)},toDisplayString$1(unref(a)("importDialog.sureYes")),9,_hoisted_30$8),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:Y},toDisplayString$1(unref(a)("importDialog.cancel")),1)])):(openBlock(),createElementBlock("button",{key:1,onClick:pe=>W(ie)},toDisplayString$1(unref(a)("importDialog.edit")),9,_hoisted_31$8)),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:pe=>L(ie)},toDisplayString$1(unref(a)("importDialog.delete")),9,_hoisted_32$8)])]))),128))])])):createCommentVNode("",!0)])):createCommentVNode("",!0)])])]),_:1},8,["modelValue","title"]),createVNode(TagGroupSelect$1,{ref_key:"tagGroupSelectDialogItem",ref:re,onSureSelect:z},null,512)],64))}},ImportTagDialog=_export_sfc(_sfc_main$l,[["__scopeId","data-v-1971f07a"]]),_hoisted_1$k={class:"tag-manager"},_hoisted_2$i={class:"toolbar"},_hoisted_3$i={class:"toolbar-top"},_hoisted_4$h={class:"search-container"},_hoisted_5$g=["placeholder"],_hoisted_6$g={key:0,class:"no-results"},_hoisted_7$g=["onClick"],_hoisted_8$g={class:"result-content"},_hoisted_9$g={class:"result-text"},_hoisted_10$f={class:"result-path"},_hoisted_11$f={class:"toolbar-bottom"},_hoisted_12$f={class:"group-edit-mode"},_hoisted_13$d={class:"category-tabs"},_hoisted_14$b={class:"tabs-wrapper primary-tabs"},_hoisted_15$b={class:"tabs-scroll"},_hoisted_16$b=["onClick","onMouseenter","onMouseleave"],_hoisted_17$b={class:"tab-text"},_hoisted_18$8={key:0,class:"tab-actions"},_hoisted_19$8=["onClick","title"],_hoisted_20$8=["onClick","title"],_hoisted_21$8=["onClick","title"],_hoisted_22$8=["onClick","title"],_hoisted_23$8={class:"group-edit-mode"},_hoisted_24$8={key:0,class:"tabs-wrapper group-tabs"},_hoisted_25$8={class:"tabs-scroll"},_hoisted_26$8=["onClick","onMouseenter","onMouseleave"],_hoisted_27$8={class:"tab-text"},_hoisted_28$7={key:0,class:"tab-actions"},_hoisted_29$7=["onClick","title"],_hoisted_30$7=["onClick","title"],_hoisted_31$7=["onClick","title"],_hoisted_32$7=["onClick","title"],_hoisted_33$7={class:"group-edit-mode"},_hoisted_34$7={class:"tags-content"},_hoisted_35$7={class:"tags-header"},_hoisted_36$7={class:"tags-title"},_hoisted_37$6={class:"tags-actions"},_hoisted_38$6=["disabled"],_hoisted_39$6=["disabled"],_hoisted_40$6=["disabled"],_hoisted_41$6=["disabled"],_hoisted_42$6=["disabled"],_hoisted_43$6={key:0,class:"tags-grid"},_hoisted_44$5=["onClick"],_hoisted_45$5={class:"tag-actions"},_hoisted_46$4=["onClick","title"],_hoisted_47$3=["onClick","title"],_hoisted_48$3=["onClick","title"],_hoisted_49$3={class:"tag-desc"},_hoisted_50$3=["value"],_hoisted_51$3={key:0,class:"weilin-tools-dialog-overlay"},_hoisted_52$3={class:"weilin-tools-dialog-header"},_hoisted_53$3={class:"weilin-tools-dialog-body"},_hoisted_54$2={key:0,class:"form-group"},_hoisted_55$2=["placeholder"],_hoisted_56$2={key:1,class:"form-group"},_hoisted_57$2=["placeholder"],_hoisted_58$2={class:"form-group"},_hoisted_59$2={class:"color-picker"},_hoisted_60$2={class:"color-controls"},_hoisted_61$2={class:"alpha-control"},_hoisted_62$2={class:"alpha-value"},_hoisted_63$2={class:"weilin-tools-dialog-footer"},_hoisted_64$2={key:1,class:"weilin-tools-dialog-overlay"},_hoisted_65$2={class:"weilin-tools-dialog-header"},_hoisted_66$2={class:"weilin-tools-dialog-body"},_hoisted_67$2={class:"form-group"},_hoisted_68$2=["placeholder"],_hoisted_69$2={class:"form-group"},_hoisted_70$2=["placeholder"],_hoisted_71$2={class:"form-group"},_hoisted_72$2={class:"color-picker"},_hoisted_73$1={class:"color-controls"},_hoisted_74$1={class:"alpha-control"},_hoisted_75$1={class:"alpha-value"},_hoisted_76$1={class:"weilin-tools-dialog-footer"},_hoisted_77$1={key:2,class:"weilin-tools-dialog-overlay"},_hoisted_78$1={class:"weilin-tools-dialog-header"},_hoisted_79$1={class:"weilin-tools-dialog-body"},_hoisted_80$1={class:"confirm-message"},_hoisted_81$1={class:"weilin-tools-dialog-footer"},_hoisted_82$1={key:3,class:"weilin-tools-dialog-overlay"},_hoisted_83$1={class:"weilin-tools-dialog-content"},_hoisted_84$1={class:"weilin-tools-dialog-header"},_hoisted_85$1={class:"weilin-tools-dialog-body"},_hoisted_86$1={class:"form-group"},_hoisted_87$1=["value"],_hoisted_88$1={class:"form-group"},_hoisted_89$1={class:"radio-group"},_hoisted_90$1={class:"weilin-tools-dialog-footer"},_hoisted_91$1={key:4,class:"weilin-tools-dialog-overlay"},_hoisted_92$1={class:"weilin-tools-dialog-content"},_hoisted_93$1={class:"weilin-tools-dialog-header"},_hoisted_94$1={class:"weilin-tools-dialog-body"},_hoisted_95$1={class:"form-group"},_hoisted_96$1=["value"],_hoisted_97$1={class:"form-group"},_hoisted_98$1={class:"radio-group"},_hoisted_99$1={class:"weilin-tools-dialog-footer"},_hoisted_100$1={key:5,class:"weilin-tools-dialog-overlay"},_hoisted_101$1={class:"weilin-tools-dialog-header"},_hoisted_102$1={class:"weilin-tools-dialog-body"},_hoisted_103$1={class:"config-section"},_hoisted_104$1={class:"form-group"},_hoisted_105$1={class:"width-control"},_hoisted_106$1={class:"radio-label"},_hoisted_107$1={class:"radio-label"},_hoisted_108$1={class:"form-group"},_hoisted_109$1={class:"form-group"},_hoisted_110$1={class:"config-section"},_hoisted_111$1={class:"form-group"},_hoisted_112$1={class:"width-control"},_hoisted_113$1={class:"radio-label"},_hoisted_114={class:"radio-label"},_hoisted_115={class:"form-group"},_hoisted_116={class:"form-group"},_hoisted_117={class:"weilin-tools-dialog-footer"},_sfc_main$k={__name:"tag_index",props:{tagManager:{type:String,default:"prompt"}},setup(e){useTagStore();const{t}=useI18n(),a=ref([]),n=ref(null),o=ref([]),r=ref([]),s=ref(null),l=ref(!1),c=ref(!1),f=ref(!1),u=ref(!1),d=ref("primary"),m=ref([]),g=ref(!1),v=ref(!1),b=ref("None"),$=ref("None"),w=ref(0),C=ref(0),P=ref(null),y=ref(0),E=ref(!1),R=ref(null),F=ref("before"),H=ref(null),j=ref("before"),fe=ref(null),oe=ref(null),V=ref(!1),q=ref(!1),Q=ref(!1),O=ref({primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}}),G={primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}},ee=e,A=ref({name:"",color:"rgba(255, 123, 2, .4)",id_index:"",groups:[]}),L=ref({name:"",id_index:"",color:"rgba(255, 123, 2, .4)",tags:[]}),W=ref({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),ae=ue=>{const le=ue.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(le){const[,ve,Be,ze,qe]=le,Re=`#${((1<<24)+(parseInt(ve)<<16)+(parseInt(Be)<<8)+parseInt(ze)).toString(16).slice(1)}`,je=qe?Math.round(parseFloat(qe)*100):100;return{hex:Re,alpha:je}}return{hex:"#FFFFFF",alpha:100}},Y=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ne=async()=>{try{await tagsApi.getTagMainGroup().then(ue=>{a.value=ue}).catch(ue=>{console.error(ue),message$1({type:"warn",str:"message.networkError"})}),n.value&&await te(n.value.p_uuid),s.value&&await ge(s.value.g_uuid)}catch(ue){console.error("Tag管理器列表失败:",ue)}},te=async ue=>{try{await tagsApi.getTagSubGroup(ue).then(le=>{o.value=le}).catch(le=>{console.error(le),message$1({type:"warn",str:"message.networkError"})})}catch(le){console.error("二级分类列表失败:",le)}},ge=async ue=>{try{await tagsApi.getTagList(ue).then(le=>{r.value=le}).catch(le=>{console.error(le),message$1({type:"warn",str:"message.networkError"})})}catch(le){console.error("Tag列表失败:",le)}};onMounted(()=>{Ze(),window.addEventListener("click",Vt),window.addEventListener("resize",Ze),window.addEventListener("message",Et),window.addEventListener("keydown",wt),$t(),Y()}),onBeforeUnmount(()=>{window.removeEventListener("click",Vt),window.removeEventListener("resize",Ze),window.removeEventListener("message",Et),window.removeEventListener("keydown",wt)});const re=async ue=>{n.value=ue,s.value=null,g.value=!1,m.value=[],await te(ue.p_uuid)},B=async ue=>{s.value=ue,g.value=!1,m.value=[],await ge(ue.g_uuid)},z=ue=>{d.value=ue,f.value=!1,T.value=ae("rgba(255, 123, 2, .4)"),ue==="primary"?A.value={name:"",color:"rgba(255, 123, 2, .4)",groups:[]}:L.value={name:"",color:"rgba(255, 123, 2, .4)",tags:[]},l.value=!0},Z=ue=>{f.value=!0,d.value="primary",A.value={...ue},T.value=ae(ue.color),l.value=!0},D=ue=>{f.value=!0,d.value="group",L.value={...ue},T.value=ae(ue.color),l.value=!0},K=()=>{if(d.value==="primary"){if(!A.value.name){message$1({type:"warn",str:"tagManager.categoryNameRequired"});return}f.value?a.value.findIndex(le=>le.id_index===A.value.id_index)!==-1&&tagsApi.editPrimaryCategory({id_index:A.value.id_index,name:A.value.name,color:A.value.color}).then(le=>{le.code===200?(Y(),message$1({type:"success",str:"message.editSuccess"})):le.code===201?message$1({type:"error",str:"message.editNameExist"}):message$1({type:"error",str:"message.editFailed"})}).catch(le=>{message$1({type:"warn",str:"message.networkError"})}):tagsApi.addPrimaryCategory({name:A.value.name,color:A.value.color}).then(ue=>{ue.code===200?(Y(),message$1({type:"success",str:"message.addSuccess"})):ue.code===201?message$1({type:"error",str:"message.editNameExist"}):message$1({type:"error",str:"message.addFailed"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})})}else{if(!L.value.name){message$1({type:"warn",str:"tagManager.groupNameRequired"});return}f.value?tagsApi.editSubCategory({id_index:L.value.id_index,name:L.value.name,color:L.value.color}).then(ue=>{ue.code===200?(Y(),message$1({type:"success",str:"message.editSuccess"})):ue.code===201?message$1({type:"error",str:"message.editNameExist"}):message$1({type:"error",str:"message.editFailed"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})}):tagsApi.addSubCategory({name:L.value.name,color:L.value.color,key:n.value.id_index,p_uuid:n.value.p_uuid}).then(ue=>{ue.code===200?(Y(),message$1({type:"success",str:"message.addSuccess"})):ue.code===201?message$1({type:"error",str:"message.editNameExist"}):message$1({type:"error",str:"message.editFailed"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})})}S()},x=()=>f.value?d.value==="primary"?t("tagManager.editPrimaryCategory"):t("tagManager.editSubCategory"):d.value==="primary"?t("tagManager.addPrimaryCategory"):t("tagManager.addSubCategory"),S=()=>{l.value=!1,A.value={id:"",name:"",parentId:null,subCategories:[],backgroundColor:"transparent"},T.value={hex:"#FFFFFF",alpha:0}},I=()=>{s.value&&(u.value=!1,W.value={id:"",text:"",desc:"",categoryId:s.value.id,g_uuid:s.value.g_uuid,backgroundColor:L.value.color},T.value=ae(L.value.color),c.value=!0)},X=ue=>{u.value=!0,W.value={...ue},T.value=ae(ue.color),c.value=!0},ie=()=>{if(!W.value.text||!W.value.desc){message$1({type:"warn",str:"tagManager.textRequired"});return}u.value&&s.value?tagsApi.editTags({id_index:W.value.id_index,text:W.value.text,desc:W.value.desc,color:W.value.color}).then(ue=>{Y(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.editSuccess"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})}):s.value&&tagsApi.addNewTags({id_index:s.value.id_index,g_uuid:s.value.g_uuid,text:W.value.text,desc:W.value.desc,color:W.value.color?W.value.color:"rgba(255, 123, 2, .4)"}).then(ue=>{Y(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.addSuccess"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})}),pe()},pe=()=>{c.value=!1,W.value={text:"",desc:"",color:"rgba(255, 123, 2, .4)"},u.value=!1},T=ref({hex:"#FFFFFF",alpha:100}),_=computed(()=>U(T.value.hex,T.value.alpha)),M=()=>{const ue=U(T.value.hex,T.value.alpha);l.value?d.value==="primary"?A.value.color=ue:L.value.color=ue:c.value&&(W.value.color=ue)},U=(ue,le)=>{const ve=parseInt(ue.slice(1,3),16),Be=parseInt(ue.slice(3,5),16),ze=parseInt(ue.slice(5,7),16);return`rgba(${ve}, ${Be}, ${ze}, ${le/100})`},_e=ref(""),me=ref([]),J=ref(!1),ce=async()=>{J.value=_e.value.trim().length>0;const ue=_e.value.trim().toLowerCase();if(!ue){me.value=[];return}me.value=[],await tagsApi.searchTag(ue).then(le=>{me.value=le}).catch(le=>{message$1({type:"warn",str:"message.networkError"})})};watch(_e,()=>{ce()});const Se=async ue=>{const le=a.value.find(ve=>ve.p_uuid===ue.p_uuid);le&&await re(le).then(async()=>{await nextTick(async()=>{const ve=o.value.find(Be=>Be.g_uuid===ue.g_uuid);ve&&await B(ve).then(async()=>{await nextTick(()=>{y.value==1&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:ue.text},"*"),P.value=ue.id_index,setTimeout(()=>{const Be=document.querySelector(".tag-wrapper.highlight");Be&&Be.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{P.value=null},5e3)})})})}),_e.value=""},xe=ue=>{if(!ue||ue==="transparent")return"var(--primary-text)";let le,ve,Be,ze=1;if(ue.startsWith("rgba")){const Re=ue.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);Re&&([,le,ve,Be,ze]=Re.map(Number))}else if(ue.startsWith("rgb")){const Re=ue.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);Re&&([,le,ve,Be]=Re.map(Number))}return ze<.5?"var(--primary-text)":(le*299+ve*587+Be*114)/1e3>128?"#000000":"#ffffff"},Ne=ue=>{ee.tagManager==="prompt"&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:ue.text},"*")},Ce=ref(!1),Me=ref(""),Ie=ref(null),We=computed(()=>{if(!Ie.value)return"";switch(Me.value){case"category":return t("tagManager.deletePrimaryCategoryConfirm",{name:Ie.value.name});case"group":return t("tagManager.deleteGroupConfirm",{name:Ie.value.name});case"tag":return t("tagManager.deleteTagConfirm",{name:Ie.value.text});case"deleteSelected":return t("tagManager.confirmDeleteSelected");default:return""}}),Te=ue=>{Me.value="category",Ie.value=ue,Ce.value=!0},be=ue=>{Me.value="group",Ie.value=ue,Ce.value=!0},ye=ue=>{Me.value="tag",Ie.value=ue,Ce.value=!0},Le=async()=>{try{switch(Me.value){case"category":tagsApi.deletePrimaryCategory({p_uuid:Ie.value.p_uuid}).then(ue=>{Y(),message$1({type:"success",str:"message.deleteSuccess"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})});break;case"group":tagsApi.deleteSubCategory({g_uuid:Ie.value.g_uuid}).then(ue=>{Y(),message$1({type:"success",str:"message.deleteSuccess"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})});break;case"tag":tagsApi.deleteTags({id_index:Ie.value.id_index}).then(ue=>{Y(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.deleteSuccess"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})});break;case"deleteSelected":tagsApi.batchDeleteTags({id_indexs:m.value}).then(ue=>{Y(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.deleteSuccess"})}).catch(ue=>{message$1({type:"warn",str:"message.networkError"})});break}mt()}catch(ue){console.error("删除失败:",ue)}},Qe=async ue=>{const le=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${ue.name.replace(/'/g,"''")}', '${ue.color}', ${ue.create_time}, '${ue.p_uuid}');`;try{const ve=await tagsApi.getTagSubGroup(ue.p_uuid);let Be=[];Be.push(le);for(const Re of ve){const je=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${Re.name.replace(/'/g,"''")}', '${Re.color}', ${Re.create_time}, '${Re.p_uuid}', '${Re.g_uuid}');`;Be.push(je);try{(await tagsApi.getTagList(Re.g_uuid)).forEach(Ge=>{const Rt=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${Ge.text!=null&&Ge.text.length>0?Ge.text.replace(/'/g,"''"):""}', '${Ge.desc!=null&&Ge.desc.length>0?Ge.desc.replace(/'/g,"''"):""}', '${Ge.color}', ${Ge.create_time}, '${Ge.g_uuid}', '${uuidv7()}');`;Be.push(Rt)})}catch(dt){console.error("Tag列表失败:",dt),message$1({type:"warn",str:"message.shareTagError"})}}const ze=new Blob([Be.join(`
`)],{type:"text/sql"}),qe=document.createElement("a");qe.href=URL.createObjectURL(ze),qe.download=`${ue.name}_export_${Date.now()}.sql`,qe.click(),message$1({type:"success",str:"tagManager.outputSuccess"})}catch(ve){console.error("二级分类列表失败:",ve),message$1({type:"warn",str:"message.shareGroupError"})}},Nt=async ue=>{try{let le=[];const ve=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${ue.name.replace(/'/g,"''")}', '${ue.color}', ${ue.create_time}, '${ue.p_uuid}', '${ue.g_uuid}');`;le.push(ve);try{(await tagsApi.getTagList(ue.g_uuid)).forEach(Re=>{const je=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${Re.text!=null&&Re.text.length>0?Re.text.replace(/'/g,"''"):""}', '${Re.desc!=null&&Re.desc.length>0?Re.desc.replace(/'/g,"''"):""}', '${Re.color}', ${Re.create_time}, '${Re.g_uuid}', '${uuidv7()}');`;le.push(je)})}catch(qe){console.error("Tag列表失败:",qe),message$1({type:"warn",str:"message.shareTagError"})}const Be=new Blob([le.join(`
`)],{type:"text/sql"}),ze=document.createElement("a");ze.href=URL.createObjectURL(Be),ze.download=`${ue.name}_export_${Date.now()}.sql`,ze.click(),message$1({type:"success",str:"tagManager.outputSuccess"})}catch(le){console.error("二级分类列表失败:",le),message$1({type:"warn",str:"message.shareGroupError"})}},pt=ue=>{H.value=ue.id_index,E.value=!0},Ct=async()=>{try{tagsApi.moveTag({id_index:H.value,reference_id_index:R.value,position:F.value}).then(ue=>{Y(),E.value=!1,message$1({type:"success",str:t("message.moveSuccess")})}).catch(ue=>{message$1({type:"error",str:t("message.moveFailed")})})}catch(ue){console.error("移动标签失败:",ue),message$1({type:"error",str:t("message.moveFailed")})}},ft=ref([]),ut=ref(1),gt=(ue,le)=>{ut.value=le,le===1?(ft.value=a.value,fe.value=ue.id_index,v.value=!0):(ft.value=o.value,fe.value=ue.id_index,v.value=!0)},Xe=async()=>{if(ut.value===1)try{tagsApi.moveMainGroup({id_index:fe.value,reference_id_index:oe.value,position:j.value}).then(ue=>{Y(),v.value=!1,message$1({type:"success",str:t("message.moveSuccess")})}).catch(ue=>{message$1({type:"error",str:t("message.moveFailed")})})}catch(ue){console.error("移动标签失败:",ue),message$1({type:"error",str:t("message.moveFailed")})}else try{tagsApi.moveSubGroup({id_index:fe.value,reference_id_index:oe.value,position:j.value}).then(ue=>{Y(),v.value=!1,message$1({type:"success",str:t("message.moveSuccess")})}).catch(ue=>{message$1({type:"error",str:t("message.moveFailed")})})}catch(ue){console.error("移动标签失败:",ue),message$1({type:"error",str:t("message.moveFailed")})}},Ut=()=>{g.value=!0,V.value=!0},Bt=()=>{g.value=!1,V.value=!1,m.value=[]},it=()=>{m.value.length!==0&&(Me.value="deleteSelected",Ie.value={},Ce.value=!0)},Je=()=>{g.value=!0,q.value=!0},lt=()=>{g.value=!1,q.value=!1,m.value=[]},yt=()=>{if(m.value.length===0){message$1({type:"warn",str:"tagManager.noTagsSelected"});return}const ue={};m.value.forEach(Be=>{ue[Be.text]=Be.desc});const le=new Blob([jsYaml.dump(ue)],{type:"text/yaml"}),ve=document.createElement("a");ve.href=URL.createObjectURL(le),ve.download=`selected_tags_export_${Date.now()}.yaml`,ve.click(),message$1({type:"success",str:"tagManager.outputSuccess"}),lt()},mt=()=>{Ce.value=!1,Me.value="",Ie.value=null},ot=async()=>{try{await Y()}catch(ue){console.error("刷新标签列表失败:",ue)}},rt=ref(),bt=ref({}),Ze=()=>{if(rt.value){const ue=rt.value.getBoundingClientRect();bt.value={position:"fixed",top:`${ue.bottom}px`,left:`${ue.left}px`,width:`${ue.width}px`,zIndex:1e3}}},Et=ue=>{ue.data.type==="weilin_prompt_ui_window_change_tagManager_position"||ue.data.type==="weilin_prompt_ui_window_change_tagManager_size"||ue.data.type==="weilin_prompt_ui_window_change_tagManager_scroll"||ue.data.type==="weilin_prompt_ui_window_change_promptBox_position"||ue.data.type==="weilin_prompt_ui_window_change_promptBox_size"||ue.data.type==="weilin_prompt_ui_window_change_promptBox_scroll"?Ze():ue.data.type==="weilin_prompt_ui_window_change_click_outside"||ue.data.type==="weilin_prompt_ui_tag_manager_refresh"&&ne()},Vt=ue=>{J.value&&!rt.value.contains(ue.target)&&(J.value=!1)},wt=ue=>{ue.key==="Escape"&&(J.value=!1)},Ht=ue=>{C.value==1&&(b.value="TabID-"+ue)},zt=ue=>{b.value="None"},At=ue=>{w.value==1&&($.value="TabID-"+ue)},Lt=ue=>{$.value="None"},Dt=ref(),Mt=()=>{Dt.value.open()},$t=()=>{const ue=JSON.parse(JSON.stringify(G));try{const le=localStorage.getItem("weilin_tag_manager_tab_size_config");if(le){const ve=JSON.parse(le);O.value={...ue,...ve}}else O.value={...ue}}catch(le){console.error("读取标签尺寸配置失败:",le),O.value={...ue}}},jt=()=>{try{localStorage.setItem("weilin_tag_manager_tab_size_config",JSON.stringify(O.value)),message$1({type:"success",str:"tagManager.tabSizeConfigSaved"}),Q.value=!1}catch(ue){console.error("保存标签尺寸配置失败:",ue),message$1({type:"error",str:"tagManager.tabSizeConfigSaveFailed"})}},Wt=()=>{Q.value=!0},It=()=>{Q.value=!1,$t()},ht=()=>{const ue=JSON.parse(JSON.stringify(G));O.value={...ue}};return(ue,le)=>(openBlock(),createElementBlock("div",_hoisted_1$k,[createBaseVNode("div",_hoisted_2$i,[createBaseVNode("div",_hoisted_3$i,[createBaseVNode("button",{class:"refresh-btn",onClick:ot},le[40]||(le[40]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[createBaseVNode("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),createBaseVNode("div",_hoisted_4$h,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":le[0]||(le[0]=ve=>_e.value=ve),placeholder:unref(t)("tagManager.searchPlaceholder"),class:"search-input",ref_key:"searchInput",ref:rt,onInput:le[1]||(le[1]=ve=>J.value=_e.value.trim().length>0)},null,40,_hoisted_5$g),[[vModelText,_e.value]]),J.value?(openBlock(),createElementBlock("div",{key:0,class:"search-results",style:normalizeStyle(bt.value)},[me.value.length===0?(openBlock(),createElementBlock("div",_hoisted_6$g,toDisplayString$1(unref(t)("tagManager.noResults")),1)):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(me.value,(ve,Be)=>(openBlock(),createElementBlock("div",{key:`${Be}-search_item`,class:"search-result-item",onClick:ze=>Se(ve)},[createBaseVNode("div",_hoisted_8$g,[createBaseVNode("span",_hoisted_9$g,toDisplayString$1(ve.name||ve.text),1),createBaseVNode("span",_hoisted_10$f,toDisplayString$1(ve.where),1)])],8,_hoisted_7$g))),128))],4)):createCommentVNode("",!0)]),createBaseVNode("button",{class:"import-btn",onClick:Mt},toDisplayString$1(unref(t)("tagManager.importTags")),1)]),createBaseVNode("div",_hoisted_11$f,[createBaseVNode("div",_hoisted_12$f,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":le[2]||(le[2]=ve=>y.value=ve),"true-value":1,"false-value":0},null,512),[[vModelCheckbox,y.value]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.autoAddSearchTag")),1)])]),createBaseVNode("button",{class:"tab-size-btn",onClick:Wt},toDisplayString$1(unref(t)("tagManager.modifyTabSize")),1)])]),createBaseVNode("div",_hoisted_13$d,[createBaseVNode("div",_hoisted_14$b,[createBaseVNode("div",_hoisted_15$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,(ve,Be)=>{var ze,qe,Re;return openBlock(),createElementBlock("div",{key:"Tabss-"+Be,class:normalizeClass(["tab-item",{active:((ze=n.value)==null?void 0:ze.name)===ve.name}]),style:normalizeStyle({backgroundColor:((qe=n.value)==null?void 0:qe.name)===ve.name?"var(--primary-color)":ve.color,color:((Re=n.value)==null?void 0:Re.name)===ve.name?"#ffffff":xe(ve.color),width:O.value.primaryTab.width==="fit-content"?"fit-content":O.value.primaryTab.width+"px",height:O.value.primaryTab.height+"px",fontSize:O.value.primaryTab.fontSize+"px"}),onClick:je=>re(ve),onMouseenter:je=>Ht(Be),onMouseleave:je=>zt()},[createBaseVNode("span",_hoisted_17$b,toDisplayString$1(ve.name),1),b.value=="TabID-"+Be?(openBlock(),createElementBlock("div",_hoisted_18$8,[createBaseVNode("button",{class:"action-btn move",onClick:withModifiers(je=>gt(ve,1),["stop"]),title:unref(t)("tagManager.moveGroup")},le[41]||(le[41]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"move-icon"},[createBaseVNode("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,_hoisted_19$8),createBaseVNode("button",{class:"action-btn edit",onClick:withModifiers(je=>Z(ve),["stop"]),title:unref(t)("tagManager.edit")},le[42]||(le[42]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"action-icon"},[createBaseVNode("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,_hoisted_20$8),createBaseVNode("button",{class:"action-btn share",onClick:withModifiers(je=>Qe(ve),["stop"]),title:unref(t)("tagManager.share")},le[43]||(le[43]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"action-icon"},[createBaseVNode("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)]),8,_hoisted_21$8),createBaseVNode("button",{class:"action-btn delete",onClick:withModifiers(je=>Te(ve),["stop"]),title:unref(t)("tagManager.delete")},le[44]||(le[44]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"action-icon"},[createBaseVNode("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,_hoisted_22$8)])):createCommentVNode("",!0)],46,_hoisted_16$b)}),128)),createBaseVNode("button",{class:"add-tab",onClick:le[3]||(le[3]=ve=>z("primary"))},[le[45]||(le[45]=createBaseVNode("span",{class:"plus-icon"},"+",-1)),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.addPrimaryCategory")),1)]),createBaseVNode("div",_hoisted_23$8,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":le[4]||(le[4]=ve=>C.value=ve),"true-value":1,"false-value":0},null,512),[[vModelCheckbox,C.value]]),createTextVNode(" "+toDisplayString$1(C.value==1?unref(t)("tagManager.exitEditMode"):unref(t)("tagManager.editGroupMode")),1)])])])]),n.value?(openBlock(),createElementBlock("div",_hoisted_24$8,[createBaseVNode("div",_hoisted_25$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(ve,Be)=>{var ze,qe,Re;return openBlock(),createElementBlock("div",{key:"TabsSw-"+Be,class:normalizeClass(["tab-item",{active:((ze=s.value)==null?void 0:ze.name)===ve.name}]),style:normalizeStyle({backgroundColor:((qe=s.value)==null?void 0:qe.name)===ve.name?"var(--primary-color)":ve.color,color:((Re=s.value)==null?void 0:Re.name)===ve.name?"#ffffff":xe(ve.color),width:O.value.groupTab.width==="fit-content"?"fit-content":O.value.groupTab.width+"px",height:O.value.groupTab.height+"px",fontSize:O.value.groupTab.fontSize+"px"}),onClick:je=>B(ve),onMouseenter:je=>At(Be),onMouseleave:je=>Lt()},[createBaseVNode("span",_hoisted_27$8,toDisplayString$1(ve.name),1),$.value=="TabID-"+Be?(openBlock(),createElementBlock("div",_hoisted_28$7,[createBaseVNode("button",{class:"action-btn move",onClick:withModifiers(je=>gt(ve,2),["stop"]),title:unref(t)("tagManager.moveGroup")},le[46]||(le[46]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"move-icon"},[createBaseVNode("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,_hoisted_29$7),createBaseVNode("button",{class:"action-btn edit",onClick:withModifiers(je=>D(ve),["stop"]),title:unref(t)("tagManager.edit")},le[47]||(le[47]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"action-icon"},[createBaseVNode("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,_hoisted_30$7),createBaseVNode("button",{class:"action-btn delete",onClick:withModifiers(je=>be(ve),["stop"]),title:unref(t)("tagManager.delete")},le[48]||(le[48]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"action-icon"},[createBaseVNode("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,_hoisted_31$7),createBaseVNode("button",{class:"action-btn share",onClick:withModifiers(je=>Nt(ve),["stop"]),title:unref(t)("tagManager.share")},le[49]||(le[49]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"action-icon"},[createBaseVNode("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)]),8,_hoisted_32$7)])):createCommentVNode("",!0)],46,_hoisted_26$8)}),128)),n.value?(openBlock(),createElementBlock("button",{key:0,class:"add-tab",onClick:le[5]||(le[5]=ve=>z("group"))},[le[50]||(le[50]=createBaseVNode("span",{class:"plus-icon"},"+",-1)),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.addGroup")),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_33$7,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":le[6]||(le[6]=ve=>w.value=ve),"true-value":1,"false-value":0},null,512),[[vModelCheckbox,w.value]]),createTextVNode(" "+toDisplayString$1(w.value==1?unref(t)("tagManager.exitEditMode"):unref(t)("tagManager.editGroupMode")),1)])])])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_34$7,[createBaseVNode("div",_hoisted_35$7,[createBaseVNode("div",_hoisted_36$7,toDisplayString$1(s.value?s.value.name:unref(t)("tagManager.selectCategory")),1),createBaseVNode("div",_hoisted_37$6,[createBaseVNode("button",{class:"add-btn",onClick:I,disabled:!s.value},[le[51]||(le[51]=createBaseVNode("span",{class:"plus-icon"},"+",-1)),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.addTag")),1)],8,_hoisted_38$6),q.value?(openBlock(),createElementBlock("button",{key:0,class:"share-selected-btn",onClick:yt,disabled:!m.value.length},toDisplayString$1(unref(t)("tagManager.shareSelected")),9,_hoisted_39$6)):(openBlock(),createElementBlock("button",{key:1,class:"share-btn",onClick:Je,disabled:!s.value},toDisplayString$1(unref(t)("tagManager.batchShare")),9,_hoisted_40$6)),q.value?(openBlock(),createElementBlock("button",{key:2,class:"cancel-delete-btn",onClick:lt},toDisplayString$1(unref(t)("tagManager.cancelShare")),1)):createCommentVNode("",!0),V.value?(openBlock(),createElementBlock("button",{key:3,class:"delete-btn",onClick:it,disabled:!m.value.length},toDisplayString$1(unref(t)("tagManager.deleteSelected")),9,_hoisted_41$6)):(openBlock(),createElementBlock("button",{key:4,class:"delete-action-btn",onClick:Ut,disabled:!s.value},toDisplayString$1(unref(t)("tagManager.hasDeleteAction")),9,_hoisted_42$6)),V.value?(openBlock(),createElementBlock("button",{key:5,class:"cancel-delete-btn",onClick:Bt},toDisplayString$1(unref(t)("tagManager.cancelDelete")),1)):createCommentVNode("",!0)])]),s.value?(openBlock(),createElementBlock("div",_hoisted_43$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,ve=>(openBlock(),createElementBlock("div",{key:"tag-grid-"+ve.id_index,class:normalizeClass(P.value===ve.id_index?"tag-wrapper highlight":"tag-wrapper")},[createBaseVNode("div",{class:"tag-content",onClick:Be=>Ne(ve)},[createBaseVNode("div",{class:"tag-main",style:normalizeStyle({backgroundColor:ve.color||"transparent"})},[createTextVNode(toDisplayString$1(ve.desc)+" ",1),createBaseVNode("div",_hoisted_45$5,[createBaseVNode("button",{class:"action-btn move",onClick:withModifiers(Be=>pt(ve),["stop"]),title:unref(t)("tagManager.moveTag")},le[52]||(le[52]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"move-icon"},[createBaseVNode("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)]),8,_hoisted_46$4),createBaseVNode("button",{class:"action-btn edit",onClick:withModifiers(Be=>X(ve),["stop"]),title:unref(t)("tagManager.editTag")},le[53]||(le[53]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"edit-icon"},[createBaseVNode("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)]),8,_hoisted_47$3),createBaseVNode("button",{class:"action-btn delete",onClick:withModifiers(Be=>ye(ve),["stop"]),title:unref(t)("tagManager.deleteTag")},le[54]||(le[54]=[createBaseVNode("svg",{viewBox:"0 0 24 24",class:"delete-icon"},[createBaseVNode("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)]),8,_hoisted_48$3)])],4),createBaseVNode("div",_hoisted_49$3,toDisplayString$1(ve.text),1)],8,_hoisted_44$5),g.value?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"checkbox","onUpdate:modelValue":le[7]||(le[7]=Be=>m.value=Be),value:ve,class:"tag-checkbox"},null,8,_hoisted_50$3)),[[vModelCheckbox,m.value]]):createCommentVNode("",!0)],2))),128))])):createCommentVNode("",!0)]),l.value?(openBlock(),createElementBlock("div",_hoisted_51$3,[createBaseVNode("div",{class:"weilin-tools-dialog-content",onMousedown:le[12]||(le[12]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_52$3,[createBaseVNode("h2",null,toDisplayString$1(x()),1),createBaseVNode("button",{class:"close-btn",onClick:S},"×")]),createBaseVNode("div",_hoisted_53$3,[d.value=="primary"?(openBlock(),createElementBlock("div",_hoisted_54$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.categoryName")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":le[8]||(le[8]=ve=>A.value.name=ve),placeholder:unref(t)("tagManager.categoryNamePlaceholder"),onKeyup:withKeys(K,["enter"])},null,40,_hoisted_55$2),[[vModelText,A.value.name]])])):createCommentVNode("",!0),d.value=="group"?(openBlock(),createElementBlock("div",_hoisted_56$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.groupName")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":le[9]||(le[9]=ve=>L.value.name=ve),placeholder:unref(t)("tagManager.groupNamePlaceholder"),onKeyup:withKeys(K,["enter"])},null,40,_hoisted_57$2),[[vModelText,L.value.name]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_58$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.backgroundColor")),1),createBaseVNode("div",_hoisted_59$2,[createBaseVNode("div",{class:"color-preview",style:normalizeStyle({backgroundColor:_.value})},null,4),createBaseVNode("div",_hoisted_60$2,[withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":le[10]||(le[10]=ve=>T.value.hex=ve),onInput:M,class:"color-input"},null,544),[[vModelText,T.value.hex]]),createBaseVNode("div",_hoisted_61$2,[withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":le[11]||(le[11]=ve=>T.value.alpha=ve),min:"0",max:"100",onInput:M,class:"alpha-slider"},null,544),[[vModelText,T.value.alpha,void 0,{number:!0}]]),createBaseVNode("span",_hoisted_62$2,toDisplayString$1(T.value.alpha)+"%",1)])])])])]),createBaseVNode("div",_hoisted_63$2,[createBaseVNode("button",{class:"cancel-btn",onClick:S},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"confirm-btn",onClick:K},toDisplayString$1(unref(t)("common.confirm")),1)])],32)])):createCommentVNode("",!0),c.value?(openBlock(),createElementBlock("div",_hoisted_64$2,[createBaseVNode("div",{class:"weilin-tools-dialog-content",onMousedown:le[17]||(le[17]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_65$2,[createBaseVNode("h2",null,toDisplayString$1(u.value?unref(t)("tagManager.editTag"):unref(t)("tagManager.addTag")),1),createBaseVNode("button",{class:"close-btn",onClick:pe},"×")]),createBaseVNode("div",_hoisted_66$2,[createBaseVNode("div",_hoisted_67$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.text")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":le[13]||(le[13]=ve=>W.value.desc=ve),placeholder:unref(t)("tagManager.textPlaceholder")},null,8,_hoisted_68$2),[[vModelText,W.value.desc]])]),createBaseVNode("div",_hoisted_69$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.description")),1),withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":le[14]||(le[14]=ve=>W.value.text=ve),placeholder:unref(t)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,_hoisted_70$2),[[vModelText,W.value.text]])]),createBaseVNode("div",_hoisted_71$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.backgroundColor")),1),createBaseVNode("div",_hoisted_72$2,[createBaseVNode("div",{class:"color-preview",style:normalizeStyle({backgroundColor:_.value})},null,4),createBaseVNode("div",_hoisted_73$1,[withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":le[15]||(le[15]=ve=>T.value.hex=ve),onInput:M,class:"color-input"},null,544),[[vModelText,T.value.hex]]),createBaseVNode("div",_hoisted_74$1,[withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":le[16]||(le[16]=ve=>T.value.alpha=ve),min:"0",max:"100",onInput:M,class:"alpha-slider"},null,544),[[vModelText,T.value.alpha,void 0,{number:!0}]]),createBaseVNode("span",_hoisted_75$1,toDisplayString$1(T.value.alpha)+"%",1)])])])])]),createBaseVNode("div",_hoisted_76$1,[createBaseVNode("button",{class:"cancel-btn",onClick:pe},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"confirm-btn",onClick:ie},toDisplayString$1(unref(t)("common.confirm")),1)])],32)])):createCommentVNode("",!0),Ce.value?(openBlock(),createElementBlock("div",_hoisted_77$1,[createBaseVNode("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:le[18]||(le[18]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_78$1,[createBaseVNode("h2",null,toDisplayString$1(unref(t)("common.confirmDelete")),1),createBaseVNode("button",{class:"close-btn",onClick:mt},"×")]),createBaseVNode("div",_hoisted_79$1,[createBaseVNode("p",_hoisted_80$1,toDisplayString$1(We.value),1)]),createBaseVNode("div",_hoisted_81$1,[createBaseVNode("button",{class:"cancel-btn",onClick:mt},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"delete-btn",onClick:Le},toDisplayString$1(unref(t)("common.delete")),1)])],32)])):createCommentVNode("",!0),E.value?(openBlock(),createElementBlock("div",_hoisted_82$1,[createBaseVNode("div",_hoisted_83$1,[createBaseVNode("div",_hoisted_84$1,[createBaseVNode("h2",null,toDisplayString$1(unref(t)("tagManager.moveTag")),1),createBaseVNode("button",{class:"close-btn",onClick:le[19]||(le[19]=ve=>E.value=!1)},"×")]),createBaseVNode("div",_hoisted_85$1,[createBaseVNode("div",_hoisted_86$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.targetTag")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":le[20]||(le[20]=ve=>R.value=ve),class:"form-select"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,ve=>(openBlock(),createElementBlock("option",{key:ve.id_index,value:ve.id_index},toDisplayString$1(ve.desc+" --> "+ve.text),9,_hoisted_87$1))),128))],512),[[vModelSelect,R.value]])]),createBaseVNode("div",_hoisted_88$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.movePosition")),1),createBaseVNode("div",_hoisted_89$1,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{class:"radio-input",type:"radio","onUpdate:modelValue":le[21]||(le[21]=ve=>F.value=ve),value:"before"},null,512),[[vModelRadio,F.value]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.moveBefore")),1)]),createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{class:"radio-input",type:"radio","onUpdate:modelValue":le[22]||(le[22]=ve=>F.value=ve),value:"after"},null,512),[[vModelRadio,F.value]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.moveAfter")),1)])])])]),createBaseVNode("div",_hoisted_90$1,[createBaseVNode("button",{class:"cancel-btn",onClick:le[23]||(le[23]=ve=>E.value=!1)},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"confirm-btn",onClick:Ct},toDisplayString$1(unref(t)("common.confirm")),1)])])])):createCommentVNode("",!0),v.value?(openBlock(),createElementBlock("div",_hoisted_91$1,[createBaseVNode("div",_hoisted_92$1,[createBaseVNode("div",_hoisted_93$1,[createBaseVNode("h2",null,toDisplayString$1(unref(t)("tagManager.moveGroup")),1),createBaseVNode("button",{class:"close-btn",onClick:le[24]||(le[24]=ve=>v.value=!1)},"×")]),createBaseVNode("div",_hoisted_94$1,[createBaseVNode("div",_hoisted_95$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.targetGroup")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":le[25]||(le[25]=ve=>oe.value=ve),class:"form-select"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ft.value,(ve,Be)=>(openBlock(),createElementBlock("option",{key:"group_move_id"+Be,value:ve.id_index},toDisplayString$1(ve.name),9,_hoisted_96$1))),128))],512),[[vModelSelect,oe.value]])]),createBaseVNode("div",_hoisted_97$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.movePosition")),1),createBaseVNode("div",_hoisted_98$1,[createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{class:"radio-input",type:"radio","onUpdate:modelValue":le[26]||(le[26]=ve=>j.value=ve),value:"before"},null,512),[[vModelRadio,j.value]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.moveGroupBefore")),1)]),createBaseVNode("label",null,[withDirectives(createBaseVNode("input",{class:"radio-input",type:"radio","onUpdate:modelValue":le[27]||(le[27]=ve=>j.value=ve),value:"after"},null,512),[[vModelRadio,j.value]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.moveGroupAfter")),1)])])])]),createBaseVNode("div",_hoisted_99$1,[createBaseVNode("button",{class:"cancel-btn",onClick:le[28]||(le[28]=ve=>v.value=!1)},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"confirm-btn",onClick:Xe},toDisplayString$1(unref(t)("common.confirm")),1)])])])):createCommentVNode("",!0),Q.value?(openBlock(),createElementBlock("div",_hoisted_100$1,[createBaseVNode("div",{class:"weilin-tools-dialog-content tab-size-weilin-tools-dialog",onMousedown:le[39]||(le[39]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_101$1,[createBaseVNode("h2",null,toDisplayString$1(unref(t)("tagManager.tabSizeConfig")),1),createBaseVNode("button",{class:"close-btn",onClick:It},"×")]),createBaseVNode("div",_hoisted_102$1,[createBaseVNode("div",_hoisted_103$1,[createBaseVNode("h3",null,toDisplayString$1(unref(t)("tagManager.primaryTabConfig")),1),createBaseVNode("div",_hoisted_104$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.tabWidth")),1),createBaseVNode("div",_hoisted_105$1,[createBaseVNode("label",_hoisted_106$1,[withDirectives(createBaseVNode("input",{type:"radio","onUpdate:modelValue":le[29]||(le[29]=ve=>O.value.primaryTab.width=ve),value:"fit-content"},null,512),[[vModelRadio,O.value.primaryTab.width]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.fitContent")),1)]),createBaseVNode("label",_hoisted_107$1,[withDirectives(createBaseVNode("input",{type:"radio","onUpdate:modelValue":le[30]||(le[30]=ve=>O.value.primaryTab.width=ve),value:"custom"},null,512),[[vModelRadio,O.value.primaryTab.width]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.customWidth")),1)]),O.value.primaryTab.width!=="fit-content"?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"number","onUpdate:modelValue":le[31]||(le[31]=ve=>O.value.primaryTab.width=ve),min:"50",max:"300",class:"number-input"},null,512)),[[vModelText,O.value.primaryTab.width,void 0,{number:!0}]]):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_108$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.tabHeight"))+" ("+toDisplayString$1(O.value.primaryTab.height)+"px)",1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":le[32]||(le[32]=ve=>O.value.primaryTab.height=ve),min:"20",max:"60",class:"range-input"},null,512),[[vModelText,O.value.primaryTab.height,void 0,{number:!0}]])]),createBaseVNode("div",_hoisted_109$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.fontSize"))+" ("+toDisplayString$1(O.value.primaryTab.fontSize)+"px)",1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":le[33]||(le[33]=ve=>O.value.primaryTab.fontSize=ve),min:"8",max:"20",class:"range-input"},null,512),[[vModelText,O.value.primaryTab.fontSize,void 0,{number:!0}]])])]),createBaseVNode("div",_hoisted_110$1,[createBaseVNode("h3",null,toDisplayString$1(unref(t)("tagManager.groupTabConfig")),1),createBaseVNode("div",_hoisted_111$1,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.tabWidth")),1),createBaseVNode("div",_hoisted_112$1,[createBaseVNode("label",_hoisted_113$1,[withDirectives(createBaseVNode("input",{type:"radio","onUpdate:modelValue":le[34]||(le[34]=ve=>O.value.groupTab.width=ve),value:"fit-content"},null,512),[[vModelRadio,O.value.groupTab.width]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.fitContent")),1)]),createBaseVNode("label",_hoisted_114,[withDirectives(createBaseVNode("input",{type:"radio","onUpdate:modelValue":le[35]||(le[35]=ve=>O.value.groupTab.width=ve),value:"custom"},null,512),[[vModelRadio,O.value.groupTab.width]]),createTextVNode(" "+toDisplayString$1(unref(t)("tagManager.customWidth")),1)]),O.value.groupTab.width!=="fit-content"?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"number","onUpdate:modelValue":le[36]||(le[36]=ve=>O.value.groupTab.width=ve),min:"50",max:"300",class:"number-input"},null,512)),[[vModelText,O.value.groupTab.width,void 0,{number:!0}]]):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_115,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.tabHeight"))+" ("+toDisplayString$1(O.value.groupTab.height)+"px)",1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":le[37]||(le[37]=ve=>O.value.groupTab.height=ve),min:"20",max:"60",class:"range-input"},null,512),[[vModelText,O.value.groupTab.height,void 0,{number:!0}]])]),createBaseVNode("div",_hoisted_116,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.fontSize"))+" ("+toDisplayString$1(O.value.groupTab.fontSize)+"px)",1),withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":le[38]||(le[38]=ve=>O.value.groupTab.fontSize=ve),min:"8",max:"20",class:"range-input"},null,512),[[vModelText,O.value.groupTab.fontSize,void 0,{number:!0}]])])])]),createBaseVNode("div",_hoisted_117,[createBaseVNode("button",{class:"reset-btn",onClick:ht},toDisplayString$1(unref(t)("tagManager.resetDefault")),1),createBaseVNode("button",{class:"cancel-btn",onClick:It},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"confirm-btn",onClick:jt},toDisplayString$1(unref(t)("common.confirm")),1)])],32)])):createCommentVNode("",!0),createVNode(ImportTagDialog,{ref_key:"importTagDialogItem",ref:Dt},null,512)]))}},TagManager=_export_sfc(_sfc_main$k,[["__scopeId","data-v-c9c6726d"]]),baseZIndex=100,activeWindow=ref(""),windowZIndexes=ref({}),windowManager={setActiveWindow(e){activeWindow.value!==e&&(activeWindow.value=e,Object.keys(windowZIndexes.value).forEach(t=>{windowZIndexes.value[t]=baseZIndex}),windowZIndexes.value[e]=baseZIndex+10)},getZIndex(e){return windowZIndexes.value[e]||(windowZIndexes.value[e]=baseZIndex),windowZIndexes.value[e]},registerWindow(e){windowZIndexes.value[e]||(windowZIndexes.value[e]=baseZIndex)},unregisterWindow(e){delete windowZIndexes.value[e]}},loraApi={getLoraList:async e=>await request({url:"/get_lora_list",method:"get",params:e}),getAllLoraList:async e=>await request({url:"/get_lora_load_all",method:"get",params:e}),getAllLoraStatus:async e=>await request({url:"/get_lora_load_status",method:"get",params:e}),getLoraDetail:async e=>await request({url:"/lorainfo/api/loras/info",method:"get",params:e}),getLoraRefresh:async e=>await request({url:"/lorainfo/api/loras/info/refresh",method:"get",params:e}),postUplaodImg:async(e,t,a)=>{const n=new FormData;return n.append("image",e),n.append("path",t),n.append("fileName",a),await request({url:"/lorainfo/api/loras/set/img",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},postLoraSave:async(e,t)=>{const a=new FormData;return a.append("json",JSON.stringify(t)),await request({url:"/lorainfo/api/loras/info?file="+e,method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}})},postLoraDelet:async(e,t)=>await request({url:"/lorainfo/api/delete/loras/info/filed?file="+e,method:"post",data:{json:t}}),getLoraFolderList:async()=>await request({url:"/get_lora_folder_list",method:"post"}),getLoraRangeList:async e=>await request({url:"/get_lora_list_by_range",method:"post",data:{range:e}}),searchLoraGetFolderList:async e=>await request({url:"/get_lora_list_by_search",method:"post",data:{search:e}})};function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var REG_LINK$1=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,script$a={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t=this.jsonValue,a=REG_LINK$1.test(t),n;return this.expand?(n={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},a?(t='<a href="'.concat(t,'" target="_blank" class="jv-link">').concat(t,"</a>"),n.innerHTML='"'.concat(t.toString(),'"')):n.innerText='"'.concat(t.toString(),'"')):n={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},h("span",{},[this.canExtend&&h("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),h("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),h("span",n)])}};script$a.__file="src/Components/types/json-string.vue";var script$9={name:"JsonUndefined",functional:!0,props:{jsonValue:{type:Object,default:null}},render:function(){return h("span",{class:{"jv-item":!0,"jv-undefined":!0},innerText:this.jsonValue===null?"null":"undefined"})}};script$9.__file="src/Components/types/json-undefined.vue";var script$8={name:"JsonNumber",functional:!0,props:{jsonValue:{type:Number,required:!0}},render:function(){var t=Number.isInteger(this.jsonValue);return h("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":t,"jv-number-float":!t},innerText:this.jsonValue.toString()})}};script$8.__file="src/Components/types/json-number.vue";var script$7={name:"JsonBoolean",functional:!0,props:{jsonValue:Boolean},render:function(){return h("span",{class:{"jv-item":!0,"jv-boolean":!0},innerText:this.jsonValue.toString()})}};script$7.__file="src/Components/types/json-boolean.vue";var script$6={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},data:function(){return{value:{}}},computed:{ordered:function(){var t=this;if(!this.sort)return this.value;var a={};return Object.keys(this.value).sort().forEach(function(n){a[n]=t.value[n]}),a}},watch:{jsonValue:function(t){this.setValue(t)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(t){var a=this;setTimeout(function(){a.value=t},0)},toggle:function(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},dispatchEvent:function(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=[];if(!this.previewMode&&!this.keyName&&t.push(h("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),t.push(h("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"{"})),this.expand){for(var a in this.ordered)if(this.ordered.hasOwnProperty(a)){var n=this.ordered[a];t.push(h(script$1,{key:a,style:{display:this.expand?void 0:"none"},sort:this.sort,keyName:a,depth:this.depth+1,value:n,previewMode:this.previewMode}))}}return!this.expand&&Object.keys(this.value).length&&t.push(h("span",{style:{display:this.expand?"none":void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal object content (keys: ".concat(Object.keys(this.ordered).join(", "),")"),innerText:"..."})),t.push(h("span",{class:{"jv-item":!0,"jv-object":!0},innerText:"}"})),h("span",t)}};script$6.__file="src/Components/types/json-object.vue";var script$5={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},data:function(){return{value:[]}},watch:{jsonValue:function(t){this.setValue(t)}},mounted:function(){this.setValue(this.jsonValue)},methods:{setValue:function(t){var a=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n===0&&(this.value=[]),setTimeout(function(){t.length>n&&(a.value.push(t[n]),a.setValue(t,n+1))},0)},toggle:function(){this.$emit("update:expand",!this.expand);try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=this,a=[];return!this.previewMode&&!this.keyName&&a.push(h("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),a.push(h("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"["})),this.expand&&this.value.forEach(function(n,o){a.push(h(script$1,{key:o,style:{display:t.expand?void 0:"none"},sort:t.sort,depth:t.depth+1,value:n,previewMode:t.previewMode}))}),!this.expand&&this.value.length&&a.push(h("span",{style:{display:void 0},class:{"jv-ellipsis":!0},onClick:this.toggle,title:"click to reveal ".concat(this.value.length," hidden items"),innerText:"..."})),a.push(h("span",{class:{"jv-item":!0,"jv-array":!0},innerText:"]"})),h("span",a)}};script$5.__file="src/Components/types/json-array.vue";var script$4={name:"JsonFunction",functional:!0,props:{jsonValue:{type:Function,required:!0}},render:function(){return h("span",{class:{"jv-item":!0,"jv-function":!0},attrs:{title:this.jsonValue.toString()},innerHTML:"&lt;function&gt;"})}};script$4.__file="src/Components/types/json-function.vue";var script$3={name:"JsonDate",inject:["timeformat"],functional:!0,props:{jsonValue:{type:Date,required:!0}},render:function(){var t=this.jsonValue,a=this.timeformat;return h("span",{class:{"jv-item":!0,"jv-string":!0},innerText:'"'.concat(a(t),'"')})}};script$3.__file="src/Components/types/json-date.vue";var REG_LINK=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,script$2={name:"JsonString",props:{jsonValue:{type:RegExp,required:!0}},data:function(){return{expand:!0,canExtend:!1}},mounted:function(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle:function(){this.expand=!this.expand}},render:function(){var t=this.jsonValue,a=REG_LINK.test(t),n;return this.expand?(n={class:{"jv-item":!0,"jv-string":!0},ref:"itemRef"},a?(t='<a href="'.concat(t,'" target="_blank" class="jv-link">').concat(t,"</a>"),n.innerHTML="".concat(t.toString())):n.innerText="".concat(t.toString())):n={class:{"jv-ellipsis":!0},onClick:this.toggle,innerText:"..."},h("span",{},[this.canExtend&&h("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),h("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),h("span",n)])}};script$2.__file="src/Components/types/json-regexp.vue";var script$1={name:"JsonBox",inject:["expandDepth","keyClick"],props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},data:function(){return{expand:!0}},mounted:function(){this.expand=this.previewMode||!(this.depth>=this.expandDepth)},methods:{toggle:function(){this.expand=!this.expand;try{this.$el.dispatchEvent(new Event("resized"))}catch{var t=document.createEvent("Event");t.initEvent("resized",!0,!1),this.$el.dispatchEvent(t)}}},render:function(){var t=this,a=[],n;this.value===null||this.value===void 0?n=script$9:Array.isArray(this.value)?n=script$5:Object.prototype.toString.call(this.value)==="[object Date]"?n=script$3:_typeof(this.value)==="object"?n=script$6:typeof this.value=="number"?n=script$8:typeof this.value=="string"?n=script$a:typeof this.value=="boolean"?n=script$7:typeof this.value=="function"&&(n=script$4),this.value.constructor===RegExp&&(n=script$2);var o=this.keyName&&this.value&&(Array.isArray(this.value)||_typeof(this.value)==="object"&&Object.prototype.toString.call(this.value)!=="[object Date]");return!this.previewMode&&o&&a.push(h("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:this.toggle})),this.keyName&&a.push(h("span",{class:{"jv-key":!0},onClick:function(){t.keyClick(t.keyName)},innerText:"".concat(this.keyName,":")})),a.push(h(n,{class:{"jv-push":!0},jsonValue:this.value,keyName:this.keyName,sort:this.sort,depth:this.depth,expand:this.expand,previewMode:this.previewMode,"onUpdate:expand":function(s){t.expand=s}})),h("div",{class:{"jv-node":!0,"jv-key-node":!!this.keyName&&!o,toggle:!this.previewMode&&o}},a)}};script$1.__file="src/Components/json-box.vue";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var clipboard$2={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(commonjsGlobal,function(){return function(){var a={686:function(r,s,l){l.d(s,{default:function(){return ae}});var c=l(279),f=l.n(c),u=l(370),d=l.n(u),m=l(817),g=l.n(m);function v(Y){try{return document.execCommand(Y)}catch{return!1}}var b=function(ne){var te=g()(ne);return v("cut"),te},$=b;function w(Y){var ne=document.documentElement.getAttribute("dir")==="rtl",te=document.createElement("textarea");te.style.fontSize="12pt",te.style.border="0",te.style.padding="0",te.style.margin="0",te.style.position="absolute",te.style[ne?"right":"left"]="-9999px";var ge=window.pageYOffset||document.documentElement.scrollTop;return te.style.top="".concat(ge,"px"),te.setAttribute("readonly",""),te.value=Y,te}var C=function(ne,te){var ge=w(ne);te.container.appendChild(ge);var re=g()(ge);return v("copy"),ge.remove(),re},P=function(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ge="";return typeof ne=="string"?ge=C(ne,te):ne instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ne==null?void 0:ne.type)?ge=C(ne.value,te):(ge=g()(ne),v("copy")),ge},y=P;function E(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(te){return typeof te}:E=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},E(Y)}var R=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=ne.action,ge=te===void 0?"copy":te,re=ne.container,B=ne.target,z=ne.text;if(ge!=="copy"&&ge!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(B!==void 0)if(B&&E(B)==="object"&&B.nodeType===1){if(ge==="copy"&&B.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ge==="cut"&&(B.hasAttribute("readonly")||B.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(z)return y(z,{container:re});if(B)return ge==="cut"?$(B):y(B,{container:re})},F=R;function H(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(te){return typeof te}:H=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},H(Y)}function j(Y,ne){if(!(Y instanceof ne))throw new TypeError("Cannot call a class as a function")}function fe(Y,ne){for(var te=0;te<ne.length;te++){var ge=ne[te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(Y,ge.key,ge)}}function oe(Y,ne,te){return ne&&fe(Y.prototype,ne),te&&fe(Y,te),Y}function V(Y,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(ne&&ne.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),ne&&q(Y,ne)}function q(Y,ne){return q=Object.setPrototypeOf||function(ge,re){return ge.__proto__=re,ge},q(Y,ne)}function Q(Y){var ne=ee();return function(){var ge=A(Y),re;if(ne){var B=A(this).constructor;re=Reflect.construct(ge,arguments,B)}else re=ge.apply(this,arguments);return O(this,re)}}function O(Y,ne){return ne&&(H(ne)==="object"||typeof ne=="function")?ne:G(Y)}function G(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function A(Y){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(te){return te.__proto__||Object.getPrototypeOf(te)},A(Y)}function L(Y,ne){var te="data-clipboard-".concat(Y);if(ne.hasAttribute(te))return ne.getAttribute(te)}var W=function(Y){V(te,Y);var ne=Q(te);function te(ge,re){var B;return j(this,te),B=ne.call(this),B.resolveOptions(re),B.listenClick(ge),B}return oe(te,[{key:"resolveOptions",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof re.action=="function"?re.action:this.defaultAction,this.target=typeof re.target=="function"?re.target:this.defaultTarget,this.text=typeof re.text=="function"?re.text:this.defaultText,this.container=H(re.container)==="object"?re.container:document.body}},{key:"listenClick",value:function(re){var B=this;this.listener=d()(re,"click",function(z){return B.onClick(z)})}},{key:"onClick",value:function(re){var B=re.delegateTarget||re.currentTarget,z=this.action(B)||"copy",Z=F({action:z,container:this.container,target:this.target(B),text:this.text(B)});this.emit(Z?"success":"error",{action:z,text:Z,trigger:B,clearSelection:function(){B&&B.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(re){return L("action",re)}},{key:"defaultTarget",value:function(re){var B=L("target",re);if(B)return document.querySelector(B)}},{key:"defaultText",value:function(re){return L("text",re)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(re){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return y(re,B)}},{key:"cut",value:function(re){return $(re)}},{key:"isSupported",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],B=typeof re=="string"?[re]:re,z=!!document.queryCommandSupported;return B.forEach(function(Z){z=z&&!!document.queryCommandSupported(Z)}),z}}]),te}(f()),ae=W},828:function(r){var s=9;if(typeof Element<"u"&&!Element.prototype.matches){var l=Element.prototype;l.matches=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector}function c(f,u){for(;f&&f.nodeType!==s;){if(typeof f.matches=="function"&&f.matches(u))return f;f=f.parentNode}}r.exports=c},438:function(r,s,l){var c=l(828);function f(m,g,v,b,$){var w=d.apply(this,arguments);return m.addEventListener(v,w,$),{destroy:function(){m.removeEventListener(v,w,$)}}}function u(m,g,v,b,$){return typeof m.addEventListener=="function"?f.apply(null,arguments):typeof v=="function"?f.bind(null,document).apply(null,arguments):(typeof m=="string"&&(m=document.querySelectorAll(m)),Array.prototype.map.call(m,function(w){return f(w,g,v,b,$)}))}function d(m,g,v,b){return function($){$.delegateTarget=c($.target,g),$.delegateTarget&&b.call(m,$)}}r.exports=u},879:function(r,s){s.node=function(l){return l!==void 0&&l instanceof HTMLElement&&l.nodeType===1},s.nodeList=function(l){var c=Object.prototype.toString.call(l);return l!==void 0&&(c==="[object NodeList]"||c==="[object HTMLCollection]")&&"length"in l&&(l.length===0||s.node(l[0]))},s.string=function(l){return typeof l=="string"||l instanceof String},s.fn=function(l){var c=Object.prototype.toString.call(l);return c==="[object Function]"}},370:function(r,s,l){var c=l(879),f=l(438);function u(v,b,$){if(!v&&!b&&!$)throw new Error("Missing required arguments");if(!c.string(b))throw new TypeError("Second argument must be a String");if(!c.fn($))throw new TypeError("Third argument must be a Function");if(c.node(v))return d(v,b,$);if(c.nodeList(v))return m(v,b,$);if(c.string(v))return g(v,b,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(v,b,$){return v.addEventListener(b,$),{destroy:function(){v.removeEventListener(b,$)}}}function m(v,b,$){return Array.prototype.forEach.call(v,function(w){w.addEventListener(b,$)}),{destroy:function(){Array.prototype.forEach.call(v,function(w){w.removeEventListener(b,$)})}}}function g(v,b,$){return f(document.body,v,b,$)}r.exports=u},817:function(r){function s(l){var c;if(l.nodeName==="SELECT")l.focus(),c=l.value;else if(l.nodeName==="INPUT"||l.nodeName==="TEXTAREA"){var f=l.hasAttribute("readonly");f||l.setAttribute("readonly",""),l.select(),l.setSelectionRange(0,l.value.length),f||l.removeAttribute("readonly"),c=l.value}else{l.hasAttribute("contenteditable")&&l.focus();var u=window.getSelection(),d=document.createRange();d.selectNodeContents(l),u.removeAllRanges(),u.addRange(d),c=u.toString()}return c}r.exports=s},279:function(r){function s(){}s.prototype={on:function(l,c,f){var u=this.e||(this.e={});return(u[l]||(u[l]=[])).push({fn:c,ctx:f}),this},once:function(l,c,f){var u=this;function d(){u.off(l,d),c.apply(f,arguments)}return d._=c,this.on(l,d,f)},emit:function(l){var c=[].slice.call(arguments,1),f=((this.e||(this.e={}))[l]||[]).slice(),u=0,d=f.length;for(u;u<d;u++)f[u].fn.apply(f[u].ctx,c);return this},off:function(l,c){var f=this.e||(this.e={}),u=f[l],d=[];if(u&&c)for(var m=0,g=u.length;m<g;m++)u[m].fn!==c&&u[m].fn._!==c&&d.push(u[m]);return d.length?f[l]=d:delete f[l],this}},r.exports=s,r.exports.TinyEmitter=s}},n={};function o(r){if(n[r])return n[r].exports;var s=n[r]={exports:{}};return a[r](s,s.exports,o),s.exports}return function(){o.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(s,{a:s}),s}}(),function(){o.d=function(r,s){for(var l in s)o.o(s,l)&&!o.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:s[l]})}}(),function(){o.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)}}(),o(686)}().default})})(clipboard$2);var Clipboard$1=getDefaultExportFromCjs$1(clipboard$2.exports),debounce=function(t,a){var n=Date.now(),o;return function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];Date.now()-n<a&&o&&clearTimeout(o),o=setTimeout(function(){t.apply(void 0,s)},a),n=Date.now()}},script={name:"JsonViewer",components:{JsonBox:script$1},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:function(t){return t.toLocaleString()}},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},provide:function(){return{expandDepth:this.expandDepth,timeformat:this.timeformat,keyClick:this.keyClick}},data:function(){return{copied:!1,expandableCode:!1,expandCode:this.expanded}},emits:["onKeyClick"],computed:{jvClass:function(){return"jv-container jv-"+this.theme+(this.boxed?" boxed":"")},copyText:function(){var t=this.copyable,a=t.copyText,n=t.copiedText,o=t.timeout,r=t.align;return{copyText:a||"copy",copiedText:n||"copied!",timeout:o||2e3,align:r}},parseValue:function(){if(!this.parse||typeof this.value!="string")return this.value;try{return JSON.parse(this.value)}catch{return this.value}}},watch:{value:function(){this.onResized()}},mounted:function(){var t=this;if(this.debounceResized=debounce(this.debResized.bind(this),200),this.boxed&&this.$refs.jsonBox&&(this.onResized(),this.$refs.jsonBox.$el.addEventListener("resized",this.onResized,!0)),this.copyable){var a=new Clipboard$1(this.$refs.clip,{text:function(){return JSON.stringify(t.value,null,2)}});a.on("success",function(n){t.onCopied(n)})}},methods:{onResized:function(){this.debounceResized()},debResized:function(){var t=this;this.$nextTick(function(){t.$refs.jsonBox&&(t.$refs.jsonBox.$el.clientHeight>=250?t.expandableCode=!0:t.expandableCode=!1)})},keyClick:function(t){this.$emit("onKeyClick",t)},onCopied:function(t){var a=this;this.copied||(this.copied=!0,setTimeout(function(){a.copied=!1},this.copyText.timeout),this.$emit("copied",t))},toggleExpandCode:function(){this.expandCode=!this.expandCode}}};function render(e,t,a,n,o,r){var s=resolveComponent("json-box");return openBlock(),createElementBlock("div",{class:normalizeClass(r.jvClass)},[a.copyable?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass("jv-tooltip ".concat(r.copyText.align||"right"))},[createBaseVNode("span",{ref:"clip",class:normalizeClass(["jv-button",{copied:o.copied}])},[renderSlot(e.$slots,"copy",{copied:o.copied},function(){return[createTextVNode(toDisplayString$1(o.copied?r.copyText.copiedText:r.copyText.copyText),1)]})],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(["jv-code",{open:o.expandCode,boxed:a.boxed}])},[createVNode(s,{ref:"jsonBox",value:r.parseValue,sort:a.sort,"preview-mode":a.previewMode},null,8,["value","sort","preview-mode"])],2),o.expandableCode&&a.boxed?(openBlock(),createElementBlock("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=function(){return r.toggleExpandCode&&r.toggleExpandCode.apply(r,arguments)})},[createBaseVNode("span",{class:normalizeClass(["jv-toggle",{open:!!o.expandCode}])},null,2)])):createCommentVNode("v-if",!0)],2)}script.render=render,script.__file="src/Components/json-viewer.vue";const _hoisted_1$j={class:"lora-raw__content"},STORAGE_PREFIX$4="weilin_tools_",_sfc_main$j={__name:"lora_raw",emits:["close","update"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref({}),r=ref(!1),s={loraRaw:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},c=ref((()=>{try{const g=localStorage.getItem(`${STORAGE_PREFIX$4}loraRawState`);if(g){const v=JSON.parse(g),b={...s};return v.loraRaw&&(b.loraRaw={...s.loraRaw,...v.loraRaw}),b}}catch(g){console.error("Error loading window states:",g)}return{...s}})());watch(c,g=>{try{localStorage.setItem(`${STORAGE_PREFIX$4}loraRawState`,JSON.stringify(g))}catch(v){console.error("Error saving window states:",v)}},{deep:!0}),onMounted(()=>{windowManager.registerWindow("loraRaw")}),onUnmounted(()=>{windowManager.unregisterWindow("loraRaw")});const f=g=>{r.value=!1},u=(g,v)=>{c.value[g]&&(c.value[g].position={...v})},d=(g,v)=>{c.value[g]&&(c.value[g].size={...v})};return t({open:g=>{r.value=!0,windowManager.setActiveWindow("loraRaw"),o.value=g}}),(g,v)=>r.value?(openBlock(),createBlock(DraggableWindow,{key:0,title:unref(n)("lora.rawTitle"),position:c.value.loraRaw.position,size:c.value.loraRaw.size,"z-index":unref(windowManager).getZIndex("loraRaw"),"onUpdate:position":v[0]||(v[0]=b=>u("loraRaw",b)),"onUpdate:size":v[1]||(v[1]=b=>d("loraRaw",b)),onActive:v[2]||(v[2]=b=>unref(windowManager).setActiveWindow("loraRaw")),onClose:v[3]||(v[3]=b=>f())},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$j,[createVNode(unref(script),{value:o.value,copyable:"",sort:"",theme:"dark"},null,8,["value"])])]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0)}},loraRaw=_export_sfc(_sfc_main$j,[["__scopeId","data-v-378f8ede"]]),_hoisted_1$i={key:0,class:"lora-detail__loading"},_hoisted_2$h={class:"lora-detail__body"},_hoisted_3$h={class:"lora-detail__tags"},_hoisted_4$g=["title"],_hoisted_5$f=["title"],_hoisted_6$f={class:"lora-detail__table"},_hoisted_7$f={class:"label"},_hoisted_8$f={colspan:"2"},_hoisted_9$f={colspan:"3"},_hoisted_10$e={class:"label"},_hoisted_11$e={colspan:"2",class:"hash"},_hoisted_12$e={class:"label"},_hoisted_13$c={colspan:"2"},_hoisted_14$a=["href"],_hoisted_15$a={key:1,class:"not-found"},_hoisted_16$a=["title"],_hoisted_17$a={class:"label"},_hoisted_18$7=["title"],_hoisted_19$7={key:1,class:"text"},_hoisted_20$7={class:"actions"},_hoisted_21$7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},_hoisted_22$7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},_hoisted_23$7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},_hoisted_24$7={class:"label"},_hoisted_25$7={colspan:"2"},_hoisted_26$7={class:"label"},_hoisted_27$7={colspan:"2"},_hoisted_28$6={class:"label"},_hoisted_29$6=["title"],_hoisted_30$6=["onUpdate:modelValue","type","onKeyup"],_hoisted_31$6={key:1,class:"text"},_hoisted_32$6={class:"actions"},_hoisted_33$6=["onClick","title"],_hoisted_34$6={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},_hoisted_35$6={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},_hoisted_36$6={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},_hoisted_37$5={class:"label"},_hoisted_38$5=["onUpdate:modelValue"],_hoisted_39$5={key:1},_hoisted_40$5=["onUpdate:modelValue","type","onKeyup"],_hoisted_41$5={key:1,class:"text"},_hoisted_42$5={class:"actions"},_hoisted_43$5=["onClick","title"],_hoisted_44$4={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},_hoisted_45$4={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},_hoisted_46$3={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},_hoisted_47$2=["onClick","title"],_hoisted_48$2={class:"field-management"},_hoisted_49$2=["title"],_hoisted_50$2={key:0},_hoisted_51$2={class:"label"},_hoisted_52$2=["title"],_hoisted_53$2={key:0,class:"word-selection"},_hoisted_54$1={colspan:"2"},_hoisted_55$1={class:"word-list"},_hoisted_56$1=["onClick"],_hoisted_57$1={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},_hoisted_58$1={key:1},_hoisted_59$1={key:0,class:"lora-detail__images"},_hoisted_60$1={class:"image-wrapper"},_hoisted_61$1=["onClick"],_hoisted_62$1=["src"],_hoisted_63$1={class:"image-info"},_hoisted_64$1={key:0,class:"info-item"},_hoisted_65$1=["href"],_hoisted_66$1={key:1,class:"info-item"},_hoisted_67$1={key:2,class:"info-item"},_hoisted_68$1={key:3,class:"info-item"},_hoisted_69$1={key:4,class:"info-item"},_hoisted_70$1={key:5,class:"info-item"},_hoisted_71$1={key:6,class:"info-item"},_hoisted_72$1={key:7,class:"info-item"},STORAGE_PREFIX$3="weilin_tools_",_sfc_main$i={__name:"lora_detail",emits:["close","update"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(!1),r=ref({}),s=ref(!1),l=ref(),c=ref({}),f={loraDetail:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},d=ref((()=>{try{const B=localStorage.getItem(`${STORAGE_PREFIX$3}loraDetailState`);if(B){const z=JSON.parse(B),Z={...f};return z.loraDetail&&(Z.loraDetail={...f.loraDetail,...z.loraDetail}),Z}}catch(B){console.error("Error loading window states:",B)}return{...f}})());watch(d,B=>{try{localStorage.setItem(`${STORAGE_PREFIX$3}loraDetailState`,JSON.stringify(B))}catch(z){console.error("Error saving window states:",z)}},{deep:!0}),onMounted(()=>{windowManager.registerWindow("loraDetail")}),onUnmounted(()=>{windowManager.unregisterWindow("loraDetail")});const m=B=>{s.value=!1},g=(B,z)=>{d.value[B]&&(d.value[B].position={...z})},v=(B,z)=>{d.value[B]&&(d.value[B].size={...z})};t({open:B=>{s.value=!0,windowManager.setActiveWindow("loraDetail"),o.value=!0,r.value=B,nextTick(()=>{j()})}});const $=ref(""),w=ref(),C=B=>{w.value.open(B)},P=ref({}),y=ref({}),E=ref([]),R=[{key:"strengthMin",label:n("lora.strengthMin"),tip:n("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:n("lora.strengthMax"),tip:n("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:n("lora.strWeight"),tip:n("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:n("lora.promptWords"),tip:n("lora.promptWordsTip")}],F=()=>{const B=`custom_${Date.now()}`;r.value.user_diy_fileds||(r.value.user_diy_fileds={}),c.value[B]={label:"新字段",type:"text"},r.value.user_diy_fileds[B]={label:"新字段",value:""},y.value[B]="",A(B)},H=async B=>{var z,Z;delete c.value[B],delete y.value[B],(Z=(z=r.value)==null?void 0:z.user_diy_fileds)!=null&&Z[B]&&delete r.value.user_diy_fileds[B],await nextTick(async()=>{await ae(B)})},j=()=>{$.value=r.value.name,r.value={},E.value=[],y.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},loraApi.getLoraDetail({file:$.value,refresh:!1,light:!1}).then(B=>{r.value=B.data,nextTick(function(){var z,Z,D,K,x,S;r.value.name=r.value.name||((Z=(z=r.value.raw)===null||z===void 0?void 0:z.metadata)===null||Z===void 0?void 0:Z.ss_output_name===void 0?Z["modelspec.title"]:Z.ss_output_name)||"",y.value.nameValue=r.value.name,r.value.strengthMin=(D=r.value.strengthMin)!==null&&D!==void 0?D:"",y.value.minValue=r.value.strengthMin,r.value.strengthMax=(K=r.value.strengthMax)!==null&&K!==void 0?K:"",y.value.maxValue=r.value.strengthMax,r.value.userNote=(x=r.value.userNote)!==null&&x!==void 0?x:"",y.value.notesValue=r.value.userNote,r.value.loraWorks=(S=r.value.loraWorks)!==null&&S!==void 0?S:"",y.value.loraWorksValue=r.value.loraWorks,r.value.user_diy_fileds&&(c.value=r.value.user_diy_fileds),o.value=!1})}).catch(B=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},fe=B=>{let Z=new URL(B).pathname.split("/").pop();return Z=Z.split("?")[0],decodeURIComponent(Z)},oe=async B=>{try{const z=await fetch(B),Z=fe(B),D=await z.blob();loraApi.postUplaodImg(D,r.value.file,Z).then(K=>{message$1({type:"success",str:"message.saveSuccess"})}).catch(K=>{message$1({type:"warn",str:"message.unknownError"})})}catch{message$1({type:"warn",str:"message.unknownError"})}},V=computed(()=>{var B;return(B=r.value.links)==null?void 0:B.find(z=>z.includes("civitai.com/models"))}),q=computed(()=>{var B,z;return((z=(B=r.value.raw)==null?void 0:B.civitai)==null?void 0:z.error)==="Model not found"}),Q=computed(()=>r.value.trainedWords||[]),O=async()=>{var z;const B=((z=l.value)==null?void 0:z.scrollTop)||0;o.value=!0,loraApi.getLoraRefresh({file:$.value}).then(Z=>{r.value=Z.data,nextTick(function(){var D,K,x,S,I,X;r.value.name=r.value.name||((K=(D=r.value.raw)===null||D===void 0?void 0:D.metadata)===null||K===void 0?void 0:K.ss_output_name===void 0?K["modelspec.title"]:K.ss_output_name)||"",y.value.nameValue=r.value.name,r.value.strengthMin=(x=r.value.strengthMin)!==null&&x!==void 0?x:"",y.value.minValue=r.value.strengthMin,r.value.strengthMax=(S=r.value.strengthMax)!==null&&S!==void 0?S:"",y.value.maxValue=r.value.strengthMax,r.value.userNote=(I=r.value.userNote)!==null&&I!==void 0?I:"",y.value.notesValue=r.value.userNote,r.value.loraWorks=(X=r.value.loraWorks)!==null&&X!==void 0?X:"",y.value.loraWorksValue=r.value.loraWorks,r.value.user_diy_fileds&&(c.value=r.value.user_diy_fileds),o.value=!1}),nextTick(function(){o.value=!1}),l.value&&(l.value.scrollTop=B),message$1({type:"success",str:"message.dataLoaded"})}).catch(Z=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},G=B=>{P.value[B]?A(B):ee(B)},ee=B=>{var z,Z;P.value[B]=!0,B in c.value?y.value[B]=((Z=(z=r.value.user_diy_fileds)==null?void 0:z[B])==null?void 0:Z.value)||"":y.value[B]=r.value[B],nextTick(()=>{B==="name"&&nameInput.value&&nameInput.value.focus()})},A=B=>{B in c.value?(r.value.user_diy_fileds||(r.value.user_diy_fileds={}),r.value.user_diy_fileds[B]={label:c.value[B].label,value:y.value[B]}):r.value[B]=y.value[B],W(r.value),P.value[B]=!1},L=B=>{P.value[B]=!1,y.value[B]=r.value[B]},W=B=>{var Z;const z=((Z=l.value)==null?void 0:Z.scrollTop)||0;o.value=!0,loraApi.postLoraSave($.value,B).then(D=>{r.value=D.data,nextTick(function(){var K,x,S,I,X,ie;r.value.name=r.value.name||((x=(K=r.value.raw)===null||K===void 0?void 0:K.metadata)===null||x===void 0?void 0:x.ss_output_name===void 0?x["modelspec.title"]:x.ss_output_name)||"",y.value.nameValue=r.value.name,r.value.strengthMin=(S=r.value.strengthMin)!==null&&S!==void 0?S:"",y.value.minValue=r.value.strengthMin,r.value.strengthMax=(I=r.value.strengthMax)!==null&&I!==void 0?I:"",y.value.maxValue=r.value.strengthMax,r.value.userNote=(X=r.value.userNote)!==null&&X!==void 0?X:"",y.value.notesValue=r.value.userNote,r.value.loraWorks=(ie=r.value.loraWorks)!==null&&ie!==void 0?ie:"",y.value.loraWorksValue=r.value.loraWorks,r.value.user_diy_fileds&&(c.value=r.value.user_diy_fileds),o.value=!1,nextTick(function(){l.value&&(l.value.scrollTop=z)})}),message$1({type:"success",str:"message.saveSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},ae=async B=>{var Z;const z=((Z=l.value)==null?void 0:Z.scrollTop)||0;o.value=!0,await loraApi.postLoraDelet($.value,B).then(D=>{r.value=D.data,nextTick(function(){var K,x,S,I,X,ie;r.value.name=r.value.name||((x=(K=r.value.raw)===null||K===void 0?void 0:K.metadata)===null||x===void 0?void 0:x.ss_output_name===void 0?x["modelspec.title"]:x.ss_output_name)||"",y.value.nameValue=r.value.name,r.value.strengthMin=(S=r.value.strengthMin)!==null&&S!==void 0?S:"",y.value.minValue=r.value.strengthMin,r.value.strengthMax=(I=r.value.strengthMax)!==null&&I!==void 0?I:"",y.value.maxValue=r.value.strengthMax,r.value.userNote=(X=r.value.userNote)!==null&&X!==void 0?X:"",y.value.notesValue=r.value.userNote,r.value.loraWorks=(ie=r.value.loraWorks)!==null&&ie!==void 0?ie:"",y.value.loraWorksValue=r.value.loraWorks,r.value.user_diy_fileds&&(c.value=r.value.user_diy_fileds),o.value=!1,nextTick(function(){l.value&&(l.value.scrollTop=z)})}),message$1({type:"success",str:"message.deleteSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},Y=B=>{const z=E.value.indexOf(B);z===-1?E.value.push(B):E.value.splice(z,1)},ne=B=>E.value.includes(B),te=async()=>{E.value.length&&navigator.clipboard.writeText(E.value).then(B=>{message$1({type:"success",str:"message.copySuccess"})},B=>{message$1({type:"warn",str:"message.copyFailed"})})};ref(!1),ref(!1),computed(()=>o.value?n("common.loading"):n("common.ready"));const ge=ref(!0),re=()=>{ge.value=!ge.value};return(B,z)=>(openBlock(),createElementBlock(Fragment,null,[s.value?(openBlock(),createBlock(DraggableWindow,{key:0,title:unref(n)("lora.title"),position:d.value.loraDetail.position,size:d.value.loraDetail.size,"z-index":unref(windowManager).getZIndex("loraDetail"),"onUpdate:position":z[5]||(z[5]=Z=>g("loraDetail",Z)),"onUpdate:size":z[6]||(z[6]=Z=>v("loraDetail",Z)),onActive:z[7]||(z[7]=Z=>unref(windowManager).setActiveWindow("loraDetail")),onClose:z[8]||(z[8]=Z=>m())},{default:withCtx(()=>{var Z;return[createBaseVNode("div",{class:"lora-detail__content",ref_key:"loraContent",ref:l},[o.value?(openBlock(),createElementBlock("div",_hoisted_1$i,z[9]||(z[9]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[createBaseVNode("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)]))):createCommentVNode("",!0),createBaseVNode("div",_hoisted_2$h,[z[24]||(z[24]=createBaseVNode("div",{class:"lora-detail__title"},"Lora 信息",-1)),createBaseVNode("ul",_hoisted_3$h,[r.value.type?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass(["lora-detail__tag",`-type-${r.value.type.toLowerCase()}`]),title:unref(n)("lora.type")},toDisplayString$1(r.value.type),11,_hoisted_4$g)):createCommentVNode("",!0),r.value.baseModel?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(["lora-detail__tag",`-basemodel-${r.value.baseModel.toLowerCase()}`]),title:unref(n)("lora.baseModel")},toDisplayString$1(r.value.baseModel),11,_hoisted_5$f)):createCommentVNode("",!0)]),createBaseVNode("table",_hoisted_6$f,[createBaseVNode("tbody",null,[createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_7$f,toDisplayString$1(unref(n)("lora.file")),1),createBaseVNode("td",_hoisted_8$f,toDisplayString$1(r.value.file),1),createBaseVNode("td",_hoisted_9$f,[createBaseVNode("button",{class:"fetch-btn",onClick:z[0]||(z[0]=D=>C(r.value.raw.metadata))},toDisplayString$1(unref(n)("lora.seeLoraRaw")),1)])]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_10$e,toDisplayString$1(unref(n)("lora.hash")),1),createBaseVNode("td",_hoisted_11$e,toDisplayString$1(r.value.sha256),1)]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_12$e,toDisplayString$1(unref(n)("lora.civitai")),1),createBaseVNode("td",_hoisted_13$c,[V.value?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("a",{href:V.value,target:"_blank",class:"civitai-link"},[z[10]||(z[10]=createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),createBaseVNode("span",null,toDisplayString$1(unref(n)("lora.viewOnCivitai")),1)],8,_hoisted_14$a),createBaseVNode("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:O},toDisplayString$1(unref(n)("lora.getCivitData")),1)],64)):q.value?(openBlock(),createElementBlock("div",_hoisted_15$a,[createBaseVNode("i",null,toDisplayString$1(unref(n)("lora.modelNotFound")),1),(openBlock(),createElementBlock("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:unref(n)("lora.modelNotFoundTip")},z[11]||(z[11]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_16$a))])):(openBlock(),createElementBlock("button",{key:2,class:"fetch-btn",onClick:O},toDisplayString$1(unref(n)("lora.fetchFromCivitai")),1))])]),createBaseVNode("tr",{class:normalizeClass({"is-editing":P.value.name})},[createBaseVNode("td",_hoisted_17$a,[createTextVNode(toDisplayString$1(unref(n)("lora.name"))+" ",1),(openBlock(),createElementBlock("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:unref(n)("lora.nameTip")},z[12]||(z[12]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_18$7))]),createBaseVNode("td",null,[P.value.name?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":z[1]||(z[1]=D=>y.value.name=D),type:"text",onKeyup:[z[2]||(z[2]=withKeys(D=>A("name"),["enter"])),z[3]||(z[3]=withKeys(D=>L("name"),["esc"]))],ref:"nameInput"},null,544)),[[vModelText,y.value.name]]):(openBlock(),createElementBlock("span",_hoisted_19$7,toDisplayString$1(r.value.name),1))]),createBaseVNode("td",_hoisted_20$7,[createBaseVNode("button",{class:"edit-btn",onClick:z[4]||(z[4]=D=>G("name"))},[(openBlock(),createElementBlock("svg",_hoisted_21$7,[P.value.name?(openBlock(),createElementBlock("path",_hoisted_22$7)):(openBlock(),createElementBlock("path",_hoisted_23$7))]))])])],2),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_24$7,toDisplayString$1(unref(n)("lora.baseModel")),1),createBaseVNode("td",_hoisted_25$7,toDisplayString$1(!r.value.baseModelFile&&!r.value.baseModelFile?"":(r.value.baseModel||"")+(r.value.baseModelFile?`
                                    (${r.value.baseModelFile})`:"")),1)]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_26$7,toDisplayString$1(unref(n)("lora.skipClip")),1),createBaseVNode("td",_hoisted_27$7,toDisplayString$1((B._t=(B._s=r.value.raw)===null||B._s===void 0?void 0:B._s.metadata)===null||B._t===void 0?void 0:B._t.ss_clip_skip),1)]),(openBlock(),createElementBlock(Fragment,null,renderList(R,D=>createBaseVNode("tr",{key:D.key,class:normalizeClass({"is-editing":P.value[D.key]})},[createBaseVNode("td",_hoisted_28$6,[createTextVNode(toDisplayString$1(D.label)+" ",1),D.tip?(openBlock(),createElementBlock("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:D.tip},z[13]||(z[13]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_29$6)):createCommentVNode("",!0)]),createBaseVNode("td",null,[P.value[D.key]?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":K=>y.value[D.key]=K,type:D.type||"text",onKeyup:[withKeys(K=>A(D.key),["enter"]),withKeys(K=>L(D.key),["esc"])]},null,40,_hoisted_30$6)),[[vModelDynamic,y.value[D.key]]]):(openBlock(),createElementBlock("span",_hoisted_31$6,toDisplayString$1(r.value[D.key]),1))]),createBaseVNode("td",_hoisted_32$6,[createBaseVNode("button",{class:"edit-btn",onClick:K=>G(D.key),title:unref(n)("promptBox.settings.edit")},[(openBlock(),createElementBlock("svg",_hoisted_34$6,[P.value[D.key]?(openBlock(),createElementBlock("path",_hoisted_35$6)):(openBlock(),createElementBlock("path",_hoisted_36$6))]))],8,_hoisted_33$6)])],2)),64)),(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,(D,K)=>{var x;return openBlock(),createElementBlock("tr",{key:K,class:normalizeClass({"is-editing":P.value[K]})},[createBaseVNode("td",_hoisted_37$5,[P.value[K]?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":S=>D.label=S,type:"text"},null,8,_hoisted_38$5)),[[vModelText,D.label]]):(openBlock(),createElementBlock("span",_hoisted_39$5,toDisplayString$1(D.label),1))]),createBaseVNode("td",null,[P.value[K]?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":S=>y.value[K]=S,type:D.type||"text",onKeyup:[withKeys(S=>A(K),["enter"]),withKeys(S=>L(K),["esc"])]},null,40,_hoisted_40$5)),[[vModelDynamic,y.value[K]]]):(openBlock(),createElementBlock("span",_hoisted_41$5,toDisplayString$1(r.value.user_diy_fileds?(x=r.value.user_diy_fileds[K])==null?void 0:x.value:""),1))]),createBaseVNode("td",_hoisted_42$5,[createBaseVNode("button",{class:"edit-btn",onClick:S=>G(K),title:unref(n)("promptBox.settings.edit")},[(openBlock(),createElementBlock("svg",_hoisted_44$4,[P.value[K]?(openBlock(),createElementBlock("path",_hoisted_45$4)):(openBlock(),createElementBlock("path",_hoisted_46$3))]))],8,_hoisted_43$5),createBaseVNode("button",{style:{"margin-left":"5px",color:"#f87171"},onClick:S=>H(K),class:"edit-btn",title:unref(n)("promptBox.settings.delete")},toDisplayString$1(unref(n)("promptBox.settings.delete")),9,_hoisted_47$2)])],2)}),128)),createBaseVNode("div",_hoisted_48$2,[createBaseVNode("button",{onClick:F,class:"add-btn",title:unref(n)("lora.addDiyFiled")},toDisplayString$1(unref(n)("lora.addDiyFiled")),9,_hoisted_49$2)]),Q.value.length?(openBlock(),createElementBlock("tr",_hoisted_50$2,[createBaseVNode("td",_hoisted_51$2,[createTextVNode(toDisplayString$1(unref(n)("lora.trainedWords"))+" ",1),(openBlock(),createElementBlock("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:unref(n)("lora.trainedWordsTip")},z[14]||(z[14]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_52$2)),E.value.length?(openBlock(),createElementBlock("div",_hoisted_53$2,[createTextVNode(toDisplayString$1(unref(n)("lora.selectedWords",{count:E.value.length}))+" ",1),createBaseVNode("button",{class:"copy-btn",onClick:te},toDisplayString$1(unref(n)("common.copy")),1)])):createCommentVNode("",!0)]),createBaseVNode("td",_hoisted_54$1,[createBaseVNode("ul",_hoisted_55$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ge.value?Q.value.slice(0,10):Q.value,(D,K)=>(openBlock(),createElementBlock("li",{key:"words-"+K,class:normalizeClass(["word-item",{"is-selected":ne(D.word),"is-hidden":ge.value&&K>=10}]),onClick:x=>Y(D.word)},[createBaseVNode("span",null,toDisplayString$1(D.word),1),D.civitai?(openBlock(),createElementBlock("svg",_hoisted_57$1,z[15]||(z[15]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)]))):createCommentVNode("",!0),D.count!=null?(openBlock(),createElementBlock("small",_hoisted_58$1,toDisplayString$1(D.count),1)):createCommentVNode("",!0)],10,_hoisted_56$1))),128)),Q.value.length>10?(openBlock(),createElementBlock("li",{key:0,class:"toggle-btn",onClick:re},toDisplayString$1(ge.value?unref(n)("common.showMore"):unref(n)("common.showLess")),1)):createCommentVNode("",!0)])])])):createCommentVNode("",!0)])]),(Z=r.value.images)!=null&&Z.length?(openBlock(),createElementBlock("ul",_hoisted_59$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value.images,(D,K)=>(openBlock(),createElementBlock("li",{key:K,class:"lora-detail__image-item"},[createBaseVNode("figure",null,[createBaseVNode("div",_hoisted_60$1,[createBaseVNode("div",{class:"image-action",onClick:x=>oe(D.url)}," 设置为Lora封面 ",8,_hoisted_61$1),createBaseVNode("img",{src:D.url},null,8,_hoisted_62$1)]),createBaseVNode("figcaption",_hoisted_63$1,[D.civitaiUrl?(openBlock(),createElementBlock("span",_hoisted_64$1,[createBaseVNode("a",{href:D.civitaiUrl,target:"_blank",class:"civitai-link"},z[16]||(z[16]=[createTextVNode(" C站 civitai "),createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})],-1)]),8,_hoisted_65$1)])):createCommentVNode("",!0),D.seed?(openBlock(),createElementBlock("span",_hoisted_66$1,[z[17]||(z[17]=createBaseVNode("label",null,"种子 seed",-1)),createTextVNode(" "+toDisplayString$1(D.seed),1)])):createCommentVNode("",!0),D.steps?(openBlock(),createElementBlock("span",_hoisted_67$1,[z[18]||(z[18]=createBaseVNode("label",null,"步数 steps",-1)),createTextVNode(" "+toDisplayString$1(D.steps),1)])):createCommentVNode("",!0),D.cfg?(openBlock(),createElementBlock("span",_hoisted_68$1,[z[19]||(z[19]=createBaseVNode("label",null,"引导系数 cfg",-1)),createTextVNode(" "+toDisplayString$1(D.cfg),1)])):createCommentVNode("",!0),D.sampler?(openBlock(),createElementBlock("span",_hoisted_69$1,[z[20]||(z[20]=createBaseVNode("label",null,"采样器 sampler",-1)),createTextVNode(" "+toDisplayString$1(D.sampler),1)])):createCommentVNode("",!0),D.model?(openBlock(),createElementBlock("span",_hoisted_70$1,[z[21]||(z[21]=createBaseVNode("label",null,"基础模型 model",-1)),createTextVNode(" "+toDisplayString$1(D.model),1)])):createCommentVNode("",!0),D.positive?(openBlock(),createElementBlock("span",_hoisted_71$1,[z[22]||(z[22]=createBaseVNode("label",null,"正向提示词 positive",-1)),createTextVNode(" "+toDisplayString$1(D.positive),1)])):createCommentVNode("",!0),D.negative?(openBlock(),createElementBlock("span",_hoisted_72$1,[z[23]||(z[23]=createBaseVNode("label",null,"反向提示词 negative",-1)),createTextVNode(" "+toDisplayString$1(D.negative),1)])):createCommentVNode("",!0)])])]))),128))])):createCommentVNode("",!0)])],512)]}),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),createVNode(loraRaw,{ref_key:"loraRawRef",ref:w},null,512)],64))}},loraDetail=_export_sfc(_sfc_main$i,[["__scopeId","data-v-1b0da0a7"]]),_hoisted_1$h={key:0,class:"lora-detail__loading"},_hoisted_2$g={class:"lora-detail__body"},_hoisted_3$g={class:"lora-detail__tags"},_hoisted_4$f=["title"],_hoisted_5$e=["title"],_hoisted_6$e={class:"lora-detail__table"},_hoisted_7$e={class:"label"},_hoisted_8$e={colspan:"2"},_hoisted_9$e={class:"label"},_hoisted_10$d={colspan:"2",class:"hash"},_hoisted_11$d={class:"label"},_hoisted_12$d={colspan:"2"},_hoisted_13$b=["href"],_hoisted_14$9={key:1,class:"not-found"},_hoisted_15$9=["title"],_hoisted_16$9={class:"label"},_hoisted_17$9=["title"],_hoisted_18$6={key:1,class:"text"},_hoisted_19$6={class:"label"},_hoisted_20$6={colspan:"2"},_hoisted_21$6={class:"label"},_hoisted_22$6={colspan:"2"},_hoisted_23$6={class:"label"},_hoisted_24$6=["title"],_hoisted_25$6={class:"text"},_hoisted_26$6={class:"actions"},_hoisted_27$6=["onClick","title"],_hoisted_28$5={class:"label"},_hoisted_29$5=["onUpdate:modelValue"],_hoisted_30$5={key:1},_hoisted_31$5={class:"text"},_hoisted_32$5={class:"actions"},_hoisted_33$5=["onClick","title"],_hoisted_34$5={key:0},_hoisted_35$5={class:"label"},_hoisted_36$5=["title"],_hoisted_37$4={key:0,class:"word-selection"},_hoisted_38$4={colspan:"2"},_hoisted_39$4={class:"word-list"},_hoisted_40$4=["onClick"],_hoisted_41$4={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},_hoisted_42$4={key:1},_hoisted_43$4={key:0,class:"lora-detail__images",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"12px"}},_hoisted_44$3={class:"image-wrapper",style:{height:"200px"}},_hoisted_45$3=["src"],_sfc_main$h={__name:"lora_card",props:{fileNmae:{type:String,required:!0},paddingLeft:{type:Number,required:!1,default:100},paddingTop:{type:Number,required:!1,default:100}},emits:["cardLeave","cardenter"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(!1),r=ref({}),s=ref(),l=ref({}),c=e,f=ref(""),u=a,d=()=>{u("cardLeave")},m=()=>{u("cardenter")},g=ref({}),v=ref({}),b=ref([]),$=[{key:"strengthMin",label:n("lora.strengthMin"),tip:n("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:n("lora.strengthMax"),tip:n("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:n("lora.strWeight"),tip:n("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:n("lora.promptWords"),tip:n("lora.promptWordsTip")}];onMounted(()=>{w()});const w=()=>{f.value=c.fileNmae,r.value={},b.value=[],v.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},loraApi.getLoraDetail({file:f.value,refresh:!1,light:!1}).then(G=>{r.value=G.data,nextTick(function(){var ee,A,L,W,ae,Y;r.value.name=r.value.name||((A=(ee=r.value.raw)===null||ee===void 0?void 0:ee.metadata)===null||A===void 0?void 0:A.ss_output_name===void 0?A["modelspec.title"]:A.ss_output_name)||"",v.value.nameValue=r.value.name,r.value.strengthMin=(L=r.value.strengthMin)!==null&&L!==void 0?L:"",v.value.minValue=r.value.strengthMin,r.value.strengthMax=(W=r.value.strengthMax)!==null&&W!==void 0?W:"",v.value.maxValue=r.value.strengthMax,r.value.userNote=(ae=r.value.userNote)!==null&&ae!==void 0?ae:"",v.value.notesValue=r.value.userNote,r.value.loraWorks=(Y=r.value.loraWorks)!==null&&Y!==void 0?Y:"",v.value.loraWorksValue=r.value.loraWorks,l.value=r.value.user_diy_fileds,o.value=!1})}).catch(G=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},C=G=>{navigator.clipboard.writeText(G).then(()=>{message$1({type:"success",str:"已复制到剪贴板"})}).catch(ee=>{message$1({type:"error",str:"复制失败"})})},P=computed(()=>{var G;return(G=r.value.links)==null?void 0:G.find(ee=>ee.includes("civitai.com/models"))}),y=computed(()=>{var G,ee;return((ee=(G=r.value.raw)==null?void 0:G.civitai)==null?void 0:ee.error)==="Model not found"}),E=computed(()=>r.value.trainedWords||[]),R=async()=>{var ee;const G=((ee=s.value)==null?void 0:ee.scrollTop)||0;o.value=!0,loraApi.getLoraRefresh({file:f.value}).then(A=>{r.value=A.data,nextTick(function(){var L,W,ae,Y,ne;r.value.name=r.value.name||((W=(L=r.value.raw)===null||L===void 0?void 0:L.metadata)===null||W===void 0?void 0:W.ss_output_name===void 0?W["modelspec.title"]:W.ss_output_name)||"",v.value.nameValue=r.value.name,r.value.strengthMin=(ae=r.value.strengthMin)!==null&&ae!==void 0?ae:"",v.value.minValue=r.value.strengthMin,r.value.strengthMax=(Y=r.value.strengthMax)!==null&&Y!==void 0?Y:"",v.value.maxValue=r.value.strengthMax,r.value.userNote=(ne=r.value.userNote)!==null&&ne!==void 0?ne:"",v.value.notesValue=r.value.userNote,o.value=!1}),nextTick(function(){o.value=!1}),s.value&&(s.value.scrollTop=G),message$1({type:"success",str:"message.dataLoaded"})}).catch(A=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},F=G=>{G in l.value?(r.value.user_diy_fileds||(r.value.user_diy_fileds={}),r.value.user_diy_fileds[G]={label:l.value[G].label,value:v.value[G]}):r.value[G]=v.value[G],j(r.value),g.value[G]=!1},H=G=>{g.value[G]=!1,v.value[G]=r.value[G]},j=G=>{var A;const ee=((A=s.value)==null?void 0:A.scrollTop)||0;o.value=!0,loraApi.postLoraSave(f.value,G).then(L=>{r.value=L.data,nextTick(function(){var W,ae,Y,ne,te;r.value.name=r.value.name||((ae=(W=r.value.raw)===null||W===void 0?void 0:W.metadata)===null||ae===void 0?void 0:ae.ss_output_name===void 0?ae["modelspec.title"]:ae.ss_output_name)||"",v.value.nameValue=r.value.name,r.value.strengthMin=(Y=r.value.strengthMin)!==null&&Y!==void 0?Y:"",v.value.minValue=r.value.strengthMin,r.value.strengthMax=(ne=r.value.strengthMax)!==null&&ne!==void 0?ne:"",v.value.maxValue=r.value.strengthMax,r.value.userNote=(te=r.value.userNote)!==null&&te!==void 0?te:"",v.value.notesValue=r.value.userNote,o.value=!1,nextTick(function(){s.value&&(s.value.scrollTop=ee)})}),message$1({type:"success",str:"message.saveSuccess"})}).catch(L=>{message$1({type:"warn",str:"message.networkError"}),o.value=!1})},fe=G=>{const ee=b.value.indexOf(G);ee===-1?b.value.push(G):b.value.splice(ee,1)},oe=G=>b.value.includes(G),V=async()=>{b.value.length&&navigator.clipboard.writeText(b.value).then(G=>{message$1({type:"success",str:"message.copySuccess"})},G=>{message$1({type:"warn",str:"message.copyFailed"})})},q=ref(!0),Q=()=>{q.value=!q.value};return t({refresh:()=>{w()}}),(G,ee)=>{var A;return openBlock(),createElementBlock("div",{class:"lora_catd_content",style:normalizeStyle(["left: "+e.paddingLeft+"px;top: "+e.paddingTop+"px;",{"font-size":"0.55em"}]),onMouseenter:m,onMouseleave:d},[createBaseVNode("div",{class:"close-button",onClick:d,title:"关闭"},ee[3]||(ee[3]=[createBaseVNode("span",null,"×",-1)])),createBaseVNode("div",{class:"lora-detail__content",ref_key:"loraContent",ref:s},[o.value?(openBlock(),createElementBlock("div",_hoisted_1$h,ee[4]||(ee[4]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[createBaseVNode("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)]))):createCommentVNode("",!0),createBaseVNode("div",_hoisted_2$g,[ee[13]||(ee[13]=createBaseVNode("div",{class:"lora-detail__title"},"Lora 信息",-1)),createBaseVNode("ul",_hoisted_3$g,[r.value.type?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass(["lora-detail__tag",`-type-${r.value.type.toLowerCase()}`]),title:unref(n)("lora.type")},toDisplayString$1(r.value.type),11,_hoisted_4$f)):createCommentVNode("",!0),r.value.baseModel?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(["lora-detail__tag",`-basemodel-${r.value.baseModel.toLowerCase()}`]),title:unref(n)("lora.baseModel")},toDisplayString$1(r.value.baseModel),11,_hoisted_5$e)):createCommentVNode("",!0)]),createBaseVNode("table",_hoisted_6$e,[createBaseVNode("tbody",null,[createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_7$e,toDisplayString$1(unref(n)("lora.file")),1),createBaseVNode("td",_hoisted_8$e,toDisplayString$1(r.value.file),1)]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_9$e,toDisplayString$1(unref(n)("lora.hash")),1),createBaseVNode("td",_hoisted_10$d,toDisplayString$1(r.value.sha256),1)]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_11$d,toDisplayString$1(unref(n)("lora.civitai")),1),createBaseVNode("td",_hoisted_12$d,[P.value?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("a",{href:P.value,target:"_blank",class:"civitai-link"},[ee[5]||(ee[5]=createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),createBaseVNode("span",null,toDisplayString$1(unref(n)("lora.viewOnCivitai")),1)],8,_hoisted_13$b),createBaseVNode("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:R},toDisplayString$1(unref(n)("lora.getCivitData")),1)],64)):y.value?(openBlock(),createElementBlock("div",_hoisted_14$9,[createBaseVNode("i",null,toDisplayString$1(unref(n)("lora.modelNotFound")),1),(openBlock(),createElementBlock("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:unref(n)("lora.modelNotFoundTip")},ee[6]||(ee[6]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_15$9))])):(openBlock(),createElementBlock("button",{key:2,class:"fetch-btn",onClick:R},toDisplayString$1(unref(n)("lora.fetchFromCivitai")),1))])]),createBaseVNode("tr",{class:normalizeClass({"is-editing":g.value.name})},[createBaseVNode("td",_hoisted_16$9,[createTextVNode(toDisplayString$1(unref(n)("lora.name"))+" ",1),(openBlock(),createElementBlock("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:unref(n)("lora.nameTip")},ee[7]||(ee[7]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_17$9))]),createBaseVNode("td",null,[g.value.name?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":ee[0]||(ee[0]=L=>v.value.name=L),type:"text",onKeyup:[ee[1]||(ee[1]=withKeys(L=>F("name"),["enter"])),ee[2]||(ee[2]=withKeys(L=>H("name"),["esc"]))],ref:"nameInput"},null,544)),[[vModelText,v.value.name]]):(openBlock(),createElementBlock("span",_hoisted_18$6,toDisplayString$1(r.value.name),1))])],2),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_19$6,toDisplayString$1(unref(n)("lora.baseModel")),1),createBaseVNode("td",_hoisted_20$6,toDisplayString$1(!r.value.baseModelFile&&!r.value.baseModelFile?"":(r.value.baseModel||"")+(r.value.baseModelFile?`
                                (${r.value.baseModelFile})`:"")),1)]),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_21$6,toDisplayString$1(unref(n)("lora.skipClip")),1),createBaseVNode("td",_hoisted_22$6,toDisplayString$1((G._t=(G._s=r.value.raw)===null||G._s===void 0?void 0:G._s.metadata)===null||G._t===void 0?void 0:G._t.ss_clip_skip),1)]),(openBlock(),createElementBlock(Fragment,null,renderList($,L=>createBaseVNode("tr",{key:L.key,class:normalizeClass({"is-editing":g.value[L.key]})},[createBaseVNode("td",_hoisted_23$6,[createTextVNode(toDisplayString$1(L.label)+" ",1),L.tip?(openBlock(),createElementBlock("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:L.tip},ee[8]||(ee[8]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_24$6)):createCommentVNode("",!0)]),createBaseVNode("td",null,[createBaseVNode("span",_hoisted_25$6,toDisplayString$1(r.value[L.key]),1)]),createBaseVNode("td",_hoisted_26$6,[createBaseVNode("button",{class:"copy-btn",onClick:W=>C(r.value[L.key]),title:unref(n)("lora.copy")},[ee[9]||(ee[9]=createBaseVNode("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),createTextVNode(" "+toDisplayString$1(unref(n)("lora.copy")),1)],8,_hoisted_27$6)])],2)),64)),(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,(L,W)=>{var ae;return openBlock(),createElementBlock("tr",{key:W,class:normalizeClass({"is-editing":g.value[W]})},[createBaseVNode("td",_hoisted_28$5,[g.value[W]?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":Y=>L.label=Y,type:"text"},null,8,_hoisted_29$5)),[[vModelText,L.label]]):(openBlock(),createElementBlock("span",_hoisted_30$5,toDisplayString$1(L.label),1))]),createBaseVNode("td",null,[createBaseVNode("span",_hoisted_31$5,toDisplayString$1(r.value.user_diy_fileds?(ae=r.value.user_diy_fileds[W])==null?void 0:ae.value:""),1)]),createBaseVNode("td",_hoisted_32$5,[createBaseVNode("button",{class:"copy-btn",onClick:Y=>{var ne;return C((ne=r.value.user_diy_fileds[W])==null?void 0:ne.value)},title:unref(n)("lora.copy")},[ee[10]||(ee[10]=createBaseVNode("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),createTextVNode(" "+toDisplayString$1(unref(n)("lora.copy")),1)],8,_hoisted_33$5)])],2)}),128)),E.value.length?(openBlock(),createElementBlock("tr",_hoisted_34$5,[createBaseVNode("td",_hoisted_35$5,[createTextVNode(toDisplayString$1(unref(n)("lora.trainedWords"))+" ",1),(openBlock(),createElementBlock("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:unref(n)("lora.trainedWordsTip")},ee[11]||(ee[11]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)]),8,_hoisted_36$5)),b.value.length?(openBlock(),createElementBlock("div",_hoisted_37$4,[createTextVNode(toDisplayString$1(unref(n)("lora.selectedWords",{count:b.value.length}))+" ",1),createBaseVNode("button",{class:"copy-btn",onClick:V},toDisplayString$1(unref(n)("common.copy")),1)])):createCommentVNode("",!0)]),createBaseVNode("td",_hoisted_38$4,[createBaseVNode("ul",_hoisted_39$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(q.value?E.value.slice(0,10):E.value,(L,W)=>(openBlock(),createElementBlock("li",{key:"words-"+W,class:normalizeClass(["word-item",{"is-selected":oe(L.word),"is-hidden":q.value&&W>=10}]),onClick:ae=>fe(L.word)},[createBaseVNode("span",null,toDisplayString$1(L.word),1),L.civitai?(openBlock(),createElementBlock("svg",_hoisted_41$4,ee[12]||(ee[12]=[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)]))):createCommentVNode("",!0),L.count!=null?(openBlock(),createElementBlock("small",_hoisted_42$4,toDisplayString$1(L.count),1)):createCommentVNode("",!0)],10,_hoisted_40$4))),128)),E.value.length>10?(openBlock(),createElementBlock("li",{key:0,class:"toggle-btn",onClick:Q},toDisplayString$1(q.value?unref(n)("common.showMore"):unref(n)("common.showLess")),1)):createCommentVNode("",!0)])])])):createCommentVNode("",!0)])]),(A=r.value.images)!=null&&A.length?(openBlock(),createElementBlock("ul",_hoisted_43$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value.images,(L,W)=>(openBlock(),createElementBlock("li",{key:W,class:"lora-detail__image-item"},[createBaseVNode("div",_hoisted_44$3,[createBaseVNode("img",{src:L.url,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,_hoisted_45$3)])]))),128))])):createCommentVNode("",!0)])],512)],36)}}},LoraCard=_export_sfc(_sfc_main$h,[["__scopeId","data-v-b11ec087"]]),_hoisted_1$g={class:"header-actions"},_hoisted_2$f=["title"],_hoisted_3$f=["onMouseover","onDragstart","onDrop"],_hoisted_4$e={class:"lora-info"},_hoisted_5$d={class:"lora-header"},_hoisted_6$d=["title"],_hoisted_7$d={class:"lora-actions"},_hoisted_8$d=["onClick","title"],_hoisted_9$d=["onClick","title"],_hoisted_10$c={class:"lora-weights-row"},_hoisted_11$c={class:"weight-item-col"},_hoisted_12$c=["onUpdate:modelValue"],_hoisted_13$a={class:"weight-item-col"},_hoisted_14$8=["onUpdate:modelValue"],_hoisted_15$8={class:"switch-item-col"},_hoisted_16$8={class:"switch"},_hoisted_17$8=["checked","onChange"],prefix$4="weilin_prompt_ui_",_sfc_main$g={__name:"lora_stack",props:{isOpen:{type:Boolean,default:!1},selectedLoras:{type:Array,default:[]}},emits:["close","update:selectedLoras"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(!1),r=ref(""),s=ref(100),l=ref(0),c=ref(),f=ref(!1),u=ref(!1),d=ref(),m=e,g=a,v=(oe,V)=>{if(u.value=!0,r.value===oe&&o.value)return;const Q=V.currentTarget.getBoundingClientRect();let G={left:Q.left-450-10,top:Q.top};G.left<10&&(G.left=Q.right+10),G.top=Math.max(10,Math.min(G.top,window.innerHeight-310)),s.value=G.left,l.value=G.top,o.value=!0,r.value=oe,nextTick(()=>{d.value.refresh()})},b=()=>{u.value=!1,setTimeout(()=>{!f.value&&!u.value&&(o.value=!1,r.value="",f.value=!1)},200)},$=()=>{f.value=!0,u.value=!0},w=()=>{o.value=!1,r.value="",f.value=!1},C=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora"},"*")},P=oe=>{oe.hidden=!oe.hidden},y=oe=>{console.log(m.selectedLoras),m.selectedLoras&&!m.selectedLoras.find(V=>V.name===oe.name)&&(m.selectedLoras.push({name:oe.name,weight:1,text_encoder_weight:1,...oe}),g("update:selectedLoras",m.selectedLoras))},E=oe=>{const V=m.selectedLoras.findIndex(q=>q.name===oe.name);V>-1&&(m.selectedLoras.splice(V,1),g("update:selectedLoras",m.selectedLoras))},R=ref(),F=oe=>{R.value.open({name:oe.lora})};window.addEventListener("message",oe=>{oe.data.type==="weilin_prompt_ui_selectLora"&&y(oe.data.lora)});const H=ref(null),j=oe=>{H.value=oe},fe=oe=>{if(H.value===null||H.value===oe)return;const V=m.selectedLoras.splice(H.value,1)[0];m.selectedLoras.splice(oe,0,V),H.value=null,g("update:selectedLoras",m.selectedLoras)};return t({addLora:y,removeLora:E}),(oe,V)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${prefix$4}lora-stack`),style:normalizeStyle([{width:e.isOpen?"300px":"0"},{paddingRight:e.isOpen?"16px":"0"}])},[createBaseVNode("div",{class:normalizeClass(`${prefix$4}lora-content`)},[createBaseVNode("div",{class:normalizeClass(`${prefix$4}lora-header`)},[createBaseVNode("h3",{class:normalizeClass(`${prefix$4}lora-title`)},toDisplayString$1(unref(n)("controls.loraStack")),3),createBaseVNode("div",_hoisted_1$g,[createBaseVNode("button",{class:normalizeClass(`${prefix$4}add-btn`),onClick:C,title:unref(n)("controls.addLora")},V[2]||(V[2]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)]),10,_hoisted_2$f),createBaseVNode("button",{class:normalizeClass(`${prefix$4}close-btn`),onClick:V[0]||(V[0]=q=>oe.$emit("close"))},V[3]||(V[3]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),2)])],2),createBaseVNode("div",{class:normalizeClass(`${prefix$4}lora-body`)},[createBaseVNode("div",{class:normalizeClass(`${prefix$4}lora-list`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.selectedLoras,(q,Q)=>(openBlock(),createElementBlock("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:c,key:q.name,class:normalizeClass(["lora-item",{"hidden-lora":q.hidden}]),onMouseover:O=>v(q.lora,O),onMouseleave:b,draggable:"true",onDragstart:O=>j(Q),onDragover:V[1]||(V[1]=withModifiers(()=>{},["prevent"])),onDrop:O=>fe(Q)},[createBaseVNode("div",_hoisted_4$e,[createBaseVNode("div",_hoisted_5$d,[createBaseVNode("span",{class:"lora-name",title:q.name},toDisplayString$1(q.name),9,_hoisted_6$d),createBaseVNode("div",_hoisted_7$d,[createBaseVNode("button",{class:"look-on-btn",onClick:O=>F(q),title:unref(n)("controls.lookOnLora")},V[4]||(V[4]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[createBaseVNode("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),createBaseVNode("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),createBaseVNode("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),createBaseVNode("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)]),8,_hoisted_8$d),createBaseVNode("button",{class:"remove-btn",onClick:O=>E(q),title:unref(n)("controls.removeLora")},V[5]||(V[5]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,_hoisted_9$d)])]),createBaseVNode("div",_hoisted_10$c,[createBaseVNode("div",_hoisted_11$c,[createBaseVNode("label",null,toDisplayString$1(unref(n)("loraManager.modelWeight")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":O=>q.weight=O,class:"lora-weight",step:"0.1"},null,8,_hoisted_12$c),[[vModelText,q.weight]])]),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("label",null,toDisplayString$1(unref(n)("loraManager.textEncoderWeight")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":O=>q.text_encoder_weight=O,class:"lora-weight",step:"0.1"},null,8,_hoisted_14$8),[[vModelText,q.text_encoder_weight]])]),createBaseVNode("div",_hoisted_15$8,[createBaseVNode("label",null,toDisplayString$1(q.hidden?unref(n)("lora.hideLora"):unref(n)("lora.showLora")),1),createBaseVNode("label",_hoisted_16$8,[createBaseVNode("input",{type:"checkbox",checked:!q.hidden,onChange:O=>P(q)},null,40,_hoisted_17$8),V[6]||(V[6]=createBaseVNode("span",{class:"slider"},null,-1))])])])])],42,_hoisted_3$f))),128))],2)],2)],2),createVNode(loraDetail,{ref_key:"loraDetailLoraStackRef",ref:R},null,512),o.value?(openBlock(),createBlock(LoraCard,{key:0,ref_key:"loraCardItem",ref:d,fileNmae:r.value,paddingLeft:s.value,paddingTop:l.value,onCardLeave:w,onCardenter:$},null,8,["fileNmae","paddingLeft","paddingTop"])):createCommentVNode("",!0)],6))}},LoraStack=_export_sfc(_sfc_main$g,[["__scopeId","data-v-22aa3dae"]]),_hoisted_1$f={class:"main-label-manager"},_hoisted_2$e={class:"mlm-header"},_hoisted_3$e={class:"mlm-grid"},_hoisted_4$d=["disabled"],_hoisted_5$c=["disabled"],_hoisted_6$c=["onClick","title","onDragstart","onDragenter","onDrop"],_hoisted_7$c={class:"mlm-item-main"},_hoisted_8$c={key:0,class:"pin-badge"},_hoisted_9$c={class:"mlm-name"},_hoisted_10$b={class:"mlm-item-actions"},_hoisted_11$b=["title","onClick"],_hoisted_12$b=["title","onClick"],STORAGE_KEY="weilin_prompt_ui_main_labels_v1",_sfc_main$f={__name:"main_label_manager",props:{selectedId:{type:String,default:null}},emits:["select"],setup(e,{expose:t,emit:a}){const n=e,o=a,r=ref(""),s=ref([]),l=ref(n.selectedId),c=ref(!0),f=ref(!0),u=ref("time"),d=ref(null),m=ref(null);function g(){const W={items:s.value,settings:{sortMode:u.value,sortTimeDesc:c.value,sortNameAsc:f.value,selectedId:l.value}};localStorage.setItem(STORAGE_KEY,JSON.stringify(W))}function v(){try{const W=localStorage.getItem(STORAGE_KEY);if(!W)throw new Error("no data");const ae=JSON.parse(W),Y=Array.isArray(ae)?ae:(ae==null?void 0:ae.items)??[],ne=Array.isArray(ae)?{}:(ae==null?void 0:ae.settings)??{};s.value=Y.map((te,ge)=>({id:te.id??C(),name:te.name??"未命名",content:te.content??"",createdAt:te.createdAt??te.updatedAt??Date.now(),updatedAt:te.updatedAt??te.createdAt??Date.now(),pinned:!!te.pinned,highlighted:!!te.highlighted,order:typeof te.order=="number"?te.order:ge})),ne.sortMode&&(u.value=ne.sortMode),typeof ne.sortTimeDesc=="boolean"&&(c.value=ne.sortTimeDesc),typeof ne.sortNameAsc=="boolean"&&(f.value=ne.sortNameAsc),(typeof ne.selectedId=="string"||ne.selectedId===null)&&(l.value=ne.selectedId)}catch{s.value=[]}}onMounted(()=>{var W;if(v(),s.value.length===0){const ae=C();s.value.push({id:ae,name:"示例标签",content:"",createdAt:Date.now(),updatedAt:Date.now(),pinned:!1,highlighted:!1,order:0}),g(),l.value=ae;return}if(!P(l.value))l.value=((W=s.value[0])==null?void 0:W.id)??null;else{const ae=P(l.value);o("select",ae?{...ae}:null)}}),watch(()=>n.selectedId,W=>{l.value=W}),watch([u,c,f],()=>{g()}),watch(s,()=>{g()},{deep:!0}),watch(l,W=>{g();const ae=W?P(W):null;o("select",ae?{...ae}:null)});const b=computed(()=>{const W=r.value.trim().toLowerCase();return W?s.value.filter(ae=>(ae.name||"").toLowerCase().includes(W)):s.value}),$=computed(()=>{const W=[...b.value];if(u.value==="manual")return W.sort((te,ge)=>{const re=te.order??0,B=ge.order??0;return re!==B?re-B:(te.createdAt??0)-(ge.createdAt??0)});const ae=(te,ge)=>{const re=te.name||"",B=ge.name||"";let z=re.localeCompare(B,void 0,{numeric:!0,sensitivity:"base"});return f.value||(z=-z),z},Y=(te,ge)=>{let re=te.createdAt-ge.createdAt;return c.value&&(re=-re),re},ne=te=>te.pinned?0:1;return W.sort((te,ge)=>{const re=ne(te)-ne(ge);if(re!==0)return re;if(u.value==="name"){const z=ae(te,ge);return z!==0?z:Y(te,ge)}const B=Y(te,ge);return B!==0?B:ae(te,ge)}),W}),w=computed(()=>P(l.value));function C(){return"mlm_"+Math.random().toString(36).slice(2)+"_"+Date.now()}function P(W){return s.value.find(ae=>ae.id===W)||null}function y(W){l.value=W.id,o("select",{...W})}function E(){const W=window.prompt("新建标签名称：","");if(!W)return;O(),u.value="manual";const ae=C(),Y=Date.now(),ne=s.value.reduce((ge,re)=>typeof re.order=="number"?Math.min(ge,re.order):ge,0),te={id:ae,name:W.trim(),content:"",createdAt:Y,updatedAt:Y,pinned:!1,highlighted:!1,order:ne-1};s.value.push(te),g(),l.value=ae,o("select",{...te})}function R(){const W=w.value;if(!W)return;const ae=window.prompt("重命名标签：",W.name||"");ae&&(W.name=ae.trim(),W.updatedAt=Date.now(),g())}function F(){const W=w.value;if(!W||!window.confirm(`确定删除标签"${W.name}"吗？`))return;const ae=s.value.findIndex(Y=>Y.id===W.id);ae>=0&&s.value.splice(ae,1),g(),s.value.length?(l.value=s.value[0].id,o("select",{...s.value[0]})):(l.value=null,o("select",null))}function H(){u.value="time",c.value=!c.value}function j(){u.value="name",f.value=!f.value}function fe(W){W.pinned=!W.pinned,W.updatedAt=Date.now(),g()}function oe(W){W.highlighted=!W.highlighted,W.updatedAt=Date.now(),g()}function V(W){const ae=w.value;ae&&(ae.content=W??"",ae.updatedAt=Date.now(),clearTimeout(q),q=setTimeout(()=>g(),400))}let q=null;function Q(W){try{const ae=new Date(W);return`${ae.getFullYear()}-${(ae.getMonth()+1).toString().padStart(2,"0")}-${ae.getDate().toString().padStart(2,"0")} ${ae.getHours().toString().padStart(2,"0")}:${ae.getMinutes().toString().padStart(2,"0")}`}catch{return""}}function O(){$.value.forEach((ae,Y)=>{ae.order=Y})}function G(W,ae,Y){try{Y.dataTransfer.effectAllowed="move"}catch{}d.value=W.id,m.value=null,O(),u.value="manual"}function ee(W){d.value&&(m.value=W.id)}function A(W){if(!d.value)return;const ae=d.value,Y=W==null?void 0:W.id;if(!Y||ae===Y)return L();const ne=[...$.value],te=ne.findIndex(B=>B.id===ae),ge=ne.findIndex(B=>B.id===Y);if(te<0||ge<0)return L();const[re]=ne.splice(te,1);ne.splice(ge,0,re),ne.forEach((B,z)=>{B.order=z}),g(),L()}function L(){d.value=null,m.value=null}return t({updateSelectedContent:V}),(W,ae)=>(openBlock(),createElementBlock("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$e,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":ae[0]||(ae[0]=Y=>r.value=Y),class:"mlm-search",type:"text",placeholder:"搜索标签…"},null,512),[[vModelText,r.value]]),createBaseVNode("button",{class:"mlm-add",onClick:E},"+ 新建标签"),createBaseVNode("div",_hoisted_3$e,[createBaseVNode("button",{class:"mlm-sort",onClick:H}," 按时间 "+toDisplayString$1(c.value?"后→先":"先→后"),1),createBaseVNode("button",{class:"mlm-sort",onClick:j}," 按名称 "+toDisplayString$1(f.value?"A→Z":"Z→A"),1),createBaseVNode("button",{class:"mlm-edit",disabled:!w.value,onClick:R},"编辑",8,_hoisted_4$d),createBaseVNode("button",{class:"mlm-delete",disabled:!w.value,onClick:F},"删除",8,_hoisted_5$c)])]),createVNode(TransitionGroup,{name:"mlm",tag:"div",class:"mlm-list"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList($.value,(Y,ne)=>(openBlock(),createElementBlock("div",{key:Y.id,class:normalizeClass(["mlm-item",{active:Y.id===l.value,pinned:!!Y.pinned,highlighted:!!Y.highlighted},{dragging:d.value===Y.id,"drag-over":m.value===Y.id}]),onClick:te=>y(Y),title:Y.updatedAt?Q(Y.updatedAt):"",draggable:"true",onDragstart:te=>G(Y,ne,te),onDragenter:withModifiers(te=>ee(Y),["prevent"]),onDragover:ae[1]||(ae[1]=withModifiers(()=>{},["prevent"])),onDrop:withModifiers(te=>A(Y),["prevent"]),onDragend:L},[createBaseVNode("div",_hoisted_7$c,[Y.pinned?(openBlock(),createElementBlock("span",_hoisted_8$c,"置顶")):createCommentVNode("",!0),createBaseVNode("span",_hoisted_9$c,toDisplayString$1(Y.name),1)]),createBaseVNode("div",_hoisted_10$b,[createBaseVNode("button",{class:normalizeClass(["mini-btn","pin",{active:Y.pinned}]),title:Y.pinned?"取消置顶":"置顶",onClick:withModifiers(te=>fe(Y),["stop"])},ae[2]||(ae[2]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[createBaseVNode("path",{d:"M4 14h4v6h8v-6h4L12 4 4 14z"})],-1)]),10,_hoisted_11$b),createBaseVNode("button",{class:normalizeClass(["mini-btn","highlight",{active:Y.highlighted}]),title:Y.highlighted?"取消高亮":"高亮",onClick:withModifiers(te=>oe(Y),["stop"])},ae[3]||(ae[3]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[createBaseVNode("path",{d:"M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)]),10,_hoisted_12$b)])],42,_hoisted_6$c))),128))]),_:1})]))}},MainLabelManager=_export_sfc(_sfc_main$f,[["__scopeId","data-v-a435a9c3"]]);function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i18nJsautotranslate$1={exports:{}},i18nJsautotranslate=i18nJsautotranslate$1.exports,hasRequiredI18nJsautotranslate;function requireI18nJsautotranslate(){return hasRequiredI18nJsautotranslate||(hasRequiredI18nJsautotranslate=1,function(module){if(typeof translate=="object"&&typeof translate.version=="string")throw new Error("translate.js 已经加载过一次了，当前是重复加载，避免你的翻译出现异常，已帮你拦截此次加载。本信息只是给你一个提示，你可以检查一下你的项目中是否出现了重复引入 translate.js ，当然，这个异常并不会影响到你的具体使用，它已经自动帮你处理拦截了这个异常，只不过提示出来是让你知道，你的代码里出现了重复引入的情况。");var translate={version:"3.13.12.20250307",useVersion:"v2",setUseVersion2:function(){translate.useVersion="v2",console.log("提示：自 v2.10 之后的版本默认就是使用V2版本（当前版本为:"+translate.version+"）， translate.setUseVersion2() 可以不用再加这一行了。当然加了也无所谓，只是加了跟不加是完全一样的。")},translate:null,includedLanguages:"zh-CN,zh-TW,en",resourcesUrl:"//res.zvo.cn/translate",selectLanguageTag:{documentId:"translate",show:!0,languages:"",alreadyRender:!1,selectOnChange:function(e){var t=e.target.value;translate.changeLanguage(t)},refreshRender:function(){let e=document.getElementById(translate.selectLanguageTag.documentId+"SelectLanguage");e&&e.parentNode.removeChild(e),translate.selectLanguageTag.alreadyRender=!1,translate.selectLanguageTag.render()},customUI:function(e){var t=function(l){translate.selectLanguageTag.selectOnChange(l)},a=document.createElement("select");a.id=translate.selectLanguageTag.documentId+"SelectLanguage",a.className=translate.selectLanguageTag.documentId+"SelectLanguage";for(var n=translate.language.getCurrent(),o=0;o<e.length;o++){var r=document.createElement("option");if(r.setAttribute("value",e[o].id),translate.selectLanguageTag.languages.length>0){var s=(","+translate.selectLanguageTag.languages+",").toLowerCase();if(s.indexOf(","+e[o].id.toLowerCase()+",")<0)continue}n!=null&&typeof n<"u"&&n.length>0?n==e[o].id&&r.setAttribute("selected","selected"):e[o].id==translate.language.getLocal()&&r.setAttribute("selected","selected"),r.appendChild(document.createTextNode(e[o].name)),a.appendChild(r)}window.addEventListener?a.addEventListener("change",t,!1):a.attachEvent("onchange",t),document.getElementById(translate.selectLanguageTag.documentId).appendChild(a)},render:function(){if(!translate.selectLanguageTag.alreadyRender&&(translate.selectLanguageTag.alreadyRender=!0,!!translate.selectLanguageTag.show)){if(document.getElementById(translate.selectLanguageTag.documentId)==null){var e=document.getElementsByTagName("body");if(e.length==0){console.log("body tag not find, translate.selectLanguageTag.render() is not show Select Language");return}var t=e[0],a=document.createElement("div");a.id=translate.selectLanguageTag.documentId,t.appendChild(a)}else if(document.getElementById(translate.selectLanguageTag.documentId+"SelectLanguage")!=null)return;translate.request.post(translate.request.api.language,{},function(n){if(n.result==0){console.log("load language list error : "+n.info);return}translate.selectLanguageTag.customUI(n.list)},null)}}},localLanguage:"zh-CN",googleTranslateElementInit:function(){var e="";document.getElementById("translate")!=null&&(e="translate"),translate.translate=new google.translate.TranslateElement({pageLanguage:"zh-CN",includedLanguages:translate.selectLanguageTag.languages,layout:0},e)},execute_v1:function(){console.log("=====ERROR======"),console.log("The v1 version has been discontinued since 2022. Please use the latest V3 version and refer to: http://translate.zvo.cn/41162.html")},setCookie:function(e,t){var a=e+"="+escape(t);document.cookie=a},getCookie:function(e){for(var t=document.cookie,a=t.split("; "),n=0;n<a.length;n++){var o=a[n].split("=");if(o[0]==e)return unescape(o[1])}return""},currentLanguage:function(){var e=translate.getCookie("googtrans");return e.length>0?e.substr(e.lastIndexOf("/")+1,e.length-1):translate.localLanguage},changeLanguage:function(e){var t=",en,de,hi,lt,hr,lv,ht,hu,zh-CN,hy,uk,mg,id,ur,mk,ml,mn,af,mr,uz,ms,el,mt,is,it,my,es,et,eu,ar,pt-PT,ja,ne,az,fa,ro,nl,en-GB,no,be,fi,ru,bg,fr,bs,sd,se,si,sk,sl,ga,sn,so,gd,ca,sq,sr,kk,st,km,kn,sv,ko,sw,gl,zh-TW,pt-BR,co,ta,gu,ky,cs,pa,te,tg,th,la,cy,pl,da,tr,";if(t.indexOf(","+e+",")>-1){console.log("您使用的是v1版本的切换语种方式，v1已在2021年就以废弃，请更换为v2，参考文档： http://translate.zvo.cn/41549.html"),translate.check();var a="/"+translate.localLanguage+"/"+e,n=document.location.host.split(".");if(n.length>2){var o=n[n.length-2]+"."+n[n.length-1];document.cookie="googtrans=;expires="+new Date(1)+";domain="+o+";path=/",document.cookie="googtrans="+a+";domain="+o+";path=/"}translate.setCookie("googtrans",""+a),translate.refreshCurrentPage();return}if(translate.useVersion="v2",translate.to!=null&&translate.to.length>0&&translate.to!=translate.language.getLocal())var r=!0;if(translate.to=e,translate.storage.set("to",e),r)location.reload();else{translate.execute();const s=document.querySelectorAll("iframe");for(let l=0;l<s.length;l++){const f=s[l].contentWindow;typeof f.translate=="object"&&typeof f.translate.version=="string"&&f.translate.execute()}}},check:function(){window.location.protocol=="file:"&&console.log(`\r
---WARNING----\r
translate.js 主动翻译组件自检异常，当前协议是file协议，翻译组件要在正常的线上http、https协议下才能正常使用翻译功能\r
------------`)},to:"",autoDiscriminateLocalLanguage:!1,documents:[],inProgressNodes:[],ignore:{tag:["style","script","link","pre","code"],class:["ignore","translateSelectLanguage"],id:[],isIgnore:function(e){if(e==null||typeof e>"u")return!1;for(var t=e,a=100;a-- >0;){if(t==null||typeof t>"u")return!1;var n=translate.element.getNodeName(t).toLowerCase();if(n.length>0){if(n=="body"||n=="html"||n=="#document")return!1;if(translate.ignore.tag.indexOf(n)>-1)return!0}if(t.className!=null){var o=t.className;if(o==null||typeof o!="string")continue;o=o.trim().split(" ");for(var r=0;r<o.length;r++)if(o[r]!=null&&o[r].trim().length>0&&translate.ignore.class.indexOf(o[r])>-1)return!0}if(t.id!=null&&typeof t.id<"u"&&translate.ignore.id.indexOf(t.id)>-1)return!0;t=t.parentNode}return!1},text:[]},refreshCurrentPage:function(){location.reload()},nomenclature:{data:new Array,old_Data:[],set:function(e){alert("请将 translate.nomenclature.set 更换为 append，具体使用可参考： https://github.com/xnx3/translate ")},append:function(e,t,a){typeof translate.nomenclature.data[e]>"u"&&(translate.nomenclature.data[e]=new Array),typeof translate.nomenclature.data[e][t]>"u"&&(translate.nomenclature.data[e][t]=new Array);for(var n=a.split(`
`),o=0;o<n.length;o++){var r=n[o].trim();if(!(r.length<1)){var s=r.split("=");if(s.length==2){var l=s[0].trim(),c=s[1].trim();l.length==0||c.length==0||(translate.nomenclature.data[e][t][l]=c)}}}translate.nomenclature.data[e][t]=translate.util.objSort(translate.nomenclature.data[e][t])},get:function(){return translate.nomenclature.data},dispose:function(e){if(e==null||e.length==0||typeof translate.nomenclature.data[translate.language.getLocal()]>"u"||typeof translate.nomenclature.data[translate.language.getLocal()][translate.to]>"u")return e;for(var t in translate.nomenclature.data[translate.language.getLocal()][translate.to]){var a=translate.nomenclature.data[translate.language.getLocal()][translate.to][t];if(typeof a!="function"){var n=e.indexOf(t);if(n>-1)if(translate.language.getLocal()=="english"){var o="";if(n!=0){o=e.substr(n-1,1);var r=translate.language.getCharLanguage(o);if(r=="english"||r=="romance")continue}var s="";if(n+t.length!=e.length){s=e.substr(n+t.length,1);var r=translate.language.getCharLanguage(s);if(r=="english"||r=="romance")continue}e=e.replace(new RegExp(o+t+s,"g"),o+a+s)}else e=e.replace(new RegExp(t,"g"),a)}}return e}},office:{export:function(){if(translate.language.getLocal()==translate.language.getCurrent()){alert("本地语种跟要翻译的语种一致，无需导出");return}var e="";for(var t in translate.nodeQueue){translate.nodeQueue[t];for(var a in translate.nodeQueue[t].list)if(!(typeof a!="string"||a.length<1))for(var n in translate.nodeQueue[t].list[a])e=e+`
`+translate.nodeQueue[t].list[a][n].original+"="+translate.storage.get("hash_"+translate.language.getCurrent()+"_"+n)}e.length>0?(e="translate.office.append('"+translate.language.getCurrent()+"',`"+e+"\n`);",translate.util.loadMsgJs(),msg.popups({text:'<textarea id="msgPopupsTextarea" style="width:100%; height:100%; color: black; padding: 8px;">loaing...</textarea>',width:"750px",height:"600px",padding:"1px"}),document.getElementById("msgPopupsTextarea").value=e):msg.alert("无有效内容！")},showPanel:function(){let e=document.createElement("div");e.setAttribute("id","translate_export"),e.setAttribute("class","ignore");let t=document.createElement("button");t.onclick=function(){translate.office.export()},t.innerHTML="导出配置信息",t.setAttribute("style","margin-left: 72px; margin-top: 30px; margin-bottom: 20px; font-size: 25px; background-color: blue; padding: 15px; padding-top: 3px; padding-bottom: 3px; border-radius: 3px;"),e.appendChild(t);let a=document.createElement("div");a.innerHTML='1. 首先将当前语种切换为你要翻译的语种<br/>2. 点击导出按钮，将翻译的配置信息导出<br/>3. 将导出的配置信息粘贴到代码中，即可完成<br/><a href="asd" target="_black" style="color: aliceblue;">点此进行查阅详细使用说明</a>',a.setAttribute("style","font-size: 14px; padding: 12px;"),e.appendChild(a),e.setAttribute("style","background-color: black; color: #fff; width: 320px; height: 206px; position: fixed; bottom: 50px; right: 50px;"),document.body.appendChild(e),translate.util.loadMsgJs()},append:function(e,t){for(var a=t.split(`
`),n=0;n<a.length;n++){var o=a[n].trim();if(!(o.length<1)){var r=o.split("=");if(r.length==2){var s=r[0],l=r[1];s.length==0||l.length==0||translate.storage.set("hash_"+e+"_"+translate.util.hash(s),l)}}}}},setAutoDiscriminateLocalLanguage:function(){translate.autoDiscriminateLocalLanguage=!0},nodeQueue:{},setDocuments:function(e){e==null||typeof e>"u"||(typeof e.length>"u"?translate.documents[0]=e:translate.documents=e,translate.nodeQueue={})},getDocuments:function(){if(translate.documents!=null&&typeof translate.documents<"u"&&translate.documents.length>0)return translate.documents;var e=new Array;return e[0]=document.documentElement,e},listener:{isStart:!1,start:function(){translate.temp_linstenerStartInterval=setInterval(function(){if(document.readyState=="complete"){if(clearInterval(translate.temp_linstenerStartInterval),translate.language.getCurrent()==translate.language.getLocal()&&!translate.language.translateLocal)return;translate.listener.addListener()}},300)},ignoreNode:[],translateExecuteNodeIgnoreExpireTime:1e3,addIgnore:function(e,t){let a="";typeof e=="string"?a=e:a=nodeuuid.uuid(e),translate.listener.ignoreNode[a]=Date.now()+t},refreshIgnoreNode:function(){var e=Date.now();for(const t in translate.listener.ignoreNode)translate.listener.ignoreNode[t]<e&&delete translate.listener.ignoreNode[t]},addListener:function(){translate.listener.isStart=!0,translate.listener.config={attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},translate.listener.callback=function(n,o){var r=[];for(let d of n){let m=[];d.type==="childList"?d.addedNodes.length>0?m=d.addedNodes:d.removedNodes.length>0:d.type==="attributes"||d.type==="characterData"&&(m=[d.target]);for(let g of m){for(var s=!1,l=0;l<r.length;l++)if(r[l].isSameNode(g)){s=!0;break}if(s)break;r.push.apply(r,[g])}}if(r.length>0){var c=[];for(let d of r){for(var f=!1,u=0;u<translate.inProgressNodes.length;u++)if(translate.inProgressNodes[u].node.isSameNode(d)){f=!0;break}if(f)continue;let m=nodeuuid.uuid(d);typeof translate.listener.ignoreNode[m]=="number"&&translate.listener.ignoreNode[m]>Date.now()||c.push(d)}if(c.length<1)return;setTimeout(function(){translate.execute(c)},10)}},translate.listener.observer=new MutationObserver(translate.listener.callback);for(var e=translate.getDocuments(),t=0;t<e.length;t++){var a=e[t];a!=null&&translate.listener.observer.observe(a,translate.listener.config)}},renderTaskFinish:function(e){},execute:{renderStartByApi:[],renderStartByApiRun:function(e){for(var t=0;t<translate.listener.execute.renderStartByApi.length;t++)try{translate.listener.execute.renderStartByApi[t](e)}catch(a){console.log(a)}},renderFinishByApi:[],renderFinishByApiRun:function(e){for(var t=0;t<translate.listener.execute.renderFinishByApi.length;t++)try{translate.listener.execute.renderFinishByApi[t](e)}catch(a){console.log(a)}}}},renderTask:class{constructor(){this.taskQueue=[],this.nodes=[]}add(e,t,a,n){var o=translate.element.nodeAnalyse.get(e,n),r=translate.util.hash(o.text);typeof this.nodes[r]>"u"&&(this.nodes[r]=new Array),this.nodes[r].push(e);var s=this.taskQueue[r];(s==null||typeof s>"u")&&(s=new Array);var l=new Array;t.substr(0,1)==" "&&a.substr(0,1)!=" "&&(a=" "+a),t.substr(t.length-1,1)===" "&&a.substr(0,1)!=" "&&(a=a+" "),l.originalText=t,l.resultText=a,l.attribute=n,s.push(l),this.taskQueue[r]=s}execute(){for(var e in this.taskQueue){var t=this.taskQueue[e];typeof t!="function"&&(t.sort((l,c)=>c.originalText.length-l.originalText.length),this.taskQueue[e]=t)}translate.listener.refreshIgnoreNode();for(var e in this.nodes)for(var t=this.taskQueue[e],a=0;a<this.nodes[e].length;a++)for(var n=0;n<t.length;n++){var o=t[n];if(typeof t!="function"){var r=this.nodes[e][n];setTimeout(function(f){for(var u=0;u<translate.inProgressNodes.length;u++)if(translate.inProgressNodes[u].node.isSameNode(f)){translate.inProgressNodes[u].number=translate.inProgressNodes[u].number-1,translate.inProgressNodes[u].number<1&&translate.inProgressNodes.splice(u,1);break}},50,r),translate.listener.addIgnore(this.nodes[e][n],translate.listener.translateExecuteNodeIgnoreExpireTime),translate.element.nodeAnalyse.set(this.nodes[e][n],o.originalText,o.resultText,o.attribute)}}if(typeof this.taskQueue<"u"&&Object.keys(this.taskQueue).length>0){var s=this;setTimeout(function(){for(var l in s.nodes)for(var c in s.nodes[l]){var f=translate.element.nodeAnalyse.get(s.nodes[l][0]),u=nodeuuid.uuid(f.node);u.length!=0&&(translate.nodeHistory[u]={},translate.nodeHistory[u].node=f.node,translate.nodeHistory[u].translateText=f.text)}translate.listener.renderTaskFinish(s)},50)}}},state:0,waitingExecute:{queue:[],add:function(e){translate.waitingExecute.queue.push(e);let t=setInterval(function(){if(translate.state==0){clearInterval(t);var a=translate.waitingExecute.get();translate.execute(a)}},500)},get:function(){return translate.waitingExecute.queue.length>0?translate.waitingExecute.queue.shift():(console.log("警告， translate.waitingExecute.get 出现异常，quque已空，但还往外取。"),null)},isAllExecuteFinish:function(e){for(var t in translate.translateRequest[e])for(var a=0;a<translate.translateRequest[e][t].length;a++)if(translate.translateRequest[e][t][a].executeFinish==0)return;translate.state=0,translate.executeNumber++,translate.listener.execute.renderFinishByApiRun(e)}},executeNumber:0,execute:function(e){if(translate.state!=0){console.log("当前翻译还未完结，新的翻译任务已加入等待翻译队列中，待翻译结束后便会执行当前翻译任务。"),translate.waitingExecute.add(e);return}translate.state=1,typeof e<"u"&&(translate.useVersion="v2"),translate.useVersion=="v1"&&(console.log("提示：https://github.com/xnx3/translate 在 v2.5 版本之后，由于谷歌翻译调整，免费翻译通道不再支持，所以v1版本的翻译接口不再被支持，v1全线下架。考虑到v1已不能使用，当前已自动切换到v2版本。如果您使用中发现什么异常，请针对v2版本进行适配。"),translate.useVersion="v2");try{translate.init()}catch{}var t=translate.util.uuid();if(translate.to==null||translate.to==""){var a=translate.storage.get("to");a!=null&&typeof a<"u"&&a.length>0&&(translate.to=a)}try{translate.selectLanguageTag.render()}catch(x){console.log(x)}if(translate.to==null||typeof translate.to>"u"||translate.to.length==0){translate.autoDiscriminateLocalLanguage&&translate.executeByLocalLanguage(),translate.state=0;return}if(translate.to==translate.language.getLocal()&&!translate.language.translateLocal){translate.state=0;return}translate.images.execute();var n;typeof e<"u"&&e!=null?typeof e.length>"u"?(n=new Array,n[0]=e):n=e:n=translate.getDocuments(),n.length>500&&(console.log("------tip------"),console.log("translate.execute( docs ) 传入的docs.length 过大，超过500，这很不正常，当前 docs.length : "+n.length+" ,如果你感觉真的没问题，请联系作者 http://translate.zvo.cn/43006.html 说明情况，根据你的情况进行分析。 当前只取前500个元素进行翻译"));for(var o=0;o<n.length&o<500;o++){var r=n[o];translate.element.whileNodes(t,r)}if(translate.language.translateLanguagesRange.length>0)for(var s in translate.nodeQueue[t].list)translate.language.translateLanguagesRange.indexOf(s)<0&&delete translate.nodeQueue[t].list[s];typeof translate.nodeQueue[t]>"u"&&(translate.nodeQueue[t]=new Array,translate.nodeQueue[t].list=[],console.log("--- translate.js warn tip 警告！！ ---"),console.log("您使用translate.js时可能放的位置不对，不要吧 translate.js 放在网页最顶部，这样当 translate.js 进行执行，也就是 translate.execute() 执行时，因为网页是从上往下加载，它放在网页最顶部，那么它执行时网页后面的内容都还没加载出来，这个是不会获取到网页任何内容的，也就是它是不起任何作用的"));for(var s in translate.nodeQueue[t].list){for(var l in translate.nodeQueue[t].list[s])if(typeof translate.nodeQueue[t].list[s][l]!="function"){for(var c=translate.nodeQueue[t].list[s][l].nodes.length-1;c>-1;c--){var f=translate.element.nodeAnalyse.get(translate.nodeQueue[t].list[s][l].nodes[c].node),u=nodeuuid.uuid(f.node);typeof translate.nodeHistory[u]<"u"&&translate.nodeHistory[u].translateText==f.text&&translate.nodeQueue[t].list[s][l].nodes.splice(c,1)}translate.nodeQueue[t].list[s][l].nodes.length==0&&delete translate.nodeQueue[t].list[s][l]}Object.keys(translate.nodeQueue[t].list[s]).length==0&&delete translate.nodeQueue[t].list[s]}var d={},m={},g={},v=[];for(var s in translate.nodeQueue[t].list){if(s==null||typeof s>"u"||s.length==0||s=="undefined")continue;d[s]=[],m[s]=[];let S=new translate.renderTask;g[s]=[];for(var l in translate.nodeQueue[t].list[s])if(typeof translate.nodeQueue[t].list[s][l]!="function"){var b=translate.nodeQueue[t].list[s][l].original,$=translate.nodeQueue[t].list[s][l].translateText,w=b==$?l:translate.util.hash($);translate.nodeQueue[t].list[s][l].cacheHash=w;var C=translate.storage.get("hash_"+translate.to+"_"+w);if(C!=null&&C.length>0){for(var P=0;P<translate.nodeQueue[t].list[s][l].nodes.length;P++){for(var y=translate.nodeQueue[t].list[s][l].nodes[P].node,E=!1,R=0;R<translate.inProgressNodes.length;R++)translate.inProgressNodes[R].node.isSameNode(y)&&(translate.inProgressNodes[R].number++,E=!0);E||translate.inProgressNodes.push({node:y,number:1});var F=translate.nodeQueue[t].list[s][l].nodes[P].beforeText+C+translate.nodeQueue[t].list[s][l].nodes[P].afterText;S.add(translate.nodeQueue[t].list[s][l].nodes[P].node,b,F,translate.nodeQueue[t].list[s][l].nodes[P].attribute);for(var H=-1,o=0;o<g[s].length;o++)if(translate.nodeQueue[t].list[s][l].nodes[P].node.isSameNode(g[s][o].node)){H=o;break}for(var j=-1,o=0;o<v.length;o++)if(translate.nodeQueue[t].list[s][l].nodes[P].node.isSameNode(v[o].node)){j=o;break}H==-1&&(H=g[s].length,g[s][H]={},g[s][H].node=translate.nodeQueue[t].list[s][l].nodes[P].node,g[s][H].array=[]),j==-1&&(j=v.length,v[j]={},v[j].node=translate.nodeQueue[t].list[s][l].nodes[P].node,v[j].array=[]);var fe=g[s][H].array.length;g[s][H].array[fe]=F;var oe=v[j].array.length;v[j].array[oe]=F}continue}d[s].push($),m[s].push(l)}S.execute()}for(var s in g){for(var V=Object.keys(translate.nodeQueue[t].list[s]),q=V.length,o=0;o<g[s].length;o++){for(var Q=0;Q<v.length;Q++)if(g[s][o].node.isSameNode(v[Q].node)){g[s][o].array=v[Q].array;break}g[s][o].array.sort(function(I,X){return X.length-I.length});for(var O=translate.element.nodeAnalyse.get(g[s][o].node),G=O.text,ee=0;ee<g[s][o].array.length;ee++)g[s][o].array[ee]<1||(G=G.replace(new RegExp(translate.util.regExp.pattern(g[s][o].array[ee]),"g"),translate.util.regExp.resultText(`
`)));for(var A=G.split(`
`),L=0;L<A.length;L++)A[L]<1||translate.addNodeToQueue(t,O.node,A[L])}var W=Object.keys(translate.nodeQueue[t].list[s]),ae=W.length;if(q-ae!=0)for(var Y=0;Y<W.length;Y++){var ne=W[Y];if(V.indexOf(ne)==-1){var te=translate.nodeQueue[t].list[s][ne],w=te.original==te.translateText?ne:translate.util.hash(te.translateText);translate.nodeQueue[t].list[s][ne].cacheHash=w,d[s].push(te.translateText),m[s].push(ne)}}}var ge=[];for(var s in translate.nodeQueue[t].list)typeof d[s]>"u"||d[s].length<1||s!=translate.to&&ge.push(s);if(ge.length==0){translate.state=0,translate.executeNumber++;return}for(var s in m)if(!(typeof m[s]>"u")&&!(m[s].length<1))for(var re=0;re<m[s].length;re++)for(var B=m[s][re],z=0;z<translate.nodeQueue[t].list[s][B].nodes.length;z++){for(var y=translate.nodeQueue[t].list[s][B].nodes[z].node,E=!1,R=0;R<translate.inProgressNodes.length;R++)translate.inProgressNodes[R].node.isSameNode(y)&&(translate.inProgressNodes[R].number++,E=!0);E||translate.inProgressNodes.push({node:y,number:1})}translate.state=20,translate.listener.execute.renderStartByApiRun(t);for(var Z in ge){var s=ge[Z];if(typeof d[s]>"u"||d[s].length<1){console.log("异常,理论上不应该存在： typeof(translateTextArray[lang]) == 'undefined' || translateTextArray[lang].length < 1"),translate.state=0,translate.executeNumber++;return}(typeof translate.translateRequest[t]>"u"||translate.translateRequest[t]==null)&&(translate.translateRequest[t]={}),translate.translateRequest[t][s]={},translate.translateRequest[t][s].executeFinish=0,translate.translateRequest[t][s].addtime=Math.floor(Date.now()/1e3);var D=translate.request.api.translate,K={from:s,to:translate.to,text:encodeURIComponent(JSON.stringify(d[s]))};translate.request.post(D,K,function(S){if(S.result==0){translate.translateRequest[t][ie].result=2,translate.translateRequest[t][ie].executeFinish=1,translate.translateRequest[t][ie].stoptime=Math.floor(Date.now()/1e3),translate.waitingExecute.isAllExecuteFinish(t),console.log("=======ERROR START======="),console.log(d[S.from]),console.log("response : "+S.info),console.log("=======ERROR END  =======");return}if(typeof translate.nodeQueue[t]>"u"){console.log("提示：你很可能多次引入了 translate.js 所以造成了翻译本身的数据错乱，这只是个提示，它还是会给你正常翻译的，但是你最好不要重复引入太多次 translate.js ，正常情况下只需要引入一次 translate.js 就可以了。太多的话很可能会导致你页面卡顿");return}let I=new translate.renderTask;for(var X=0;X<m[S.from].length;X++){var ie=S.from,pe=S.text[X];if(pe!=null){pe.toLowerCase().indexOf(d[S.from][X].toLowerCase())>-1&&(pe=d[S.from][X]);var T=m[S.from][X],_=translate.nodeQueue[t].list[ie][T].cacheHash,M="";try{M=translate.nodeQueue[t].list[ie][T].original}catch(_e){console.log("uuid:"+t+", originalWord:"+M+", lang:"+ie+", hash:"+T+", text:"+pe+", queue:"+translate.nodeQueue[t]),console.log(_e);continue}for(var U=0;U<translate.nodeQueue[t].list[ie][T].nodes.length;U++)I.add(translate.nodeQueue[t].list[ie][T].nodes[U].node,M,translate.nodeQueue[t].list[ie][T].nodes[U].beforeText+pe+translate.nodeQueue[t].list[ie][T].nodes[U].afterText,translate.nodeQueue[t].list[ie][T].nodes[U].attribute);translate.storage.set("hash_"+S.to+"_"+_,pe)}}I.execute(),translate.translateRequest[t][ie].result=1,translate.translateRequest[t][ie].executeFinish=1,translate.translateRequest[t][ie].stoptime=Math.floor(Date.now()/1e3),setTimeout(function(){translate.waitingExecute.isAllExecuteFinish(t)},10)},function(S){translate.translateRequest[t][s].executeFinish=1,translate.translateRequest[t][s].stoptime=Math.floor(Date.now()/1e3),translate.translateRequest[t][s].result=3,translate.waitingExecute.isAllExecuteFinish(t)})}},translateRequest:{},nodeHistory:{},element:{tagAttribute:{},nodeAnalyse:{get:function(e,t){return translate.element.nodeAnalyse.analyse(e,"","",t)},set:function(e,t,a,n){translate.element.nodeAnalyse.analyse(e,t,a,n)},analyse:function(e,t,a,n){var o=new Array;o.node=e,o.text="";var r=translate.element.getNodeName(e);if(n!=null&&typeof n=="string"&&n.length>0){if(o.text=e[n],typeof t<"u"&&t.length>0){typeof e[n]<"u"&&(e[n]=e[n].replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a)));var s=e.getAttribute(n);s!=null&&typeof s<"u"&&e.setAttribute(n,s.replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a)))}return o}if(r=="#text"&&typeof e.parentNode<"u"){var l=translate.element.getNodeName(e.parentNode);l=="TEXTAREA"&&(r="TEXTAREA",e=e.parentNode)}if(r=="INPUT"||r=="TEXTAREA"){if(e.attributes==null||typeof e.attributes>"u")return o.text="",o;if(r=="INPUT"&&typeof e.attributes.type<"u"&&typeof e.attributes.type.nodeValue!=null&&(e.attributes.type.nodeValue.toLowerCase()=="button"||e.attributes.type.nodeValue.toLowerCase()=="submit")){var c=e.attributes.value;if(c!=null&&typeof c<"u"&&typeof c.nodeValue<"u"&&c.nodeValue.length>0)return typeof t<"u"&&t.length>0&&(c.nodeValue=c.nodeValue.replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a))),o.text=c.nodeValue,o.node=c,o}return typeof e.attributes.placeholder<"u"?(typeof t<"u"&&t.length>0&&(e.attributes.placeholder.nodeValue=e.attributes.placeholder.nodeValue.replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a))),o.text=e.attributes.placeholder.nodeValue,o.node=e.attributes.placeholder,o):(o.text="",o)}if(r=="META"){if(typeof e.name<"u"&&e.name!=null){var f=e.name.toLowerCase(),u=e.getAttribute("property"),d="";if(typeof u<"u"&&u!=null&&u.length>0&&(d=u.toLowerCase()),f=="keywords"||f=="description"||f=="sharetitle"||d=="og:title"||d=="og:description"||d=="og:site_name"||d=="og:novel:latest_chapter_name")return typeof t<"u"&&t!=null&&t.length>0&&(e.content=e.content.replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a))),o.text=e.content,o}return o.text="",o}return r=="IMG"?typeof e.alt>"u"||e.alt==null?(o.text="",o):(typeof t<"u"&&t.length>0&&(e.alt=e.alt.replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a))),o.text=e.alt,o):(e.nodeValue==null||typeof e.nodeValue>"u"||e.nodeValue.trim().length==0?o.text="":(typeof t<"u"&&t!=null&&t.length>0&&(e.nodeValue=e.nodeValue.replace(new RegExp(translate.util.regExp.pattern(t),"g"),translate.util.regExp.resultText(a))),o.text=e.nodeValue),o)}},getNodeName:function(e){if(e==null||typeof e>"u"||e.nodeName==null||typeof e.nodeName>"u")return"";var t=e.nodeName;return t},whileNodes:function(e,t){if(!(t==null||typeof t>"u")){(typeof translate.nodeQueue[e]>"u"||translate.nodeQueue[e]==null)&&(translate.nodeQueue[e]=new Array,translate.nodeQueue[e].expireTime=Date.now()+120*1e3,translate.nodeQueue[e].list=new Array),typeof t=="object"&&typeof t.title=="string"&&t.title.length>0&&(translate.ignore.isIgnore(t)||translate.addNodeToQueue(e,t,t.title,"title"));var a=translate.element.getNodeName(t).toLowerCase();if(typeof translate.element.tagAttribute[a]<"u")for(var n in translate.element.tagAttribute[a]){var o=translate.element.tagAttribute[a][n],r=t.getAttribute(o);(typeof r>"u"||r==null)&&(r=t[o]),!(typeof r>"u"||r==null)&&translate.addNodeToQueue(e,t,r,o)}var s=t.childNodes;if(!(s==null||typeof s>"u"))if(s.length>0)for(var l=0;l<s.length;l++)translate.element.whileNodes(e,s[l]);else translate.element.findNode(e,t)}},findNode:function(e,t){if(!(t==null||typeof t>"u")&&t.parentNode!=null){var a=translate.element.getNodeName(t.parentNode);if(a!=""&&!(translate.ignore.tag.indexOf(a.toLowerCase())>-1)&&!translate.ignore.isIgnore(t)){var n=translate.element.nodeAnalyse.get(t);n.text.length>0&&translate.addNodeToQueue(e,n.node,n.text)}}}},addNodeToQueue:function(e,t,a,n){if(!(t==null||a==null||a.length==0)){var o=translate.element.getNodeName(t);if(o.toLowerCase()!="#comment"){if(translate.util.hash(a),translate.util.findTag(a)){if(t.parentNode==null)return;var r=translate.element.getNodeName(t.parentNode);if(r=="SCRIPT"||r=="STYLE")return}var s=new Array;s.push(a);for(var l=0;l<translate.ignore.text.length;l++)translate.ignore.text[l].trim().length!=0&&(s=translate.addNodeToQueueTextAnalysis(e,t,s,n,translate.ignore.text[l],translate.ignore.text[l]));if(typeof translate.temp_nomenclature>"u"&&(translate.temp_nomenclature=new Array),typeof translate.temp_nomenclature[translate.language.getLocal()]>"u"&&(c=new Array),typeof translate.nomenclature.data[translate.language.getLocal()]<"u"&&typeof translate.nomenclature.data[translate.language.getLocal()][translate.to]<"u"){var c;for(var f in translate.nomenclature.data[translate.language.getLocal()][translate.to]){var u=translate.nomenclature.data[translate.language.getLocal()][translate.to][f];s=translate.addNodeToQueueTextAnalysis(e,t,s,n,f,u),typeof c<"u"&&c.push(f)}typeof translate.temp_nomenclature[translate.language.getLocal()]>"u"&&(translate.temp_nomenclature[translate.language.getLocal()]=c)}for(var d=0;d<s.length;d++)s[d].trim().length!=0&&(translate.ignore.text.indexOf(s[d].trim())>-1||typeof translate.temp_nomenclature[translate.language.getLocal()]<"u"&&translate.temp_nomenclature[translate.language.getLocal()].indexOf(s[d].trim())>-1||translate.addNodeToQueueAnalysis(e,t,s[d],n))}}},addNodeToQueueTextAnalysis:function(e,t,a,n,o,r){for(var s=new Array,l=0;l<a.length;l++){var c=a[l];if(c.trim()!=r.trim()){var f=c.indexOf(o);if(f>-1){if(o!=r){var u=f-r.length;u<0&&(u=0);var d=f+r.length;d>c.length&&(d=c.length);var m=c.substring(u,d);if(m.indexOf(r)>-1)continue}if(translate.language.wordBlankConnector(translate.to)){if(f>0){var g=c.charAt(f-1);/\s/.test(g)||(r=" "+r)}f+o.length<c.length&&(c.charAt(f+o.length),/\s/.test(g)||(r=r+" "))}o!=r&&translate.element.nodeAnalyse.set(t,o,r,n);for(var v=c.split(o),b=0;b<v.length;b++){var $=v[b];$.trim().length!=0&&(a.push($),s.push(c))}}}}if(s.length>0)for(var w=0;w<s.length;w++){let C=a.indexOf(s[w]);C>-1&&a.splice(C,1)}return a},addNodeToQueueAnalysis:function(e,t,a,n){var o=translate.language.recognition(a),r=o.languageArray;typeof r[translate.to]<"u"&&delete r[translate.to];var s=translate.whole.isWhole(t);if(s){var l=o.languageName;translate.addNodeQueueItem(e,t,a,n,l,"","")}else for(var l in r)for(var c=0;c<r[l].list.length;c++)if(!(typeof r[l].list[c]>"u"||typeof r[l].list[c].text>"u")){var f=r[l].list[c].text,u=r[l].list[c].beforeText,d=r[l].list[c].afterText;translate.addNodeQueueItem(e,t,f,n,l,u,d)}},addNodeQueueItem:function(e,t,a,n,o,r,s){(translate.nodeQueue[e].list[o]==null||typeof translate.nodeQueue[e].list[o]>"u")&&(translate.nodeQueue[e].list[o]=new Array);var l=translate.util.hash(a);(translate.nodeQueue[e].list[o][l]==null||typeof translate.nodeQueue[e].list[o][l]>"u")&&(translate.nodeQueue[e].list[o][l]=new Array,translate.nodeQueue[e].list[o][l].nodes=new Array,translate.nodeQueue[e].list[o][l].original=a,translate.nodeQueue[e].list[o][l].translateText=a);var c=!1;if(typeof t.isSameNode<"u"){for(var f=0;f<translate.nodeQueue[e].list[o][l].nodes.length;f++)if(t.isSameNode(translate.nodeQueue[e].list[o][l].nodes[f].node)){c=!0;continue}}if(!c){var u=translate.nodeQueue[e].list[o][l].nodes.length;translate.nodeQueue[e].list[o][l].nodes[u]=new Array,translate.nodeQueue[e].list[o][l].nodes[u].node=t,translate.nodeQueue[e].list[o][l].nodes[u].attribute=n,translate.nodeQueue[e].list[o][l].nodes[u].beforeText=r,translate.nodeQueue[e].list[o][l].nodes[u].afterText=s}},whole:{isEnableAll:!1,enableAll:function(){translate.whole.isEnableAll=!0},class:[],tag:[],id:[],executeTip:function(){translate.whole.class.length==0&&translate.whole.tag.length==0&&translate.whole.id.length==0||console.log("您开启了 translate.whole 此次行为避开了浏览器端的文本语种自动识别，而是暴力的直接对某个元素的整个文本进行翻译，很可能会产生非常大的翻译量，请谨慎！有关每日翻译字符的说明，可参考： http://translate.zvo.cn/42557.html "),translate.whole.tag.indexOf("html")>-1&&console.log("自检发现您设置了 translate.whole.tag 其中有 html ，这个是不生效的，最大只允许设置到 body ")},isWhole:function(e){if(translate.whole.class.length==0&&translate.whole.tag.length==0&&translate.whole.id.length==0&&translate.whole.isEnableAll==!1||e==null||typeof e>"u")return!1;if(translate.whole.isEnableAll)return!0;for(var t=e,a=100;a-- >0;){if(t==null||typeof t>"u")return!1;var n=translate.element.getNodeName(t).toLowerCase();if(n.length>0){if(n=="html"||n=="#document")return!1;if(translate.whole.tag.indexOf(n)>-1)return!0}if(t.className!=null){var o=t.className;if(o==null||typeof o!="string")continue;o=o.trim().split(" ");for(var r=0;r<o.length;r++)if(o[r]!=null&&o[r].trim().length>0&&translate.whole.class.indexOf(o[r])>-1)return!0}if(t.id!=null&&typeof t.id<"u"&&translate.whole.id.indexOf(t.id)>-1)return!0;t=t.parentNode}return!1}},language:{englishVarietys:["french","italian","deutsch"],local:"",translateLocal:!1,translateLanguagesRange:[],setLocal:function(e){translate.useVersion="v2",translate.language.local=e},getLocal:function(){return(translate.language.local==null||translate.language.local.length<1)&&translate.language.autoRecognitionLocalLanguage(),translate.language.local},getCurrent:function(){var e=translate.storage.get("to");return e!=null&&typeof e<"u"&&e.length>0?e:translate.language.getLocal()},setDefaultTo:function(e){var t=translate.storage.get("to");t!=null&&typeof t<"u"&&t.length>0||(translate.storage.set("to",e),translate.to=e)},clearCacheLanguage:function(){translate.to="",translate.storage.set("to","")},setUrlParamControl:function(e){(typeof e>"u"||e.length<1)&&(e="language");var t=translate.util.getUrlParam(e);typeof t>"u"||t==""||t=="null"||t=="undefined"||(translate.storage.set("to",t),translate.to=t)},autoRecognitionLocalLanguage:function(){if(!(translate.language.local!=null&&translate.language.local.length>2)){var e=document.body.outerText;if(e==null||typeof e>"u"||e.length<1){translate.language.local="chinese_simplified";return}e=e.replace(/\n|\t|\r/g,""),translate.language.local="chinese_simplified";var t=translate.language.recognition(e);return translate.language.local=t.languageName,translate.language.local}},get:function(e){for(var t=new Array,a=new Array,n=[],o=[],r=0;r<e.length;r++){var s=e.charAt(r),l=translate.language.getCharLanguage(s);l==""&&(l="unidentification");var c=translate.language.analyse(l,a,n,o,s);a=c.langStrs,typeof n.language<"u"&&(o.language=n.language,o.charstr=n.charstr,o.storage_language=n.storage_language),n.language=c.storage_language,n.charstr=s,n.storage_language=c.storage_language,t.push(l)}return typeof a.unidentification<"u"&&delete a.unidentification,typeof a.specialCharacter<"u"&&delete a.specialCharacter,typeof a.number<"u"&&delete a.number,a},recognition:function(e){var t=translate.language.get(e),a=[],n=[],o=0;for(var r in t)if(typeof t[r]=="object"){for(var s=0,l=0;l<t[r].length;l++)s=s+t[r][l].text.length;o=o+s,a[r]=s,n[r]=s}var c=[];for(var f in a)a[f]/o>.01&&(c[c.length]=f+"");if(c.length>1&&c.indexOf("english")>-1)if(c.indexOf("romance")>-1){var u=translate.language.romanceSentenceAnaly(e);u.length==0?console.log("语种识别异常，应该是 法语、西班牙语、葡萄牙语、意大利语 中的一种才是，除非是除了这四种语种之外的别的 罗曼语族 中的语种，当前已将 "+e+"识别为英语。 你可以联系我们求助 https://translate.zvo.cn/4030.html"):(a[u]=a.romance+a.english,a.english=0)}else a.english=0;c.indexOf("chinese_simplified")>-1&&c.indexOf("chinese_traditional")>-1&&(a.chinese_simplified=0);var d="",m=0;for(var f in a)a[f]>m&&(d=f,m=a[f]);var g={};for(var f in t)g[f]={},g[f].number=n[f],g[f].list=t[f];var v={languageName:d,languageArray:g};if(v.languageName=="english"){var b=translate.language.getLocal();translate.language.englishVarietys.indexOf(b)>-1&&(v.languageName=b)}return v},getCharLanguage:function(e){if(e==null||typeof e>"u")return"";if(this.russian(e))return"russian";if(this.english(e))return"english";if(this.romance(e))return"romance";if(this.specialCharacter(e))return"specialCharacter";if(this.number(e))return"number";var t=this.chinese(e);return t=="simplified"?"chinese_simplified":t=="traditional"?"chinese_traditional":this.japanese(e)?"japanese":this.korean(e)?"korean":""},analyse:function(e,t,a,n,o){typeof t[e]>"u"&&(t[e]=new Array);var r=0;typeof a.storage_language>"u"||(translate.language.connector(o)&&(e=a.storage_language),a.storage_language==e?r=t[e].length-1:r=t[e].length),typeof t[e][r]>"u"&&(t[e][r]=new Array,t[e][r].beforeText="",t[e][r].afterText="",t[e][r].text=""),t[e][r].text=t[e][r].text+o,translate.language.wordBlankConnector(translate.language.getLocal())==!1&&translate.language.wordBlankConnector(translate.to)&&a.storage_language!=null&&typeof a.storage_language<"u"&&a.storage_language.length>0&&a.storage_language!="specialCharacter"&&(translate.language.wordBlankConnector(a.storage_language)==!1&&translate.language.wordBlankConnector(e)?t[a.storage_language][t[a.storage_language].length-1].afterText=" ":a.storage_language=="english"&&e!="english"&&(t[e][r].beforeText=" "));var s=new Array;return s.langStrs=t,s.storage_language=e,s},connector:function(e){return!!(/.*[\u0020\u00A0\u202F\u205F\u3000]+.*$/.test(e)||/.*[\u0030-\u0039]+.*$/.test(e)||/.*[\u0021\u0022\u0023\u0024\u0025\u0026\u0027\u002C\u002D\u002E\u003A\u003B\u003F\u0040]+.*$/.test(e)||/.*[\u3002\uFF1F\uFF01\uFF0C\u3001\uFF1B\uFF1A\u300C\u300D\u300E\u300F\u2018\u2019\u201C\u201D\uFF08\uFF09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uFF0E\u300A\u300B\u3008\u3009\u00b7]+.*$/.test(e))},wordBlankConnector:function(e){if(e==null||typeof e>"u")return!0;switch(e.trim().toLowerCase()){case"chinese_simplified":return!1;case"chinese_traditional":return!1;case"korean":return!1;case"japanese":return!1}return!0},chinese_traditional_dict:"皚藹礙愛翺襖奧壩罷擺敗頒辦絆幫綁鎊謗剝飽寶報鮑輩貝鋇狽備憊繃筆畢斃閉邊編貶變辯辮鼈癟瀕濱賓擯餅撥缽鉑駁蔔補參蠶殘慚慘燦蒼艙倉滄廁側冊測層詫攙摻蟬饞讒纏鏟産闡顫場嘗長償腸廠暢鈔車徹塵陳襯撐稱懲誠騁癡遲馳恥齒熾沖蟲寵疇躊籌綢醜櫥廚鋤雛礎儲觸處傳瘡闖創錘純綽辭詞賜聰蔥囪從叢湊竄錯達帶貸擔單鄲撣膽憚誕彈當擋黨蕩檔搗島禱導盜燈鄧敵滌遞締點墊電澱釣調諜疊釘頂錠訂東動棟凍鬥犢獨讀賭鍍鍛斷緞兌隊對噸頓鈍奪鵝額訛惡餓兒爾餌貳發罰閥琺礬釩煩範販飯訪紡飛廢費紛墳奮憤糞豐楓鋒風瘋馮縫諷鳳膚輻撫輔賦複負訃婦縛該鈣蓋幹趕稈贛岡剛鋼綱崗臯鎬擱鴿閣鉻個給龔宮鞏貢鈎溝構購夠蠱顧剮關觀館慣貫廣規矽歸龜閨軌詭櫃貴劊輥滾鍋國過駭韓漢閡鶴賀橫轟鴻紅後壺護滬戶嘩華畫劃話懷壞歡環還緩換喚瘓煥渙黃謊揮輝毀賄穢會燴彙諱誨繪葷渾夥獲貨禍擊機積饑譏雞績緝極輯級擠幾薊劑濟計記際繼紀夾莢頰賈鉀價駕殲監堅箋間艱緘繭檢堿鹼揀撿簡儉減薦檻鑒踐賤見鍵艦劍餞漸濺澗漿蔣槳獎講醬膠澆驕嬌攪鉸矯僥腳餃繳絞轎較稭階節莖驚經頸靜鏡徑痙競淨糾廄舊駒舉據鋸懼劇鵑絹傑潔結誡屆緊錦僅謹進晉燼盡勁荊覺決訣絕鈞軍駿開凱顆殼課墾懇摳庫褲誇塊儈寬礦曠況虧巋窺饋潰擴闊蠟臘萊來賴藍欄攔籃闌蘭瀾讕攬覽懶纜爛濫撈勞澇樂鐳壘類淚籬離裏鯉禮麗厲勵礫曆瀝隸倆聯蓮連鐮憐漣簾斂臉鏈戀煉練糧涼兩輛諒療遼鐐獵臨鄰鱗凜賃齡鈴淩靈嶺領餾劉龍聾嚨籠壟攏隴樓婁摟簍蘆盧顱廬爐擄鹵虜魯賂祿錄陸驢呂鋁侶屢縷慮濾綠巒攣孿灤亂掄輪倫侖淪綸論蘿羅邏鑼籮騾駱絡媽瑪碼螞馬罵嗎買麥賣邁脈瞞饅蠻滿謾貓錨鉚貿麽黴沒鎂門悶們錳夢謎彌覓綿緬廟滅憫閩鳴銘謬謀畝鈉納難撓腦惱鬧餒膩攆撚釀鳥聶齧鑷鎳檸獰甯擰濘鈕紐膿濃農瘧諾歐鷗毆嘔漚盤龐國愛賠噴鵬騙飄頻貧蘋憑評潑頗撲鋪樸譜臍齊騎豈啓氣棄訖牽扡釺鉛遷簽謙錢鉗潛淺譴塹槍嗆牆薔強搶鍬橋喬僑翹竅竊欽親輕氫傾頃請慶瓊窮趨區軀驅齲顴權勸卻鵲讓饒擾繞熱韌認紉榮絨軟銳閏潤灑薩鰓賽傘喪騷掃澀殺紗篩曬閃陝贍繕傷賞燒紹賒攝懾設紳審嬸腎滲聲繩勝聖師獅濕詩屍時蝕實識駛勢釋飾視試壽獸樞輸書贖屬術樹豎數帥雙誰稅順說碩爍絲飼聳慫頌訟誦擻蘇訴肅雖綏歲孫損筍縮瑣鎖獺撻擡攤貪癱灘壇譚談歎湯燙濤縧騰謄銻題體屜條貼鐵廳聽烴銅統頭圖塗團頹蛻脫鴕馱駝橢窪襪彎灣頑萬網韋違圍爲濰維葦偉僞緯謂衛溫聞紋穩問甕撾蝸渦窩嗚鎢烏誣無蕪吳塢霧務誤錫犧襲習銑戲細蝦轄峽俠狹廈鍁鮮纖鹹賢銜閑顯險現獻縣餡羨憲線廂鑲鄉詳響項蕭銷曉嘯蠍協挾攜脅諧寫瀉謝鋅釁興洶鏽繡虛噓須許緒續軒懸選癬絢學勳詢尋馴訓訊遜壓鴉鴨啞亞訝閹煙鹽嚴顔閻豔厭硯彥諺驗鴦楊揚瘍陽癢養樣瑤搖堯遙窯謠藥爺頁業葉醫銥頤遺儀彜蟻藝億憶義詣議誼譯異繹蔭陰銀飲櫻嬰鷹應纓瑩螢營熒蠅穎喲擁傭癰踴詠湧優憂郵鈾猶遊誘輿魚漁娛與嶼語籲禦獄譽預馭鴛淵轅園員圓緣遠願約躍鑰嶽粵悅閱雲鄖勻隕運蘊醞暈韻雜災載攢暫贊贓髒鑿棗竈責擇則澤賊贈紮劄軋鍘閘詐齋債氈盞斬輾嶄棧戰綻張漲帳賬脹趙蟄轍鍺這貞針偵診鎮陣掙睜猙幀鄭證織職執紙摯擲幟質鍾終種腫衆謅軸皺晝驟豬諸誅燭矚囑貯鑄築駐專磚轉賺樁莊裝妝壯狀錐贅墜綴諄濁茲資漬蹤綜總縱鄒詛組鑽緻鐘麼為隻兇準啟闆裡靂餘鍊",chinese:function(e){return/.*[\u4e00-\u9fa5]+.*$/.test(e)?this.chinese_traditional_dict.indexOf(e)>-1?"traditional":"simplified":""},japanese:function(e){return!!/.*[\u3040-\u309F\u30A0-\u30FF]+.*$/.test(e)},korean:function(e){return!!/.*[\uAC00-\uD7AF]+.*$/.test(e)},russian:function(e){return!!/.*[\u0411\u0412\u0414\u0416\u0417\u0418\u0419\u041B\u041C\u041D\u041E\u041F\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042E\u042F\u0407\u0406]+.*$/.test(e)},number:function(e){return!!/.*[\u0030-\u0039]+.*$/.test(e)},english:function(e){return/.*[\u0041-\u005a]+.*$/.test(e)?!0:!!/.*[\u0061-\u007a]+.*$/.test(e)},romance_dict:["é","è","ê","à","ç","œ","ñ","á","ó","ò","ì","ã","õ"],romance:function(e){return this.romance_dict.indexOf(e)>-1},romanceSentenceAnaly:function(e){const t={french:{score:0,chars:["é","è","ê","à","ç","œ"]},spanish:{score:0,chars:["ñ","á","ó"],pairs:["ll"]},italian:{score:0,chars:["ò","ì"],pairs:["cc","ss"]},portuguese:{score:0,chars:["ã","õ"]}};for(let o=0;o<e.length;o++){const r=e[o].toLowerCase();if(Object.keys(t).forEach(s=>{t[s].chars.includes(r)&&(t[s].score+=1)}),o<e.length-1){const s=e.slice(o,o+2).toLowerCase();Object.keys(t).forEach(l=>{const c=t[l].pairs;c&&c.includes(s)&&(t[l].score+=2)})}}let a="",n=-1;return Object.keys(t).forEach(o=>{t[o].score>n&&(n=t[o].score,a=o)}),a||""},specialCharacter:function(e){return!!(/.*[\u2460-\u24E9]+.*$/.test(e)||/.*[\u2500-\u25FF]+.*$/.test(e)||/.*[\u3200-\u33FF]+.*$/.test(e)||/.*[\uFF00-\uFF5E]+.*$/.test(e)||/.*[\u2000-\u22FF]+.*$/.test(e)||/.*[\u3001-\u3036]+.*$/.test(e)||/.*[\u0020-\u002F]+.*$/.test(e)||/.*[\u003B\u003B\u003C\u003D\u003E\u003F\u005B\u005C\u005D\u005E\u005F\u0060\u007B\u007C\u007D\u007E]+.*$/.test(e)||/.*[\u0009\u000a\u0020\u00A0\u1680\u180E\u202F\u205F\u3000\uFEFF]+.*$/.test(e)||/.*[\u2000-\u200B]+.*$/.test(e)||/.*[\u00A1-\u0105]+.*$/.test(e)||/.*[\u2C60-\u2C77]+.*$/.test(e))}},executeByLocalLanguage:function(){var e=translate.util.browserDefaultLanguage();if(typeof e<"u"&&e.length>0){translate.changeLanguage(e);return}translate.request.post(translate.request.api.ip,{},function(t){t.result==0?(console.log("==== ERROR 获取当前用户所在区域异常 ===="),console.log(t.info),console.log("==== ERROR END ====")):(translate.storage.set("to",t.language),translate.to=t.language,translate.selectLanguageTag,translate.execute())},null)},util:{uuid:function(){var e=new Date().getTime();window.performance&&typeof window.performance.now=="function"&&(e+=performance.now());var t="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(a=="x"?n:n&3|8).toString(16)});return t},findTag:function(e){var t=/<[^>]+>/g;return t.test(e)},arrayFindMaxNumber:function(e){for(var t={},a=[],n=0,o=0,r=e.length;o<r;o++)t[e[o]]?t[e[o]]++:t[e[o]]=1,t[e[o]]>n&&(n=t[e[o]]);for(var s in t)t[s]===n&&a.push(s);return a},hash:function(e){if(e==null||typeof e>"u")return e;var t=0,a,n;if(e.length===0)return t;for(a=0;a<e.length;a++)n=e.charCodeAt(a),t=(t<<5)-t+n,t|=0;return t+""},charReplace:function(e){return e==null?"":(e=e.trim(),e=e.replace(/\t|\n|\v|\r|\f/g,""),e)},regExp:{pattern:function(e){return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\"/g,'\\"'),e=e.replace(/\?/g,"\\?"),e=e.replace(/\$/g,"\\$"),e=e.replace(/\(/g,"\\("),e=e.replace(/\)/g,"\\)"),e=e.replace(/\|/g,"\\|"),e=e.replace(/\+/g,"\\+"),e=e.replace(/\*/g,"\\*"),e=e.replace(/\[/g,"\\["),e=e.replace(/\]/g,"\\]"),e=e.replace(/\^/g,"\\^"),e=e.replace(/\{/g,"\\{"),e=e.replace(/\}/g,"\\}"),e},resultText:function(e){return e}},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return a!=null?unescape(a[2]):""},synchronizesLoadJs:function(e){var t=null;if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch{t=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(t=new XMLHttpRequest);if(t.open("GET",e,!1),t.send(null),t.readyState==4)if(t.status>=200&&t.status<300||t.status==0||t.status==304){var a=document.getElementsByTagName("HTML")[0],n=document.createElement("script");n.language="javascript",n.type="text/javascript";try{n.appendChild(document.createTextNode(t.responseText))}catch{n.text=t.responseText}return a.appendChild(n),!0}else return!1;else return!1},loadMsgJs:function(){typeof msg<"u"||translate.util.synchronizesLoadJs("https://res.zvo.cn/msg/msg.js")},objSort:function(e){var t=Array.from(Object.keys(e));t.sort(function(o,r){return r.length-o.length});var a=new Array;for(var n of t)a[n]=e[n];return a},versionStringToInt:function(e){var t=e.split("."),a=0;return a=parseInt(t[0])*1e3*1e3+a,a=parseInt(t[1])*1e3+a,a=parseInt(t[2])+a,a},split:function(e,t,a){let n=t,o=[];if(JSON.stringify(e).length<=t)o.push(e);else{let r=JSON.stringify(e).trim().substring(1,JSON.stringify(e).length-1);if(JSON.stringify(e).length-t<=2){t=t-4;let s=r.substring(0,r.lastIndexOf('","')+1),l=r.substring(r.lastIndexOf('","')+2);o.push(JSON.parse("["+s+"]")),o.push(JSON.parse("["+l+"]"))}else{t=t-2;let s=0;for(;s-r.length<0;){let l="";s+t-r.length>=0?l=r.substring(s):l=r.substring(s,s+t);let c=l.length,f=1;l.endsWith('"')?l.endsWith('","')?c-=2:l.startsWith('"')||(c=l.lastIndexOf('","')+1):l.endsWith('",')?c-=1:(c=l.lastIndexOf('","')+1,c<=0&&(l.startsWith('"')?c=l.length-1:c=l.length-2,l.endsWith('"')||(f=0)));let u="";c-l.length>0||c-0==0?(u=l,c=c+u.length):u=l.substring(0,c),!u.startsWith('"')&&!u.startsWith(',"')&&(u='"'+u),u.endsWith('"')||(u=u+'"'),s+=c+f,u="["+u+"]";try{o.push(JSON.parse(u))}catch{s=s-(c+f)+1}}}}return a&&a>0&&(o=translate.util._splitMaxSize(o,n,a)),o},_splitMaxSize:function(e,t,a){let n=[],o=[];if(e.forEach(function(r,s){if(r=o.concat(r),r.length>a){let c=r.slice(0,a),f=r.slice(a),u=1;for(;JSON.stringify(c).length>t&&(c=r.slice(0,a-u),f=r.slice(a-u),u++,!(u>=r.length+1)););n.push(c),o.length=0,o=f}else{let c=r,f=[],u=1;for(;JSON.stringify(c).length>t&&(c=r.slice(0,a-u),f=r.slice(a-u),u++,!(u>=r.length+1)););n.push(c),o.length=0,o=f}}),o.length>0){let r=[];r.push(o);let s=translate.util._splitMaxSize(r,t,a);n=n.concat(s)}return n},browserLanguage:{"zh-CN":"chinese_simplified","zh-TW":"chinese_traditional","zh-HK":"chinese_traditional",co:"corsican",gn:"guarani",rw:"kinyarwanda",ha:"hausa",no:"norwegian",nl:"dutch",yo:"yoruba",en:"english","en-US":"english",kok:"gongen",la:"latin",ne:"nepali",fr:"french",cs:"czech",haw:"hawaiian",ka:"georgian",ru:"russian",fa:"persian",bho:"bhojpuri",hi:"hindi",be:"belarusian",sw:"swahili",is:"icelandic",yi:"yiddish",tw:"twi",ga:"irish",gu:"gujarati",km:"khmer",sk:"slovak",he:"hebrew",kn:"kannada",hu:"hungarian",ta:"tamil",ar:"arabic",bn:"bengali",az:"azerbaijani",sm:"samoan",af:"afrikaans",id:"indonesian",da:"danish",sn:"shona",bm:"bambara",lt:"lithuanian",vi:"vietnamese",mt:"maltese",tk:"turkmen",as:"assamese",ca:"catalan",si:"singapore",ceb:"cebuano",gd:"scottish-gaelic",sa:"sanskrit",pl:"polish",gl:"galician",lv:"latvian",uk:"ukrainian",tt:"tatar",cy:"welsh",ja:"japanese",fil:"filipino",ay:"aymara",lo:"lao",te:"telugu",ro:"romanian",ht:"haitian_creole",doi:"dogrid",sv:"swedish",mai:"maithili",th:"thai",hy:"armenian",my:"burmese",ps:"pashto",hmn:"hmong",dv:"dhivehi",lb:"luxembourgish",sd:"sindhi",ku:"kurdish",tr:"turkish",mk:"macedonian",bg:"bulgarian",ms:"malay",lg:"luganda",mr:"marathi",et:"estonian",ml:"malayalam",de:"deutsch",sl:"slovene",ur:"urdu",pt:"portuguese",ig:"igbo",ckb:"kurdish_sorani",om:"oromo",el:"greek",es:"spanish",fy:"frisian",so:"somali",am:"amharic",ny:"nyanja",pa:"punjabi",eu:"basque",it:"italian",sq:"albanian",ko:"korean",tg:"tajik",fi:"finnish",ky:"kyrgyz",ee:"ewe",hr:"croatian",kri:"creole",qu:"quechua",bs:"bosnian",mi:"maori"},browserDefaultLanguage:function(){var e=navigator.language||navigator.userLanguage;if(typeof e=="string"&&e.length>0){var t=translate.util.browserLanguage[e];if(typeof t>"u")console.log("browser default language : "+e+", translate.js current translate channel not support this language ");else return t}return""}},service:{name:"translate.service",use:function(e){if(translate.enterprise.isUse==!0){console.log("您已启用了企业级翻译通道 translate.enterprise.use(); (文档：https://translate.zvo.cn/4087.html) , 所以您设置的 translate.service.use('"+e+"'); (文档：https://translate.zvo.cn/4081.html) 将失效不起作用，有企业级翻译通道全部接管。");return}typeof e=="string"&&e=="client.edge"&&(translate.service.name=e,translate.whole.enableAll())},edge:{api:{auth:"https://edge.microsoft.com/translate/auth",translate:"https://api.cognitive.microsofttranslator.com/translate?from={from}&to={to}&api-version=3.0&includeSentenceLength=true"},language:{json:[{id:"ukrainian",name:"Україна",serviceId:"uk"},{id:"norwegian",name:"Norge",serviceId:"no"},{id:"welsh",name:"Iaith Weleg",serviceId:"cy"},{id:"dutch",name:"nederlands",serviceId:"nl"},{id:"japanese",name:"日本語",serviceId:"ja"},{id:"filipino",name:"Pilipino",serviceId:"fil"},{id:"english",name:"English",serviceId:"en"},{id:"lao",name:"ກະຣຸນາ",serviceId:"lo"},{id:"telugu",name:"తెలుగుName",serviceId:"te"},{id:"romanian",name:"Română",serviceId:"ro"},{id:"nepali",name:"नेपालीName",serviceId:"ne"},{id:"french",name:"Français",serviceId:"fr"},{id:"haitian_creole",name:"Kreyòl ayisyen",serviceId:"ht"},{id:"czech",name:"český",serviceId:"cs"},{id:"swedish",name:"Svenska",serviceId:"sv"},{id:"russian",name:"Русский язык",serviceId:"ru"},{id:"malagasy",name:"Malagasy",serviceId:"mg"},{id:"burmese",name:"ဗာရမ်",serviceId:"my"},{id:"pashto",name:"پښتوName",serviceId:"ps"},{id:"thai",name:"คนไทย",serviceId:"th"},{id:"armenian",name:"Արմենյան",serviceId:"hy"},{id:"chinese_simplified",name:"简体中文",serviceId:"zh-CHS"},{id:"persian",name:"Persian",serviceId:"fa"},{id:"chinese_traditional",name:"繁體中文",serviceId:"zh-CHT"},{id:"kurdish",name:"Kurdî",serviceId:"ku"},{id:"turkish",name:"Türkçe",serviceId:"tr"},{id:"hindi",name:"हिन्दी",serviceId:"hi"},{id:"bulgarian",name:"български",serviceId:"bg"},{id:"malay",name:"Malay",serviceId:"ms"},{id:"swahili",name:"Kiswahili",serviceId:"sw"},{id:"oriya",name:"ଓଡିଆ",serviceId:"or"},{id:"icelandic",name:"ÍslandName",serviceId:"is"},{id:"irish",name:"Íris",serviceId:"ga"},{id:"khmer",name:"ភាសា​ខ្មែរName",serviceId:"km"},{id:"gujarati",name:"ગુજરાતી",serviceId:"gu"},{id:"slovak",name:"Slovenská",serviceId:"sk"},{id:"kannada",name:"ಕನ್ನಡ್Name",serviceId:"kn"},{id:"hebrew",name:"היברית",serviceId:"he"},{id:"hungarian",name:"magyar",serviceId:"hu"},{id:"marathi",name:"मराठीName",serviceId:"mr"},{id:"tamil",name:"தாமில்",serviceId:"ta"},{id:"estonian",name:"eesti keel",serviceId:"et"},{id:"malayalam",name:"മലമാലം",serviceId:"ml"},{id:"inuktitut",name:"ᐃᓄᒃᑎᑐᑦ",serviceId:"iu"},{id:"arabic",name:"بالعربية",serviceId:"ar"},{id:"deutsch",name:"Deutsch",serviceId:"de"},{id:"slovene",name:"slovenščina",serviceId:"sl"},{id:"bengali",name:"বেঙ্গালী",serviceId:"bn"},{id:"urdu",name:"اوردو",serviceId:"ur"},{id:"azerbaijani",name:"azerbaijani",serviceId:"az"},{id:"portuguese",name:"português",serviceId:"pt"},{id:"samoan",name:"lifiava",serviceId:"sm"},{id:"afrikaans",name:"afrikaans",serviceId:"af"},{id:"tongan",name:"汤加语",serviceId:"to"},{id:"greek",name:"ελληνικά",serviceId:"el"},{id:"indonesian",name:"IndonesiaName",serviceId:"id"},{id:"spanish",name:"Español",serviceId:"es"},{id:"danish",name:"dansk",serviceId:"da"},{id:"amharic",name:"amharic",serviceId:"am"},{id:"punjabi",name:"ਪੰਜਾਬੀName",serviceId:"pa"},{id:"albanian",name:"albanian",serviceId:"sq"},{id:"lithuanian",name:"Lietuva",serviceId:"lt"},{id:"italian",name:"italiano",serviceId:"it"},{id:"vietnamese",name:"Tiếng Việt",serviceId:"vi"},{id:"korean",name:"한국어",serviceId:"ko"},{id:"maltese",name:"Malti",serviceId:"mt"},{id:"finnish",name:"suomi",serviceId:"fi"},{id:"catalan",name:"català",serviceId:"ca"},{id:"croatian",name:"hrvatski",serviceId:"hr"},{id:"bosnian",name:"bosnian",serviceId:"bs-Latn"},{id:"polish",name:"Polski",serviceId:"pl"},{id:"latvian",name:"latviešu",serviceId:"lv"},{id:"maori",name:"Maori",serviceId:"mi"}],getMap:function(){if(typeof translate.service.edge.language.map>"u"){translate.service.edge.language.map=new Array;for(var e=0;e<translate.service.edge.language.json.length;e++){var t=translate.service.edge.language.json[e];translate.service.edge.language.map[t.id]=t.serviceId}}return translate.service.edge.language.map}},translate:function(e,t,a,n){var o=JSON.parse(decodeURIComponent(t.text));let r=translate.util.split(o,4e4,900);translate.request.send(translate.service.edge.api.auth,{},function(s){for(var l=translate.service.edge.language.getMap()[t.from],c=translate.service.edge.language.getMap()[t.to],f=translate.service.edge.api.translate.replace("{from}",l).replace("{to}",c),u=0;u<r.length;u++){for(var d=[],m=0;m<r[u].length;m++)d.push({Text:r[u][m]});translate.request.send(f,JSON.stringify(d),function(g){var v={};v.info="SUCCESS",v.result=1,v.from=t.from,v.to=t.to,v.text=[];for(var b=0;b<g.length;b++)v.text.push(g[b].translations[0].text);if(r.length>1){for(var $=-1,w=0;w<r.length;w++)if(r[w].length-v.text.length==0){$=w;break}$<0&&(console.log("------ERROR--------"),console.log("翻译内容过多，进行拆分，但拆分判断出现异常，currentIndex：-1 请联系 http://translate.zvo.cn/43006.html 说明"));for(var C=0;C<$;C++)for(var P=r[C].length,y=0;y<P;y++)v.text.unshift(null);for(var E=r.length-1;E>$;E--)for(var R=r[E].length,y=0;y<R;y++)v.text.push(null)}a(v)},"post",!0,{Authorization:"Bearer "+s,"Content-Type":"application/json"},n,!0)}},"get",!0,{"content-type":"application/x-www-form-urlencoded"},function(s){console.log("---------error--------"),console.log("edge translate service error, http code : "+s.status+", response text : "+s.responseText)},!0)}}},request:{api:{host:["https://api.translate.zvo.cn/","https://america.api.translate.zvo.cn/"],language:"language.json",translate:"translate.json",ip:"ip.json",connectTest:"connectTest.json",init:"init.json"},response:function(e){},speedDetectionControl:{hostMasterNodeCutTime:2e3,hostQueue:[],hostQueueIndex:-1,disableTime:1e6,getHostQueue:function(){if(translate.request.speedDetectionControl.hostQueue.length==0){var e=translate.storage.get("speedDetectionControl_hostQueue");if(e==null||typeof e>"u"){typeof translate.request.api.host=="string"&&(translate.request.api.host=[""+translate.request.api.host]),translate.request.speedDetectionControl.hostQueue=[];for(var t=0;t<translate.request.api.host.length;t++){var a=translate.request.api.host[t];translate.request.speedDetectionControl.hostQueue[t]={host:a,time:0}}}else translate.request.speedDetectionControl.hostQueue=JSON.parse(e);var n=translate.storage.get("speedDetectionControl_lasttime");(n==null||typeof n>"u")&&(n=0);var o=6e4;new Date().getTime()-n>o&&translate.request.speedDetectionControl.checkResponseSpeed()}return translate.request.speedDetectionControl.hostQueue},checkResponseSpeed_Storage:function(e,t){translate.request.speedDetectionControl.checkHostQueue.push({host:e,time:t}),translate.request.speedDetectionControl.checkHostQueue.sort((a,n)=>a.time-n.time),translate.storage.set("speedDetectionControl_hostQueue",JSON.stringify(translate.request.speedDetectionControl.checkHostQueue)),translate.storage.set("speedDetectionControl_lasttime",new Date().getTime()),translate.request.speedDetectionControl.hostQueue=translate.request.speedDetectionControl.checkHostQueue},checkResponseSpeed:function(){var e={"content-type":"application/x-www-form-urlencoded"};translate.request.speedDetectionControl.checkHostQueue=[],translate.request.speedDetectionControl.checkHostQueueMap=[],typeof translate.request.api.host=="string"&&(translate.request.api.host=[""+translate.request.api.host]);for(var t=0;t<translate.request.api.host.length;t++){var a=translate.request.api.host[t];translate.request.speedDetectionControl.checkHostQueueMap[a]={start:new Date().getTime()};try{translate.request.send(a+translate.request.api.connectTest,{host:a},function(n){var o=n.info,r=translate.request.speedDetectionControl.checkHostQueueMap[o],s=new Date().getTime()-r.start;translate.request.api.host[0]==o&&(s=s-translate.request.speedDetectionControl.hostMasterNodeCutTime,s<0&&(s=0)),translate.request.speedDetectionControl.checkResponseSpeed_Storage(o,s)},"post",!0,e,function(n){var o=n.requestURL.replace("connectTest.json","");translate.request.speedDetectionControl.checkResponseSpeed_Storage(o,translate.request.speedDetectionControl.disableTime)},!1)}catch(n){console.log(n)}}},getHostQueueIndex:function(){if(translate.request.speedDetectionControl.hostQueueIndex<0){var e=translate.storage.get("speedDetectionControl_hostQueueIndex");typeof e>"u"||e==null?(translate.request.speedDetectionControl.hostQueueIndex=0,translate.storage.set("speedDetectionControl_hostQueueIndex",0)):translate.request.speedDetectionControl.hostQueueIndex=e}return translate.request.speedDetectionControl.hostQueueIndex},getHost:function(){var e=translate.request.speedDetectionControl.getHostQueue(),t=translate.request.speedDetectionControl.getHostQueueIndex();return e.length>t||(console.log("异常，下标越界了！index："+t),t=e.length-1),e[t].host}},getUrl:function(e){var t=translate.request.speedDetectionControl.getHost(),a=t+e+"?v="+translate.version;return a},post:function(e,t,a,n){var o={"content-type":"application/x-www-form-urlencoded"};if(!(typeof t>"u")){if(translate.enterprise.automaticAdaptationService(),translate.request.getUrl(e),translate.service.name=="client.edge"){if(e==translate.request.api.translate){translate.service.edge.translate(e,t,a,n);return}if(e==translate.request.api.language){var r={};r.info="SUCCESS",r.result=1,r.list=translate.service.edge.language.json,a(r);return}}this.send(e,t,a,"post",!0,o,n,!0)}},send:function(e,t,a,n,o,r,s,l){var c="";if((t==null||typeof t>"u")&&(t={}),typeof t=="string")c=t;else{t.browserDefaultLanguage=translate.util.browserDefaultLanguage(),typeof translate.enterprise.key<"u"&&typeof translate.enterprise.key=="string"&&translate.enterprise.key.length>0&&(t.key=translate.enterprise.key);for(var f in t)c.length>0&&(c=c+"&"),c=c+f+"="+t[f]}e.indexOf("https://")==0||e.indexOf("http://")==0||(e=translate.request.getUrl(e));var u=null;try{u=new XMLHttpRequest}catch{u=new ActiveXObject("Microsoft.XMLHTTP")}if(u.open(n,e,o),r!=null)for(var f in r)u.setRequestHeader(f,r[f]);return translate.service.name=="translate.service"&&u.setRequestHeader("currentpage",window.location.href+""),u.send(c),u.onreadystatechange=function(){if(u.readyState==4)if(translate.request.response(u),u.status==200){var d=null;if(!(typeof u.responseText>"u"||u.responseText==null)){if(u.responseText.indexOf("{")>-1&&u.responseText.indexOf("}")>-1)try{d=JSON.parse(u.responseText)}catch(m){console.log(m)}}d==null?a(u.responseText):a(d)}else l&&(e.indexOf(translate.request.api.connectTest)>-1||(translate.service.name=="translate.service"&&!translate.enterprise.isUse&&console.log(`----- translate.js 提示 -----
非常抱歉，translate.service 开源免费的翻译服务器当前并发及流量太大导致阻塞！
这个情况是时不时发生的，大概一天24小时可能会有一二十分钟这种情况，主要是因为使用量太大了，月使用量能超四十亿次，所以在高发时会出现这种情况。
解决这种情况可以有两种方案：
【方案一】：使用采用最新版本 3.8.0及更高版本，js引用文件为 https://cdn.staticfile.net/translate.js/3.8.0/translate.js 并且使用 client.edge 模式 （增加一行设置代码就好，可参考 https://translate.zvo.cn/4081.html ），这样就不会再出现这种情况了。这个是我们的 translate.service 通道阻塞导致，更换别的通道就可以避免这样了。而且这个方案也是完全免费的。 
【方案二】：采用企业级稳定翻译通道 ,但是这个相比于 方案一 来说，是有一定的收费的，大概一年600，这个就是专门为了高速及高稳定准备的，而相比于这个方案二，方案一则是全免费的。 因为方案二我们是部署了两个集群，而每个集群又下分了数个网络节点，包含中国大陆、香港、美国、欧洲、 等多个州，充分保障稳定、高效，同样也产生了不少成本，所以才需要付费。更多信息说明可以参考： http://translate.zvo.cn/4087.html 

-------------`),console.log("------- translate.js service api response error --------"),console.log("    http code : "+u.status),console.log("    response : "+u.response),console.log("    request url : "+e),console.log("    request data : "+JSON.stringify(t)),console.log("    request method : "+n),console.log("---------------------- end ----------------------"))),u.requestURL=e,s!=null&&s(u)},u},translateText:function(e,t){var a=new Array,n=translate.language.getLocal(),o=translate.language.getCurrent();if(typeof e=="string")a[0]=e;else{var r=Object.prototype.toString.call(e);if(r=="[object Array]")a=e;else if(r=="[object Object]")typeof e.texts>"u"&&console.log("translate.request.translateText 传入的值类型异常，因为你没有传入 obj.texts 要翻译的具体文本！ 请查阅文档： https://translate.zvo.cn/4077.html"),typeof e.texts=="string"?a=[e.texts]:a=e.texts,typeof e.from=="string"&&e.from.length>0&&(n=e.from),typeof e.to=="string"&&e.to.length>0&&(o=e.to);else{console.log("translate.request.translateText 传入的值类型错误，请查阅文档： https://translate.zvo.cn/4077.html");return}}var s=translate.request.api.translate,l={from:n,to:o,text:encodeURIComponent(JSON.stringify(a))};translate.request.post(s,l,function(c){c.result==0&&(console.log("=======ERROR START======="),console.log("from : "+c.from),console.log("to : "+c.to),console.log("translate text array : "+a),console.log("response : "+c.info),console.log("=======ERROR END  =======")),t(c)},null)},listener:{minIntervalTime:800,lasttime:0,executetime:0,delayExecuteTime:200,addExecute:function(){var e=Date.now();translate.request.listener.lasttime==0?(translate.request.listener.executetime=e,translate.request.listener.lasttime=1):translate.request.listener.executetime>1||(e<translate.request.listener.lasttime+translate.request.listener.minIntervalTime?translate.request.listener.executetime=translate.request.listener.lasttime+translate.request.listener.minIntervalTime:translate.request.listener.executetime=e)},trigger:function(e){return!0},start:function(){if(typeof translate.request.listener.isStart<"u")return;translate.request.listener.isStart=!0,setInterval(function(){var t=Date.now();if(translate.request.listener.executetime>1&&t>translate.request.listener.executetime+translate.request.listener.delayExecuteTime){translate.request.listener.executetime=0,translate.request.listener.lasttime=t;try{translate.execute()}catch(a){console.log(a)}}},100),new PerformanceObserver(t=>{for(var a=!1,n=0;n<t.getEntries().length;n++){var o=t.getEntries()[n];if(o.initiatorType==="fetch"||o.initiatorType==="xmlhttprequest"){var r=o.name;typeof translate.request.api.host=="string"&&(translate.request.api.host=[translate.request.api.host]);for(var s=!1,l=0;l<translate.request.api.host.length;l++)if(r.indexOf(translate.request.api.host[l])>-1){s=!0;break}if(r.indexOf(translate.service.edge.api.auth)>-1&&(s=!0),r.indexOf(".microsofttranslator.com/translate")>-1&&(s=!0),s||!translate.request.listener.trigger())continue;a=!0;break}}a&&translate.request.listener.addExecute()}).observe({type:"resource",buffered:!0})}}},storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},images:{queues:[],add:function(e){for(var t in e)translate.images.queues[t]=e[t]},execute:function(){if(!(Object.keys(translate.images.queues).length<1)){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++){var a=e[t];if(!(typeof a.src>"u"||a.src==null||a.src.length==0)){var n=a.getAttribute("src");for(var o in translate.images.queues){var r=o,s=translate.images.queues[o];r==n&&(s=s.replace(new RegExp("{language}","g"),translate.to),a.src=s)}}}for(var l=document.getElementsByTagName("*"),t=0;t<l.length;t++){var c=l[t],f=window.getComputedStyle(c,null),u=f.backgroundImage;if(u!="none"){var d=translate.images.gainCssBackgroundUrl(u);if(typeof translate.images.queues[d]<"u"){var s=translate.images.queues[d];s=s.replace(new RegExp("{language}","g"),translate.to),c.style.backgroundImage='url("'+s+'")'}}}}},gainCssBackgroundUrl:function(e){var t=e.indexOf('"'),a=e.lastIndexOf('"');if(t!=-1&&a!=-1){var n=e.substring(t+1,a);return n}return e}},reset:function(){var e=translate.language.getCurrent();for(var t in translate.nodeQueue)for(var a in translate.nodeQueue[t].list)for(var n in translate.nodeQueue[t].list[a]){var o=translate.nodeQueue[t].list[a][n];for(var r in o.nodes){var s=translate.storage.get("hash_"+e+"_"+n);typeof s>"u"||s!=null&&s.length!=0&&translate.element.nodeAnalyse.analyse(o.nodes[r].node,s,o.original,o.nodes[r].node.attribute)}}translate.storage.set("to",""),translate.to=null,translate.selectLanguageTag.render()},selectionTranslate:{selectionX:0,selectionY:0,callTranslate:function(e){let t=window.getSelection();if(t.anchorOffset==t.focusOffset)return;let a=window.getSelection().toString();var n=translate.request.api.translate,o={from:translate.language.getLocal(),to:translate.to,text:encodeURIComponent(JSON.stringify([a]))};translate.request.post(n,o,function(r){if(r.result==0)return;let s=document.querySelector("#translateTooltip");s.innerText=r.text[0],s.style.top=selectionY+20+"px",s.style.left=selectionX+50+"px",s.style.display=""},null)},start:function(){let e=document.createElement("span");e.innerText="",e.setAttribute("id","translateTooltip"),e.setAttribute("style","background-color:black;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:999;top:150%;left:50%; "),document.body.appendChild(e),document.addEventListener("mousedown",t=>{selectionX=t.pageX,selectionY=t.pageY},!1),document.addEventListener("mouseup",translate.selectionTranslate.callTranslate,!1),document.addEventListener("click",t=>{document.querySelector("#translateTooltip").style.display="none"},!1)}},enterprise:{isUse:!1,use:function(){if(translate.enterprise.isUse=!0,translate.request.speedDetectionControl.hostMasterNodeCutTime=300,translate.request.api.host=["https://america-enterprise-api-translate.zvo.cn/","https://beijing.enterprise.api.translate.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn/","https://america.api.translate.zvo.cn:666/","https://api.translate.zvo.cn:666/","https://api.translate.zvo.cn:888/"],translate.service.name=="client.edge"){translate.service.name="translate.service",console.log("您已启用了企业级翻译通道 translate.enterprise.use(); (文档：https://translate.zvo.cn/4087.html) , 所以您设置的 translate.service.use('client.edge'); (文档：https://translate.zvo.cn/4081.html) 将失效不起作用，有企业级翻译通道全部接管。");return}},automaticAdaptationService:function(){if(translate.enterprise.isUse){var e=translate.request.speedDetectionControl.getHostQueue();e.length>0&&e[0].time+1>translate.request.speedDetectionControl.disableTime&&(translate.service.name="client.edge")}},key:""},init:function(){if(!(typeof translate.init_execute<"u")){translate.init_execute="已进行";try{translate.request.send(translate.request.api.init,{},function(data){if(data.result==0){console.log("translate.js init 初始化异常："+data.info);return}else if(data.result==1){var newVersion=translate.util.versionStringToInt(data.version),currentVersion=translate.util.versionStringToInt(translate.version.replace("v",""));newVersion>currentVersion&&console.log("Tip : translate.js find new version : "+data.version)}else eval(data.info)},"post",!0,null,function(e){},!1)}catch(e){}}},progress:{api:{isTip:!0,setUITip:function(e){translate.progress.api.isTip=e},startUITip:function(){const e=document.createElement("style");e.textContent=`
					/* CSS部分 */
					/* 灰色水平加载动画 */
					.translate_api_in_progress {
					  position: relative;
					  overflow: hidden; /* 隐藏超出部分的动画 */
					}

					/* 蒙版层 */
					.translate_api_in_progress::after {
					  content: '';
					  position: absolute;
					  top: 0;
					  left: 0;
					  width: 100%;
					  height: 100%;
					  background: rgba(255, 255, 255, 1); /* 半透明白色遮罩 */
					  z-index: 2;
					}

					/* 水平加载条动画 */
					.translate_api_in_progress::before {
					  content: '';
					  position: absolute;
					  top: 50%;
					  left: 0;
					  width: 100%;
					  height:100%; /* 细线高度 */
					  background: linear-gradient(
					    90deg,
					    transparent 0%,
					    #e8e8e8 25%,  /* 浅灰色 */
					    #d0d0d0 50%,  /* 中灰色 */
					    #e8e8e8 75%,  /* 浅灰色 */
					    transparent 100%
					  );
					  background-size: 200% 100%;
					  animation: translate_api_in_progress_horizontal-loader 3.5s linear infinite;
					  z-index: 3;
					  transform: translateY(-50%);
					}

					@keyframes translate_api_in_progress_horizontal-loader {
					  0% {
					    background-position: 200% 0;
					  }
					  100% {
					    background-position: -200% 0;
					  }
					}
				`,document.head.appendChild(e),translate.progress.api.isTip&&(translate.listener.execute.renderStartByApi.push(function(t){for(var a in translate.nodeQueue[t].list)if(translate.language.getCurrent()!=a)for(var n in translate.nodeQueue[t].list[a])for(var o in translate.nodeQueue[t].list[a][n].nodes){var r=translate.nodeQueue[t].list[a][n].nodes[o].node,s=r.parentNode;if(s!=null&&s.childNodes.length==1)if(typeof s.className>"u"||s.className==null||s.className=="")s.className=" translate_api_in_progress";else{if(s.className.indexOf("translate_api_in_progress")>-1)continue;s.className=s.className+" translate_api_in_progress"}}}),translate.listener.execute.renderFinishByApi.push(function(t){for(var a in translate.nodeQueue[t].list)if(translate.language.getCurrent()!=a)for(var n in translate.nodeQueue[t].list[a])for(var o in translate.nodeQueue[t].list[a][n].nodes){var r=translate.nodeQueue[t].list[a][n].nodes[o].node,s=r.parentNode;if(s!=null){var l=s.className;typeof l>"u"||l==null||l==""||l.indexOf("translate_api_in_progress")<-1||(s.className=l.replace(/translate_api_in_progress/g,""))}}}))}}},jsObject:function(e,t=""){var a={};if(typeof e=="object"&&e!==null)if(Array.isArray(e))e.forEach((n,o)=>{const r=t?`${t}[${o}]`:`[${o}]`;translate.jsObject(n,r)});else for(const n in e){const o=t?`${t}.${n}`:n;typeof e[n]=="object"&&e[n]!==null?translate.jsObject(e[n],o):typeof e[n]=="string"&&typeof a[e[n]]>"u"&&(a[e[n]]=new Array)}else typeof e=="string"&&typeof e=="string"&&(typeof a[e]>"u"&&(a[e]=new Array),a[e].push("not key"));return a}},nodeuuid={index:function(e){var t=e.parentNode;if(t==null)return"";var a;if(typeof e.tagName>"u")a=t.childNodes;else{a=[];for(var n=t.childNodes,o=0;o<n.length;o++)n[o].tagName===e.tagName&&a.push(n[o])}var r=Array.prototype.indexOf.call(a,e);return e.nodeName+""+(r+1)},uuid:function(e){for(var t="",a=e;a!=null;){var n=nodeuuid.index(a);n!=""&&(t!=""&&(t="_"+t),t=n+t),a=a.parentNode}return t},enableRemoteDebug:function(){}};console.log(`------ translate.js ------
Two lines of js html automatic translation, page without change, no language configuration file, no API Key, SEO friendly! Open warehouse : https://github.com/xnx3/translate 
两行js实现html全自动翻译。 无需改动页面、无语言配置文件、无API Key、对SEO友好！完全开源，代码仓库：https://gitee.com/mail_osc/translate`),function(e,t){module.exports?module.exports=t():e.translate=t()}(i18nJsautotranslate,function(){return translate})}(i18nJsautotranslate$1)),i18nJsautotranslate$1.exports}var i18nJsautotranslateExports=requireI18nJsautotranslate();const translate=getDefaultExportFromCjs(i18nJsautotranslateExports),historyApi={getHistory:async()=>await request({url:"/prompt/history/get_history",method:"get"}),saveHistory:async e=>await request({url:"/prompt/history/add_history",method:"post",data:e}),deleteHistory:async e=>await request({url:"/prompt/history/delete_history",method:"post",data:{id_index:e}}),batchDeleteHistory:async e=>await request({url:"/prompt/history/batch_delete_history",method:"post",data:{id_index:e}}),getFavorite:async()=>await request({url:"/prompt/collect_history/get_collect_history",method:"get"}),addFavorite:async e=>await request({url:"/prompt/collect_history/add_collect_history",method:"post",data:e}),editFavorite:async e=>await request({url:"/prompt/collect_history/edit_collect_history",method:"post",data:e}),deleteFavorite:async e=>await request({url:"/prompt/collect_history/delete_collect_history",method:"post",data:{id_index:e}}),batchDeleteFavorite:async e=>await request({url:"/prompt/collect_history/batch_delete_collect_history",method:"post",data:{id_indices:e}})},_hoisted_1$e={class:"lora-manager-top-bar"},_hoisted_2$d=["placeholder"],_hoisted_3$d=["title"],_hoisted_4$c=["title"],_hoisted_5$b={class:"checkbox-container"},_hoisted_6$b=["onClick"],_hoisted_7$b=["onClick"],_hoisted_8$b={key:0,class:"loading-indicator"},_hoisted_9$b={key:1,class:"empty-list"},_hoisted_10$a=["onClick","onMouseover"],_hoisted_11$a=["src","alt","title"],_hoisted_12$a={key:0,class:"loading-more"},_hoisted_13$9={key:1,class:"no-more-data"},prefix$3="weilin_prompt_ui_",_sfc_main$e={__name:"lora_index",props:{loraManager:{type:String,default:"look"}},setup(e,{expose:t}){const{t:a}=useI18n(),n=ref(!1),o=ref(!1),r=ref(!1),s=ref(!1),l=ref("all"),c=ref(""),f=ref(null),u=ref(""),d=ref(null),m=ref(!1),g=ref(""),v=ref(100),b=ref(0),$=ref(),w=ref(!1),C=ref(!1),P=ref(),y=ref(localStorage.getItem("weilin_prompt_ui_showHoverInfo")),E=ref(localStorage.getItem("weilin_prompt_ui_clickAddTag"));(y.value===null||y.value===void 0||y.value==="")&&(localStorage.setItem("weilin_prompt_ui_showHoverInfo",!0),y.value=!0),(E.value===null||E.value===void 0||E.value==="")&&(localStorage.setItem("weilin_prompt_ui_clickAddTag",!1),E.value=!1);const R=e;watch(y,_=>{localStorage.setItem("weilin_prompt_ui_showHoverInfo",_)}),watch(E,_=>{localStorage.setItem("weilin_prompt_ui_clickAddTag",_)});const F=ref(1),H=ref(50),j=computed(()=>{if(l.value==="all"){const _=O.value;if(_){const M=Object.values(_);return Math.ceil(M.length/H.value)}}else{const _=O.value[c.value];if(_){const M=Object.values(_);return Math.ceil(M.length/H.value)}return 1}}),fe=()=>{w.value=!0,C.value=!0},oe=(_,M)=>{if(!y.value||y.value=="false"||(C.value=!0,g.value===_&&m.value))return;const _e=M.currentTarget.getBoundingClientRect(),me=window.innerHeight,J=450;let ce={left:_e.left+(_e.width-J)/2,top:_e.top+_e.height+10};ce.top+310>me&&(ce.top=_e.top-310),ce.left=Math.max(10,Math.min(ce.left,window.innerWidth-J-10)),ce.top=Math.max(10,Math.min(ce.top,me-310)),v.value=ce.left,b.value=ce.top,m.value=!0,g.value=_,nextTick(()=>{P.value.refresh()})},V=()=>{C.value=!1,setTimeout(()=>{!w.value&&!C.value&&(m.value=!1,g.value="",w.value=!1)},200)},q=()=>{m.value=!1,g.value="",w.value=!1},Q=ref([]),O=ref([]),G=ref(""),ee=ref(0),A=(_,M)=>{ee.value=_,G.value=M},L=async()=>{try{const _=await loraApi.getLoraFolderList();Q.value=_.data}catch(_){console.error("Failed to get folder list:",_),message$1({type:"error",str:"message.loadFailed"})}},W=()=>{if(!d.value||r.value||s.value)return;const _=d.value;_.scrollHeight-_.scrollTop-_.clientHeight<100&&X()},ae=ref(!1);let Y=null;const ne=()=>{Y&&clearTimeout(Y),Y=setTimeout(()=>{u.value.length>0?(ae.value=!0,B()):(ae.value=!1,I())},300)},te=_=>{var M;return(M=_.local_info)!=null&&M.name&&_.local_info.name!==""&&_.local_info.name.length>0?_.local_info.name:_.name},ge=ref(),re=_=>{R.loraManager==="addLora"?pe(_):R.loraManager==="prompt_inner"&&E.value?T(_):ge.value.open(_)},B=async()=>{try{const _=await loraApi.searchLoraGetFolderList(u.value);if(O.value=_.data,O.value.length>0){F.value=1;const M=Object.values(O.value),U=(F.value-1)*50,_e=U+50,me=M.slice(U,_e);K(me)}}catch(_){console.error("Failed to get folder list:",_),message$1({type:"error",str:"message.loadFailed"})}},z=ref([]),Z=_=>{if(_==="all"){z.value=[],l.value=_,c.value="/",O.value=Q.value[_];const M=O.value;if(M){s.value=!1,F.value=1;const U=Object.values(M),_e=(F.value-1)*50,me=_e+50,J=U.slice(_e,me);K(J)}}else{z.value=[],l.value=_,c.value="/",O.value=Q.value[_];const M=O.value["/"];if(M){s.value=!1,F.value=1;const U=Object.values(M),_e=(F.value-1)*50,me=_e+50,J=U.slice(_e,me);K(J)}}},D=_=>{if(_!=c.value){c.value=_,z.value=[];const M=O.value[c.value];if(M){s.value=!1,F.value=1;const U=Object.values(M),_e=(F.value-1)*50,me=_e+50,J=U.slice(_e,me);K(J)}}},K=async _=>{const M=await loraApi.getLoraRangeList(_);F.value===1?z.value=M.data.loras:z.value=z.value.concat(M.data.loras)},x=async()=>{if(f.value!=null){message$1({type:"warn",str:"message.isLoading"});return}try{message$1({type:"success",str:"message.isLoadingPleaseWait"}),await loraApi.getAllLoraList(),f.value=setInterval(async()=>{await S()},1e3)}catch(_){console.error("Failed to get all lora list:",_),message$1({type:"error",str:"message.loadFailed"})}},S=async()=>{try{const _=await loraApi.getAllLoraStatus();_.data.isLoading===!1?(clearInterval(f.value),f.value=null,message$1({type:"success",str:"message.loaddingSuccess"}),await I()):message$1({type:"warn",str:"message.loaddingPrc",name:_.data.progress})}catch(_){console.error("Failed to get lora status:",_),clearInterval(f.value),f.value=null,message$1({type:"error",str:"message.loadFailed"})}},I=async()=>{if(!n.value){n.value=!0,F.value=1,s.value=!1,r.value=!1;try{await L(),nextTick(()=>{Z("all")})}catch(_){console.error("Failed to refresh lora list:",_)}finally{n.value=!1}}},X=async()=>{if(F.value>=j.value){s.value=!0;return}r.value=!0;try{if(F.value++,ae.value){if(O.value=res.data,O.value.length>0){const _=Object.values(O.value),M=(F.value-1)*50,U=M+50,_e=_.slice(M,U);K(_e)}}else if(l.value==="all"){O.value=Q.value[l.value];const _=O.value;if(_){const M=Object.values(_),U=(F.value-1)*50,_e=U+50,me=M.slice(U,_e);K(me)}}else{const _=O.value[c.value];if(_){const M=Object.values(_),U=(F.value-1)*50,_e=U+50,me=M.slice(U,_e);K(me)}}}finally{r.value=!1}},ie=()=>{F.value=1,s.value=!1,r.value=!1};watch([l,c,u],()=>{ie()}),onMounted(()=>{I()});const pe=_=>{var M,U,_e,me,J,ce,Se,xe,Ne;ee.value===0?window.postMessage({type:"weilin_prompt_ui_selectLora",lora:{name:_.model_name,display_name:te(_),lora:_.name,weight:(M=_.local_info)!=null&&M.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(U=_.local_info)!=null&&U.strWeight?_.local_info.strWeight:1,loraWorks:(_e=_.local_info)!=null&&_e.loraWorks?_.local_info.loraWorks:""}},"*"):ee.value===1?window.postMessage({type:"weilin_prompt_ui_selectLora_stack_"+G.value,lora:{name:_.model_name,display_name:te(_),lora:_.name,weight:(me=_.local_info)!=null&&me.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(J=_.local_info)!=null&&J.strWeight?_.local_info.strWeight:1,loraWorks:(ce=_.local_info)!=null&&ce.loraWorks?_.local_info.loraWorks:""}},"*"):ee.value===2&&window.postMessage({type:"weilin_prompt_ui_selectLora_stack_node_"+G.value,lora:{name:_.model_name,display_name:te(_),lora:_.name,weight:(Se=_.local_info)!=null&&Se.strengthMin?_.local_info.strengthMin:1,text_encoder_weight:(xe=_.local_info)!=null&&xe.strWeight?_.local_info.strWeight:1,loraWorks:(Ne=_.local_info)!=null&&Ne.loraWorks?_.local_info.loraWorks:""}},"*")},T=_=>{var M,U,_e;window.postMessage({type:"weilin_prompt_ui_addLoraTag_inner",lora:{tag:`<wlr:${_.model_name}:${(M=_.local_info)!=null&&M.strengthMin?_.local_info.strengthMin:1}:${(U=_.local_info)!=null&&U.strWeight?_.local_info.strWeight:1}>`,loraWorks:(_e=_.local_info)!=null&&_e.loraWorks?_.local_info.loraWorks:""}},"*")};return t({openSetSeed:A}),(_,M)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${prefix$3}lora-manager`)},[createBaseVNode("div",_hoisted_1$e,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":M[0]||(M[0]=U=>u.value=U),class:normalizeClass(`${prefix$3}search-input`),placeholder:unref(a)("loraManager.searchPlaceholder"),onInput:ne},null,42,_hoisted_2$d),[[vModelText,u.value]]),createBaseVNode("button",{class:normalizeClass(`${prefix$3}refresh-btn`),onClick:I,title:unref(a)("loraManager.refresh")},[(openBlock(),createElementBlock("svg",{class:normalizeClass([`${prefix$3}refresh-icon`,{"is-rotating":n.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},M[3]||(M[3]=[createBaseVNode("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1)]),2))],10,_hoisted_3$d),createBaseVNode("button",{style:{"margin-left":"10px"},class:normalizeClass(`${prefix$3}refresh-btn`),onClick:x,title:unref(a)("loraManager.cacheAll")},[(openBlock(),createElementBlock("svg",{class:normalizeClass([`${prefix$3}refresh-icon`,{"is-rotating":n.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},M[4]||(M[4]=[createBaseVNode("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},null,-1)]),2))],10,_hoisted_4$c),createBaseVNode("div",_hoisted_5$b,[createBaseVNode("label",{class:normalizeClass(`${prefix$3}checkbox-label`)},[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":M[1]||(M[1]=U=>y.value=U),class:normalizeClass(`${prefix$3}checkbox`)},null,2),[[vModelCheckbox,y.value]]),M[5]||(M[5]=createBaseVNode("span",null,"悬浮信息",-1))],2),e.loraManager=="prompt_inner"?(openBlock(),createElementBlock("label",{key:0,class:normalizeClass(`${prefix$3}checkbox-label`)},[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":M[2]||(M[2]=U=>E.value=U),class:normalizeClass(`${prefix$3}checkbox`)},null,2),[[vModelCheckbox,E.value]]),M[6]||(M[6]=createBaseVNode("span",null,"点击添加Tag",-1))],2)):createCommentVNode("",!0)])]),ae.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${prefix$3}category-nav`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(Q.value),U=>(openBlock(),createElementBlock("button",{key:U,class:normalizeClass([`${prefix$3}category-btn`,{active:l.value===U}]),onClick:_e=>Z(U)},toDisplayString$1(U==="/"?unref(a)("loraManager.root"):U=="all"?unref(a)("loraManager.all"):U),11,_hoisted_6$b))),128))],2)),l.value!="all"&&!ae.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${prefix$3}subcategory-nav`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(O.value),U=>(openBlock(),createElementBlock("button",{key:U,class:normalizeClass([`${prefix$3}category-btn`,{active:c.value===U}]),onClick:_e=>D(U)},toDisplayString$1(U==="/"?unref(a)("loraManager.root"):U=="all"?unref(a)("loraManager.all"):U),11,_hoisted_7$b))),128))],2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(`${prefix$3}lora-list-container`),ref_key:"scrollContainer",ref:d,onScroll:W},[o.value&&!r.value?(openBlock(),createElementBlock("div",_hoisted_8$b,toDisplayString$1(unref(a)("loraManager.loading")),1)):z.value.length===0?(openBlock(),createElementBlock("div",_hoisted_9$b,toDisplayString$1(unref(a)("loraManager.noResults")),1)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(`${prefix$3}lora-list`),style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"}},[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.value,U=>(openBlock(),createElementBlock("div",{key:U.file_path,class:normalizeClass(`${prefix$3}lora-card`),ref_for:!0,ref_key:"loraCardRef",ref:$,onClick:_e=>re(U),onMouseover:_e=>oe(U.name,_e),onMouseleave:V,style:{display:"flex","flex-direction":"column","min-height":"200px",cursor:"pointer"}},[createBaseVNode("div",{class:normalizeClass(`${prefix$3}lora-preview`),style:{flex:"1",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%"}},[U.preview?(openBlock(),createElementBlock("img",{key:0,src:U.preview,alt:U.model_name,title:U.model_name,loading:"lazy",style:{width:"100%",height:"100%","object-fit":"contain","min-height":"150px"}},null,8,_hoisted_11$a)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${prefix$3}no-preview`),style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","min-height":"150px"}},M[7]||(M[7]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[createBaseVNode("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)]),2))],2),createBaseVNode("div",{class:normalizeClass(`${prefix$3}lora-name`),style:{padding:"8px","text-align":"center","word-break":"break-word","white-space":"normal",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","min-height":"40px","max-height":"40px","line-height":"1.2","text-overflow":"ellipsis"}},toDisplayString$1(te(U)),3)],42,_hoisted_10$a))),128))],2),createBaseVNode("div",null,[r.value?(openBlock(),createElementBlock("div",_hoisted_12$a,toDisplayString$1(unref(a)("loraManager.loadingMore")),1)):createCommentVNode("",!0),!r.value&&s.value?(openBlock(),createElementBlock("div",_hoisted_13$9,toDisplayString$1(unref(a)("loraManager.noMoreData")),1)):createCommentVNode("",!0)])],34),createVNode(loraDetail,{ref_key:"loraDetailRef",ref:ge},null,512),m.value?(openBlock(),createBlock(LoraCard,{key:2,ref_key:"loraCardItem",ref:P,fileNmae:g.value,paddingLeft:v.value,paddingTop:b.value,onCardLeave:q,onCardenter:fe},null,8,["fileNmae","paddingLeft","paddingTop"])):createCommentVNode("",!0)],2))}},LoraManager=_export_sfc(_sfc_main$e,[["__scopeId","data-v-e5643d0b"]]),_hoisted_1$d={class:"tag-manager"},_hoisted_2$c={class:"selected-categories-container"},_hoisted_3$c={class:"selected-categories-header"},_hoisted_4$b={class:"selected-categories-content"},_hoisted_5$a={key:0,class:"selected-category-section"},_hoisted_6$a={class:"section-title"},_hoisted_7$a={class:"selected-items"},_hoisted_8$a={class:"category-name"},_hoisted_9$a=["onClick"],_hoisted_10$9={key:1,class:"selected-category-section"},_hoisted_11$9={class:"section-title"},_hoisted_12$9={class:"selected-items"},_hoisted_13$8={class:"category-name"},_hoisted_14$7={class:"subcategory-name"},_hoisted_15$7=["onClick"],_hoisted_16$7={key:2,class:"no-selected"},_hoisted_17$7={class:"category-tabs"},_hoisted_18$5={class:"tabs-wrapper primary-tabs"},_hoisted_19$5={class:"tabs-scroll"},_hoisted_20$5=["onClick"],_hoisted_21$5={class:"tab-text"},_hoisted_22$5=["onClick","title"],_hoisted_23$5={key:0,class:"tabs-wrapper group-tabs"},_hoisted_24$5={class:"tabs-scroll"},_hoisted_25$5=["onClick"],_hoisted_26$5={class:"tab-text"},_hoisted_27$5=["onClick","disabled","title"],_sfc_main$d={__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=a,r=ref([]),s=ref(null),l=ref(null),c=ref([]),f=ref(!1),u=ref([]),d=ref(!1),m=ref(0),g=computed(()=>u.value.filter(q=>!q.sub)),v=computed(()=>u.value.filter(q=>q.sub)),b=q=>u.value.findIndex(Q=>Q.group.p_uuid===q.group.p_uuid&&!Q.sub),$=q=>u.value.findIndex(Q=>Q.group.p_uuid===q.group.p_uuid&&Q.sub&&Q.sub.g_uuid===q.sub.g_uuid),w=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},C=async()=>{try{const q=await tagsApi.getTagsGroupList();if(r.value=q.info,l.value){const Q=r.value.flatMap(O=>O.groups).find(O=>O.p_uuid===l.value.p_uuid);Q?l.value=Q:l.value=null}if(s.value){const Q=r.value.find(O=>O.p_uuid===s.value.p_uuid);Q?s.value=Q:s.value=null}}catch(q){console.error("获取标签列表失败:",q)}},P=q=>{if(!q||q==="transparent")return"var(--primary-text)";let Q,O,G,ee=1;if(q.startsWith("rgba")){const L=q.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);L&&([,Q,O,G,ee]=L.map(Number))}else if(q.startsWith("rgb")){const L=q.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);L&&([,Q,O,G]=L.map(Number))}return ee<.5?"var(--primary-text)":(Q*299+O*587+G*114)/1e3>128?"#000000":"#ffffff"};onMounted(()=>{window.addEventListener("message",oe)}),onBeforeUnmount(()=>{window.removeEventListener("message",oe)});const y=q=>{s.value=q,l.value=null,f.value=!1,c.value=[]},E=q=>{R(s.value)||(l.value=q,f.value=!1,c.value=[])},R=q=>q?u.value.some(Q=>Q.group.p_uuid===q.p_uuid&&!Q.sub):!1,F=q=>{const Q=u.value.findIndex(O=>O.group.p_uuid===q.p_uuid&&!O.sub);Q!==-1?u.value.splice(Q,1):(u.value=u.value.filter(O=>O.group.p_uuid!==q.p_uuid),u.value.push({group:{p_uuid:q.p_uuid,name:q.name},sub:null}))},H=(q,Q)=>{if(R(q))return;const O=u.value.findIndex(G=>G.group.p_uuid===q.p_uuid&&G.sub&&G.sub.g_uuid===Q.g_uuid);if(O!==-1)u.value.splice(O,1);else{const G=u.value.findIndex(ee=>ee.group.p_uuid===q.p_uuid&&!ee.sub);G!==-1&&u.value.splice(G,1),u.value.push({group:{p_uuid:q.p_uuid,name:q.name},sub:Q?{g_uuid:Q.g_uuid,name:Q.name}:null})}},j=q=>{u.value.splice(q,1)},fe=()=>{u.value=[]},oe=q=>{q.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&C()},V=()=>{if(u.value.length===0){message$1({type:"warn",str:"message.pleaseSelectGroup"});return}o("sureSelect",{data:u.value,index:m.value}),d.value=!1};return t({open:(q,Q)=>{w(),m.value=q,u.value=Q,d.value=!0}}),(q,Q)=>(openBlock(),createBlock(Dialog,{modelValue:d.value,"onUpdate:modelValue":Q[1]||(Q[1]=O=>d.value=O),title:unref(n)("importDialog.selectTitle")},{footer:withCtx(()=>[createBaseVNode("button",{onClick:Q[0]||(Q[0]=O=>d.value=!1)},toDisplayString$1(unref(n)("promptBox.settings.close")),1),createBaseVNode("button",{onClick:V},toDisplayString$1(unref(n)("importDialog.sureSelect")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("div",_hoisted_3$c,[createBaseVNode("span",null,toDisplayString$1(unref(n)("importDialog.selectedCategories")),1),u.value.length>0?(openBlock(),createElementBlock("button",{key:0,class:"clear-all-btn",onClick:fe},toDisplayString$1(unref(n)("importDialog.clearAll")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_4$b,[g.value.length>0?(openBlock(),createElementBlock("div",_hoisted_5$a,[createBaseVNode("div",_hoisted_6$a,toDisplayString$1(unref(n)("importDialog.primaryCategories")),1),createBaseVNode("div",_hoisted_7$a,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(O,G)=>(openBlock(),createElementBlock("div",{key:"primary-"+G,class:"selected-item"},[createBaseVNode("span",_hoisted_8$a,toDisplayString$1(O.group.name),1),createBaseVNode("button",{class:"remove-selected-btn",onClick:ee=>j(b(O))},"×",8,_hoisted_9$a)]))),128))])])):createCommentVNode("",!0),v.value.length>0?(openBlock(),createElementBlock("div",_hoisted_10$9,[createBaseVNode("div",_hoisted_11$9,toDisplayString$1(unref(n)("importDialog.subCategories")),1),createBaseVNode("div",_hoisted_12$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value,(O,G)=>(openBlock(),createElementBlock("div",{key:"sub-"+G,class:"selected-item"},[createBaseVNode("span",_hoisted_13$8,toDisplayString$1(O.group.name),1),Q[2]||(Q[2]=createBaseVNode("span",{class:"separator"},">",-1)),createBaseVNode("span",_hoisted_14$7,toDisplayString$1(O.sub.name),1),createBaseVNode("button",{class:"remove-selected-btn",onClick:ee=>j($(O))},"×",8,_hoisted_15$7)]))),128))])])):createCommentVNode("",!0),u.value.length===0?(openBlock(),createElementBlock("div",_hoisted_16$7,toDisplayString$1(unref(n)("importDialog.noSelectedCategories")),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_17$7,[createBaseVNode("div",_hoisted_18$5,[createBaseVNode("div",_hoisted_19$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(O,G)=>{var ee,A,L;return openBlock(),createElementBlock("div",{key:"Tabss-"+G,class:normalizeClass(["tab-item",{active:((ee=s.value)==null?void 0:ee.p_uuid)===O.p_uuid}]),style:normalizeStyle({backgroundColor:((A=s.value)==null?void 0:A.p_uuid)===O.p_uuid?"var(--weilin-prompt-ui-primary-bg)":O.color,color:((L=s.value)==null?void 0:L.p_uuid)===O.p_uuid?"var(--weilin-prompt-ui-primary-text)":P(O.color)}),onClick:W=>y(O)},[createBaseVNode("span",_hoisted_21$5,toDisplayString$1(O.name),1),createBaseVNode("button",{class:"select-tab-btn",onClick:withModifiers(W=>F(O),["stop"]),title:unref(n)("importDialog.selectCategory")},Q[3]||(Q[3]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[createBaseVNode("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),8,_hoisted_22$5)],14,_hoisted_20$5)}),128))])]),s.value?(openBlock(),createElementBlock("div",_hoisted_23$5,[createBaseVNode("div",_hoisted_24$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value.groups,(O,G)=>{var ee,A,L;return openBlock(),createElementBlock("div",{key:"TabsSw-"+G,class:normalizeClass(["tab-item",{active:((ee=l.value)==null?void 0:ee.g_uuid)===O.g_uuid,disabled:R(s.value)}]),style:normalizeStyle({backgroundColor:((A=l.value)==null?void 0:A.g_uuid)===O.g_uuid?"var(--weilin-prompt-ui-primary-bg)":O.color,color:((L=l.value)==null?void 0:L.g_uuid)===O.g_uuid?"var(--weilin-prompt-ui-primary-text)":P(O.color),opacity:R(s.value)?"0.5":"1",cursor:R(s.value)?"not-allowed":"pointer"}),onClick:W=>R(s.value)?null:E(O)},[createBaseVNode("span",_hoisted_26$5,toDisplayString$1(O.name),1),R(s.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,class:"select-tab-btn",onClick:withModifiers(W=>H(s.value,O),["stop"]),disabled:R(s.value),title:unref(n)("importDialog.selectSubcategory")},Q[4]||(Q[4]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[createBaseVNode("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)]),8,_hoisted_27$5))],14,_hoisted_25$5)}),128))])])):createCommentVNode("",!0)])])]),_:1},8,["modelValue","title"]))}},TagGroupSelect=_export_sfc(_sfc_main$d,[["__scopeId","data-v-eb6b9225"]]),randomTagApi={getTemplateList:async()=>await request({url:"/random_template/get_template_list",method:"post"}),getTemplateData:async e=>await request({url:"/random_template/get_template_data",method:"post",data:{name:e}}),saveTemplateData:async e=>await request({url:"/random_template/save_template",method:"post",data:{data:e}}),updateTemplateData:async(e,t)=>await request({url:"/random_template/update_template",method:"post",data:{name:e,data:t}}),deleteTemplateData:async e=>await request({url:"/random_template/delete_template",method:"post",data:{name:e}}),getRandomTemplateApple:async()=>await request({url:"/get/setting/get_random_template_setting",method:"post"}),updateRandomTemplateApple:async e=>await request({url:"/update/setting/update_random_template_setting",method:"post",data:{path:e}}),goRandomTemplate:async()=>await request({url:"/random_template/go_random_template",method:"post"}),goRandomTemplatePath:async e=>await request({url:"/random_template/go_random_template_path",method:"post",data:{name:e}})},_hoisted_1$c={class:"random-rule-container"},_hoisted_2$b={class:"settings-section template-section"},_hoisted_3$b={class:"section-header"},_hoisted_4$a={class:"template-controls"},_hoisted_5$9={class:"template-select-group"},_hoisted_6$9={class:"template-select-with-apply"},_hoisted_7$9={value:""},_hoisted_8$9=["value"],_hoisted_9$9=["disabled"],_hoisted_10$8={class:"template-bottom-buttons"},_hoisted_11$8=["disabled"],_hoisted_12$8=["disabled"],_hoisted_13$7={key:0,class:"template-name-input"},_hoisted_14$6=["placeholder"],_hoisted_15$6={class:"template-actions"},_hoisted_16$6={key:0},_hoisted_17$6={class:"settings-section"},_hoisted_18$4={class:"section-header"},_hoisted_19$4={class:"rules-reminder"},_hoisted_20$4={class:"rules-list"},_hoisted_21$4={class:"rule-header"},_hoisted_22$4=["onClick"],_hoisted_23$4={class:"rule-content"},_hoisted_24$4={class:"form-group"},_hoisted_25$4={class:"range-inputs"},_hoisted_26$4=["onUpdate:modelValue"],_hoisted_27$4=["onUpdate:modelValue"],_hoisted_28$4={class:"form-group"},_hoisted_29$4=["onUpdate:modelValue"],_hoisted_30$4={value:"category"},_hoisted_31$4={value:"specific"},_hoisted_32$4={key:0,class:"form-group"},_hoisted_33$4={class:"selected-categories-container"},_hoisted_34$4={class:"selected-categories-header"},_hoisted_35$4={class:"selected-categories-content"},_hoisted_36$4={key:0,class:"selected-category-section"},_hoisted_37$3={class:"section-title"},_hoisted_38$3={class:"selected-items"},_hoisted_39$3={class:"category-name"},_hoisted_40$3={key:1,class:"selected-category-section"},_hoisted_41$3={class:"section-title"},_hoisted_42$3={class:"selected-items"},_hoisted_43$3={class:"category-name"},_hoisted_44$2={class:"subcategory-name"},_hoisted_45$2={key:2,class:"no-selected"},_hoisted_46$2=["onClick"],_hoisted_47$1={key:1,class:"form-group"},_hoisted_48$1={class:"tags-input-container"},_hoisted_49$1=["onClick"],_hoisted_50$1=["onUpdate:modelValue","onKeydown","placeholder"],_hoisted_51$1=["onClick"],_hoisted_52$1={class:"actions-section"},_hoisted_53$1=["disabled"],STORAGE_PREFIX$2="weilin_tools_",_sfc_main$c={__name:"random_setting",emits:["close","update","generateRandomTags"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(!1),r=ref(null),s=ref(!1),l=ref(""),c=ref(""),f={randomRuleSetting:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},u={file_name:"new_random_template",rules:[{range:{min:1,max:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""},{range:{min:4,max:6},type:"category",categoryId:2,specificTags:[],tagGroupList:[],tagInput:""}]},d=ref({});async function m(){try{l.value=="prompt_global"?await randomTagApi.getRandomTemplateApple().then(async Z=>{Z.data==""?d.value=u:await randomTagApi.getTemplateData(Z.data).then(async D=>{O.value=Z.data,d.value=D.data,s.value=!0}).catch(D=>{console.error("加载模板失败:",D),message$1({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(Z=>{console.error(Z),message$1({type:"warn",str:"message.networkError"})}):c.value==""?d.value=u:await randomTagApi.getTemplateData(c.value).then(async Z=>{O.value=c.value,d.value=Z.data,s.value=!0}).catch(Z=>{console.error("加载模板失败:",Z),message$1({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(Z){message$1({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",Z)}}function g(){try{const Z=JSON.parse(JSON.stringify(d.value));Z.rules&&Z.rules.forEach(D=>{delete D.tagInput}),randomTagApi.updateTemplateData(O.value,Z).then(async D=>{await randomTagApi.getTemplateData(D.path_name).then(async K=>{d.value=K.data,message$1({type:"success",str:"randomUtils.templateSaved"})}).catch(K=>{console.error("加载模板失败:",K),message$1({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(D=>{console.error("更新模板失败:",D),message$1({type:"warn",str:"randomUtils.errorSavingTemplate"})})}catch(Z){console.error("Error saving random tag settings:",Z),message$1({type:"warn",str:"randomUtils.errorSavingSettings"})}}function v(){d.value.rules.push({range:{min:d.value.rules.length>0?d.value.rules[d.value.rules.length-1].range.max+1:1,max:d.value.rules.length>0?d.value.rules[d.value.rules.length-1].range.max+3:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""})}function b(Z){d.value.rules.splice(Z,1)}function $(Z){Z.tagInput&&Z.tagInput.trim()&&(Z.specificTags.push(Z.tagInput.trim()),Z.tagInput="")}function w(Z,D){Z.specificTags.splice(D,1)}function C(){}const y=ref((()=>{try{const Z=localStorage.getItem(`${STORAGE_PREFIX$2}randomRuleSettingState`);if(Z){const D=JSON.parse(Z),K={...f};return D.randomRuleSetting&&(K.randomRuleSetting={...f.randomRuleSetting,...D.randomRuleSetting}),K}}catch(Z){console.error("Error loading window states:",Z)}return{...f}})());watch(y,Z=>{try{localStorage.setItem(`${STORAGE_PREFIX$2}randomRuleSettingState`,JSON.stringify(Z))}catch(D){console.error("Error saving window states:",D)}},{deep:!0});const E=Z=>{o.value=!1},R=(Z,D)=>{y.value[Z]&&(y.value[Z].position={...D})},F=(Z,D)=>{y.value[Z]&&(y.value[Z].size={...D})},H=Z=>{o.value=!0,l.value=Z,windowManager.registerWindow("randomRuleSetting"),nextTick(()=>{windowManager.setActiveWindow("randomRuleSetting"),Z=="prompt_global"?L(1):B()})},j=(Z,D)=>{r.value.open(Z,D)},fe=()=>void 0,oe=Z=>!Z||!Array.isArray(Z)||Z.length<=0?[]:Z.filter(D=>!D.sub),V=Z=>!Z||!Array.isArray(Z)||Z.length<=0?[]:Z.filter(D=>D.sub),q=Z=>{Z&&Z.data&&Array.isArray(Z.data)?d.value.rules[Z.index].tagGroupList=Z.data:d.value.rules[Z.index].tagGroupList=[]},Q=ref([]),O=ref(""),G=ref(""),ee=ref(!1),A=ref(!1);async function L(Z=0){try{await randomTagApi.getTemplateList().then(D=>{Q.value=D.data,Z==1&&m()}).catch(D=>{console.error(D),message$1({type:"warn",str:"message.networkError"})})}catch(D){message$1({type:"warn",str:"message.networkError"}),console.error("RandomTemplate获取列表失败:",D)}}function W(){ee.value=!0,G.value=""}function ae(){ee.value=!1,G.value=""}function Y(){if(!O.value){message$1.warm(n("randomUtils.pleaseChooseTemplate"));return}l.value=="prompt_global"?randomTagApi.updateRandomTemplateApple(O.value).then(Z=>{message$1({type:"success",str:"randomUtils.templateApplied"})}).catch(Z=>{console.error("获取模板失败:",Z),message$1({type:"warn",str:"randomUtils.errorApplyingTemplate"})}):(window.postMessage({type:"weilin_prompt_ui_prompt_inner_update_node_tag_template_id",data:O.value},"*"),message$1({type:"success",str:"randomUtils.templateApplied"}))}function ne(){O.value&&randomTagApi.deleteTemplateData(O.value).then(()=>{message$1({type:"success",str:"randomUtils.templateDeleted"}),L(),O.value=""}).catch(Z=>{console.error("删除模板失败:",Z),message$1({type:"warn",str:"randomUtils.errorDeletingTemplate"})})}function te(){if(!O.value)return;const Z=Q.value.find(D=>D.path_name===O.value);Z&&(ee.value=!0,G.value=Z.file_name,A.value=!0)}function ge(){if(!G.value.trim()){message$1({type:"warn",str:"randomUtils.templateNameRequired"});return}if(d.value.file_name=G.value.trim(),A.value){const Z=Q.value.find(D=>D.path_name===O.value);if(Z){Z.file_name=G.value.trim();const D=JSON.parse(JSON.stringify(d.value));D.rules&&D.rules.forEach(K=>{delete K.tagInput}),randomTagApi.updateTemplateData(Z.path_name,D).then(async K=>{message$1({type:"success",str:"randomUtils.templateSaved"}),await L().then(async()=>{await randomTagApi.getTemplateData(K.path_name).then(async x=>{O.value=K.path_name,d.value=x.data,message$1({type:"success",str:"randomUtils.templateSaved"})}).catch(x=>{console.error("加载模板失败:",x),message$1({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(K=>{console.error("保存模板失败:",K),message$1({type:"warn",str:"randomUtils.errorSavingTemplate"})})}}else{d.value=u,d.value.file_name=G.value.trim();const Z=JSON.parse(JSON.stringify(d.value));Z.rules&&Z.rules.forEach(D=>{delete D.tagInput}),randomTagApi.saveTemplateData(Z).then(async D=>{await L().then(async()=>{await randomTagApi.getTemplateData(D.path_name).then(async K=>{O.value=D.path_name,d.value=K.data,message$1({type:"success",str:"randomUtils.templateSaved"})}).catch(K=>{console.error("加载模板失败:",K),message$1({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(D=>{console.error("保存模板失败:",D),message$1({type:"warn",str:"randomUtils.errorSavingTemplate"})})}ee.value=!1,G.value="",A.value=!1}const re=async Z=>{if(Z.target.value!="")try{await randomTagApi.getTemplateData(Z.target.value).then(async D=>{O.value=D.path_name,d.value=D.data,s.value=!0}).catch(D=>{console.error("加载模板失败:",D),message$1({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(D){message$1({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",D)}},B=()=>{window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id"},"*")},z=Z=>{Z.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response"&&(c.value=Z.data.data,L(1))};return onMounted(()=>{window.addEventListener("message",z)}),onUnmounted(()=>{windowManager.unregisterWindow("randomRuleSetting"),window.removeEventListener("message",z)}),t({open:H,getRandomTags:fe}),(Z,D)=>(openBlock(),createElementBlock(Fragment,null,[o.value?(openBlock(),createBlock(DraggableWindow,{key:0,title:unref(n)("randomUtils.title"),position:y.value.randomRuleSetting.position,size:y.value.randomRuleSetting.size,"z-index":unref(windowManager).getZIndex("randomRuleSetting"),"onUpdate:position":D[2]||(D[2]=K=>R("randomRuleSetting",K)),"onUpdate:size":D[3]||(D[3]=K=>F("randomRuleSetting",K)),onActive:D[4]||(D[4]=K=>unref(windowManager).setActiveWindow("randomRuleSetting")),onClose:D[5]||(D[5]=K=>E())},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$c,[createBaseVNode("div",_hoisted_2$b,[createBaseVNode("div",_hoisted_3$b,[createBaseVNode("h3",null,toDisplayString$1(unref(n)("randomUtils.ruleTemplates")),1)]),createBaseVNode("div",_hoisted_4$a,[createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$9,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":D[0]||(D[0]=K=>O.value=K),onChange:re,class:"form-select template-select"},[createBaseVNode("option",_hoisted_7$9,toDisplayString$1(unref(n)("randomUtils.selectTemplate")),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(Q.value,(K,x)=>(openBlock(),createElementBlock("option",{key:x,value:K.path_name},toDisplayString$1(K.file_name),9,_hoisted_8$9))),128))],544),[[vModelSelect,O.value]]),createBaseVNode("button",{class:"apply-template-btn",onClick:Y,disabled:!O.value},toDisplayString$1(unref(n)("randomUtils.applyTemplate")),9,_hoisted_9$9)]),createBaseVNode("div",_hoisted_10$8,[createBaseVNode("button",{class:"new-template-btn",onClick:W},toDisplayString$1(unref(n)("randomUtils.newTemplate")),1),createBaseVNode("button",{class:"edit-template-btn",onClick:te,disabled:!O.value},toDisplayString$1(unref(n)("randomUtils.editTemplate")),9,_hoisted_11$8),createBaseVNode("button",{class:"delete-template-btn",onClick:ne,disabled:!O.value},toDisplayString$1(unref(n)("randomUtils.deleteTemplate")),9,_hoisted_12$8)])]),ee.value?(openBlock(),createElementBlock("div",_hoisted_13$7,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":D[1]||(D[1]=K=>G.value=K),class:"form-input",placeholder:unref(n)("randomUtils.templateNamePlaceholder")},null,8,_hoisted_14$6),[[vModelText,G.value]]),createBaseVNode("div",_hoisted_15$6,[createBaseVNode("button",{class:"save-template-btn",onClick:ge},toDisplayString$1(unref(n)("randomUtils.save")),1),createBaseVNode("button",{class:"cancel-template-btn",onClick:ae},toDisplayString$1(unref(n)("randomUtils.cancel")),1)])])):createCommentVNode("",!0)])]),O.value&&s.value?(openBlock(),createElementBlock("div",_hoisted_16$6,[createBaseVNode("div",_hoisted_17$6,[createBaseVNode("div",_hoisted_18$4,[createBaseVNode("h3",null,toDisplayString$1(unref(n)("randomUtils.rules")),1),createBaseVNode("button",{class:"add-rule-btn",onClick:v},[D[6]||(D[6]=createBaseVNode("span",null,"+",-1)),createTextVNode(" "+toDisplayString$1(unref(n)("randomUtils.addRule")),1)])]),createBaseVNode("div",_hoisted_19$4,[createBaseVNode("p",null,toDisplayString$1(unref(n)("randomUtils.rulesReminder")),1)]),createBaseVNode("div",_hoisted_20$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value.rules,(K,x)=>(openBlock(),createElementBlock("div",{key:x,class:"rule-item"},[createBaseVNode("div",_hoisted_21$4,[createBaseVNode("h4",null,toDisplayString$1(unref(n)("randomUtils.rule"))+" #"+toDisplayString$1(x+1),1),createBaseVNode("button",{class:"delete-rule-btn",onClick:S=>b(x)},"×",8,_hoisted_22$4)]),createBaseVNode("div",_hoisted_23$4,[createBaseVNode("div",_hoisted_24$4,[createBaseVNode("label",null,toDisplayString$1(unref(n)("randomUtils.range")),1),createBaseVNode("div",_hoisted_25$4,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":S=>K.range.min=S,min:"1",class:"form-input range-input"},null,8,_hoisted_26$4),[[vModelText,K.range.min,void 0,{number:!0}]]),D[7]||(D[7]=createBaseVNode("span",null,"-",-1)),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":S=>K.range.max=S,min:"1",class:"form-input range-input"},null,8,_hoisted_27$4),[[vModelText,K.range.max,void 0,{number:!0}]])])]),createBaseVNode("div",_hoisted_28$4,[createBaseVNode("label",null,toDisplayString$1(unref(n)("randomUtils.tagType")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":S=>K.type=S,class:"form-select"},[createBaseVNode("option",_hoisted_30$4,toDisplayString$1(unref(n)("randomUtils.category")),1),createBaseVNode("option",_hoisted_31$4,toDisplayString$1(unref(n)("randomUtils.specificTags")),1)],8,_hoisted_29$4),[[vModelSelect,K.type]])]),K.type==="category"?(openBlock(),createElementBlock("div",_hoisted_32$4,[createBaseVNode("div",_hoisted_33$4,[createBaseVNode("div",_hoisted_34$4,[createBaseVNode("span",null,toDisplayString$1(unref(n)("importDialog.selectedCategories")),1)]),createBaseVNode("div",_hoisted_35$4,[oe(K.tagGroupList).length>0?(openBlock(),createElementBlock("div",_hoisted_36$4,[createBaseVNode("div",_hoisted_37$3,toDisplayString$1(unref(n)("importDialog.primaryCategories")),1),createBaseVNode("div",_hoisted_38$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(oe(K.tagGroupList),(S,I)=>(openBlock(),createElementBlock("div",{key:"primary-"+I,class:"selected-item"},[createBaseVNode("span",_hoisted_39$3,toDisplayString$1(S.group.name),1)]))),128))])])):createCommentVNode("",!0),V(K.tagGroupList).length>0?(openBlock(),createElementBlock("div",_hoisted_40$3,[createBaseVNode("div",_hoisted_41$3,toDisplayString$1(unref(n)("importDialog.subCategories")),1),createBaseVNode("div",_hoisted_42$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V(K.tagGroupList),(S,I)=>(openBlock(),createElementBlock("div",{key:"sub-"+I,class:"selected-item"},[createBaseVNode("span",_hoisted_43$3,toDisplayString$1(S.group.name),1),D[8]||(D[8]=createBaseVNode("span",{class:"separator"},">",-1)),createBaseVNode("span",_hoisted_44$2,toDisplayString$1(S.sub.name),1)]))),128))])])):createCommentVNode("",!0),!K.tagGroupList||K.tagGroupList.length===0?(openBlock(),createElementBlock("div",_hoisted_45$2,toDisplayString$1(unref(n)("importDialog.noSelectedCategories")),1)):createCommentVNode("",!0)])]),createBaseVNode("button",{class:"add-tag-btn",onClick:S=>j(x,K.tagGroupList)},toDisplayString$1(unref(n)("randomUtils.selectTagGroup")),9,_hoisted_46$2)])):createCommentVNode("",!0),K.type==="specific"?(openBlock(),createElementBlock("div",_hoisted_47$1,[createBaseVNode("label",null,toDisplayString$1(unref(n)("randomUtils.specificTags")),1),createBaseVNode("div",_hoisted_48$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(K.specificTags,(S,I)=>(openBlock(),createElementBlock("div",{key:I,class:"tag-chip"},[createTextVNode(toDisplayString$1(S)+" ",1),createBaseVNode("button",{class:"remove-tag-btn",onClick:X=>w(K,I)},"×",8,_hoisted_49$1)]))),128)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":S=>K.tagInput=S,onKeydown:withKeys(withModifiers(S=>$(K),["prevent"]),["enter"]),class:"tag-input",placeholder:unref(n)("randomUtils.addTagPlaceholder")},null,40,_hoisted_50$1),[[vModelText,K.tagInput]])]),createBaseVNode("button",{class:"add-tag-btn",onClick:S=>$(K)},toDisplayString$1(unref(n)("randomUtils.addTag")),9,_hoisted_51$1)])):createCommentVNode("",!0)])]))),128))])])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_52$1,[createBaseVNode("button",{class:"save-btn",onClick:g,disabled:!O.value},toDisplayString$1(unref(n)("common.save")),9,_hoisted_53$1)])]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),createVNode(TagGroupSelect,{ref_key:"tagGroupSelectItem",ref:r,onSureSelect:q},null,512)],64))}},RandomSetting=_export_sfc(_sfc_main$c,[["__scopeId","data-v-71de91e1"]]);function zero$1(e){let t=e.length;for(;--t>=0;)e[t]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++)_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_utf8len[254]=_utf8len[254]=1;const _hoisted_1$b={class:"tag-manager"},_hoisted_2$a={class:"form-group"},_hoisted_3$a={class:"select-group-item"},_hoisted_4$9=["value","placeholder"],_hoisted_5$8={class:"form-group"},_hoisted_6$8=["placeholder"],_hoisted_7$8={class:"form-group"},_hoisted_8$8=["placeholder"],_hoisted_9$8={class:"form-group"},_hoisted_10$7={class:"color-picker"},_hoisted_11$7={class:"color-controls"},_hoisted_12$7={class:"alpha-control"},_hoisted_13$6={class:"alpha-value"},_sfc_main$b={__name:"favour",emits:["sureSelect"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(null),r=ref(!1),s=ref({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),l=ref({group:{id_index:0,name:"",color:"",create_time:0,p_uuid:""},sub:{id_index:0,name:"",color:"",create_time:0,g_uuid:"",p_uuid:""}}),c=ref({hex:"#ff7b02",alpha:40}),f=computed(()=>d(c.value.hex,c.value.alpha)),u=()=>{const $=d(c.value.hex,c.value.alpha);s.value.color=$},d=($,w)=>{const C=parseInt($.slice(1,3),16),P=parseInt($.slice(3,5),16),y=parseInt($.slice(5,7),16);return`rgba(${C}, ${P}, ${y}, ${w/100})`},m=()=>{o.value.open()},g=()=>{if(!s.value.text||!s.value.desc||!l.value.sub.id_index||!l.value.sub.g_uuid){message$1({type:"warn",str:"tagManager.textRequired"});return}tagsApi.addNewTags({id_index:l.value.sub.id_index,g_uuid:l.value.sub.g_uuid,text:s.value.text,desc:s.value.desc,color:s.value.color?s.value.color:"rgba(255, 123, 2, .4)"}).then($=>{window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.addSuccess"}),v()}).catch($=>{message$1({type:"warn",str:"message.networkError"})})},v=()=>{s.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},r.value=!1},b=$=>{l.value=$,s.value.id_index=$.sub.id_index};return t({open:($,w)=>{s.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},s.value.text=$,s.value.desc=w,r.value=!0}}),($,w)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Dialog,{modelValue:r.value,"onUpdate:modelValue":w[5]||(w[5]=C=>r.value=C),title:unref(n)("tagManager.addTag")},{footer:withCtx(()=>[createBaseVNode("button",{onClick:w[4]||(w[4]=C=>r.value=!1)},toDisplayString$1(unref(n)("common.cancel")),1),createBaseVNode("button",{onClick:g},toDisplayString$1(unref(n)("common.confirm")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("label",null,toDisplayString$1(unref(n)("importDialog.selectGroup")),1),createBaseVNode("div",_hoisted_3$a,[createBaseVNode("input",{type:"text",value:s.value.id_index!=""?l.value.group.name+" -> "+l.value.sub.name:"请选择分组",readonly:"",placeholder:unref(n)("importDialog.selectGroup")},null,8,_hoisted_4$9),createBaseVNode("button",{class:"add-tag-btn",style:{"margin-left":"10px","min-width":"fit-content"},onClick:m},toDisplayString$1(unref(n)("importDialog.selectGroup")),1)])]),createBaseVNode("div",_hoisted_5$8,[createBaseVNode("label",null,toDisplayString$1(unref(n)("tagManager.text")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":w[0]||(w[0]=C=>s.value.desc=C),placeholder:unref(n)("tagManager.textPlaceholder")},null,8,_hoisted_6$8),[[vModelText,s.value.desc]])]),createBaseVNode("div",_hoisted_7$8,[createBaseVNode("label",null,toDisplayString$1(unref(n)("tagManager.description")),1),withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":w[1]||(w[1]=C=>s.value.text=C),placeholder:unref(n)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,_hoisted_8$8),[[vModelText,s.value.text]])]),createBaseVNode("div",_hoisted_9$8,[createBaseVNode("label",null,toDisplayString$1(unref(n)("tagManager.backgroundColor")),1),createBaseVNode("div",_hoisted_10$7,[createBaseVNode("div",{class:"color-preview",style:normalizeStyle({backgroundColor:f.value})},null,4),createBaseVNode("div",_hoisted_11$7,[withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":w[2]||(w[2]=C=>c.value.hex=C),onInput:u,class:"color-input"},null,544),[[vModelText,c.value.hex]]),createBaseVNode("div",_hoisted_12$7,[withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":w[3]||(w[3]=C=>c.value.alpha=C),min:"0",max:"100",onInput:u,class:"alpha-slider"},null,544),[[vModelText,c.value.alpha,void 0,{number:!0}]]),createBaseVNode("span",_hoisted_13$6,toDisplayString$1(c.value.alpha)+"%",1)])])])])])]),_:1},8,["modelValue","title"]),createVNode(TagGroupSelect$1,{ref_key:"tagGroupSelectItem",ref:o,onSureSelect:b},null,512)],64))}},favourItem=_export_sfc(_sfc_main$b,[["__scopeId","data-v-08abaad1"]]),_hoisted_1$a={class:"weilin_prompt_ui_prompt-box"},_hoisted_2$9={key:0,class:"weilin-toast",role:"status","aria-live":"polite"},_hoisted_3$9={class:"center-container"},_hoisted_4$8={class:"action-item"},_hoisted_5$7=["title"],_hoisted_6$7={class:"action-text"},_hoisted_7$7={class:"action-item"},_hoisted_8$7=["title"],_hoisted_9$7={class:"action-text"},_hoisted_10$6={class:"action-item"},_hoisted_11$6={class:"action-text"},_hoisted_12$6={class:"action-item"},_hoisted_13$5=["title"],_hoisted_14$5={class:"action-text"},_hoisted_15$5={class:"action-item"},_hoisted_16$5=["title"],_hoisted_17$5={class:"action-text"},_hoisted_18$3={class:"action-item"},_hoisted_19$3=["title"],_hoisted_20$3={class:"action-text"},_hoisted_21$3={key:0,class:"action-item"},_hoisted_22$3=["title"],_hoisted_23$3={class:"action-text"},_hoisted_24$3={class:"action-item"},_hoisted_25$3=["title"],_hoisted_26$3={class:"action-text"},_hoisted_27$3={class:"action-item"},_hoisted_28$3=["title"],_hoisted_29$3={class:"action-text"},_hoisted_30$3={class:"action-item"},_hoisted_31$3=["title"],_hoisted_32$3={class:"action-text"},_hoisted_33$3={class:"action-item"},_hoisted_34$3=["title"],_hoisted_35$3={class:"action-text"},_hoisted_36$3={class:"action-item"},_hoisted_37$2=["title"],_hoisted_38$2={class:"action-text"},_hoisted_39$2={class:"action-item"},_hoisted_40$2=["title"],_hoisted_41$2={class:"action-text"},_hoisted_42$2={class:"action-item"},_hoisted_43$2=["title"],_hoisted_44$1={class:"action-text"},_hoisted_45$1={class:"action-item weilin-comfyui-toolbar-right"},_hoisted_46$1=["disabled"],_hoisted_47=["placeholder"],_hoisted_48={class:"token-counter"},_hoisted_49=["onClick"],_hoisted_50={class:"tag"},_hoisted_51={class:"desc"},_hoisted_52={class:"prompt-input-translate-area"},_hoisted_53={style:{display:"flex","align-items":"center"}},_hoisted_54=["placeholder"],_hoisted_55=["title"],_hoisted_56={style:{"margin-left":"5px"},class:"action-text"},_hoisted_57=["title"],_hoisted_58={class:"action-text"},_hoisted_59=["title"],_hoisted_60={class:"action-text"},_hoisted_61={key:0,class:"tokens-container"},_hoisted_62=["draggable","onDragstart","onDragover","onDrop","onDblclick"],_hoisted_63={key:0,class:"newline-token"},_hoisted_64=["title"],_hoisted_65=["onMouseenter","onMouseleave"],_hoisted_66=["title"],_hoisted_67=["title","onMouseenter","onMouseleave"],_hoisted_68={style:{"margin-left":"5px"}},_hoisted_69=["onMouseenter","onMouseleave"],_hoisted_70=["onClick"],_hoisted_71=["value","onInput","onBlur","onKeyup"],_hoisted_72=["onClick","title"],_hoisted_73={key:4,class:"translation-result"},_hoisted_74=["onClick","title"],_hoisted_75={class:"translated-text"},_hoisted_76={key:0,class:"line-break"},_hoisted_77={class:"tag-tips-content"},_hoisted_78=["innerHTML"],_hoisted_79={key:0,class:"weight-control"},_hoisted_80={class:"weight-label"},_hoisted_81={key:1,class:"lora-weight-controls"},_hoisted_82={class:"weight-control"},_hoisted_83={class:"weight-label"},_hoisted_84={class:"weight-control"},_hoisted_85={class:"weight-label"},_hoisted_86=["title"],_hoisted_87=["title"],_hoisted_88={key:2,class:"bracket-btn-group"},_hoisted_89={class:"bracket-btn-container"},_hoisted_90={class:"vertical-btn-group"},_hoisted_91=["title"],_hoisted_92=["title"],_hoisted_93={class:"bracket-btn-container"},_hoisted_94={class:"vertical-btn-group"},_hoisted_95=["title"],_hoisted_96=["title"],_hoisted_97={class:"bracket-btn-container"},_hoisted_98={class:"vertical-btn-group"},_hoisted_99=["title"],_hoisted_100=["title"],_hoisted_101=["title"],_hoisted_102={class:"tag-manager-section"},_hoisted_103={class:"weilin-comfyui-selection-actions-content"},_hoisted_104={class:"weilin-comfyui-selection-actions-count"},_hoisted_105={class:"header-left"},_hoisted_106={class:"section-title"},_hoisted_107={class:"header-right"},_hoisted_108={class:"lora-manager-container"},_hoisted_109={class:"tag-manager-section"},_hoisted_110={class:"header-left"},_hoisted_111={class:"section-title"},_hoisted_112={class:"header-right"},_hoisted_113={class:"tag-manager-container"},prefix$2="weilin_prompt_ui_",selectionBoxId="weilin-selection-box",throttleInterval=16,STORAGE_KEY_SIDEBAR_VISIBLE="weilin_prompt_ui_sidebar_visible",MAIN_LABELS_STORAGE_KEY="weilin_prompt_ui_main_labels_v1",dragUpdateDelay=50,_sfc_main$a={__name:"prompt_index",props:{promptManager:{type:String,default:"prompt_global"},hasPromptLoraStack:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=ref(null),{t:n}=useI18n(),o=ref(),r=ref(),s=ref({top:0,left:0}),l=ref(0),c=e,f=ref(null),u=ref(""),d=ref([]),m={},g=ref(null),v=ref(!1),b=ref({top:"0px",left:"0px"}),$=ref(!1),w=ref(null),C=ref(null),P=ref(null),y=ref([]),E=ref(!1),R=ref(!1),F=ref([]),H=ref(0),j=ref(null),fe=ref(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),oe=ref(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),V=ref(""),q=ref(!1),Q=ref({x:0,y:0}),O=ref({x:0,y:0}),G=ref([]),ee=ref(null),A=ref(!1),L=ref(!1),W=ref(!1),ae=ref({top:"0px",left:"0px"}),Y=ref(!1),ne=ref(!1),te=ref(0),ge=ref(!1),re=ref({top:"0px",left:"0px"}),B=ref(null),z=ref(null),Z=ref(""),D=ref(0),K=ref(!0),x=()=>{K.value=!K.value};watch(K,N=>{localStorage.setItem(STORAGE_KEY_SIDEBAR_VISIBLE,String(N))}),onMounted(()=>{const N=localStorage.getItem(STORAGE_KEY_SIDEBAR_VISIBLE);K.value=N!=="false"});const S=()=>(D.value++,`token_${D.value}_${Date.now()}`),I=()=>{E.value=!E.value},X=()=>{E.value=!1},ie=ref(null),pe=ref(null),T=ref(!1),_=`weilin_prompt_ui_last_main_label_id_${c.promptManager||"default"}`,M=computed(()=>{const N=K.value?280:0;return`calc(100% - ${(E.value?300:0)+N}px)`});let U=!1;const _e=N=>{if(!N){pe.value=null,u.value="",nextTick(()=>{r.value&&(r.value.value="",ut({target:r.value}))}),T.value=!1;return}pe.value=N.id,U=!0,u.value=N.content||"",nextTick(()=>{r.value&&(r.value.value=u.value,ut({target:r.value}))}),T.value=!1};watch(u,N=>{if(U){U=!1;return}T.value=!0}),watch(d,()=>{U||(T.value=!0)},{deep:!0}),watch(pe,N=>{try{localStorage.setItem(_,N||"")}catch{}});function me(){try{const N=localStorage.getItem(_);if(!N)return;const k=localStorage.getItem(MAIN_LABELS_STORAGE_KEY),se=k?JSON.parse(k):[],de=Array.isArray(se)?se.find(ke=>ke&&ke.id===N):null;if(!de)return;pe.value=N,U=!0,u.value=de.content||"",nextTick(()=>{r.value&&(r.value.value=u.value,ut({target:r.value})),U=!1}),T.value=!1}catch{}}onMounted(()=>{me();const N=()=>{try{localStorage.setItem(_,pe.value||"")}catch{}};window.addEventListener("beforeunload",N),onBeforeUnmount(()=>window.removeEventListener("beforeunload",N))});function J(){var N;pe.value&&(N=ie.value)!=null&&N.updateSelectedContent&&(ie.value.updateSelectedContent(u.value),T.value=!1,xe())}const ce=ref(!1);let Se=null;function xe(){ce.value=!0,Se&&clearTimeout(Se),Se=setTimeout(()=>{ce.value=!1},1600)}onBeforeUnmount(()=>{Se&&clearTimeout(Se)});const Ne=()=>{w.value.open()},Ce=ref(1),Me=()=>{if(g.value===null)return;let k=d.value[g.value].text;if(!Le(k)){message$1({type:"warn",str:"message.noFinishKuo"});return}const se=we=>we.startsWith("(")&&we.endsWith(")")&&!we.slice(1,-1).includes("(")&&!we.slice(1,-1).includes(")")&&!we.slice(1,-1).includes("[")&&!we.slice(1,-1).includes("]")&&!we.slice(1,-1).includes("{")&&!we.slice(1,-1).includes("}")&&!we.slice(1,-1).includes("<")&&!we.slice(1,-1).includes(">");let de=k;const ke=/:\d+(\.\d+)?$/.test(k),he=k.match(/^\((.*?):(\d+(\.\d+)?)\)$/);if(ke||he)Ce.value===1?k.startsWith("(")&&k.endsWith(")")?de=k.slice(1,-1).replace(/:(\d+(\.\d+)?)$/,""):de=k.replace(/:(\d+(\.\d+)?)$/,""):he?de=`(${he[1]}:${Ce.value})`:de=k.replace(/:(\d+(\.\d+)?)$/,`:${Ce.value}`);else{const we=k.match(/^([^_]+)_(\([^)]+\))$/);if(we&&!k.includes("\\(")&&!k.includes("\\)")){const[,$e,Ee]=we;Ce.value===1?de=k:de=`(${$e} ${Ee}:${Ce.value})`}else k.includes("\\(")&&k.includes("\\)")&&!/[\(\)\[\]\{\}<>]/.test(k.replace(/\\[\(\)\[\]\{\}<>]/g,""))?Ce.value===1?de=k:k.startsWith("(")&&k.endsWith(")")?de=k.replace(/\)$/,`:${Ce.value})`):de=`(${k}:${Ce.value})`:/[\(\[\{\<\)\]\}\>]/.test(k)?Ce.value===1&&se(k)?de=k.slice(1,-1):Ce.value===1?de=k:k.startsWith("(")&&k.endsWith(")")?de=k.replace(/\)$/,`:${Ce.value})`):de=`(${k}:${Ce.value})`:Ce.value===1?de=k:de=`(${k}:${Ce.value})`}d.value[g.value].text=de,at()},Ie=ref(.5),We=ref(.5);watch(g,N=>{var k;if(N!==null&&((k=d.value[N])!=null&&k.isLoraTag)){const de=d.value[N].text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);de&&(Ie.value=parseFloat(de[2]),We.value=parseFloat(de[3]))}});const Te=()=>{var N;if(g.value!==null&&((N=d.value[g.value])!=null&&N.isLoraTag)){const k=d.value[g.value],se=k.text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);if(se){const ke=`<wlr:${se[1]}:${Ie.value}:${We.value}>`;k.text=ke,at()}}},be=N=>{if(g.value===null)return;let se=d.value[g.value].text;const de={"(":")","[":"]","{":"}","<":">"}[N];se=`${N}${se}${de}`,d.value[g.value].text=se,Je()},ye=N=>{if(g.value===null)return;let se=d.value[g.value].text;const de={"(":")","[":"]","{":"}","<":">"};se.startsWith(N)&&se.endsWith(de[N])&&(se=se.slice(1,-1),d.value[g.value].text=se,Je())},Le=N=>{const k=[],se={"(":")","[":"]","{":"}","<":">"};for(let de of N)if(se[de])k.push(de);else if(Object.values(se).includes(de)&&(k.length===0||se[k.pop()]!==de))return!1;return k.length===0};onBeforeUpdate(()=>{for(const N in m)delete m[N]}),ref(!0),ref(!1);const Qe=N=>/[\p{L}]/u.test(N),Nt=N=>{const k=N.match(/([^:]+):[\d.]+/);return k?k[1]:N};let pt=null;const Ct=async()=>{pt&&clearTimeout(pt),pt=setTimeout(async()=>{if(!r.value)return;const N=r.value,k=N.selectionStart;await nextTick();const se=N.value.substring(0,k),de=document.createElement("div");de.style.position="absolute",de.style.top="0",de.style.left="0",de.style.visibility="hidden",de.style.whiteSpace="pre-wrap",de.style.wordWrap="break-word",de.style.width=window.getComputedStyle(N).width,de.style.font=window.getComputedStyle(N).font,de.style.padding=window.getComputedStyle(N).padding;const ke=document.createTextNode(se),he=document.createElement("span");he.textContent="|",de.appendChild(ke),de.appendChild(he),N.parentNode.appendChild(de);const we=he.getBoundingClientRect(),$e=N.parentNode.getBoundingClientRect();let Ee=we.top-$e.top+we.height,Pe=we.left-$e.left;if(await nextTick(),o.value){const Fe=o.value.offsetWidth,nt=N.offsetWidth,Ye=N.getBoundingClientRect().left-$e.left;Pe+Fe>Ye+nt&&(Pe=Ye+nt-Fe),Pe<Ye&&(Pe=Ye),Pe=Math.max(0,Math.min(Pe,$e.width-Fe))}N.parentNode.removeChild(de),s.value={top:Ee,left:Pe},pt=null},50)},ft=ref(null),ut=N=>{if(!(N!=null&&N.target)||!r.value)return;const k=N.target.value,se=N.target.selectionStart,de=N.target.selectionEnd,ke={comma:{enabled:localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false",pattern:/，/g,replace:","},period:{enabled:localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false",pattern:/。/g,replace:"."},bracket:{enabled:localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false",patterns:[{pattern:/【/g,replace:"["},{pattern:/】/g,replace:"]"},{pattern:/（/g,replace:"("},{pattern:/）/g,replace:")"}]},angleBracket:{enabled:localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false",patterns:[{pattern:/《/g,replace:"<"},{pattern:/》/g,replace:">"}]}};let he=k.substring(0,se),we=k;Object.values(ke).forEach(Ve=>{Ve.enabled&&(Ve.pattern?(he=he.replace(Ve.pattern,Ve.replace),we=we.replace(Ve.pattern,Ve.replace)):Ve.patterns&&Ve.patterns.forEach(({pattern:He,replace:Ue})=>{he=he.replace(He,Ue),we=we.replace(He,Ue)}))}),u.value=we;const $e=he.length,Ee=de-se,Pe=$e+Ee;nextTick(()=>{r.value&&(r.value.setSelectionRange($e,Pe),r.value.focus())});const Fe=we.substring(0,$e),nt=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",Ye=$e>0?Fe[$e-1]:"";if((Ye===","||Ye===" ")&&nt){R.value=!1,B.value&&clearTimeout(B.value),B.value=setTimeout(()=>{var xt;const Ve=((xt=r.value)==null?void 0:xt.selectionStart)||0,Ue=(u.value||"").substring(0,Ve);let Ke=Ve;for(;Ke>0&&!/[,\s]/.test(Ue[Ke-1]);)Ke--;const Tt=Ue.substring(Ke,Ve).trim();Tt&&ea(Tt),lt()},300),l.value=gt(u.value);return}let Oe=$e;for(;Oe>0&&!/[,\s]/.test(Fe[Oe-1]);)Oe--;const Ae=Fe.substring(Oe,$e).trim();B.value&&clearTimeout(B.value),B.value=setTimeout(()=>{Ae&&ea(Ae),lt()},300),l.value=gt(u.value)},gt=N=>N?N.trim().split(/\s+/).length:0,Xe=async()=>{let N=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",k=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",se=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",de=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true";localStorage.getItem("weilin_prompt_ui_underscore_to_bracket"),localStorage.getItem("weilin_prompt_ui_comma_conversion")||(localStorage.setItem("weilin_prompt_ui_comma_conversion","true"),N=!0),localStorage.getItem("weilin_prompt_ui_period_conversion")||(localStorage.setItem("weilin_prompt_ui_period_conversion","true"),k=!0),localStorage.getItem("weilin_prompt_ui_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_bracket_conversion","true"),se=!0),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion","true"),de=!0),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")||localStorage.setItem("weilin_prompt_ui_underscore_to_bracket","false"),N&&(u.value=u.value.replace(/，/g,",")),k&&(u.value=u.value.replace(/。/g,".")),se&&(u.value=u.value.replace(/【/g,"[").replace(/】/g,"]").replace(/（/g,"(").replace(/）/g,")")),de&&(u.value=u.value.replace(/《/g,"<").replace(/》/g,">"));const ke=u.value;let he=[];const we=d.value.map((De,Oe)=>({token:De,originalIndex:Oe,currentIndex:Oe})).filter(({token:De})=>De.isHidden);he=((De,Oe=0)=>{let Ae=[],Ve=Oe,He="",Ue=[];for(;Ve<De.length;){const Ke=De[Ve];if(Ke===`
`){He.trim()&&(Ae.push(He.trim()),He=""),Ae.push(`
`),Ve++;continue}Ue.length===0&&Ke===","?(He.trim()&&Ae.push(He.trim()),He=""):He+=Ke,Ve++}return He.trim()&&(Ue.length===0?Ae.push(...He.split(",").filter(Boolean).map(Ke=>Ke.trim())):Ae.push(He.trim())),Ae})(ke);const Ee=new Map;d.value.forEach((De,Oe)=>{De.id||(De.id=S()),Ee.set(Oe,De)});const Pe=[];he.forEach(De=>{if(De===`
`)Pe.push({id:S(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""});else if(De.trim()){const Oe=De.trim(),Ae=/^<wlr:[^:]+:\d+(\.\d+)?:\d+(\.\d+)?>$/.test(Oe);let Ve=!1;for(const[He,Ue]of Ee)if(Ue.text===Oe&&!Ue.isHidden&&!Pe.includes(Ue)){Ae&&!Ue.isLoraTag&&(Ue.isLoraTag=!0),Pe.push(Ue),Ee.delete(He),Ve=!0;break}if(!Ve){for(const[He,Ue]of Ee)if(Ue.text===Oe&&!Pe.includes(Ue)){Ae&&!Ue.isLoraTag&&(Ue.isLoraTag=!0),Pe.push(Ue),Ee.delete(He),Ve=!0;break}}Ve||Pe.push({id:S(),text:Oe,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:"",isLoraTag:Ae})}});const Fe=new Set;we.forEach(({token:De,originalIndex:Oe})=>{if(Fe.has(De.id)||(Fe.add(De.id),Pe.some(He=>He.id===De.id)))return;let Ve=Oe;for(;Ve>Pe.length;)Ve--;Ve<0?Pe.push(De):Pe.splice(Ve,0,De)}),d.value=Pe,u.value=d.value.length>0?d.value.reduce((De,Oe,Ae)=>{var xt,sa;if(Oe.isHidden)return De;if(Oe.text===`
`){const st=_t(Ae);return st!==-1&&d.value[st],De+Oe.text}if(De===""){let st=Ae+1;for(;st<d.value.length&&((xt=d.value[st])!=null&&xt.isHidden);)st++;const Ia=st>=d.value.length,ia=st<d.value.length?d.value[st]:null,Ra=Ia||ia&&ia.text===`
`;return Oe.text+(Ra?",":"")}let Ve=Ae+1;for(;Ve<d.value.length&&((sa=d.value[Ve])!=null&&sa.isHidden);)Ve++;const He=Ve>=d.value.length,Ue=Ve<d.value.length?d.value[Ve]:null,Ke=Ue&&Ue.text===`
`||He,Tt=_t(Ae);return Tt!==-1&&d.value[Tt].text===`
`?De+Oe.text+(Ke?",":""):De+", "+Oe.text+(Ke?",":"")},""):"",z.value&&clearTimeout(z.value),z.value=setTimeout(()=>{Je()},1e3),lt();const nt=20;let Ye=0;for(;Ye<d.value.length;){const De=Math.min(Ye+nt,d.value.length),Oe=[];for(let Ae=Ye;Ae<De;Ae++)if(d.value[Ae].text.length>0&&!d.value[Ae].translate){let Ve=d.value[Ae].text;const He=Nt(Ve.trim());Oe.push(translatorApi.getTranslateLocal(He).then(Ue=>{const Ke=Ue;d.value[Ae].translate=Ke.translated.translate,d.value[Ae].color=Ke.translated.color}))}await Promise.all(Oe),Ye=De}l.value=gt(u.value)},Ut=async()=>{let k=0;const se=20;for(;k<d.value.length;){let de=[],ke=[],he=0;for(let we=k;we<d.value.length;we++){const $e=d.value[we];if($e.translate&&/[a-zA-Z]/.test($e.translate)&&!(typeof $e.text=="string"&&$e.text.startsWith("<wlr"))){const Ee=$e.text;if(Ee.length>se){const Fe=JSON.stringify([{index:$e.id,text:Ee,translate:""}]);await Bt(Fe,[$e.id]),k=we+1;break}else de.push({index:$e.id,text:Ee,translate:""}),ke.push($e.id),he++}if(he===2)break}if(de.length>0){const we=JSON.stringify(de);await Bt(we)}k+=he>0?he:1}},Bt=async(N,k)=>{let se=0;for(;se<2;)try{const de=await translatorApi.translaterText(N,"");if(de&&de.data){const ke=JSON.parse(de.data);for(let he=0;he<ke.length;he++){const we=ke[he],$e=d.value.findIndex(Ee=>Ee.id===we.index);$e!==-1&&(d.value[$e].translate=we.translate)}return!0}return!1}catch{if(se++,se>=2)return!1}return!1},it=ref(""),Je=()=>{const N=u.value.replace(/[\s\t\n]+/g,"");if(y.value.length>0){if(N.length>0){const k=y.value.filter(ke=>!ke.hidden);let se={prompt:u.value,lora:"",temp_prompt:d.value,temp_lora:y.value};k.length>0&&(se.lora=k);const de=JSON.stringify(se);it.value!=de&&(it.value=de,historyApi.saveHistory({tag:de}))}}else if(it.value!=u.value){const k={prompt:u.value,lora:"",temp_prompt:d.value,temp_lora:""},se=JSON.stringify(k);N.length>0&&historyApi.saveHistory({tag:se})}lt(),U||(T.value=!0)},lt=()=>{if(y.value.length>0){it.value=u.value;const N=y.value.filter(de=>!de.hidden);let k={prompt:u.value,lora:"",temp_prompt:d.value,temp_lora:y.value};N.length>0&&(k.lora=N);const se=JSON.stringify(k);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:se},"*")}else{it.value=u.value;const N={prompt:u.value,lora:"",temp_prompt:d.value,temp_lora:""},k=JSON.stringify(N);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:k},"*")}},yt=(N,k)=>{if(A.value)return;ot.value&&(clearTimeout(ot.value),ot.value=null);const se=k.target.getBoundingClientRect();b.value={top:`${se.top-50}px`,left:`${se.left+se.width/2}px`},g.value=N;const de=d.value[N].text;Ce.value=mt(de),re.value={top:`${se.bottom+window.scrollY+se.height+10}px`,left:`${se.left+se.width/2}px`},d.value[N].isLoraTag||(ge.value=!0)},mt=N=>{const k=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"<",close:">"}];for(const de of k)if(N.startsWith(de.open)&&N.endsWith(de.close))return mt(N.slice(1,-1));const se=N.match(/:(\d+(\.\d+)?)$/);return se?parseFloat(se[1]):1},ot=ref(null),rt=N=>{ot.value&&clearTimeout(ot.value),ot.value=setTimeout(()=>{v.value||Ze(),ot.value=null},100),ge.value=!1},bt=()=>{v.value=!1,rt(g.value),setTimeout(()=>{v.value||(A.value=!1)},100)},Ze=()=>{v.value||(g.value=null)},Et=()=>{if(g.value!==null){const N=g.value;wt(N),g.value=null,v.value=!1}},Vt=()=>{if(g.value!==null){const N=g.value;d.value.splice(N+1,0,{id:S(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),at()}},wt=N=>{const k=u.value;let se=d.value[N],de=0,ke=-1;for(let he=0;he<N;he++){let we=k.indexOf(d.value[he].text,de);we!==-1&&(de=we+d.value[he].text.length)}if(se.text===`
`||se.text==="	"){for(let he=de;he<k.length;he++)if(k[he]===se.text){ke=he;break}}else ke=k.indexOf(se.text,de);if(ke!==-1){const he=se.text===`
`?" ":"",we=k.substring(0,ke)+he+k.substring(ke+se.text.length);u.value=we}d.value.splice(N,1),u.value=d.value.length>0?d.value.reduce((he,we,$e)=>{var De,Oe;if(we.isHidden)return he;if(we.text===`
`){const Ae=_t($e);return Ae!==-1&&d.value[Ae],he+we.text}if(he===""){let Ae=$e+1;for(;Ae<d.value.length&&((De=d.value[Ae])!=null&&De.isHidden);)Ae++;const Ve=Ae>=d.value.length,He=Ae<d.value.length?d.value[Ae]:null,Ue=Ve||He&&He.text===`
`;return we.text+(Ue?",":"")}let Ee=$e+1;for(;Ee<d.value.length&&((Oe=d.value[Ee])!=null&&Oe.isHidden);)Ee++;const Pe=Ee>=d.value.length,Fe=Ee<d.value.length?d.value[Ee]:null,nt=Fe&&Fe.text===`
`||Pe,Ye=_t($e);return Ye!==-1&&d.value[Ye].text===`
`?he+we.text+(nt?",":""):he+", "+we.text+(nt?",":"")},""):"",Je(),T.value=!0},Ht=(N,k)=>{const se=u.value;let de=0,ke=-1;for(let we=0;we<N;we++){let $e=se.indexOf(d.value[we].text,de);$e!==-1&&(de=$e+d.value[we].text.length)}const he=d.value[N].text;if(ke=se.indexOf(he,de),ke!==-1){const we=k.target.value,$e=se.substring(0,ke)+we+se.substring(ke+he.length);u.value=$e,d.value[N]={...d.value[N],text:we},Je()}},zt=N=>{d.value[N].isPunctuation||(d.value[N].isEditing=!0,setTimeout(()=>{const k=m[N];if(k){k.focus();const se=k.value.length;k.setSelectionRange(se,se),At(k),k.addEventListener("input",()=>At(k)),Je(),T.value=!0}}))},At=N=>{const k=document.createElement("span");k.style.visibility="hidden",k.style.position="absolute",k.style.whiteSpace="pre";const se=window.getComputedStyle(N);k.style.font=se.font,k.style.fontSize=se.fontSize,k.style.fontFamily=se.fontFamily,k.style.padding=se.padding,k.style.border=se.border,k.textContent=N.value||N.placeholder||"",document.body.appendChild(k);const de=k.offsetWidth;N.style.width=`${Math.max(de+4,20)}px`,document.body.removeChild(k)},Lt=N=>{d.value[N].isEditing=!1};watch(d,N=>{at()},{deep:!0}),watch(y,N=>{Je(),T.value=!0},{deep:!0});const Dt=()=>{$.value=!$.value,$.value&&nextTick(()=>{var k;const N=C.value.getBoundingClientRect();(k=P.value)==null||k.setPosition(N)})},Mt=()=>{$.value=!1},$t=N=>{var k,se;C.value&&!C.value.contains(N.target)&&P.value&&!P.value.$el.contains(N.target)&&Mt(),(k=o.value)!=null&&k.contains&&((se=r.value)!=null&&se.contains)&&!o.value.contains(N.target)&&!r.value.contains(N.target)&&(R.value=!1)},jt=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openTagManager_prompt"},"*")},Wt=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openLoraManager"},"*")},It=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openHistoryManager"},"*")},ht=ref(!0),ue=()=>{ht.value=!ht.value},le=ref(!1),ve=()=>{le.value=!le.value};ref(null);const Be=()=>{const N=r.value;N&&(N.addEventListener("keyup",ze),N.addEventListener("click",ze),N.addEventListener("input",ze))},ze=()=>{R.value&&Ct()},qe=()=>{if(r.value){const N=r.value.style.height||`${r.value.offsetHeight}px`;localStorage.setItem("weilinPromptTextAreaHeight",N)}},Re=()=>{const N=localStorage.getItem("weilinPromptTextAreaHeight");N&&r.value&&(r.value.style.height=N)};onMounted(()=>{document.addEventListener("click",$t),window.addEventListener("message",Jt),Xt(),Be(),nextTick(()=>{Re()}),setTimeout(()=>{ee.value||(ee.value=document.querySelector(".tokens-container")),ee.value?(ee.value.removeEventListener("mousedown",je),ee.value.removeEventListener("mousemove",dt),ee.value.removeEventListener("mouseup",Ge),ee.value.removeEventListener("mouseleave",Ge),ee.value.addEventListener("mousedown",je),ee.value.addEventListener("mousemove",dt),ee.value.addEventListener("mouseup",Ge),ee.value.addEventListener("mouseleave",Ge),ee.value.style.userSelect="none",ee.value.style.cursor="default",console.log("框选功能事件监听器绑定成功")):console.warn("未能找到tokens-container元素，框选功能可能无法正常工作")},100)}),onBeforeUnmount(()=>{ee.value&&(ee.value.removeEventListener("mousedown",je),ee.value.removeEventListener("mousemove",dt),ee.value.removeEventListener("mouseup",Ge),ee.value.removeEventListener("mouseleave",Ge)),Ot()});const je=N=>{if(N.button===0&&!N.ctrlKey&&!N.metaKey){const k=N.target.closest(".token-item-box, .token-item, .lora-tag-icon, .newline-token, .tab-token, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box, .token-controls"),se=ee.value;if(se&&!k){L.value=!1,q.value=!1,Y.value=!1,ne.value=!1,St(),Ot();const de=se.getBoundingClientRect();Q.value={x:Math.max(N.clientX,de.left),y:Math.max(N.clientY,de.top)},O.value={x:Math.max(N.clientX,de.left),y:Math.max(N.clientY,de.top)},L.value=!0,console.log("记录框选起始位置")}}},dt=N=>{if(L.value&&ee.value&&!q.value&&Math.sqrt(Math.pow(N.clientX-Q.value.x,2)+Math.pow(N.clientY-Q.value.y,2))>3&&(N.preventDefault(),N.stopPropagation(),q.value=!0,A.value=!0,G.value=[],Rt(),console.log("开始实际框选")),q.value&&ee.value){N.preventDefault(),N.stopPropagation();const k=ee.value.getBoundingClientRect();O.value={x:Math.min(Math.max(N.clientX,k.left),k.right),y:Math.min(Math.max(N.clientY,k.top),k.bottom)};const se=5;Math.abs(O.value.x-Q.value.x)<se&&(O.value.x=Q.value.x+se),Math.abs(O.value.y-Q.value.y)<se&&(O.value.y=Q.value.y+se),(!Y.value||Date.now()-te.value>100)&&(Y.value=!0,requestAnimationFrame(()=>{Yt(),Y.value=!1}));const de=Date.now();!ne.value&&de-te.value>throttleInterval&&(te.value=de,ne.value=!0,requestAnimationFrame(()=>{ca(),ne.value=!1}))}},Ge=()=>{if(L.value=!1,q.value){const N=G.value.length;q.value=!1,A.value=!1,Y.value=!1,ne.value=!1,Ot(),N>0&&ua()}},Rt=()=>{try{let N=document.getElementById(selectionBoxId);N&&document.body.removeChild(N),N=document.createElement("div"),N.id=selectionBoxId,N.style.cssText=`
      position: fixed;
      background-color: rgba(66, 133, 244, 0.4);
      border: 2px dashed #4285f4;
      box-shadow: 0 0 12px rgba(66, 133, 244, 0.6);
      pointer-events: none;
      z-index: 99999;
      transition: none;
      opacity: 1;
      display: block;
    `,document.body.appendChild(N),console.log("选择框已创建"),Yt()}catch(N){console.error("创建选择框失败:",N),Y.value=!1}},Yt=()=>{try{let N=document.getElementById(selectionBoxId);if(!N&&q.value&&(Rt(),N=document.getElementById(selectionBoxId),!N))return;const k=Math.min(Q.value.x,O.value.x),se=Math.min(Q.value.y,O.value.y),de=Math.abs(O.value.x-Q.value.x),ke=Math.abs(O.value.y-Q.value.y),he=5,we=Math.max(de,he),$e=Math.max(ke,he);N&&(N.style.left=`${k}px`,N.style.top=`${se}px`,N.style.width=`${we}px`,N.style.height=`${$e}px`)}catch(N){console.error("更新选择框失败:",N),Y.value=!1}},Ot=()=>{try{const N=document.getElementById(selectionBoxId);N&&document.body.removeChild(N)}catch(N){console.error("移除选择框失败:",N)}},ca=()=>{G.value=[];const N=Math.min(Q.value.x,O.value.x),k=Math.min(Q.value.y,O.value.y),se=Math.max(Q.value.x,O.value.x),de=Math.max(Q.value.y,O.value.y);document.querySelectorAll(".token-item-box").forEach((he,we)=>{if(!he.querySelector(".token-item, .lora-tag-icon, .newline-token, .tab-token"))return;const Ee=he.getBoundingClientRect();Ee.right>=N&&Ee.left<=se&&Ee.bottom>=k&&Ee.top<=de&&G.value.push(we)}),Kt()},Kt=()=>{const N=document.querySelectorAll(".token-item-box"),k=[],se=[];N.forEach((de,ke)=>{G.value.includes(ke)?k.push(de):se.push(de)}),k.forEach(de=>{de.classList.add("token-item-box-selected")}),se.forEach(de=>{de.classList.remove("token-item-box-selected"),de.style.border="",de.style.boxShadow="",de.style.backgroundColor=de.dataset.originalBgColor||""})},ua=()=>{if(G.value.length>0){const N=Math.min(Q.value.x,O.value.x),k=Math.min(Q.value.y,O.value.y),se=Math.max(Q.value.x,O.value.x);Math.max(Q.value.y,O.value.y),ae.value={top:`${k-50}px`,left:`${(N+se)/2}px`},W.value=!0,setTimeout(()=>{document.addEventListener("click",qt)},0)}},da=()=>{if(G.value.length===0)return;const se=[...G.value].sort((de,ke)=>de-ke).map(de=>d.value[de].text).join(", ");navigator.clipboard.writeText(se).then(()=>{const de=document.createElement("div");de.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4caf50;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      z-index: 999999;
    `,de.textContent="已复制到剪贴板",document.body.appendChild(de),setTimeout(()=>{document.body.removeChild(de)},2e3)}),St()},pa=()=>{G.value.length!==0&&(G.value.forEach(N=>{d.value[N]&&!d.value[N].isHidden&&(d.value[N].isHidden=!0,d.value[N].hiddenHint=n("promptBox.hiddenHint"))}),at(),Je(),St())},fa=()=>{G.value.length!==0&&(G.value.forEach(N=>{d.value[N]&&d.value[N].isHidden&&(d.value[N].isHidden=!1,d.value[N].hiddenHint="")}),at(),Je(),St())},ga=()=>{G.value.length>0&&(confirm(`确定要删除选中的 ${G.value.length} 个标签吗？`)?ma():Pt())},St=()=>{W.value=!1,document.removeEventListener("click",qt),Pt()},qt=N=>{const k=document.querySelector(".token-controls");k&&!k.contains(N.target)&&St()},ma=()=>{if(G.value.length===0)return;[...G.value].sort((k,se)=>se-k).forEach(k=>{d.value.splice(k,1)}),at(),Je(),Pt()},Pt=()=>{document.querySelectorAll(".token-item-box-selected").forEach(k=>{k.classList.remove("token-item-box-selected"),k.style.border="",k.style.boxShadow="",k.style.backgroundColor=k.dataset.originalBgColor||""}),G.value=[],W.value&&(W.value=!1,document.removeEventListener("click",qt))},Qt=N=>{if(G.value.length===0)return;const k=N.target.closest(".token-item-box, .token-item, .token-controls, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box"),se=ee.value;(N.target===r.value||!k&&(!se||!se.contains(N.target)))&&Pt()};onMounted(()=>{document.addEventListener("click",Qt)}),onUnmounted(()=>{document.removeEventListener("click",$t),document.removeEventListener("click",Qt),ft.value&&clearTimeout(ft.value),window.removeEventListener("message",Jt);const N=r.value;N&&(N.removeEventListener("keyup",ze),N.removeEventListener("click",ze),N.removeEventListener("input",ze)),ee.value&&(ee.value.removeEventListener("mousedown",je),ee.value.removeEventListener("mousemove",dt),ee.value.removeEventListener("mouseup",Ge),ee.value.removeEventListener("mouseleave",Ge)),Ot()});const Jt=N=>{if(N.data.type==="weilin_prompt_ui_insertTag"){const k=u.value,se=N.data.tagText;k===""?u.value=se:(k.endsWith(" "),u.value=k+", "+se+","),Z.value=u.value,Xe()}else if(N.data.type==="weilin_prompt_ui_user_history_tag"){const k=N.data.tagText;it.value=k,oa(k)}else if(N.data.type!=="weilin_prompt_ui_refresh_all_data"){if(N.data.type==="weilin_prompt_ui_translate_setting")Xt();else if(N.data.type==="weilin_prompt_ui_selectLora"){if(N.data.lora.loraWorks!=null&&N.data.lora.loraWorks.length>0){const k=u.value,se=N.data.lora.loraWorks;k===""?u.value=se:(k.endsWith(" "),u.value=k+", "+se+","),Z.value=u.value,Xe()}}else if(N.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response")La(N.data.data);else if(N.data.type==="weilin_prompt_ui_addLoraTag_inner")if(N.data.lora.loraWorks!=null&&N.data.lora.loraWorks.length>0){const k=u.value,se=N.data.lora.tag+(N.data.lora.loraWorks===""?"":", "+N.data.lora.loraWorks);k===""?u.value=se:(k.endsWith(" "),u.value=k+", "+se+","),Z.value=u.value,Xe()}else{const k=u.value,se=N.data.lora.tag;k===""?u.value=se:(k.endsWith(" "),u.value=k+", "+se+","),Z.value=u.value,Xe()}}},Xt=async()=>{const N=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",k=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified";localStorage.getItem("weilin_prompt_ui_sourceLanguage")||localStorage.setItem("weilin_prompt_ui_sourceLanguage",N),localStorage.getItem("weilin_prompt_ui_targetLanguage")||localStorage.setItem("weilin_prompt_ui_targetLanguage",k),N!=="auto"&&translate.language.setLocal(N),translate.language.setDefaultTo(k),await nextTick()},ha=(N,k)=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network")translate.request.translateText(N,function(se){if(se.result>0){const de=se.text.map(ke=>ke.replace(/[\[\]“”]/g,"")).join(", ");k.translate=de}});else{let se={index:k.id,text:k.text,translate:""};const de=JSON.stringify(se);translatorApi.translaterText(de,"").then(ke=>{if(ke&&ke.data){const he=JSON.parse(ke.data);k.translate=he.translate}})}},Zt=()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network"){var N={from:translate.language.recognition(V.value).languageName,to:"english",texts:[V.value]};translate.request.translateText(N,function(se){if(se.result>0){const de=se.text.map(ke=>ke.replace(/[\[\]“”]/g,"")).join(", ");d.value.push({text:de,translate:V.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),V.value="",at()}})}else{let k={text:V.value,translate:""};const se=JSON.stringify(k);translatorApi.translaterInputText(se,"").then(de=>{if(de&&de.data){const ke=JSON.parse(de.data);d.value.push({text:ke.translate,translate:V.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),V.value="",at()}})}},va=()=>{setTimeout(()=>{R.value||(Z.value=u.value,Xe())},100)},ea=N=>{let k=N.replace(/[\[\]{}]/g,"").trim();const de=Nt(k).trim();if(!de){R.value=!1;return}if(de.length>20){R.value=!1;return}try{const ke=de.toLowerCase();autocompleteApi.getAutocomplete(String(ke)).then(async he=>{F.value=he.data,await Ct(),setTimeout(()=>{fe.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450,oe.value=localStorage.getItem("weilin_prompt_ui_auto_box_height")||350,R.value=F.value.length>0,H.value=0},50)})}catch(ke){console.error("Autocomplete error:",ke),R.value=!1}},_a=N=>{R.value&&(N.key==="ArrowDown"?(N.preventDefault(),H.value=Math.min(H.value+1,F.value.length-1),ta()):N.key==="ArrowUp"?(N.preventDefault(),H.value=Math.max(H.value-1,0),ta()):N.key==="Tab"||N.key==="Enter"?(N.preventDefault(),aa(H.value,null)):N.key==="Escape"&&(N.preventDefault(),na()))},ta=()=>{nextTick(()=>{if(j.value&&o.value){const N=o.value,k=j.value,se=N.getBoundingClientRect(),de=k.getBoundingClientRect(),ke=de.top<se.top,he=de.bottom>se.bottom;ke?N.scrollTop=N.scrollTop+(de.top-se.top):he&&(N.scrollTop=N.scrollTop+(de.bottom-se.bottom))}})},ya=computed(()=>{if(!f.value)return{left:s.value.left};const N=f.value.offsetWidth;fe.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450;const k=fe.value;let se=s.value.left;return se+k>N&&(se=N-k),se<0&&(se=0),{left:se}}),aa=(N,k)=>{if(k&&(k.preventDefault(),k.stopPropagation()),!F.value[N])return;R.value=!1;const se=r.value.selectionStart,de=r.value.selectionEnd,ke=u.value;let he=F.value[N].text;localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false"&&(he=he.replace(/，/g,",")),localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false"&&(he=he.replace(/。/g,".")),localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false"&&(he=he.replace(/【/g,"[").replace(/】/g,"]").replace(/（/g,"(").replace(/）/g,")")),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false"&&(he=he.replace(/《/g,"<").replace(/》/g,">")),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"&&(he=he.replace(/_/g," ")),localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"&&(he=he.replace(/\(([^)]+)\)/g,"\\($1\\)"));let we=se,$e=de;for(;we>0&&!/[,\s]/.test(ke[we-1]);)we--;for(;!1;)$e++;let Ee=ke.substring(0,we)+he+ke.substring($e);ke[$e]&&!/[\,\s]/.test(ke[$e])&&(Ee=ke.substring(0,we)+he+", "+ke.substring($e));const Pe=ke[$e]&&!/[\,\s]/.test(ke[$e]),Fe=we+he.length+(Pe?2:0);u.value=Ee,Z.value=Ee,Xe(),nextTick(()=>{r.value&&(r.value.selectionStart=Fe,r.value.selectionEnd=Fe)})},na=()=>{R.value=!1},oa=N=>{if(N.length>0)try{const k=JSON.parse(N);if(u.value=k.prompt,Z.value=u.value,k.lora&&k.lora!=""&&(y.value=k.lora),k.temp_prompt&&k.temp_prompt!=""){const se=k.temp_prompt;let de=!1;se.tokens&&se.tokens.length>0&&se.tokens!=""&&(d.value=se.tokens,de=!0),se.lora&&se.lora.length>0&&se.lora!=""&&(y.value=se.lora,de=!0),!de&&se.length>0&&se!=""&&(d.value=se)}if(k.temp_lora&&k.temp_lora.length>0&&k.temp_lora!=""){const se=k.temp_lora;y.value=se}Xe()}catch{message$1({type:"warn",str:"promptBox.settings.errorPrompt"})}},Ft=ref(!1),kt=ref(null),et=ref([]);let vt=null,ct=null;const ba=(N,k=!1)=>{Ft.value=!0,kt.value=null,et.value=[],k&&G.value.length>1&&G.value.includes(N)?et.value=[...G.value].sort((se,de)=>se-de):(G.value=[],kt.value=N),ct={originalTokens:[...d.value],draggedItems:et.value.length>0?et.value.map(se=>d.value[se]):[d.value[N]]}},wa=(N,k)=>{if(A.value){k.preventDefault();return}ba(N,!0),k.dataTransfer.effectAllowed="move"},$a=(N,k,se)=>{const de=k.filter(we=>we<se).length;let ke=Math.max(0,se-de);const he=N.length-k.length;return ke=Math.min(ke,he),ke},ra=N=>{if(!ct)return;const k=[...ct.originalTokens],se=et.value.length>0?et.value:[kt.value],de=se.map(he=>ct.originalTokens[he]);for(let he=se.length-1;he>=0;he--){const we=se[he];we<k.length&&k.splice(we,1)}const ke=$a(ct.originalTokens,se,N);if(ct.draggedItems.forEach((he,we)=>{k.splice(ke+we,0,he)}),d.value=k,at(),et.value.length>0&&G.value.length>0){const he=[];for(let we=0;we<k.length;we++){const $e=k[we];de.some(Ee=>Ee.text===$e.text)&&he.push(we)}G.value=he,setTimeout(()=>{Kt()},0)}},Sa=(N,k)=>{if(A.value){k.preventDefault();return}k.preventDefault(),Ft.value&&(N<0||N>=d.value.length||et.value.length>0&&et.value.includes(N)||et.value.length===0&&kt.value===N||(vt&&clearTimeout(vt),vt=setTimeout(()=>{ra(N)},dragUpdateDelay)))},ka=(N,k)=>{k.preventDefault(),vt&&(clearTimeout(vt),vt=null),Ft.value&&ct&&ra(N),Ft.value=!1,kt.value=null,et.value=[],ct=null},at=()=>{u.value=d.value.length>0?d.value.reduce((N,k,se)=>{var Ee,Pe;if(k.isHidden)return N;if(k.text===`
`){const Fe=_t(se);return Fe!==-1&&d.value[Fe],N+k.text}if(N===""){let Fe=se+1;for(;Fe<d.value.length&&((Ee=d.value[Fe])!=null&&Ee.isHidden);)Fe++;const nt=Fe>=d.value.length,Ye=Fe<d.value.length?d.value[Fe]:null,De=nt||Ye&&Ye.text===`
`;return k.text+(De?",":"")}let de=se+1;for(;de<d.value.length&&((Pe=d.value[de])!=null&&Pe.isHidden);)de++;const ke=de>=d.value.length,he=de<d.value.length?d.value[de]:null,we=he&&he.text===`
`||ke,$e=_t(se);return $e!==-1&&d.value[$e].text===`
`?N+k.text+(we?",":""):N+", "+k.text+(we?",":"")},""):"",lt(),U||(T.value=!0)},Ta=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*")},xa=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank")},Na=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_cloud_window"},"*")},Ca=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_danbooru_manager_window"},"*")},Ba=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},_t=N=>{for(let k=N-1;k>=0;k--)if(!d.value[k].isHidden)return k;return-1},Ea=N=>{if(N>=0&&N<d.value.length){if(d.value[N].text===`
`||d.value[N].text==="	")return;d.value[N].isHidden=!d.value[N].isHidden,d.value[N].isHidden?d.value[N].hiddenHint=n("promptBox.hiddenHint"):d.value[N].hiddenHint="",at()}},Va=()=>{window.open("https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X","_blank")},Aa=async()=>{if(c.promptManager=="prompt_global")try{await randomTagApi.goRandomTemplate().then(N=>{N.code===200?(u.value=N.random_tags,nextTick(()=>{Xe()})):message$1({type:"warn",str:N.info})}).catch(N=>{console.error(N),message$1({type:"warn",str:"message.networkError"})})}catch(N){message$1({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",N)}else window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"},"*")},La=async N=>{try{await randomTagApi.goRandomTemplatePath(N).then(k=>{k.code===200?(u.value=k.random_tags,nextTick(()=>{Xe()})):message$1({type:"warn",str:k.info})}).catch(k=>{console.error(k),message$1({type:"warn",str:"message.networkError"})})}catch(k){message$1({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",k)}},Gt=ref(null),Da=N=>{Gt.value&&Gt.value.open(N.text,N.translate)},Ma=()=>{a.value.open(c.promptManager)};return t({setPromptText:oa}),(N,k)=>{var se,de,ke;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$a,[createVNode(Transition,{name:"weilin-fade"},{default:withCtx(()=>[ce.value?(openBlock(),createElementBlock("div",_hoisted_2$9,"已更新标签")):createCommentVNode("",!0)]),_:1}),c.promptManager==="prompt"?(openBlock(),createBlock(LoraStack,{key:0,"is-open":E.value,"selected-loras":y.value,onClose:X},null,8,["is-open","selected-loras"])):createCommentVNode("",!0),K.value?(openBlock(),createBlock(MainLabelManager,{key:1,ref_key:"mainLabelManagerRef",ref:ie,"selected-id":pe.value,onSelect:_e},null,8,["selected-id"])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(`${prefix$2}main-content`),style:normalizeStyle({width:M.value})},[createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",_hoisted_4$8,[createBaseVNode("button",{class:"tag-manager-btn",onClick:x,title:K.value?"收起标签栏":"展开标签栏"},[(openBlock(),createElementBlock("svg",{class:normalizeClass(["weilin-comfyui-sidebar-toggle-icon",{"is-closed":!K.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},k[16]||(k[16]=[createBaseVNode("path",{fill:"currentColor",d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"},null,-1)]),2)),createBaseVNode("span",_hoisted_6$7,toDisplayString$1(K.value?"收起标签栏":"展开标签栏"),1)],8,_hoisted_5$7)]),createBaseVNode("div",_hoisted_7$7,[createBaseVNode("button",{class:"language-switch-btn",onClick:withModifiers(Dt,["stop"]),ref_key:"langBtnRef",ref:C,title:unref(n)("controls.language")},[k[17]||(k[17]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"translate-icon"},[createBaseVNode("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1)),createBaseVNode("span",_hoisted_9$7,toDisplayString$1(unref(n)("controls.language")),1)],8,_hoisted_8$7),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[$.value?(openBlock(),createBlock(LanguageSwitcher,{key:0,ref_key:"languageSwitcherRef",ref:P,onClose:Mt},null,512)):createCommentVNode("",!0)]),_:1})]),createBaseVNode("div",_hoisted_10$6,[createVNode(ThemeSwitch,{title:unref(n)("controls.switchTheme")},{default:withCtx(({isDark:he})=>[createBaseVNode("span",_hoisted_11$6,toDisplayString$1(unref(n)(he?"controls.darkMode":"controls.lightMode")),1)]),_:1},8,["title"])]),createBaseVNode("div",_hoisted_12$6,[createBaseVNode("button",{class:"settings-btn",onClick:Ne,title:unref(n)("controls.settings")},[k[18]||(k[18]=createBaseVNode("svg",{class:"settings-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})],-1)),createBaseVNode("span",_hoisted_14$5,toDisplayString$1(unref(n)("controls.settings")),1)],8,_hoisted_13$5)]),createBaseVNode("div",_hoisted_15$5,[createBaseVNode("button",{class:"tag-manager-btn",onClick:jt,title:unref(n)("controls.tagManager")},[k[19]||(k[19]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon"},[createBaseVNode("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),createBaseVNode("span",_hoisted_17$5,toDisplayString$1(unref(n)("controls.tagManager")),1)],8,_hoisted_16$5)]),createBaseVNode("div",_hoisted_18$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:Ca,title:unref(n)("controls.danbooruManager")},[k[20]||(k[20]=createBaseVNode("svg",{class:"tag-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),createBaseVNode("span",_hoisted_20$3,toDisplayString$1(unref(n)("controls.danbooruManager")),1)],8,_hoisted_19$3)]),c.hasPromptLoraStack?(openBlock(),createElementBlock("div",_hoisted_21$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:I,title:unref(n)("controls.loraStack")},[k[21]||(k[21]=createBaseVNode("svg",{sxmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M902.5 485.1c-59-17.5-113.8-3.4-155 27.7V365.1c0-45.2-36.9-82.1-82.1-82.1H511.2c31.1-41.2 45.2-96 27.7-155C522.2 71.6 475 26.1 418 12 303.4-16.5 200.9 69.4 200.9 179.3c0 39.1 13.5 74.7 35.3 103.7H82.1C36.9 283 0 319.9 0 365.1v113.1c0 25.5 27.9 38.8 49.5 25.3 38.8-24.3 87.8-33.6 139.4-19.5 57 15.6 103.4 62.5 118.4 119.7 30.1 115.5-56.2 219.4-166.8 219.4-33.5 0-64.7-9.6-91.1-26.2C27.8 783.4 0 796.8 0 822.2v113.2c0 45.2 36.9 82.1 82.1 82.1h583.3c45.2 0 82.1-36.9 82.1-82.1V787.7c29 21.9 64.6 35.3 103.7 35.3 109.9 0 195.8-102.5 167.3-217.1-14.1-56.9-59.7-104.1-116-120.8z"})],-1)),createBaseVNode("span",_hoisted_23$3,toDisplayString$1(unref(n)("controls.loraStack")),1)],8,_hoisted_22$3)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_24$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:Wt,title:unref(n)("controls.loraManager")},[k[22]||(k[22]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),createBaseVNode("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),createBaseVNode("span",_hoisted_26$3,toDisplayString$1(unref(n)("controls.loraManager")),1)],8,_hoisted_25$3)]),createBaseVNode("div",_hoisted_27$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:It,title:unref(n)("controls.history")},[k[23]||(k[23]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M653.7 85.83c-235.05 0-426.29 191.25-426.29 426.3s191.24 426.3 426.29 426.3c235.06 0 426.3-191.25 426.3-426.3S888.76 85.83 653.7 85.83z m0 779.98c-195.01 0-353.67-158.65-353.67-353.68S458.69 158.45 653.7 158.45c195.02 0 353.68 158.65 353.68 353.68S848.72 865.81 653.7 865.81z"}),createBaseVNode("path",{d:"M866.78 634.19L695.93 533.61V302.59c0-20.06-16.26-36.31-36.31-36.31s-36.31 16.26-36.31 36.31v253.66c0 17.06 11.8 31.26 27.66 35.16l178.98 105.36c17.28 10.17 39.54 4.41 49.71-12.87 10.17-17.28 4.4-39.54-12.88-49.71zM44.76 324.51h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31zM231.18 703.25H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.25-36.31-36.31-36.31zM36.31 550.19h118.8c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H36.31c-20.05 0-36.31 16.26-36.31 36.31 0 20.06 16.26 36.31 36.31 36.31z"})],-1)),createBaseVNode("span",_hoisted_29$3,toDisplayString$1(unref(n)("controls.history")),1)],8,_hoisted_28$3)]),createBaseVNode("div",_hoisted_30$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:Ta,title:unref(n)("controls.aiChat")},[k[24]||(k[24]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),createBaseVNode("path",{d:"M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"})],-1)),createBaseVNode("span",_hoisted_32$3,toDisplayString$1(unref(n)("controls.aiChat")),1)],8,_hoisted_31$3)]),createBaseVNode("div",_hoisted_33$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:xa,title:unref(n)("controls.github")},[k[25]||(k[25]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)),createBaseVNode("span",_hoisted_35$3,toDisplayString$1(unref(n)("controls.github")),1)],8,_hoisted_34$3)]),createBaseVNode("div",_hoisted_36$3,[createBaseVNode("button",{class:"tag-manager-btn",onClick:Na,title:unref(n)("controls.shareCloudData")},[k[26]||(k[26]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),createBaseVNode("span",_hoisted_38$2,toDisplayString$1(unref(n)("controls.shareCloudData")),1)],8,_hoisted_37$2)]),createBaseVNode("div",_hoisted_39$2,[createBaseVNode("button",{class:"tag-manager-btn",onClick:Va,title:unref(n)("controls.tutorialVideo")},[k[27]||(k[27]=createBaseVNode("svg",{t:"1745234292993",class:"tag-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1496",width:"128",height:"128"},[createBaseVNode("path",{d:"M204.288 63.488c-8.704 8.192-16.896 20.48-18.944 26.624-3.584 11.776 12.8 62.464 20.48 62.464S235.52 176.128 235.52 184.32c0 16.384-17.92 26.112-47.104 26.112-34.816 0-104.448 27.648-128.512 51.2-9.216 8.704-26.112 33.792-37.888 56.32L0 358.4v469.504l21.504 40.448c24.576 47.616 35.84 59.392 82.944 84.992l40.96 22.528h722.944l40.96-19.968c51.712-24.576 72.704-45.056 95.744-94.72l17.92-38.4v-231.424l0.512-231.424-17.92-36.352c-9.216-20.48-28.16-47.104-42.496-59.904-31.232-30.208-86.528-54.272-122.368-54.272-54.272 0-65.024-22.528-26.624-57.856 20.48-18.432 23.04-25.088 23.04-45.568 0-19.968-3.584-28.16-16.896-41.984-9.216-9.216-22.528-16.896-29.696-16.896-11.776 0-34.304 9.216-40.448 16.896-1.536 1.536-35.84 35.328-75.776 74.24l-73.216 71.168-83.456-0.512c-45.568 0-88.064-2.56-93.696-4.608-5.632-2.56-38.4-31.232-72.704-65.024C249.856 40.448 235.008 32.256 204.288 63.488z m652.8 262.656c5.12 0.512 19.968 9.216 31.744 20.48l21.504 19.968 1.536 217.088c1.024 197.12 0.512 218.112-8.704 236.032-14.336 27.136-34.816 40.448-65.536 41.984-14.336 0.512-173.568 0.512-353.28 0l-326.144-1.536-45.056-45.056V373.248l20.992-22.528c15.872-17.92 25.6-23.552 41.984-25.088 16.384-1.024 634.88-0.512 680.96 0.512z","p-id":"1497"}),createBaseVNode("path",{d:"M279.04 502.272c-20.48 22.016-20.992 25.088-20.992 66.56 0 39.936 1.024 44.544 17.92 64 29.184 33.28 55.808 32.256 84.48-2.56 11.264-12.8 12.8-22.016 13.312-64 0-47.104-0.512-48.64-19.968-68.096-27.136-27.648-47.616-26.112-74.752 4.096z m393.216-3.584c-18.944 18.944-19.968 20.992-19.968 69.12 0 47.616 0.512 49.664 18.432 67.072 24.576 23.552 35.84 26.624 58.368 13.824 29.184-16.896 39.936-43.52 36.864-90.624-2.56-35.328-4.608-41.984-22.016-59.904-25.088-25.6-45.568-25.6-71.68 0.512z","p-id":"1498"})],-1)),createBaseVNode("span",_hoisted_41$2,toDisplayString$1(unref(n)("controls.tutorialVideo")),1)],8,_hoisted_40$2)]),createBaseVNode("div",_hoisted_42$2,[createBaseVNode("button",{class:"tag-manager-btn",onClick:Ba,title:unref(n)("controls.sponsor")},[k[28]||(k[28]=createBaseVNode("svg",{t:"1745823985128",class:"tag-icon",viewBox:"0 0 1322 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[createBaseVNode("path",{d:"M495.899049 634.906371c-17.304811 0-31.251971 13.947161-31.251971 31.251971S478.594238 697.410314 495.899049 697.410314c17.304811 0 31.251971-13.947161 31.251971-31.251972 0-17.304811-13.947161-31.251971-31.251971-31.251971zM790.855671 728.662285c-17.304811 0-31.251971 13.947161-31.251972 31.251971s13.947161 31.251971 31.251972 31.251972 31.251971-13.947161 31.251971-31.251972c0-17.04653-13.947161-30.993691-31.251971-31.251971z"}),createBaseVNode("path",{d:"M1262.99289 719.622459c-13.430599-8.264984-28.927445-13.430599-44.68257-14.980284 34.867902-84.974368 57.080047-196.293374-18.596215-306.837537-115.193217-168.657333-280.75118-256.73107-491.766556-260.863562-60.179416-1.291404-130.948343 1.549685-205.849762 4.649054-87.040614 3.35765-203.008673 8.006703-281.526023 1.549684 15.755126-8.523265 32.543375-16.788249 47.007098-23.761829 55.530362-27.119479 98.921529-48.04022 84.457807-85.232649-7.748423-21.695583-30.218848-33.059937-67.411277-34.09306C206.624604-1.755689 37.967271 43.443443 7.748423 119.636265c-17.04653 42.874605-19.887618 125.524447 152.902206 198.876182 71.027208 30.218848 271.969635 66.894715 349.453861 74.643138 17.563091 1.549685 34.867902 5.165615 51.397871 11.364353-17.821372 11.622634-35.901025 24.02011-54.238959 36.417586-31.768533-18.079653-83.941245-39.516955-122.683358-13.172318-14.463722 9.298107-23.503549 25.053233-24.02011 42.358044-0.516562 21.179022 12.397476 42.099763 26.861198 58.629731-57.080047 45.715694-103.312302 89.881703-119.84227 123.974762-18.337934 41.841482-25.828075 110.544163 8.523265 177.438879 43.391167 84.974368 138.955046 144.120661 284.625391 176.147474 190.352916 41.583202 354.619476 4.132492 463.355674-53.205835 60.437697-32.026814 103.570583-69.994085 124.233043-103.828864 6.457019 2.066246 12.914038 4.132492 19.629338 6.198738 9.298107 2.841088 18.596214 5.682177 27.37776 8.781546 28.669164 10.072949 60.695977 8.523265 85.232649-3.61593l1.291403-0.774843c17.821372-9.039826 31.510252-25.053233 37.708991-44.166009 15.238565-51.139589-29.444006-79.033911-56.563486-96.08044z m-811.776412-239.684541l-17.30481 12.655757c-5.165615-5.165615-9.814669-11.106072-13.430599-17.563091 6.7153-2.066246 18.337934 0.258281 30.735409 4.907334zM1262.99289 798.139808c-1.291404 3.874211-4.132492 6.97358-9.298107 9.814669-10.33123 5.165615-25.569795 5.423896-39.258675 0.774842-9.298107-3.35765-19.371057-6.457019-29.444006-9.556388-18.596214-5.682177-49.848186-15.238565-55.788643-22.470426-9.814669-12.914038-28.152602-15.755126-41.32492-5.940457s-15.755126 28.152602-5.940458 41.324921c3.615931 4.390773 7.490142 8.264984 12.139196 11.622634-44.940851 62.245662-242.267348 186.220424-521.468844 125.007885-125.782728-27.636041-210.498815-77.742507-244.850155-145.412065-24.794952-48.815063-19.112776-98.921529-7.231861-126.299289 34.09306-71.027208 280.75118-234.518925 438.30244-327.241716 13.947161-8.264984 18.596214-26.344637 10.33123-40.291798s-27.119479-19.629337-40.291797-10.33123c-12.655757 7.490142-55.788643 33.059937-111.060725 68.186119-18.596214-12.655757-50.881309-27.894322-102.537459-33.059936-81.874999-8.264984-270.936512-44.42429-332.149051-70.252366C139.471608 245.418993 40.033517 196.34565 61.987381 141.073568c5.165615-12.914038 29.185725-33.576498 81.100157-53.464116 35.384463-13.430599 72.318611-22.470426 109.769321-27.119479l-11.622634 5.682176c-35.384463 17.304811-73.868296 36.417586-99.954652 59.146293-1.807965-1.033123-3.615931-2.324527-5.165615-3.874211-10.847792-11.622634-29.185725-12.397476-41.06664-1.291404l-0.516562 0.516561c-11.880915 11.106072-12.139195 29.702287-1.033123 41.583202 10.589511 11.106072 26.086356 19.371057 45.715694 25.569795 0.774842 0.258281 1.291404 0.516562 2.066246 0.774842 68.702681 21.179022 190.611197 18.596214 362.367899 11.622634 74.126577-2.841088 144.120661-5.682177 202.492111-4.649054 193.710566 3.874211 339.122631 80.841876 444.75946 235.552049 64.828469 95.047318 41.583202 188.544951 4.390773 269.903388-4.649054-3.615931-9.039826-7.748423-12.655757-12.139195-10.33123-12.397476-28.669164-14.463722-41.324921-4.649054-12.655757 10.072949-14.722003 28.669164-4.649054 41.324921 5.940457 7.490142 36.675867 42.874605 74.643138 39.775236h2.066246c1.291404-0.258281 2.324527 0 3.615931-0.258281 25.828075-4.649054 42.358044-3.615931 57.596608 6.198738 20.40418 12.914038 30.218848 20.40418 28.410883 26.861199z"})],-1)),createBaseVNode("span",_hoisted_44$1,toDisplayString$1(unref(n)("controls.sponsor")),1)],8,_hoisted_43$2)]),createVNode(SettingDialog,{ref_key:"settingDialog",ref:w},null,512),createBaseVNode("div",_hoisted_45$1,[createBaseVNode("button",{class:normalizeClass(["update-label-btn",{"is-dirty":T.value}]),disabled:!pe.value||!T.value,onClick:J}," 更新标签 ",10,_hoisted_46$1)])]),createBaseVNode("div",{style:{position:"relative"},ref_key:"parentCneterBox",ref:f},[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":k[0]||(k[0]=he=>u.value=he),class:"input-area",onInput:ut,placeholder:unref(n)("promptBox.placeholder"),onKeydown:_a,onBlur:va,rows:"6",ref_key:"inputAreaRef",ref:r,onMouseup:qe,onResize:qe},null,40,_hoisted_47),[[vModelText,u.value]]),createBaseVNode("div",_hoisted_48,toDisplayString$1(l.value)+" tokens ",1),createBaseVNode("div",{class:"autocomplete-container",ref_key:"autocompleteContainerRef",ref:o,style:normalizeStyle({top:`${s.value.top}px`,left:`${ya.value.left}px`,display:R.value?"block":"none",width:`${fe.value}px`,maxHeight:`${oe.value}px`})},[createBaseVNode("button",{class:"close-autocomplete-btn",onClick:withModifiers(na,["stop"])},"×"),(openBlock(!0),createElementBlock(Fragment,null,renderList(F.value,(he,we)=>(openBlock(),createElementBlock("div",{key:we,class:normalizeClass(["autocomplete-item",{selected:we===H.value}]),onClick:withModifiers($e=>aa(we,$e),["stop"]),ref_for:!0,ref:$e=>{$e&&we===H.value&&(j.value=$e)}},[createBaseVNode("span",_hoisted_50,toDisplayString$1(he.text),1),createBaseVNode("span",_hoisted_51,toDisplayString$1(he.desc),1)],10,_hoisted_49))),128))],4)],512),createBaseVNode("div",_hoisted_52,[createBaseVNode("div",_hoisted_53,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":k[1]||(k[1]=he=>V.value=he),class:"prompt-input-translate-area-textarea",onKeyup:k[2]||(k[2]=withKeys(he=>Zt(),["enter"])),placeholder:unref(n)("promptBox.translatePlaceholder")},null,40,_hoisted_54),[[vModelText,V.value]]),createBaseVNode("button",{class:"translate-btn",style:{"margin-left":"8px"},onClick:k[3]||(k[3]=he=>Zt())}," 翻译 ")]),createBaseVNode("button",{class:"translate-btn",onClick:Ut,title:unref(n)("promptBox.oneClickTranslate")},[k[29]||(k[29]=createBaseVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),createBaseVNode("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)),createBaseVNode("span",_hoisted_56,toDisplayString$1(unref(n)("promptBox.oneClickTranslate")),1)],8,_hoisted_55),createBaseVNode("button",{class:"translate-btn random-tag-settings-btn",onClick:Ma,title:unref(n)("promptBox.randomTagSettings")},[k[30]||(k[30]=createBaseVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M512 409.6c-56.32 0-102.4 46.08-102.4 102.4s46.08 102.4 102.4 102.4 102.4-46.08 102.4-102.4-46.08-102.4-102.4-102.4z m0 153.6c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z"}),createBaseVNode("path",{d:"M512 204.8c-25.6 0-51.2 2.56-76.8 7.68l-15.36-61.44c-2.56-10.24-10.24-17.92-20.48-20.48-10.24-2.56-20.48 0-28.16 7.68l-76.8 76.8c-5.12 5.12-7.68 12.8-7.68 20.48s2.56 15.36 7.68 20.48l76.8 76.8c5.12 5.12 12.8 7.68 20.48 7.68 2.56 0 5.12 0 7.68-2.56 10.24-2.56 17.92-10.24 20.48-20.48l15.36-61.44c25.6-5.12 51.2-7.68 76.8-7.68 140.8 0 256 115.2 256 256s-115.2 256-256 256-256-115.2-256-256c0-25.6 2.56-51.2 7.68-76.8l61.44-15.36c10.24-2.56 17.92-10.24 20.48-20.48 2.56-10.24 0-20.48-7.68-28.16l-76.8-76.8c-5.12-5.12-12.8-7.68-20.48-7.68s-15.36 2.56-20.48 7.68l-76.8 76.8c-7.68 7.68-10.24 17.92-7.68 28.16 2.56 10.24 10.24 17.92 20.48 20.48l61.44 15.36c-5.12 25.6-7.68 51.2-7.68 76.8 0 168.96 138.24 307.2 307.2 307.2s307.2-138.24 307.2-307.2-138.24-307.2-307.2-307.2z"})],-1)),createBaseVNode("span",_hoisted_58,toDisplayString$1(unref(n)("promptBox.randomTagSettings")),1)],8,_hoisted_57),createBaseVNode("button",{class:"translate-btn random-tag-btn",onClick:Aa,title:unref(n)("promptBox.oneClickRandomTag")},[k[31]||(k[31]=createBaseVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M832 512c0-176-144-320-320-320S192 336 192 512s144 320 320 320 320-144 320-320z m-384 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 256c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-128 128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z"})],-1)),createBaseVNode("span",_hoisted_60,toDisplayString$1(unref(n)("promptBox.oneClickRandomTag")),1)],8,_hoisted_59)]),d.value.length>0?(openBlock(),createElementBlock("div",_hoisted_61,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,(he,we)=>(openBlock(),createElementBlock(Fragment,{key:"tag-item-"+we},[createBaseVNode("div",{class:normalizeClass(["token-item-box",{"token-item-box-disabled":he.isHidden}]),draggable:!he.isEditing,onDragstart:$e=>wa(we,$e),onDragover:withModifiers($e=>Sa(we,$e),["prevent"]),onDrop:$e=>ka(we,$e),onDblclick:$e=>Ea(we),style:normalizeStyle({backgroundColor:he.color})},[he.text===`
`?(openBlock(),createElementBlock("div",_hoisted_63,[createBaseVNode("span",{class:"token-symbol",title:unref(n)("promptBox.newline")},"↵",8,_hoisted_64)])):he.text==="	"?(openBlock(),createElementBlock("div",{key:1,class:"token-item tab-token",onMouseenter:$e=>yt(we,$e),onMouseleave:$e=>rt()},[createBaseVNode("span",{class:"token-symbol",title:unref(n)("promptBox.tab")},"→",8,_hoisted_66)],40,_hoisted_65)):he.isLoraTag?(openBlock(),createElementBlock("div",{key:2,class:"lora-tag-icon",title:unref(n)("promptBox.loraTag"),onMouseenter:$e=>yt(we,$e),onMouseleave:$e=>rt()},[k[32]||(k[32]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"15",height:"15"},[createBaseVNode("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})],-1)),createBaseVNode("span",_hoisted_68,toDisplayString$1(he.text),1)],40,_hoisted_67)):he.text&&!he.isLoraTag?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(["token-item",{punctuation:he.isPunctuation}]),onMouseenter:$e=>yt(we,$e),onMouseleave:$e=>rt()},[!he.isEditing||he.isPunctuation?(openBlock(),createElementBlock("span",{key:0,onClick:$e=>!he.isPunctuation&&zt(we)},toDisplayString$1(he.text),9,_hoisted_70)):he.isPunctuation?createCommentVNode("",!0):(openBlock(),createElementBlock("input",{key:1,value:he.text,onInput:$e=>Ht(we,$e),onBlur:$e=>Lt(we),onKeyup:withKeys($e=>Lt(we),["enter"]),ref_for:!0,ref:$e=>{$e&&(m[we]=$e)}},null,40,_hoisted_71)),createBaseVNode("button",{class:"quick-delete-btn",onClick:withModifiers($e=>wt(we),["stop"]),title:unref(n)("promptBox.delete"),style:{"margin-left":"4px"}},k[33]||(k[33]=[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"#ff4d4f70"})],-1)]),8,_hoisted_72)],42,_hoisted_69)):createCommentVNode("",!0),he.text!==`
`&&he.text!=="	"&&!he.isLoraTag?(openBlock(),createElementBlock("div",_hoisted_73,[Qe(he.text)?(openBlock(),createElementBlock("div",{key:0,onClick:$e=>ha(he.text,he),class:"translate-button",title:unref(n)("promptBox.translate")},k[34]||(k[34]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),createBaseVNode("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)]),8,_hoisted_74)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_75,toDisplayString$1(he.translate?he.translate:""),1)])):createCommentVNode("",!0)],46,_hoisted_62),he.text===`
`?(openBlock(),createElementBlock("div",_hoisted_76)):createCommentVNode("",!0)],64))),128))])):createCommentVNode("",!0),ge.value?(openBlock(),createElementBlock("div",{key:1,class:"tag-tips-box",style:normalizeStyle(re.value)},[createBaseVNode("div",_hoisted_77,[createBaseVNode("p",{innerHTML:unref(n)("promptBox.tagTips")},null,8,_hoisted_78)])],4)):createCommentVNode("",!0),withDirectives(createBaseVNode("div",{class:"token-controls",style:normalizeStyle(b.value),onMouseenter:k[14]||(k[14]=he=>v.value=!0),onMouseleave:bt},[(se=d.value[g.value])!=null&&se.isLoraTag?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_79,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":k[4]||(k[4]=he=>Ce.value=he),step:"0.1",class:"weight-input",onChange:Me},null,544),[[vModelText,Ce.value]]),createBaseVNode("span",_hoisted_80,toDisplayString$1(unref(n)("promptBox.weight")),1)])),(de=d.value[g.value])!=null&&de.isLoraTag?(openBlock(),createElementBlock("div",_hoisted_81,[createBaseVNode("div",_hoisted_82,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":k[5]||(k[5]=he=>Ie.value=he),step:"0.1",class:"weight-input",onChange:Te},null,544),[[vModelText,Ie.value]]),createBaseVNode("span",_hoisted_83,toDisplayString$1(unref(n)("promptBox.modelWeight")),1)]),createBaseVNode("div",_hoisted_84,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":k[6]||(k[6]=he=>We.value=he),step:"0.1",class:"weight-input",onChange:Te},null,544),[[vModelText,We.value]]),createBaseVNode("span",_hoisted_85,toDisplayString$1(unref(n)("promptBox.textWeight")),1)])])):createCommentVNode("",!0),createBaseVNode("button",{class:"favour-btn",onClick:k[7]||(k[7]=he=>Da(d.value[g.value])),title:unref(n)("promptBox.favour")},k[35]||(k[35]=[createBaseVNode("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[createBaseVNode("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",fill:"#FFD700"})],-1)]),8,_hoisted_86),createBaseVNode("button",{onClick:Et,class:"delete-btn",title:unref(n)("promptBox.delete")},k[36]||(k[36]=[createBaseVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,_hoisted_87),(ke=d.value[g.value])!=null&&ke.isLoraTag?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_88,[createBaseVNode("div",_hoisted_89,[k[37]||(k[37]=createBaseVNode("div",{class:"bracket-btn"}," () ",-1)),createBaseVNode("div",_hoisted_90,[createBaseVNode("button",{class:"vertical-btn",onClick:k[8]||(k[8]=he=>be("(")),title:unref(n)("promptBox.addBracket")}," + ",8,_hoisted_91),createBaseVNode("button",{class:"vertical-btn",onClick:k[9]||(k[9]=he=>ye("(")),title:unref(n)("promptBox.removeLayer")}," - ",8,_hoisted_92)])]),createBaseVNode("div",_hoisted_93,[k[38]||(k[38]=createBaseVNode("div",{class:"bracket-btn"}," [] ",-1)),createBaseVNode("div",_hoisted_94,[createBaseVNode("button",{class:"vertical-btn",onClick:k[10]||(k[10]=he=>be("[")),title:unref(n)("promptBox.addBracket")}," + ",8,_hoisted_95),createBaseVNode("button",{class:"vertical-btn",onClick:k[11]||(k[11]=he=>ye("[")),title:unref(n)("promptBox.removeLayer")}," - ",8,_hoisted_96)])]),createBaseVNode("div",_hoisted_97,[k[39]||(k[39]=createBaseVNode("div",{class:"bracket-btn"}," {} ",-1)),createBaseVNode("div",_hoisted_98,[createBaseVNode("button",{class:"vertical-btn",onClick:k[12]||(k[12]=he=>be("{")),title:unref(n)("promptBox.addBracket")}," + ",8,_hoisted_99),createBaseVNode("button",{class:"vertical-btn",onClick:k[13]||(k[13]=he=>ye("{")),title:unref(n)("promptBox.removeLayer")}," - ",8,_hoisted_100)])])])),createBaseVNode("button",{class:"line-token-btn",onClick:Vt,title:unref(n)("promptBox.addLineToken"),style:{"margin-left":"8px"}},k[40]||(k[40]=[createBaseVNode("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[createBaseVNode("path",{d:"M5 19h14v-2H5v2zm0-7h14v-2H5v2zm0-7v2h14V5H5z",fill:"#888"}),createBaseVNode("path",{d:"M7 17v-2h2v2H7zm0-7V8h2v2H7zm0-7V3h2v2H7z",fill:"#4285f4"})],-1)]),8,_hoisted_101)],36),[[vShow,g.value!==null&&d.value[g.value]]]),createBaseVNode("div",_hoisted_102,[withDirectives(createBaseVNode("div",{class:"token-controls",style:normalizeStyle(ae.value),onMouseenter:k[15]||(k[15]=he=>v.value=!0),onMouseleave:bt},[createBaseVNode("div",_hoisted_103,[createBaseVNode("div",_hoisted_104,"选中 "+toDisplayString$1(G.value.length)+" 个标签",1),createBaseVNode("div",{class:"weilin-comfyui-selection-actions-buttons"},[createBaseVNode("button",{class:"delete-btn copy-btn",onClick:da,title:"复制"},k[41]||(k[41]=[createBaseVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)])),createBaseVNode("button",{class:"delete-btn",onClick:pa,title:"禁用"},k[42]||(k[42]=[createBaseVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#ff4d4f","stroke-width":"2"}),createBaseVNode("path",{d:"M8.5 8.5l7 7",stroke:"#ff4d4f","stroke-width":"2","stroke-linecap":"round"})],-1)])),createBaseVNode("button",{class:"delete-btn enable-btn",onClick:fa,title:"启用"},k[43]||(k[43]=[createBaseVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)])),createBaseVNode("button",{class:"delete-btn",onClick:ga,title:"删除"},k[44]||(k[44]=[createBaseVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))])])],36),[[vShow,W.value]]),createBaseVNode("div",{class:"tag-manager-header",onClick:ve},[createBaseVNode("div",_hoisted_105,[k[45]||(k[45]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[createBaseVNode("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),createBaseVNode("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),createBaseVNode("span",_hoisted_106,toDisplayString$1(unref(n)("controls.loraManager")),1)]),createBaseVNode("div",_hoisted_107,[(openBlock(),createElementBlock("svg",{class:normalizeClass(["collapse-icon",{"is-collapsed":!le.value}]),viewBox:"0 0 24 24"},k[46]||(k[46]=[createBaseVNode("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)]),2))])]),withDirectives(createBaseVNode("div",_hoisted_108,[createVNode(LoraManager,{loraManager:"prompt_inner"})],512),[[vShow,le.value]])]),createBaseVNode("div",_hoisted_109,[createBaseVNode("div",{class:"tag-manager-header",onClick:ue},[createBaseVNode("div",_hoisted_110,[k[47]||(k[47]=createBaseVNode("svg",{class:"tag-icon",viewBox:"0 0 24 24"},[createBaseVNode("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),createBaseVNode("span",_hoisted_111,toDisplayString$1(unref(n)("controls.tagManager")),1)]),createBaseVNode("div",_hoisted_112,[(openBlock(),createElementBlock("svg",{class:normalizeClass(["collapse-icon",{"is-collapsed":!ht.value}]),viewBox:"0 0 24 24"},k[48]||(k[48]=[createBaseVNode("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)]),2))])]),withDirectives(createBaseVNode("div",_hoisted_113,[createVNode(TagManager)],512),[[vShow,ht.value]])])],6)]),createVNode(RandomSetting,{ref_key:"randomSettingItem",ref:a},null,512),createVNode(favourItem,{ref_key:"favourItemRef",ref:Gt},null,512)],64)}}},PromptBox=_export_sfc(_sfc_main$a,[["__scopeId","data-v-ebaf611f"]]),_hoisted_1$9={class:"container"},_hoisted_2$8={class:"tab-container"},_hoisted_3$8={key:0},_hoisted_4$7={class:"search-container"},_hoisted_5$6=["placeholder"],_hoisted_6$6=["title"],_hoisted_7$6=["title","disabled"],_hoisted_8$6=["title"],_hoisted_9$6={class:"history-list"},_hoisted_10$5={class:"action-buttons"},_hoisted_11$5=["onClick","title"],_hoisted_12$5=["onClick","title"],_hoisted_13$4=["onClick","title"],_hoisted_14$4=["value"],_hoisted_15$4={key:1},_hoisted_16$4={class:"search-container"},_hoisted_17$4=["placeholder"],_hoisted_18$2=["title"],_hoisted_19$2=["title"],_hoisted_20$2=["title","disabled"],_hoisted_21$2=["title"],_hoisted_22$2={class:"history-list"},_hoisted_23$2={key:0,class:"favor-name"},_hoisted_24$2={class:"action-buttons"},_hoisted_25$2=["onClick","title"],_hoisted_26$2=["onClick","title"],_hoisted_27$2=["onClick","title"],_hoisted_28$2=["value"],_hoisted_29$2={key:2,class:"weilin-tools-dialog-overlay"},_hoisted_30$2={class:"weilin-tools-dialog-header"},_hoisted_31$2={class:"weilin-tools-dialog-body"},_hoisted_32$2={class:"form-group"},_hoisted_33$2=["placeholder"],_hoisted_34$2={class:"form-group"},_hoisted_35$2=["placeholder"],_hoisted_36$2={class:"form-group"},_hoisted_37$1={class:"color-picker"},_hoisted_38$1={class:"color-controls"},_hoisted_39$1={class:"alpha-control"},_hoisted_40$1={class:"alpha-value"},_hoisted_41$1={class:"weilin-tools-dialog-footer"},_hoisted_42$1={key:3,class:"weilin-tools-dialog-overlay"},_hoisted_43$1={class:"weilin-tools-dialog-header"},_hoisted_44={class:"weilin-tools-dialog-body"},_hoisted_45={class:"confirm-message"},_hoisted_46={class:"weilin-tools-dialog-footer"},_sfc_main$9={__name:"history_index",setup(e){const{t}=useI18n(),a=ref(""),n=ref([]),o=ref([]),r=ref([]),s=ref([]),l=ref("history"),c=ref([]),f=ref(!1),u=ref(!1),d=ref(!1),m=ref({hex:"rgba(255, 123, 2, .4)",alpha:100}),g=ref({name:"",tag:"",color:"rgba(255, 123, 2, .4)"}),v=ref(!1),b=ref(0),$=D=>JSON.parse(D).prompt,w=D=>({hex:"#FFFFFF",alpha:0}),C=D=>{const{hex:K,alpha:x}=w();m.value={hex:K,alpha:x}},P=()=>{d.value=!1,g.value={id:"",name:"",tag:"",backgroundColor:"transparent"},C(),f.value=!0},y=D=>{const K=D.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(K){const[,x,S,I,X]=K,ie=`#${((1<<24)+(parseInt(x)<<16)+(parseInt(S)<<8)+parseInt(I)).toString(16).slice(1)}`,pe=X?Math.round(parseFloat(X)*100):100;return{hex:ie,alpha:pe}}return{hex:"#FF7B02",alpha:50}},E=D=>{d.value=!0,g.value={...D},m.value=y(D.color),f.value=!0},R=()=>{const D=ee(m.value.hex,m.value.alpha);g.value.color=D},F=()=>{f.value=!1,g.value={name:"",tag:"",color:"rgba(255, 123, 2, .4)"},d.value=!1},H=ref(""),j=ref(null),fe=computed(()=>{if(!j.value)return"";switch(H.value){case"history":return t("history.deleteHistoryConfirm",{name:j.value.tag});case"favorite":return t("history.deleteFavoriteConfirm",{name:j.value.tag});case"deleteSelected":return t("history.confirmDeleteSelected");case"deleteSelectedFavorite":return t("history.confirmDeleteSelected");default:return""}}),oe=D=>{H.value="history",j.value=D,u.value=!0},V=D=>{H.value="favorite",j.value=D,u.value=!0},q=()=>{v.value=!1,b.value=0,H.value="deleteSelected",j.value=c.value,u.value=!0},Q=()=>{v.value=!1,b.value=0,H.value="deleteSelectedFavorite",j.value=c.value,u.value=!0},O=async()=>{try{switch(H.value){case"history":historyApi.deleteHistory(j.value.id_index).then(D=>{W(),message$1({type:"success",str:"message.deleteSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"})});break;case"favorite":historyApi.deleteFavorite(j.value.id_index).then(D=>{ae(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.deleteSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"})});break;case"deleteSelected":historyApi.batchDeleteHistory(c.value).then(D=>{W(),message$1({type:"success",str:"message.deleteSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"})});break;case"deleteSelectedFavorite":historyApi.batchDeleteFavorite(j.value).then(D=>{ae(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.deleteSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"})});break}A()}catch{message$1({type:"warn",str:"message.networkError"})}},G=D=>{D.target.checked?l.value==="history"?c.value=n.value.map(K=>K.id_index):c.value=r.value.map(K=>K.id_index):c.value=[]},ee=(D,K)=>{const x=parseInt(D.slice(1,3),16),S=parseInt(D.slice(3,5),16),I=parseInt(D.slice(5,7),16);return`rgba(${x}, ${S}, ${I}, ${K/100})`},A=()=>{u.value=!1,H.value="",j.value=null},L=()=>{if(!g.value.tag){message$1({type:"warn",str:"history.dialog.tag_placeholder"});return}d.value?historyApi.editFavorite({id_index:g.value.id_index,name:g.value.name,tag:g.value.tag,color:g.value.color}).then(D=>{ae(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.editSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"})}):historyApi.addFavorite({name:g.value.name,tag:g.value.tag,color:g.value.color}).then(D=>{ae(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),message$1({type:"success",str:"message.addSuccess"})}).catch(D=>{message$1({type:"warn",str:"message.networkError"})}),F()},W=()=>{historyApi.getHistory({}).then(D=>{n.value=D.data,o.value=n.value}).catch(D=>{message$1({type:"warn",str:"message.networkError"})})},ae=()=>{historyApi.getFavorite().then(D=>{r.value=D.data,s.value=r.value}).catch(D=>{message$1({type:"warn",str:"message.networkError"})})},Y=()=>{o.value=n.value.filter(D=>D.tag.includes(a.value))},ne=()=>{s.value=r.value.filter(D=>D.tag.includes(a.value))},te=()=>{W()},ge=()=>{ae()},re=D=>{historyApi.addFavorite({tag:D.tag}).then(K=>{K.code===200?(window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),ae(),message$1({type:"success",str:"message.addFavoriteSuccess"})):message$1({type:"success",str:"message.addFavoriteIsExist"})}).catch(K=>{message$1({type:"warn",str:"message.networkError"})})},B=D=>{window.postMessage({type:"weilin_prompt_ui_user_history_tag",tagText:D.tag},"*")},z=()=>{c.value=[],v.value=!0},Z=()=>{c.value=[],v.value=!1,b.value=0};return onMounted(()=>{W(),ae()}),(D,K)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("h1",null,toDisplayString$1(l.value==="history"?unref(t)("history.title"):unref(t)("history.favorites")),1),createBaseVNode("div",_hoisted_2$8,[createBaseVNode("button",{class:normalizeClass([{active:l.value==="history"},"tab-button"]),onClick:K[0]||(K[0]=x=>l.value="history")},toDisplayString$1(unref(t)("history.history")),3),createBaseVNode("button",{class:normalizeClass([{active:l.value==="favorites"},"tab-button"]),onClick:K[1]||(K[1]=x=>l.value="favorites")},toDisplayString$1(unref(t)("history.favorites")),3)]),l.value==="history"?(openBlock(),createElementBlock("div",_hoisted_3$8,[createBaseVNode("div",_hoisted_4$7,[createBaseVNode("button",{class:"refresh-btn",onClick:te},K[14]||(K[14]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[createBaseVNode("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":K[2]||(K[2]=x=>a.value=x),placeholder:unref(t)("history.search_placeholder"),onInput:Y,class:"search-input"},null,40,_hoisted_5$6),[[vModelText,a.value]]),v.value?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"checkbox","onUpdate:modelValue":K[3]||(K[3]=x=>b.value=x),value:1,class:"tag-checkbox",onChange:G},null,544)),[[vModelCheckbox,b.value]]):createCommentVNode("",!0),v.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,class:"bulk-delete-btn",onClick:z,title:unref(t)("history.bulk_delete")},K[15]||(K[15]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,_hoisted_6$6)),v.value?(openBlock(),createElementBlock("button",{key:2,class:"bulk-delete-btn",onClick:q,title:unref(t)("history.sure_delete"),disabled:c.value.length===0},K[16]||(K[16]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)]),8,_hoisted_7$6)):createCommentVNode("",!0),v.value?(openBlock(),createElementBlock("button",{key:3,class:"bulk-delete-btn",onClick:Z,title:unref(t)("history.cancel_delete")},K[17]||(K[17]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),createBaseVNode("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)]),8,_hoisted_8$6)):createCommentVNode("",!0)]),createBaseVNode("ul",_hoisted_9$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,x=>(openBlock(),createElementBlock("li",{key:x.id_index,class:"history-item"},[createBaseVNode("span",null,toDisplayString$1($(x.tag)),1),createBaseVNode("div",_hoisted_10$5,[createBaseVNode("button",{onClick:S=>re(x),class:"favorite-btn",title:unref(t)("history.add_to_favorites")},K[18]||(K[18]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"favorite-icon"},[createBaseVNode("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,_hoisted_11$5),createBaseVNode("button",{onClick:S=>oe(x),class:"delete-favorite-btn",title:unref(t)("history.delete_history")},K[19]||(K[19]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,_hoisted_12$5),createBaseVNode("button",{onClick:S=>B(x),class:"use-btn",title:unref(t)("history.use_item")},K[20]||(K[20]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[createBaseVNode("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)]),8,_hoisted_13$4),v.value?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"checkbox","onUpdate:modelValue":K[4]||(K[4]=S=>c.value=S),value:x.id_index,class:"tag-checkbox"},null,8,_hoisted_14$4)),[[vModelCheckbox,c.value]]):createCommentVNode("",!0)])]))),128))])])):(openBlock(),createElementBlock("div",_hoisted_15$4,[createBaseVNode("div",_hoisted_16$4,[createBaseVNode("button",{class:"refresh-btn",onClick:ge},K[21]||(K[21]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[createBaseVNode("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":K[5]||(K[5]=x=>a.value=x),placeholder:unref(t)("history.search_placeholder"),onInput:ne,class:"search-input"},null,40,_hoisted_17$4),[[vModelText,a.value]]),v.value?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"checkbox","onUpdate:modelValue":K[6]||(K[6]=x=>b.value=x),value:1,class:"tag-checkbox",onChange:G},null,544)),[[vModelCheckbox,b.value]]):createCommentVNode("",!0),createBaseVNode("button",{class:"add-his-btn",onClick:P,title:unref(t)("history.add_new")},K[22]||(K[22]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"add-icon"},[createBaseVNode("path",{d:"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z"})],-1)]),8,_hoisted_18$2),v.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,class:"bulk-delete-btn",onClick:z,title:unref(t)("history.bulk_delete")},K[23]||(K[23]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,_hoisted_19$2)),v.value?(openBlock(),createElementBlock("button",{key:2,class:"bulk-delete-btn",onClick:Q,title:unref(t)("history.sure_delete"),disabled:c.value.length===0},K[24]||(K[24]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)]),8,_hoisted_20$2)):createCommentVNode("",!0),v.value?(openBlock(),createElementBlock("button",{key:3,class:"bulk-delete-btn",onClick:Z,title:unref(t)("history.cancel_delete")},K[25]||(K[25]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),createBaseVNode("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)]),8,_hoisted_21$2)):createCommentVNode("",!0)]),createBaseVNode("ul",_hoisted_22$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,x=>(openBlock(),createElementBlock("li",{key:x.id_index,class:"history-item"},[createBaseVNode("div",{class:"favor-name-box",style:normalizeStyle({backgroundColor:x.color||"transparent"})},[x.name.length>0?(openBlock(),createElementBlock("span",_hoisted_23$2,toDisplayString$1(x.name),1)):createCommentVNode("",!0)],4),createBaseVNode("span",null,toDisplayString$1($(x.tag)),1),createBaseVNode("div",_hoisted_24$2,[createBaseVNode("button",{onClick:S=>E(x),class:"delete-favorite-btn",title:unref(t)("history.edit_favorite")},K[26]||(K[26]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M200.59 626.48v129.5h129.5l381.93-381.93-129.5-129.5-381.93 381.93z m611.56-352.57c13.45-13.41 13.48-35.18 0.07-48.62l-0.07-0.07-80.81-80.81c-13.41-13.45-35.18-13.48-48.62-0.07l-0.07 0.07-63.19 63.19 129.5 129.5 63.19-63.19zM131.52 824.96h759.71c23.02 0 34.53 11.51 34.53 34.53 0 23.02-11.51 34.53-34.53 34.53H131.52c-23.02 0-34.53-11.51-34.53-34.53 0-23.02 11.51-34.53 34.53-34.53z","p-id":"2346"})],-1)]),8,_hoisted_25$2),createBaseVNode("button",{onClick:S=>V(x),class:"delete-favorite-btn",title:unref(t)("history.delete_favorite")},K[27]||(K[27]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[createBaseVNode("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)]),8,_hoisted_26$2),createBaseVNode("button",{onClick:S=>B(x),class:"use-btn",title:unref(t)("history.use_favorite")},K[28]||(K[28]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[createBaseVNode("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)]),8,_hoisted_27$2),v.value?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"checkbox","onUpdate:modelValue":K[7]||(K[7]=S=>c.value=S),value:x.id_index,class:"tag-checkbox"},null,8,_hoisted_28$2)),[[vModelCheckbox,c.value]]):createCommentVNode("",!0)])]))),128))])])),f.value?(openBlock(),createElementBlock("div",_hoisted_29$2,[createBaseVNode("div",{class:"weilin-tools-dialog-content",onMousedown:K[12]||(K[12]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_30$2,[createBaseVNode("h2",null,toDisplayString$1(d.value?unref(t)("history.dialog.edit_tag"):unref(t)("history.dialog.add_tag")),1),createBaseVNode("button",{class:"close-btn",onClick:F},"×")]),createBaseVNode("div",_hoisted_31$2,[createBaseVNode("div",_hoisted_32$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("history.dialog.name")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":K[8]||(K[8]=x=>g.value.name=x),placeholder:unref(t)("history.dialog.name_placeholder")},null,8,_hoisted_33$2),[[vModelText,g.value.name]])]),createBaseVNode("div",_hoisted_34$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("history.dialog.tag")),1),withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":K[9]||(K[9]=x=>g.value.tag=x),placeholder:unref(t)("history.dialog.tag_placeholder"),rows:"4"},"                        ",8,_hoisted_35$2),[[vModelText,g.value.tag]])]),createBaseVNode("div",_hoisted_36$2,[createBaseVNode("label",null,toDisplayString$1(unref(t)("history.dialog.background_color")),1),createBaseVNode("div",_hoisted_37$1,[createBaseVNode("div",{class:"color-preview",style:normalizeStyle({backgroundColor:D.previewColor})},null,4),createBaseVNode("div",_hoisted_38$1,[withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":K[10]||(K[10]=x=>m.value.hex=x),onInput:R,class:"color-input"},null,544),[[vModelText,m.value.hex]]),createBaseVNode("div",_hoisted_39$1,[withDirectives(createBaseVNode("input",{type:"range","onUpdate:modelValue":K[11]||(K[11]=x=>m.value.alpha=x),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[vModelText,m.value.alpha,void 0,{number:!0}]]),createBaseVNode("span",_hoisted_40$1,toDisplayString$1(m.value.alpha)+"%",1)])])])])]),createBaseVNode("div",_hoisted_41$1,[createBaseVNode("button",{class:"cancel-btn",onClick:F},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"confirm-btn",onClick:L},toDisplayString$1(unref(t)("common.confirm")),1)])],32)])):createCommentVNode("",!0),u.value?(openBlock(),createElementBlock("div",_hoisted_42$1,[createBaseVNode("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:K[13]||(K[13]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",_hoisted_43$1,[createBaseVNode("h2",null,toDisplayString$1(unref(t)("common.confirmDelete")),1),createBaseVNode("button",{class:"close-btn",onClick:A},"×")]),createBaseVNode("div",_hoisted_44,[createBaseVNode("p",_hoisted_45,toDisplayString$1(fe.value),1)]),createBaseVNode("div",_hoisted_46,[createBaseVNode("button",{class:"cancel-btn",onClick:A},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"delete-btn",onClick:O},toDisplayString$1(unref(t)("common.delete")),1)])],32)])):createCommentVNode("",!0)]))}},HistoryManager=_export_sfc(_sfc_main$9,[["__scopeId","data-v-31204146"]]),_hoisted_1$8={key:0,class:"drop-zone"},_hoisted_2$7={key:1,class:"preview-container"},_hoisted_3$7=["srcdoc"],_hoisted_4$6={class:"action-buttons"},STORAGE_PREFIX$1="weilin_tools_",_sfc_main$8={__name:"tranToWeb",emits:["close","update"],setup(e,{expose:t,emit:a}){const{t:n}=useI18n(),o=ref(!1),r=ref(""),s=ref(null),l={tranToWeb:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},f=ref((()=>{try{const H=localStorage.getItem(`${STORAGE_PREFIX$1}tranToWebState`);if(H){const j=JSON.parse(H),fe={...l};return j.tranToWeb&&(fe.tranToWeb={...l.tranToWeb,...j.tranToWeb}),fe}}catch(H){console.error("Error loading window states:",H)}return{...l}})());watch(f,H=>{try{localStorage.setItem(`${STORAGE_PREFIX$1}tranToWebState`,JSON.stringify(H))}catch(j){console.error("Error saving window states:",j)}},{deep:!0}),onMounted(()=>{windowManager.registerWindow("tranToWeb")}),onUnmounted(()=>{windowManager.unregisterWindow("tranToWeb")});const u=H=>{o.value=!1},d=(H,j)=>{f.value[H]&&(f.value[H].position={...j})},m=(H,j)=>{f.value[H]&&(f.value[H].size={...j})},g=()=>{o.value=!0,windowManager.setActiveWindow("tranToWeb")},v=H=>{H.dataTransfer.dropEffect="copy"},b=H=>{const j=H.dataTransfer.files[0];j&&j.type.startsWith("image/")&&w(j)},$=H=>{const j=H.clipboardData.items;for(let fe=0;fe<j.length;fe++)if(j[fe].type.startsWith("image/")){const oe=j[fe].getAsFile();w(oe);break}},w=H=>{const j=new FileReader;j.onload=fe=>{const oe=fe.target.result,V=btoa(oe);s.value=V,C()},j.readAsDataURL(H)},C=()=>{r.value=`
        <!DOCTYPE html>
        <html>
        <head>
            <title>WeiLin Comfyui Tools - Image to HTML</title>
            <style>
                body { margin: 0; padding: 0; }
                img { max-width: 100%; height: auto; }
            </style>
            <script>
                window.onload = function() {
                    // 解密图片数据
                    try {
                        const encryptedData = "${s.value}";
                        const originalData = atob(encryptedData);
                        document.getElementById('decrypted-img').src = originalData;
                        document.getElementById('decrypted-img').style.display = 'block';
                    } catch(e) {
                        console.error('解密失败:', e);
                        document.body.innerHTML = '<p>图片解密失败</p>';
                    }
                };
            <\/script>
        </head>
        <body>
            <img id="decrypted-img" style="display:none;" />
        </body>
        </html>
    `},P=()=>{const H=new Blob([r.value],{type:"text/html"}),j=URL.createObjectURL(H),fe=document.createElement("a");fe.href=j,fe.download="image-to-html.html",document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(j)},y=()=>{r.value="",s.value=null},E=ref(null),R=()=>{r.value||E.value.click()},F=H=>{const j=H.target.files[0];j&&j.type.startsWith("image/")&&w(j)};return t({open:g}),(H,j)=>o.value?(openBlock(),createBlock(DraggableWindow,{key:0,title:unref(n)("utils.tranToWeb"),position:f.value.tranToWeb.position,size:f.value.tranToWeb.size,"z-index":unref(windowManager).getZIndex("tranToWeb"),"onUpdate:position":j[0]||(j[0]=fe=>d("tranToWeb",fe)),"onUpdate:size":j[1]||(j[1]=fe=>m("tranToWeb",fe)),onActive:j[2]||(j[2]=fe=>unref(windowManager).setActiveWindow("tranToWeb")),onClose:j[3]||(j[3]=fe=>u())},{default:withCtx(()=>[createBaseVNode("div",{class:"utils_tran_web__content",onDragover:withModifiers(v,["prevent"]),onDrop:withModifiers(b,["prevent"]),onPaste:$,onClick:R},[r.value?(openBlock(),createElementBlock("div",_hoisted_2$7,[createBaseVNode("iframe",{srcdoc:r.value,class:"html-preview"},null,8,_hoisted_3$7),createBaseVNode("div",_hoisted_4$6,[createBaseVNode("button",{onClick:P},toDisplayString$1(unref(n)("utils.downloadHtml")),1),createBaseVNode("button",{onClick:y},toDisplayString$1(unref(n)("utils.clear")),1)])])):(openBlock(),createElementBlock("div",_hoisted_1$8,toDisplayString$1(unref(n)("utils.dropOrPasteImage")),1)),createBaseVNode("input",{type:"file",ref_key:"fileInput",ref:E,style:{display:"none"},accept:"image/*",onChange:F},null,544)],32)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0)}},tranToWeb=_export_sfc(_sfc_main$8,[["__scopeId","data-v-3647b8ec"]]),_hoisted_1$7=["onMouseenter","onMouseleave","onMousedown","onMouseup"],_sfc_main$7={__name:"FloatingBall",setup(e){const{t}=useI18n(),a=ref(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1),n=ref(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66),o=ref(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||n.value),r=ref(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),s=ref(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),l=ref(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),c=ref(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),f=ref(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),u=ref(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50);a.value<1&&(a.value=1,localStorage.setItem("weilin_prompt_ui_floatingBallCount",a.value)),n.value<5&&(n.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallSize",n.value)),o.value<5&&(o.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",o.value)),localStorage.getItem("weilin_prompt_ui_floatingBallCount")||localStorage.setItem("weilin_prompt_ui_floatingBallCount",a.value),localStorage.getItem("weilin_prompt_ui_floatingBallSize")||localStorage.setItem("weilin_prompt_ui_floatingBallSize",n.value),localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",n.value);const d=ref([]),m=ref([]),g=ref([]),v=ref([]),b=ref(null),$=computed(()=>v.value.map(oe=>{const V={...oe};return r.value==="custom"&&s.value?(V.backgroundImage=`url(${s.value})`,V.backgroundSize="contain",V.backgroundRepeat="no-repeat",V.backgroundPosition="center",V.imageRendering="optimizeQuality"):l.value==="gradient"?V.background=`linear-gradient(135deg, ${c.value}, ${f.value})`:V.background="transparent",V.borderRadius=`${u.value}%`,V}));for(let oe=0;oe<a.value;oe++){g.value[oe]=!1,m.value[oe]=!1;const V=window.innerWidth,q=window.innerHeight,Q=n.value,O=o.value,G=10,ee=Math.floor(V/(Q+G)),A=Math.floor(oe/ee);let W=20+oe%ee*(Q+G),ae=q-100-A*(O+G);W=Math.max(0,W),W=Math.min(W,V-Q),ae=Math.max(0,ae),ae=Math.min(ae,q-O),d.value[oe]={x:W,y:ae,width:Q+"px",height:O+"px"},v.value[oe]={left:`${d.value[oe].x}px`,top:`${d.value[oe].y}px`,width:`${Q}px`,height:`${O}px`}}const w=(oe,V)=>{oe.target.closest(".weilin_prompt_ui_floating-ball")&&(m.value[V]=!0,document.addEventListener("mousemove",Q=>C(Q,V)),document.addEventListener("mouseup",Q=>P(Q,V)))},C=(oe,V)=>{if(m.value[V]){const q=window.innerWidth,Q=window.innerHeight,O=n.value,G=o.value;let ee=oe.clientX-O/2,A=oe.clientY-G/2;ee=Math.max(0,ee),ee=Math.min(ee,q-O),A=Math.max(0,A),A=Math.min(A,Q-G),d.value[V]={x:ee,y:A,width:O+"px",height:G+"px"},v.value[V]={left:`${d.value[V].x}px`,top:`${d.value[V].y}px`,width:`${O}px`,height:`${G}px`}}},P=(oe,V)=>{m.value[V]=!1,document.removeEventListener("mousemove",q=>C(q,V)),document.removeEventListener("mouseup",q=>P(q,V))},y=()=>{},E=oe=>{switch(oe){case"item1":window.parent.postMessage({type:"weilin_prompt_ui_open_global_prompt_box"},"*");break;case"item2":window.parent.postMessage({type:"weilin_prompt_ui_open_global_tag_manager"},"*");break;case"item3":window.parent.postMessage({type:"weilin_prompt_ui_open_global_lora_manager"},"*");break;case"item4":window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*");break;case"item5":window.parent.postMessage({type:"weilin_prompt_ui_restore_window"},"*");break;case"item6":window.parent.postMessage({type:"weilin_prompt_ui_open_node_list_window"},"*");break;case"item7":F();break;case"item8":b.value.open();break}},R=ref(),F=()=>{R.value.open()},H=oe=>{if(oe.data.type==="weilin_prompt_ui_floating_ball_setting"){a.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1,n.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66,o.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize"))||n.value,r.value=localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default",s.value=localStorage.getItem("weilin_prompt_ui_customSkinUrl")||"",l.value=localStorage.getItem("weilin_prompt_ui_bgType")||"gradient",c.value=localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb",f.value=localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc",u.value=localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50,g.value=[],m.value=[],d.value=[],v.value=[];for(let V=0;V<a.value;V++){g.value[V]=!1,m.value[V]=!1;const q=window.innerWidth,Q=window.innerHeight,O=n.value,G=o.value,ee=10,A=Math.floor(q/(O+ee)),L=Math.floor(V/A);let ae=20+V%A*(O+ee),Y=Q-100-L*(G+ee);ae=Math.max(0,ae),ae=Math.min(ae,q-O),Y=Math.max(0,Y),Y=Math.min(Y,Q-G),d.value[V]={x:ae,y:Y,width:O+"px",height:G+"px"},v.value[V]={left:`${d.value[V].x}px`,top:`${d.value[V].y}px`,width:`${O}px`,height:`${G}px`,...r.value==="custom"&&s.value?{backgroundImage:`url(${s.value})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}:l.value==="gradient"?{background:`linear-gradient(135deg, ${c.value}, ${f.value})`}:{background:"transparent"},borderRadius:`${u.value}%`}}}},j=oe=>{g.value[oe]=!0},fe=oe=>{g.value[oe]=!1};return onMounted(()=>{window.addEventListener("message",H)}),onUnmounted(()=>{window.removeEventListener("message",H),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",P)}),(oe,V)=>(openBlock(),createElementBlock(Fragment,null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,q=>(openBlock(),createElementBlock("div",{class:"weilin_prompt_ui_floating-ball",style:normalizeStyle($.value[q-1]),onMouseenter:Q=>j(q-1),onMouseleave:Q=>fe(q-1),onMousedown:Q=>w(Q,q-1),onMouseup:Q=>P(Q,q-1),key:"floating-ball-"+q},[createBaseVNode("div",{class:"weilin_prompt_ui_ball-content",onClick:y},toDisplayString$1(r.value==="default"?"WeiLin":""),1),g.value[q-1]?(openBlock(),createElementBlock("div",{key:0,class:"weilin_prompt_ui_menu-container",onMousedown:V[8]||(V[8]=withModifiers(()=>{},["stop"]))},[createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[0]||(V[0]=Q=>E("item1"))},toDisplayString$1(unref(t)("floatingBall.promptBox")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[1]||(V[1]=Q=>E("item2"))},toDisplayString$1(unref(t)("floatingBall.tagManager")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[2]||(V[2]=Q=>E("item3"))},toDisplayString$1(unref(t)("floatingBall.loraManager")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[3]||(V[3]=Q=>E("item4"))},toDisplayString$1(unref(t)("floatingBall.aiWindow")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[4]||(V[4]=Q=>E("item6"))},toDisplayString$1(unref(t)("floatingBall.openNodeListWindow")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[5]||(V[5]=Q=>E("item7"))},toDisplayString$1(unref(t)("floatingBall.tranToWeb")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[6]||(V[6]=Q=>E("item8"))},toDisplayString$1(unref(t)("floatingBall.openSetting")),1),createBaseVNode("div",{class:"weilin_prompt_ui_menu-item",onClick:V[7]||(V[7]=Q=>E("item5"))},toDisplayString$1(unref(t)("floatingBall.restoreWindow")),1)],32)):createCommentVNode("",!0)],44,_hoisted_1$7))),128)),createVNode(tranToWeb,{ref_key:"tranToWebRef",ref:R},null,512),createVNode(SettingDialog,{ref_key:"settingDialog",ref:b},null,512)],64))}},FloatingBall=_export_sfc(_sfc_main$7,[["__scopeId","data-v-728385cf"]]),_hoisted_1$6={class:"ai-chat-window"},_hoisted_2$6={class:"history-sidebar"},_hoisted_3$6={class:"history-list"},_hoisted_4$5=["onClick"],_hoisted_5$5={key:0},_hoisted_6$5=["onKeyup","onBlur"],_hoisted_7$5={class:"item-actions"},_hoisted_8$5=["onClick"],_hoisted_9$5=["onClick"],_hoisted_10$4={class:"chat-main"},_hoisted_11$4={class:"message-list"},_hoisted_12$4={class:"message-content"},_hoisted_13$3={key:0,class:"message assistant"},_hoisted_14$3={class:"message-content"},_hoisted_15$3={class:"input-area"},_hoisted_16$3=["placeholder","onKeydown"],_hoisted_17$3=["disabled"],_sfc_main$6={__name:"ai_window",setup(e){const{t}=useI18n(),a=ref([]),n=ref(-1),o=ref(""),r=ref(!1),s=ref({}),l=ref(!1),c=ref(""),f=E=>{var R;a.value[E]&&(l.value=!0,c.value=((R=a.value[E])==null?void 0:R.title)||`对话 ${E+1}`,n.value=E)},u=E=>{a.value[E]&&(c.value.trim()&&(a.value[E].title=c.value.trim(),w()),l.value=!1)},d=()=>{l.value=!1},m=()=>{openaiApi.getOpenAiSetting().then(E=>{s.value=E.data}).catch(E=>{message$1({type:"warn",str:"message.networkError"})})};onMounted(()=>{m()});const g=computed(()=>a.value[n.value]||{messages:[]}),v=E=>{n.value=E},b=()=>{r.value=!0;const E={title:`对话 ${a.value.length+1}`,messages:[],createdAt:new Date().toISOString()};return a.value.push(E),n.value=a.value.length-1,w(),r.value=!1,E},$=()=>{const E=localStorage.getItem("aiChatHistory");E&&(a.value=JSON.parse(E))},w=()=>{localStorage.setItem("aiChatHistory",JSON.stringify(a.value))};onMounted(()=>{m(),$()});const C=async()=>{if(!o.value.trim()||r.value)return;(a.value.length===0||n.value===-1)&&b();const E={role:"user",content:o.value,timestamp:new Date().toISOString()};g.value.messages.push(E),w(),o.value="";const R={role:"assistant",content:"",timestamp:new Date().toISOString()};g.value.messages.push(R),w(),r.value=!0;try{await y({messages:g.value.messages},F=>{const H=g.value.messages[g.value.messages.length-1];H.content+=F.content,w()},F=>{console.error("Error:",F);const H=g.value.messages[g.value.messages.length-1];H.content="抱歉，出错了，请稍后再试。",w()},()=>{r.value=!1,w()})}catch(F){console.error("Error:",F),r.value=!1;const H=g.value.messages[g.value.messages.length-1];H.content="请求失败，请检查网络连接。",w()}},P=E=>{a.value.splice(E,1),n.value===E&&(n.value=Math.max(0,E-1)),w()},y=async(E,R,F,H)=>{var j,fe;try{const oe=await fetch(s.value.base_url+"/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.api_key}`},body:JSON.stringify({model:s.value.model,messages:E.messages,stream:!0})});if(!oe.ok)throw new Error(`HTTP error! status: ${oe.status}`);const V=oe.body.getReader(),q=new TextDecoder;let Q="";for(;;){const{done:O,value:G}=await V.read();if(O){H();break}Q+=q.decode(G,{stream:!0});const ee=Q.split(`
`);Q=ee.pop();for(const A of ee)if(A.trim()!==""){if(A==="data: [DONE]"){H();return}try{const L=A.replace(/^data: /,""),ae=((fe=(j=JSON.parse(L).choices[0])==null?void 0:j.delta)==null?void 0:fe.content)||"";ae&&R({content:ae})}catch{console.error("Failed to parse message:",A)}}}}catch(oe){F(oe)}};return(E,R)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("button",{class:"new-chat-btn",onClick:b},toDisplayString$1(unref(t)("aiWindow.newChat")),1),createBaseVNode("div",_hoisted_3$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,(F,H)=>(openBlock(),createElementBlock("div",{key:H,class:normalizeClass(["history-item",{active:n.value===H}]),onClick:j=>v(H)},[!l.value||n.value!==H?(openBlock(),createElementBlock("span",_hoisted_5$5,toDisplayString$1((F==null?void 0:F.title)||unref(t)("aiWindow.chatName")+` ${H+1}`),1)):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":R[0]||(R[0]=j=>c.value=j),onKeyup:[withKeys(j=>u(H),["enter"]),withKeys(d,["esc"])],onBlur:j=>u(H),class:"rename-input"},null,40,_hoisted_6$5)),[[vModelText,c.value]]),createBaseVNode("div",_hoisted_7$5,[createBaseVNode("button",{class:"rename-btn",onClick:withModifiers(j=>f(H),["stop"])},"✎",8,_hoisted_8$5),l.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,class:"delete-btn",onClick:withModifiers(j=>P(H),["stop"])},"×",8,_hoisted_9$5))])],10,_hoisted_4$5))),128))])]),createBaseVNode("div",_hoisted_10$4,[createBaseVNode("div",_hoisted_11$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value.messages,(F,H)=>(openBlock(),createElementBlock("div",{key:H,class:normalizeClass(["message",F.role])},[createBaseVNode("div",_hoisted_12$4,[createBaseVNode("pre",null,toDisplayString$1(F.content),1)])],2))),128)),r.value?(openBlock(),createElementBlock("div",_hoisted_13$3,[createBaseVNode("div",_hoisted_14$3,[createBaseVNode("pre",null,toDisplayString$1(unref(t)("aiWindow.thinking")),1)])])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_15$3,[withDirectives(createBaseVNode("textarea",{class:"ai-chat-textarea","onUpdate:modelValue":R[1]||(R[1]=F=>o.value=F),placeholder:unref(t)("aiWindow.inputMessage"),onKeydown:withKeys(withModifiers(C,["exact","prevent"]),["enter"])},null,40,_hoisted_16$3),[[vModelText,o.value]]),createBaseVNode("button",{class:"ai-chat-btn",onClick:C,disabled:r.value},toDisplayString$1(unref(t)("aiWindow.send")),9,_hoisted_17$3)])])]))}},AiWindow=_export_sfc(_sfc_main$6,[["__scopeId","data-v-5271cf26"]]),_hoisted_1$5={class:"lora-info"},_hoisted_2$5={class:"lora-header"},_hoisted_3$5=["title"],_hoisted_4$4={class:"lora-weights"},_hoisted_5$4={class:"weight-item"},_hoisted_6$4=["title"],_hoisted_7$4={class:"weight-item"},_hoisted_8$4={class:"center-box"},_hoisted_9$4=["onClick"],prefix$1="weilin_prompt_ui_",_sfc_main$5={__name:"index",setup(e){const{t}=useI18n(),a=ref([]);window.addEventListener("message",o=>{o.data.type==="weilin_prompt_ui_update_node_list_info"&&(a.value=o.data.nodeList)});const n=o=>{window.postMessage({type:"weilin_prompt_ui_prompt_open_node_wit_seed",seed:o},"*")};return onMounted(()=>{window.postMessage({type:"weilin_prompt_ui_prompt_get_node_list_info"},"*")}),(o,r)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${prefix$1}lora-stack`)},[createBaseVNode("div",{class:normalizeClass(`${prefix$1}lora-content`)},[createBaseVNode("div",{class:normalizeClass(`${prefix$1}lora-body`)},[createBaseVNode("div",{class:normalizeClass(`${prefix$1}lora-list`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,s=>(openBlock(),createElementBlock("div",{key:s.id,class:"lora-item"},[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("span",{class:"lora-name",title:s.title},"#"+toDisplayString$1(s.id)+" - "+toDisplayString$1(s.title),9,_hoisted_3$5)]),createBaseVNode("div",_hoisted_4$4,[createBaseVNode("div",_hoisted_5$4,[createBaseVNode("div",{class:"text-label",title:s.text},toDisplayString$1(s.text),9,_hoisted_6$4)]),createBaseVNode("div",_hoisted_7$4,[createBaseVNode("div",_hoisted_8$4,[createBaseVNode("button",{onClick:l=>n(s.seed),class:"open-button"},toDisplayString$1(unref(t)("nodeListWindow.openPromptUI")),9,_hoisted_9$4)])])])])]))),128))],2)],2)],2)],2))}},NodeListWindow=_export_sfc(_sfc_main$5,[["__scopeId","data-v-43ee045e"]]),cloudApi={getTreeFromCloud:async e=>await request({url:"/cloud/get/tree",method:"post",data:{path:e}}),getLocalInstallPackage:async()=>await request({url:"/cloud/get/local/package",method:"post",data:{}}),installSelectPackage:async(e,t)=>await request({url:"/cloud/download/file",method:"post",timeout:0,data:{paths:t,path:e}})},_hoisted_1$4={class:"cloud-manager"},_hoisted_2$4={class:"toolbar"},_hoisted_3$4={class:"current-path"},_hoisted_4$3={class:"file-list"},_hoisted_5$3={class:"file-info"},_hoisted_6$3={class:"file-name"},_hoisted_7$3={class:"file-type"},_hoisted_8$3={class:"file-actions"},_hoisted_9$3=["onClick"],_hoisted_10$3={key:1,class:"install-container"},_hoisted_11$3={key:0,class:"installed-badge"},_hoisted_12$3=["onClick","disabled"],_sfc_main$4={__name:"index",setup(e){const{t}=useI18n(),a=ref([]),n=ref("tags"),o=ref("tags"),r=ref([]),s=async b=>{try{const $=await cloudApi.getTreeFromCloud(b);a.value=$.data}catch($){console.error("获取文件树失败:",$),message$1({type:"warn",str:"message.networkError"})}},l=async()=>{try{const b=await cloudApi.getLocalInstallPackage();r.value=b.data||[]}catch(b){console.error("获取已安装包列表失败:",b),message$1({type:"warn",str:"message.networkError"})}},c=b=>r.value.some($=>$===b),f=async b=>{try{const $=a.value.find(w=>w.path===b);$&&($.isInstalling=!0,await cloudApi.installSelectPackage(o.value,[b]).then(()=>{l(),message$1({type:"success",str:"message.installPackageSuccess"})}))}catch($){console.error("安装包失败:",$),message$1({type:"warn",str:"message.installPackageFail"})}finally{const $=a.value.find(w=>w.path===b);$&&($.isInstalling=!1)}},u=()=>{const b=n.value.split("/");b.length>1&&(n.value=b.slice(0,-1).join("/"),s(n.value))},d=()=>{s(n.value),l()},m=b=>{n.value=b,s(b)},g=()=>{o.value="tags",n.value="tags",s(n.value)},v=()=>{o.value="danbooru",n.value="danbooru",s(n.value)};return onMounted(()=>{s(n.value),l()}),(b,$)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("button",{class:"refresh-btn",onClick:d},$[0]||($[0]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[createBaseVNode("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])),createBaseVNode("button",{class:"database-btn",onClick:g},[$[1]||($[1]=createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[createBaseVNode("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),createBaseVNode("span",null,toDisplayString$1(unref(t)("cloudWindow.tagDatabase")),1)]),createBaseVNode("button",{class:"database-btn",onClick:v},[$[2]||($[2]=createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[createBaseVNode("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4v4z"})],-1)),createBaseVNode("span",null,toDisplayString$1(unref(t)("cloudWindow.danbooruDatabase")),1)]),createBaseVNode("div",_hoisted_3$4,[createBaseVNode("span",null,toDisplayString$1(unref(t)("cloudWindow.currentPath"))+": "+toDisplayString$1(o.value=="tags"?unref(t)("cloudWindow.tagDatabase"):unref(t)("cloudWindow.danbooruDatabase")),1)])]),createBaseVNode("div",_hoisted_4$3,[n.value!=="tags"&&n.value!=="danbooru"?(openBlock(),createElementBlock("button",{key:0,class:"back-btn",onClick:u},[$[3]||($[3]=createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[createBaseVNode("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),createTextVNode(" "+toDisplayString$1(unref(t)("cloudWindow.back")),1)])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,w=>(openBlock(),createElementBlock("div",{key:w.path,class:"file-item"},[createBaseVNode("div",_hoisted_5$3,[createBaseVNode("span",_hoisted_6$3,toDisplayString$1(w.name),1),createBaseVNode("span",_hoisted_7$3,toDisplayString$1(w.type=="dir"?"文件夹":w.type=="file"?"文件":"其它未知文件"),1)]),createBaseVNode("div",_hoisted_8$3,[w.type==="dir"?(openBlock(),createElementBlock("button",{key:0,onClick:C=>m(w.path),class:"open-btn"},toDisplayString$1(unref(t)("cloudWindow.open")),9,_hoisted_9$3)):w.type==="file"?(openBlock(),createElementBlock("div",_hoisted_10$3,[c(w.path)?(openBlock(),createElementBlock("span",_hoisted_11$3,toDisplayString$1(unref(t)("cloudWindow.installed")),1)):(openBlock(),createElementBlock("button",{key:1,onClick:C=>f(w.path),class:"install-btn",disabled:w.isInstalling},toDisplayString$1(w.isInstalling?unref(t)("cloudWindow.installing"):unref(t)("cloudWindow.install")),9,_hoisted_12$3))])):createCommentVNode("",!0)])]))),128))])]))}},CloudWindow=_export_sfc(_sfc_main$4,[["__scopeId","data-v-026f0961"]]),_hoisted_1$3={class:"header-actions"},_hoisted_2$3=["title"],_hoisted_3$3=["onMouseover","onDragstart","onDrop"],_hoisted_4$2={class:"lora-info"},_hoisted_5$2={class:"lora-header"},_hoisted_6$2=["title"],_hoisted_7$2={class:"lora-actions"},_hoisted_8$2=["onClick","title"],_hoisted_9$2=["onClick","title"],_hoisted_10$2={class:"lora-weights-row"},_hoisted_11$2={class:"weight-item-col"},_hoisted_12$2=["onUpdate:modelValue"],_hoisted_13$2={class:"weight-item-col"},_hoisted_14$2=["onUpdate:modelValue"],_hoisted_15$2={class:"switch-item-col"},_hoisted_16$2={class:"switch"},_hoisted_17$2=["checked","onChange"],prefix="weilin_prompt_ui_",_sfc_main$3={__name:"lora_stack",setup(e,{expose:t}){const{t:a}=useI18n(),n=ref([]),o=ref(""),r=ref(!1),s=ref(""),l=ref(100),c=ref(0),f=ref(),u=ref(!1),d=ref(!1),m=ref(),g=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora_stack",seed:o.value},"*")},v=V=>{V.hidden=!V.hidden},b=(V,q)=>{if(d.value=!0,s.value===V&&r.value)return;const O=q.currentTarget.getBoundingClientRect();let ee={left:O.left-450-10,top:O.top};ee.left<10&&(ee.left=O.right+10),ee.top=Math.max(10,Math.min(ee.top,window.innerHeight-310)),l.value=ee.left,c.value=ee.top,r.value=!0,s.value=V,nextTick(()=>{m.value.refresh()})},$=()=>{d.value=!1,setTimeout(()=>{!u.value&&!d.value&&(r.value=!1,s.value="",u.value=!1)},200)},w=()=>{u.value=!0,d.value=!0},C=()=>{r.value=!1,s.value="",u.value=!1},P=V=>{n.value.find(q=>q.name===V.name)||n.value.push({name:V.name,weight:1,text_encoder_weight:1,...V})},y=V=>{const q=n.value.findIndex(Q=>Q.name===V.name);q>-1&&n.value.splice(q,1)},E=ref(),R=V=>{E.value.open({name:V.lora})};window.addEventListener("message",V=>{V.data.type==="weilin_prompt_ui_selectLora_stack_"+o.value&&P(V.data.lora)});const F=(V,q)=>{if(o.value=q,V.length>0)try{const Q=JSON.parse(V);if(Q.lora&&Q.lora!=""&&(n.value=Q.lora),Q.temp_lora&&Q.temp_lora.length>0&&Q.temp_lora!=""){const O=Q.temp_lora;n.value=O}}catch{message$1({type:"warn",str:"promptBox.settings.errorPrompt"})}};watch(n,V=>{H()},{deep:!0});const H=()=>{if(n.value.length>0){const V=n.value.filter(O=>!O.hidden);let q={lora:"",temp_lora:n.value};V.length>0&&(q.lora=V);const Q=JSON.stringify(q);window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+o.value,data:Q},"*")}else{const q=JSON.stringify({lora:"",temp_lora:""});window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+o.value,data:q},"*")}},j=ref(null),fe=V=>{j.value=V},oe=V=>{if(j.value===null||j.value===V)return;const q=n.value.splice(j.value,1)[0];n.value.splice(V,0,q),j.value=null,H()};return t({initLoraStack:F}),(V,q)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${prefix}lora-stack`)},[createBaseVNode("div",{class:normalizeClass(`${prefix}lora-content`)},[createBaseVNode("div",{class:normalizeClass(`${prefix}lora-header`)},[createBaseVNode("div",_hoisted_1$3,[createBaseVNode("button",{class:normalizeClass(`${prefix}add-btn`),onClick:g,title:unref(a)("controls.addLora")},q[1]||(q[1]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[createBaseVNode("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)]),10,_hoisted_2$3)])],2),createBaseVNode("div",{class:normalizeClass(`${prefix}lora-body`)},[createBaseVNode("div",{class:normalizeClass(`${prefix}lora-list`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,(Q,O)=>(openBlock(),createElementBlock("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:f,key:Q.name,class:normalizeClass(["lora-item",{"hidden-lora":Q.hidden}]),onMouseover:G=>b(Q.lora,G),onMouseleave:$,draggable:"true",onDragstart:G=>fe(O),onDragover:q[0]||(q[0]=withModifiers(()=>{},["prevent"])),onDrop:G=>oe(O)},[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("span",{class:"lora-name",title:Q.name},toDisplayString$1(Q.name),9,_hoisted_6$2),createBaseVNode("div",_hoisted_7$2,[createBaseVNode("button",{class:"look-on-btn",onClick:G=>R(Q),title:unref(a)("controls.lookOnLora")},q[2]||(q[2]=[createBaseVNode("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[createBaseVNode("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),createBaseVNode("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),createBaseVNode("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),createBaseVNode("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)]),8,_hoisted_8$2),createBaseVNode("button",{class:"remove-btn",onClick:G=>y(Q),title:unref(a)("controls.removeLora")},q[3]||(q[3]=[createBaseVNode("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[createBaseVNode("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,_hoisted_9$2)])]),createBaseVNode("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("loraManager.modelWeight")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":G=>Q.weight=G,class:"lora-weight",step:"0.1"},null,8,_hoisted_12$2),[[vModelText,Q.weight]])]),createBaseVNode("div",_hoisted_13$2,[createBaseVNode("label",null,toDisplayString$1(unref(a)("loraManager.textEncoderWeight")),1),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":G=>Q.text_encoder_weight=G,class:"lora-weight",step:"0.1"},null,8,_hoisted_14$2),[[vModelText,Q.text_encoder_weight]])]),createBaseVNode("div",_hoisted_15$2,[createBaseVNode("label",null,toDisplayString$1(Q.hidden?unref(a)("lora.hideLora"):unref(a)("lora.showLora")),1),createBaseVNode("label",_hoisted_16$2,[createBaseVNode("input",{type:"checkbox",checked:!Q.hidden,onChange:G=>v(Q)},null,40,_hoisted_17$2),q[4]||(q[4]=createBaseVNode("span",{class:"slider"},null,-1))])])])])],42,_hoisted_3$3))),128))],2)],2)],2),createVNode(loraDetail,{ref_key:"loraDetailLoraStackRef",ref:E},null,512),r.value?(openBlock(),createBlock(LoraCard,{key:0,ref_key:"loraCardItem",ref:m,fileNmae:s.value,paddingLeft:l.value,paddingTop:c.value,onCardLeave:C,onCardenter:w},null,8,["fileNmae","paddingLeft","paddingTop"])):createCommentVNode("",!0)],2))}},LoraStackWindow=_export_sfc(_sfc_main$3,[["__scopeId","data-v-c2ab38ea"]]),danbooruApi={searchDanbooru:async(e="",t=1,a=100)=>await request({url:"/danbooru/get_tags",method:"post",data:{search:e,page:t,limit:a}}),addDanbooruTag:async e=>await request({url:"/danbooru/add_tag",method:"post",data:e}),updateDanbooruTag:async e=>await request({url:"/danbooru/update_tag",method:"post",timeout:0,data:e}),deleteDanbooruTag:async e=>await request({url:"/danbooru/delete_tag",method:"post",timeout:0,data:{id:e}}),batchDeleteDanbooruTags:async e=>await request({url:"/danbooru/batch_delete_tag",method:"post",timeout:0,data:{values:e}}),runSQLToServer:async e=>await request({url:"/danbooru/run_sql_text",method:"post",timeout:0,data:{sql:e}})},_hoisted_1$2={key:0,class:"loading-overlay"},_hoisted_2$2={class:"settings-content"},_hoisted_3$2={style:{"margin-bottom":"16px"}},_hoisted_4$1=["placeholder"],_hoisted_5$1={style:{"margin-bottom":"16px"}},_hoisted_6$1=["placeholder"],_hoisted_7$1=["placeholder"],_hoisted_8$1=["placeholder"],_hoisted_9$1={class:"data-container"},_hoisted_10$1={key:0},_hoisted_11$1={key:0},_hoisted_12$1={class:"tag-group-container"},_hoisted_13$1={key:0},_hoisted_14$1={key:1},_hoisted_15$1={style:{display:"flex","align-items":"center"}},_hoisted_16$1={key:0},_hoisted_17$1=["placeholder"],_hoisted_18$1=["placeholder"],_hoisted_19$1=["placeholder"],_hoisted_20$1=["placeholder"],_hoisted_21$1=["onClick"],_hoisted_22$1=["onClick"],_hoisted_23$1=["onClick"],_hoisted_24$1={key:1},_hoisted_25$1={class:"tag-group-container"},_hoisted_26$1={key:0},_hoisted_27$1={key:1},_hoisted_28$1={style:{display:"flex","align-items":"center"}},_hoisted_29$1={key:0},_hoisted_30$1=["placeholder"],_hoisted_31$1=["placeholder"],_hoisted_32$1=["placeholder"],_hoisted_33$1=["placeholder"],_hoisted_34$1=["onClick"],_hoisted_35$1=["onClick"],_hoisted_36$1=["onClick"],_sfc_main$2={__name:"import_danbooru",setup(e,{expose:t}){const{t:a}=useI18n(),n=ref(!1),o=ref(""),r=ref(""),s=ref(""),l=ref(""),c=ref(""),f=ref(""),u=ref(""),d=ref(""),m=ref(""),g=ref([]),v=ref(-1),b=ref(""),$=ref(""),w=ref(null);ref(null);const C=ref(null),P=ref(!1),y=ref(""),E=ref(0),R=ref(0);function F(){o.value="",r.value="",E.value=0,R.value=0,s.value="",l.value="",c.value="",f.value="",u.value="",d.value="",m.value="",g.value=[],v.value=-1,b.value="",$.value="",P.value=!1}function H(re){F();const B=re.target.files[0];if(B){const z=new FileReader;z.onload=Z=>{Z.target.result.split(";").filter(x=>x.trim()).forEach(x=>{if((x.includes("tag_groups")||x.includes("tag_subgroups"))&&x.includes("p_uuid"))if(x.includes("g_uuid")){c.value=x+";";const I=x.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);I&&(m.value=I[1]);const X=x.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);X&&(u.value=X[1].replace(/''/g,"'"))}else{l.value=x+";";const I=x.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);I&&(d.value=I[1]);const X=x.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);X&&(f.value=X[1].replace(/''/g,"'"))}else x.includes("tag_tags")&&g.value.push(x+";")})},z.readAsText(B)}re.target.value=""}function j(re){const B=re.target.files[0];if(B){const z=new FileReader;z.onload=Z=>{Z.target.result.split(`
`).filter(x=>x.trim()).forEach(x=>{const S=x.split(",");if(S.length>=2){let I,X,ie,pe;S.length===2?(I=S[0].trim(),pe=S[1].trim(),X=0,ie=0):S.length>=3&&(I=S[0].trim(),X=parseInt(S[1].trim())||0,ie=parseInt(S[2].trim())||0,pe=S.slice(3).join(",").trim(),pe=pe.replace(/^"(.*)"$/,"$1"));const T=I.replace(/'/g,"''"),_=pe.replace(/'/g,"''"),M=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${T}', '', '${_}', ${ie}, ${X});`;g.value.push(M)}})},z.readAsText(B)}re.target.value=""}function fe(){C.value.click()}function oe(){let re;g.value.length>0&&q(g.value[0])?re=[...g.value].join(`
`):re=[l.value,c.value,...g.value].join(`
`);const B=new Blob([re],{type:"text/sql"}),z=document.createElement("a");if(z.href=URL.createObjectURL(B),y.value.length<=0){const Z=parseInt(new Date().getTime()/1e3);z.download="export_"+Z+".sql"}else z.download=y.value+".sql";z.click()}function V(re){const B=re.match(/VALUES\s*\([^']*'([^']+)'/),z=re.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:B?B[1].replace(/''/g,"'"):"",desc:z?z[1].replace(/''/g,"'"):""}}function q(re){return re.includes("danbooru_tag")}function Q(re){const B=re.match(/VALUES\s*\(\s*'([^']+)'\s*,\s*'([^']*)'\s*,\s*'([^']*)'\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);return B?{tag:B[1].replace(/''/g,"'"),color_id:B[2],translate:B[3].replace(/''/g,"'"),hot:parseInt(B[4]),aliases:parseInt(B[5])}:{tag:"",color_id:"",translate:"",hot:0,aliases:0}}const O=ref(0),G=ref(0);function ee(re){const B=g.value[re];if(q(B)){const z=Q(B);b.value=z.tag,$.value=z.translate,O.value=z.hot,G.value=z.aliases}else{const z=V(B);b.value=z.text,$.value=z.desc}v.value=re}function A(re){const B=b.value.replace(/'/g,"''"),z=$.value.replace(/'/g,"''");if(q(g.value[re])){const Z=Q(g.value[re]),D=parseInt(O.value)||0,K=parseInt(G.value)||0;g.value[re]=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${B}', '${Z.color_id}', '${z}', ${D}, ${K});`}else g.value[re]=g.value[re].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${B}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${z}'`);v.value=-1}function L(){v.value=-1,b.value="",$.value="",O.value=0,G.value=0}function W(re){g.value.splice(re,1)}function ae(){const re=o.value.replace(/'/g,"''"),B=r.value.replace(/'/g,"''"),z=parseInt(E.value)||0,Z=parseInt(R.value)||0,D=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${re}', '', '${B}', ${z}, ${Z});`;g.value.push(D),o.value="",r.value="",E.value=0,R.value=0}const Y=ref(!1),ne=async re=>{Y.value=!0;try{await danbooruApi.runSQLToServer(re).then(B=>{if(B.code!=200){message$1({type:"warn",str:B.message});return}else te(),message$1({type:"success",str:"importDialog.successImport"})}).catch(B=>{console.error(B),message$1({type:"warn",str:"importDialog.importFail"})})}catch(B){console.error(B),message$1({type:"warn",str:"importDialog.importFail"})}finally{Y.value=!1}},te=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ge=async()=>{if(g.value.length>0&&q(g.value[0])){const re=[...g.value];await ne(re)}else if(P.value){if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}const re=[...g.value];await ne(re)}else{if(l.value.length<=0||c.value.length<=0){message$1({type:"warn",str:"importDialog.pleaseFullRequest"});return}const re=[l.value,c.value,...g.value];await ne(re)}};return watch(l,(re,B)=>{var D,K;if(!re||re===B)return;const z=(D=re.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:D[1],Z=(K=B==null?void 0:B.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:K[1];z&&Z&&c.value&&(c.value=c.value.replace(new RegExp(`'${Z}'`,"g"),`'${z}'`))}),watch(c,(re,B)=>{var D,K;if(!re||re===B)return;const z=(D=re.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:D[1],Z=(K=B==null?void 0:B.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:K[1];z&&Z&&g.value.length>0&&(g.value=g.value.map(x=>x.replace(new RegExp(`'${Z}'`,"g"),`'${z}'`)))}),t({open:()=>{n.value=!0}}),(re,B)=>(openBlock(),createElementBlock(Fragment,null,[Y.value?(openBlock(),createElementBlock("div",_hoisted_1$2,B[19]||(B[19]=[createBaseVNode("div",{class:"loading-spinner"},null,-1)]))):createCommentVNode("",!0),createVNode(Dialog,{modelValue:n.value,"onUpdate:modelValue":B[18]||(B[18]=z=>n.value=z),title:unref(a)("danbooruManager.importBatchTitle")},{footer:withCtx(()=>[createBaseVNode("button",{onClick:B[17]||(B[17]=z=>n.value=!1)},toDisplayString$1(unref(a)("promptBox.settings.close")),1),createBaseVNode("button",{onClick:ge},toDisplayString$1(unref(a)("importDialog.sure")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("button",{onClick:F,class:"upload-btn"},toDisplayString$1(unref(a)("importDialog.cleanAll")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:oe},toDisplayString$1(unref(a)("importDialog.dumpSQL")),1),withDirectives(createBaseVNode("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":B[0]||(B[0]=z=>y.value=z),placeholder:unref(a)("importDialog.settingOutputName")},null,8,_hoisted_4$1),[[vModelText,y.value]]),createBaseVNode("input",{type:"file",ref_key:"fileInput",ref:w,onChange:H,accept:".sql",style:{display:"none"}},null,544),createBaseVNode("input",{type:"file",ref_key:"danbooruTxtFileInput",ref:C,onChange:j,accept:".txt,.csv",style:{display:"none"}},null,544)]),createBaseVNode("div",_hoisted_5$1,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[1]||(B[1]=z=>o.value=z),placeholder:"Tag"},null,512),[[vModelText,o.value]]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[2]||(B[2]=z=>r.value=z),placeholder:unref(a)("importDialog.translater")},null,8,_hoisted_6$1),[[vModelText,r.value]]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[3]||(B[3]=z=>E.value=z),placeholder:unref(a)("danbooruManager.hot"),type:"number"},null,8,_hoisted_7$1),[[vModelText,E.value]]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":B[4]||(B[4]=z=>R.value=z),placeholder:unref(a)("danbooruManager.aliases"),type:"number"},null,8,_hoisted_8$1),[[vModelText,R.value]]),createBaseVNode("button",{onClick:ae},toDisplayString$1(unref(a)("importDialog.add")),1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:fe,class:"upload-btn"},toDisplayString$1(unref(a)("danbooruManager.import")),1)]),createBaseVNode("div",_hoisted_9$1,[l.value?(openBlock(),createElementBlock("div",_hoisted_10$1,[createBaseVNode("h3",null,toDisplayString$1(V(l.value).text),1),c.value?(openBlock(),createElementBlock("div",_hoisted_11$1,[createBaseVNode("h4",null,toDisplayString$1(V(c.value).text),1),createBaseVNode("div",_hoisted_12$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(z,Z)=>(openBlock(),createElementBlock("div",{key:Z,style:{display:"flex","flex-direction":"column","align-items":"center"}},[q(z)?(openBlock(),createElementBlock("p",_hoisted_13$1,toDisplayString$1(Q(z).tag)+" - "+toDisplayString$1(Q(z).translate)+" ("+toDisplayString$1(unref(a)("danbooruManager.hot"))+": "+toDisplayString$1(Q(z).hot)+", "+toDisplayString$1(unref(a)("danbooruManager.aliases"))+": "+toDisplayString$1(Q(z).aliases)+")",1)):(openBlock(),createElementBlock("p",_hoisted_14$1,toDisplayString$1(V(z).text)+" - "+toDisplayString$1(V(z).desc),1)),createBaseVNode("div",_hoisted_15$1,[v.value===Z?(openBlock(),createElementBlock("div",_hoisted_16$1,[q(z)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":B[5]||(B[5]=D=>b.value=D),placeholder:"Tag"},null,512)),[[vModelText,b.value]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":B[6]||(B[6]=D=>b.value=D),placeholder:"Tag"},null,512)),[[vModelText,b.value]]),q(z)?withDirectives((openBlock(),createElementBlock("input",{key:2,"onUpdate:modelValue":B[7]||(B[7]=D=>$.value=D),placeholder:unref(a)("importDialog.translate")},null,8,_hoisted_17$1)),[[vModelText,$.value]]):withDirectives((openBlock(),createElementBlock("input",{key:3,"onUpdate:modelValue":B[8]||(B[8]=D=>$.value=D),placeholder:unref(a)("importDialog.translater")},null,8,_hoisted_18$1)),[[vModelText,$.value]]),q(z)?withDirectives((openBlock(),createElementBlock("input",{key:4,"onUpdate:modelValue":B[9]||(B[9]=D=>O.value=D),placeholder:unref(a)("danbooruManager.hot"),type:"number"},null,8,_hoisted_19$1)),[[vModelText,O.value]]):createCommentVNode("",!0),q(z)?withDirectives((openBlock(),createElementBlock("input",{key:5,"onUpdate:modelValue":B[10]||(B[10]=D=>G.value=D),placeholder:unref(a)("danbooruManager.aliases"),type:"number"},null,8,_hoisted_20$1)),[[vModelText,G.value]]):createCommentVNode("",!0),createBaseVNode("button",{onClick:D=>A(Z)},toDisplayString$1(unref(a)("importDialog.sureYes")),9,_hoisted_21$1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:L},toDisplayString$1(unref(a)("importDialog.cancel")),1)])):(openBlock(),createElementBlock("button",{key:1,onClick:D=>ee(Z)},toDisplayString$1(unref(a)("importDialog.edit")),9,_hoisted_22$1)),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:D=>W(Z)},toDisplayString$1(unref(a)("importDialog.delete")),9,_hoisted_23$1)])]))),128))])])):createCommentVNode("",!0)])):g.value.length>0?(openBlock(),createElementBlock("div",_hoisted_24$1,[createBaseVNode("h3",null,toDisplayString$1(unref(a)("danbooruManager.importTitle")),1),createBaseVNode("div",_hoisted_25$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(z,Z)=>(openBlock(),createElementBlock("div",{key:Z,style:{display:"flex","flex-direction":"column","align-items":"center"}},[q(z)?(openBlock(),createElementBlock("p",_hoisted_26$1,toDisplayString$1(Q(z).tag)+" - "+toDisplayString$1(Q(z).translate)+" (热度: "+toDisplayString$1(Q(z).hot)+", 别名: "+toDisplayString$1(Q(z).aliases)+")",1)):(openBlock(),createElementBlock("p",_hoisted_27$1,toDisplayString$1(V(z).text)+" - "+toDisplayString$1(V(z).desc),1)),createBaseVNode("div",_hoisted_28$1,[v.value===Z?(openBlock(),createElementBlock("div",_hoisted_29$1,[q(z)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":B[11]||(B[11]=D=>b.value=D),placeholder:"Tag"},null,512)),[[vModelText,b.value]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":B[12]||(B[12]=D=>b.value=D),placeholder:"Tag"},null,512)),[[vModelText,b.value]]),q(z)?withDirectives((openBlock(),createElementBlock("input",{key:2,"onUpdate:modelValue":B[13]||(B[13]=D=>$.value=D),placeholder:unref(a)("importDialog.translater")},null,8,_hoisted_30$1)),[[vModelText,$.value]]):withDirectives((openBlock(),createElementBlock("input",{key:3,"onUpdate:modelValue":B[14]||(B[14]=D=>$.value=D),placeholder:unref(a)("importDialog.translater")},null,8,_hoisted_31$1)),[[vModelText,$.value]]),q(z)?withDirectives((openBlock(),createElementBlock("input",{key:4,"onUpdate:modelValue":B[15]||(B[15]=D=>O.value=D),placeholder:unref(a)("danbooruManager.hot"),type:"number"},null,8,_hoisted_32$1)),[[vModelText,O.value]]):createCommentVNode("",!0),q(z)?withDirectives((openBlock(),createElementBlock("input",{key:5,"onUpdate:modelValue":B[16]||(B[16]=D=>G.value=D),placeholder:unref(a)("danbooruManager.aliases"),type:"number"},null,8,_hoisted_33$1)),[[vModelText,G.value]]):createCommentVNode("",!0),createBaseVNode("button",{onClick:D=>A(Z)},toDisplayString$1(unref(a)("importDialog.sureYes")),9,_hoisted_34$1),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:L},toDisplayString$1(unref(a)("importDialog.cancel")),1)])):(openBlock(),createElementBlock("button",{key:1,onClick:D=>ee(Z)},toDisplayString$1(unref(a)("importDialog.edit")),9,_hoisted_35$1)),createBaseVNode("button",{style:{"margin-left":"10px"},onClick:D=>W(Z)},toDisplayString$1(unref(a)("importDialog.delete")),9,_hoisted_36$1)])]))),128))])])):createCommentVNode("",!0)])])]),_:1},8,["modelValue","title"])],64))}},importDanbooru=_export_sfc(_sfc_main$2,[["__scopeId","data-v-d9630f57"]]),_hoisted_1$1={class:"danbooru-manager"},_hoisted_2$1={class:"title"},_hoisted_3$1={class:"action-bar"},_hoisted_4={class:"search-box"},_hoisted_5=["placeholder"],_hoisted_6=["disabled"],_hoisted_7={class:"pagination"},_hoisted_8=["disabled"],_hoisted_9={class:"page-info"},_hoisted_10=["disabled"],_hoisted_11={class:"page-size-control"},_hoisted_12={key:0,class:"tag-list"},_hoisted_13={style:{"table-layout":"fixed",overflow:"auto"}},_hoisted_14={class:"checkbox-column"},_hoisted_15=["checked"],_hoisted_16={class:"tag-column"},_hoisted_17={class:"translate-column"},_hoisted_18={class:"color-column"},_hoisted_19={class:"hot-column"},_hoisted_20={class:"aliases-column"},_hoisted_21={class:"control-column"},_hoisted_22=["value"],_hoisted_23=["onClick"],_hoisted_24=["onClick"],_hoisted_25={key:1,class:"no-results"},_hoisted_26={key:2,class:"weilin-tools-dialog"},_hoisted_27={class:"weilin-tools-dialog-content"},_hoisted_28={class:"form-group"},_hoisted_29=["placeholder"],_hoisted_30={class:"form-group"},_hoisted_31=["placeholder"],_hoisted_32={class:"form-group"},_hoisted_33=["value"],_hoisted_34={class:"form-group"},_hoisted_35={key:0,class:"form-group"},_hoisted_36={class:"weilin-tools-dialog-actions"},_hoisted_37={key:3,class:"weilin-tools-dialog"},_hoisted_38={class:"weilin-tools-dialog-content"},_hoisted_39={class:"weilin-tools-dialog-actions"},_hoisted_40={key:4,class:"weilin-tools-dialog"},_hoisted_41={class:"weilin-tools-dialog-content"},_hoisted_42={class:"weilin-tools-dialog-actions"},_hoisted_43={key:5,class:"overlay"},_sfc_main$1={__name:"danbooru_manager",setup(e){const{t}=useI18n(),a=ref(""),n=ref([]),o=ref(1),r=ref(1),s=ref(100),l=ref(!1),c=ref(!1),f=ref(!1),u=ref(!1),d=ref(!1),m=ref(null),g=ref({tag:"",translate:"",color_id:0,hot:0,aliases:0}),v=[{name:"默认",color:"#888888"},{name:"红色",color:"#FF6666"},{name:"绿色",color:"#66FF66"},{name:"蓝色",color:"#6666FF"},{name:"黄色",color:"#FFFF66"},{name:"紫色",color:"#FF66FF"},{name:"青色",color:"#66FFFF"},{name:"橙色",color:"#FF9966"},{name:"粉色",color:"#FF99CC"},{name:"棕色",color:"#996633"}],b=A=>v[A]?v[A].color:v[0].color;let $=null;const w=()=>{$&&clearTimeout($),$=setTimeout(()=>{o.value=1,C()},300)},C=async()=>{l.value=!0,oe.value=[];try{const A=await danbooruApi.searchDanbooru(a.value,o.value,s.value);A&&A.data?(n.value=A.data.data||[],r.value=A.data.total_pages||1):(n.value=[],r.value=1)}catch(A){console.error("搜索标签失败:",A),message$1({type:"error",str:t("message.searchFailed")}),n.value=[]}finally{l.value=!1}},P=A=>{A<1||A>r.value||(o.value=A,C())},y=()=>{s.value<10&&(s.value=10),s.value>500&&(s.value=500),o.value=1,oe.value=[],C()},E=()=>{d.value=!1,g.value={tag:"",translate:"",color_id:0,hot:0,aliases:0},c.value=!0},R=A=>{d.value=!0,m.value=A,g.value={id:A.id_index,tag:A.tag,translate:A.translate||"",color_id:A.color_id||0,hot:A.hot||0,aliases:A.aliases||0},c.value=!0},F=()=>{c.value=!1},H=async()=>{if(!g.value.tag){message$1({type:"error",str:t("tagManager.textRequired")});return}try{if(d.value){const A=await danbooruApi.updateDanbooruTag({id:g.value.id,update_data:{tag:g.value.tag,translate:g.value.translate,color_id:g.value.color_id,hot:g.value.hot,aliases:g.value.aliases}});A&&A.code===200?(message$1({type:"success",str:t("message.editSuccess")}),C()):message$1({type:"error",str:t("message.editFailed")})}else{const A=await danbooruApi.addDanbooruTag({tag:g.value.tag,translate:g.value.translate,color_id:g.value.color_id,hot:g.value.hot,aliases:g.value.aliases});A&&A.code===200?(message$1({type:"success",str:t("message.addSuccess")}),C()):message$1({type:"error",str:t("message.addFailed")})}F()}catch(A){console.error("提交表单失败:",A),message$1({type:"error",str:d.value?t("message.editFailed"):t("message.addFailed")})}},j=A=>{m.value=A,f.value=!0},fe=async()=>{if(!(!m.value||!m.value.id_index))try{const A=await danbooruApi.deleteDanbooruTag(m.value.id_index);A&&A.code===200?(message$1({type:"success",str:t("message.deleteSuccess")}),C()):message$1({type:"error",str:t("message.deleteFailed")}),f.value=!1}catch(A){console.error("删除标签失败:",A),message$1({type:"error",str:t("message.deleteFailed")})}},oe=ref([]),V=computed(()=>n.value.length>0&&oe.value.length===n.value.length),q=()=>{V.value?oe.value=[]:oe.value=n.value.map(A=>A.id_index)},Q=()=>{oe.value.length!==0&&(u.value=!0)},O=async()=>{if(oe.value.length!==0){try{const A=await danbooruApi.batchDeleteDanbooruTags(oe.value);A&&A.code===200?(message$1({type:"success",str:`成功删除 ${oe.value.length} 个标签`}),oe.value=[],C()):message$1({type:"error",str:"批量删除失败"})}catch(A){console.error("批量删除失败:",A),message$1({type:"error",str:"批量删除失败"})}u.value=!1}},G=ref(),ee=()=>{G.value.open()};return onMounted(()=>{C()}),(A,L)=>{var W;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("h2",_hoisted_2$1,toDisplayString$1(unref(t)("danbooruManager.title")),1),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":L[0]||(L[0]=ae=>a.value=ae),type:"text",placeholder:unref(t)("danbooruManager.searchPlaceholder"),onInput:w},null,40,_hoisted_5),[[vModelText,a.value]]),createBaseVNode("button",{class:"search-btn",onClick:C},toDisplayString$1(unref(t)("tagManager.search")),1)]),createBaseVNode("button",{class:"add-btn",onClick:E},toDisplayString$1(unref(t)("danbooruManager.add")),1),createBaseVNode("button",{class:"add-btn",onClick:ee},toDisplayString$1(unref(t)("tagManager.importDanbooru")),1),createBaseVNode("button",{class:normalizeClass(["batch-delete-btn",{disabled:oe.value.length===0}]),disabled:oe.value.length===0,onClick:Q},toDisplayString$1(unref(t)("tagManager.hasDeleteAction"))+" ("+toDisplayString$1(oe.value.length)+") ",11,_hoisted_6)]),createBaseVNode("div",_hoisted_7,[createBaseVNode("button",{disabled:o.value<=1,onClick:L[1]||(L[1]=ae=>P(o.value-1)),class:"page-btn"},toDisplayString$1(unref(t)("loraManager.prevPage")),9,_hoisted_8),createBaseVNode("span",_hoisted_9,toDisplayString$1(o.value)+" / "+toDisplayString$1(r.value),1),createBaseVNode("button",{disabled:o.value>=r.value,onClick:L[2]||(L[2]=ae=>P(o.value+1)),class:"page-btn"},toDisplayString$1(unref(t)("loraManager.nextPage")),9,_hoisted_10),createBaseVNode("div",_hoisted_11,[createBaseVNode("label",null,toDisplayString$1(unref(t)("danbooruManager.pageShow")),1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":L[3]||(L[3]=ae=>s.value=ae),type:"number",min:"10",max:"500",onChange:y,class:"page-size-input"},null,544),[[vModelText,s.value,void 0,{number:!0}]]),createBaseVNode("span",null,toDisplayString$1(unref(t)("danbooruManager.pageLimit")),1)])]),n.value.length>0?(openBlock(),createElementBlock("div",_hoisted_12,[createBaseVNode("table",_hoisted_13,[createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",_hoisted_14,[createBaseVNode("input",{type:"checkbox",checked:V.value,onChange:q},null,40,_hoisted_15)]),L[12]||(L[12]=createBaseVNode("th",{class:"id-column"},"ID",-1)),createBaseVNode("th",_hoisted_16,toDisplayString$1(unref(t)("tagManager.description")),1),createBaseVNode("th",_hoisted_17,toDisplayString$1(unref(t)("promptBox.translate")),1),createBaseVNode("th",_hoisted_18,toDisplayString$1(unref(t)("tagManager.backgroundColor")),1),createBaseVNode("th",_hoisted_19,toDisplayString$1(unref(t)("danbooruManager.hot")),1),createBaseVNode("th",_hoisted_20,toDisplayString$1(unref(t)("danbooruManager.aliases")),1),createBaseVNode("th",_hoisted_21,toDisplayString$1(unref(t)("danbooruManager.controle")),1)])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,ae=>(openBlock(),createElementBlock("tr",{key:ae.id_index},[createBaseVNode("td",null,[withDirectives(createBaseVNode("input",{type:"checkbox",value:ae.id_index,"onUpdate:modelValue":L[4]||(L[4]=Y=>oe.value=Y)},null,8,_hoisted_22),[[vModelCheckbox,oe.value]])]),createBaseVNode("td",null,toDisplayString$1(ae.id_index),1),createBaseVNode("td",null,toDisplayString$1(ae.tag),1),createBaseVNode("td",null,toDisplayString$1(ae.translate),1),createBaseVNode("td",null,[createBaseVNode("div",{class:"color-box",style:normalizeStyle({backgroundColor:b(ae.color_id)})},null,4)]),createBaseVNode("td",null,toDisplayString$1(ae.hot),1),createBaseVNode("td",null,toDisplayString$1(ae.aliases),1),createBaseVNode("td",null,[createBaseVNode("button",{class:"edit-btn",onClick:Y=>R(ae)},toDisplayString$1(unref(t)("common.edit")),9,_hoisted_23),createBaseVNode("button",{style:{"margin-left":"10px"},class:"delete-btn",onClick:Y=>j(ae)},toDisplayString$1(unref(t)("common.delete")),9,_hoisted_24)])]))),128))])])])):(openBlock(),createElementBlock("div",_hoisted_25,toDisplayString$1(unref(t)("tagManager.noResults")),1)),c.value?(openBlock(),createElementBlock("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[createBaseVNode("h3",null,toDisplayString$1(d.value?unref(t)("danbooruManager.edit"):unref(t)("danbooruManager.add")),1),createBaseVNode("div",_hoisted_28,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.description")),1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":L[5]||(L[5]=ae=>g.value.tag=ae),type:"text",placeholder:unref(t)("tagManager.descriptionPlaceholder")},null,8,_hoisted_29),[[vModelText,g.value.tag]])]),createBaseVNode("div",_hoisted_30,[createBaseVNode("label",null,toDisplayString$1(unref(t)("promptBox.translate")),1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":L[6]||(L[6]=ae=>g.value.translate=ae),type:"text",placeholder:unref(t)("danbooruManager.translatePlaceholder")},null,8,_hoisted_31),[[vModelText,g.value.translate]])]),createBaseVNode("div",_hoisted_32,[createBaseVNode("label",null,toDisplayString$1(unref(t)("tagManager.backgroundColor")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":L[7]||(L[7]=ae=>g.value.color_id=ae)},[(openBlock(),createElementBlock(Fragment,null,renderList(v,(ae,Y)=>createBaseVNode("option",{key:Y,value:Y},toDisplayString$1(ae.name),9,_hoisted_33)),64))],512),[[vModelSelect,g.value.color_id]]),createBaseVNode("div",{class:"color-preview",style:normalizeStyle({backgroundColor:b(g.value.color_id)})},null,4)]),createBaseVNode("div",_hoisted_34,[L[13]||(L[13]=createBaseVNode("label",null,"Hot",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":L[8]||(L[8]=ae=>g.value.hot=ae),type:"number",min:"0"},null,512),[[vModelText,g.value.hot,void 0,{number:!0}]])]),d.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_35,[L[14]||(L[14]=createBaseVNode("label",null,"Aliases",-1)),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":L[9]||(L[9]=ae=>g.value.aliases=ae),type:"number",min:"0"},null,512),[[vModelText,g.value.aliases,void 0,{number:!0}]])])),createBaseVNode("div",_hoisted_36,[createBaseVNode("button",{onClick:F},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{onClick:H},toDisplayString$1(unref(t)("common.save")),1)])])])):createCommentVNode("",!0),f.value?(openBlock(),createElementBlock("div",_hoisted_37,[createBaseVNode("div",_hoisted_38,[createBaseVNode("h3",null,toDisplayString$1(unref(t)("common.confirmDelete")),1),createBaseVNode("p",null,toDisplayString$1(unref(t)("tagManager.deleteTagConfirm",{name:((W=m.value)==null?void 0:W.tag)||""})),1),createBaseVNode("div",_hoisted_39,[createBaseVNode("button",{onClick:L[10]||(L[10]=ae=>f.value=!1)},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"delete-btn",onClick:fe},toDisplayString$1(unref(t)("common.delete")),1)])])])):createCommentVNode("",!0),u.value?(openBlock(),createElementBlock("div",_hoisted_40,[createBaseVNode("div",_hoisted_41,[createBaseVNode("h3",null,toDisplayString$1(unref(t)("danbooruManager.sureBatchDelete")),1),createBaseVNode("p",null,toDisplayString$1(unref(t)("danbooruManager.sureBatchDeleteTips1"))+" "+toDisplayString$1(oe.value.length)+" "+toDisplayString$1(unref(t)("danbooruManager.sureBatchDeleteTips2")),1),createBaseVNode("div",_hoisted_42,[createBaseVNode("button",{onClick:L[11]||(L[11]=ae=>u.value=!1)},toDisplayString$1(unref(t)("common.cancel")),1),createBaseVNode("button",{class:"delete-btn",onClick:O},toDisplayString$1(unref(t)("danbooruManager.sureDelete")),1)])])])):createCommentVNode("",!0),c.value||f.value||u.value?(openBlock(),createElementBlock("div",_hoisted_43)):createCommentVNode("",!0),createVNode(importDanbooru,{ref_key:"importDanbooruDialog",ref:G},null,512)])}}},DanbooruManagerWindow=_export_sfc(_sfc_main$1,[["__scopeId","data-v-f19f168a"]]),_hoisted_1={id:"weilin_comfyui_tools_prompt_ui_div"},_hoisted_2={key:10,class:"version-update-notification"},_hoisted_3={class:"version-update-content"},STORAGE_PREFIX="weilin_tools_",_sfc_main={__name:"App",setup(e){useTagStore();const t=ref(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true");localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")||(localStorage.setItem("weilin_prompt_ui_floatingBallEnabled","true"),t.value=!0);const{t:a}=useI18n(),n=ref(""),o=ref("look"),r=ref("manager"),s=ref("prompt_global"),l=ref(!1),c=`${STORAGE_PREFIX}theme`,f=ref(localStorage.getItem(c)==="dark"),u=ref(""),d=ref(!1),m=ref(""),g=ref(null),v=`${STORAGE_PREFIX}version_update_remind`,b=()=>{d.value=!1,g.value&&(clearTimeout(g.value),g.value=null)},$=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank"),b()},w=()=>{localStorage.setItem(v,"false"),b()},C={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:500}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:300,height:600}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}},P=()=>{try{const A=localStorage.getItem(`${STORAGE_PREFIX}windowStates`);if(A){const L=JSON.parse(A),W={...C};for(const ae in L)ae in W&&(W[ae]={...C[ae],...L[ae],visible:L[ae].is_default_close?!1:L[ae].visible});return W}}catch(A){console.error("Error loading window states:",A)}return{...C}},y=ref(P());watch(y,A=>{try{localStorage.setItem(`${STORAGE_PREFIX}windowStates`,JSON.stringify(A))}catch(L){console.error("Error saving window states:",L)}},{deep:!0}),onMounted(()=>{Object.keys(y.value).forEach(A=>{windowManager.registerWindow(A)}),E(),window.addEventListener("message",G),ee()});const E=()=>{let A=localStorage.getItem(c);A||(localStorage.setItem(c,"dark"),A="dark",f.value=!0),f.value=A==="dark";const L=document.getElementById("weilin_comfyui_tools_prompt_ui_div");L&&L.setAttribute("data-theme",f.value?"dark":"light")};onUnmounted(()=>{Object.keys(y.value).forEach(A=>{windowManager.unregisterWindow(A)}),window.removeEventListener("message",G),g.value&&(clearTimeout(g.value),g.value=null)});const R=A=>{A==="prompt"&&(n.value=""),y.value[A].visible=!1},F=(A,L)=>{y.value[A]&&(y.value[A].position={...L})},H=(A,L)=>{y.value[A]&&(y.value[A].size={...L})},j=()=>{const A={loraDetail:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}}},L={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:400}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:400,height:800}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}};localStorage.setItem(`${STORAGE_PREFIX}windowStates`,JSON.stringify(L)),localStorage.setItem(`${STORAGE_PREFIX}loraDetailState`,JSON.stringify(A)),y.value=P()};(()=>{translatorApi.getTranslateSetting().then(A=>{localStorage.setItem("weilin_prompt_ui_translater_setting",A.data)}).catch(A=>{message({type:"warn",str:"message.getTranslaterFail"})})})();const oe=ref(),V=ref(),q=ref(),Q=ref(),O=ref(),G=A=>{A.data.type==="weilin_prompt_ui_openTagManager"?(r.value="manager",y.value.tag.visible=!0,windowManager.setActiveWindow("tag")):A.data.type==="weilin_prompt_ui_openTagManager_prompt"?(r.value="prompt",y.value.tag.visible=!0,windowManager.setActiveWindow("tag")):A.data.type==="weilin_prompt_ui_openPromptBox"?(n.value=A.data.id,s.value="prompt",y.value.prompt.visible=!0,l.value=!1,A.data.node==="WeiLinPromptUI"&&(l.value=!0),nextTick(()=>{oe.value.setPromptText(A.data.prompt)}),windowManager.setActiveWindow("prompt")):A.data.type==="weilin_prompt_ui_openLoraManager"?(o.value="look",y.value.lora.visible=!0,windowManager.setActiveWindow("lora")):A.data.type==="weilin_prompt_ui_openLoraManager_addLora"?(o.value="addLora",y.value.lora.visible=!0,nextTick(()=>{q.value.openSetSeed(0,"")}),windowManager.setActiveWindow("lora")):A.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack"?(o.value="addLora",y.value.lora.visible=!0,nextTick(()=>{q.value.openSetSeed(1,A.data.seed)}),windowManager.setActiveWindow("lora")):A.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack_node"?(o.value="addLora",y.value.lora.visible=!0,nextTick(()=>{q.value.openSetSeed(2,A.data.seed)}),windowManager.setActiveWindow("lora")):A.data.type==="weilin_prompt_ui_openHistoryManager"?(y.value.history.visible=!0,windowManager.setActiveWindow("history")):A.data.type==="weilin_prompt_ui_openAiWindow"?(y.value.ai_window.visible=!0,windowManager.setActiveWindow("ai_window")):A.data.type==="weilin_prompt_ui_open_node_list_window"?(y.value.node_list_window.visible=!0,windowManager.setActiveWindow("node_list_window")):A.data.type==="weilin_prompt_ui_prompt_finish_prompt"?window.postMessage({type:"weilin_prompt_ui_prompt_update_prompt_"+n.value,data:A.data.data},"*"):A.data.type==="weilin_prompt_ui_open_global_prompt_box"?(s.value="prompt_global",n.value="global",y.value.prompt.visible=!0,l.value=!1,nextTick(()=>{oe.value.setPromptText(u.value)}),windowManager.setActiveWindow("prompt")):A.data.type==="weilin_prompt_ui_open_global_tag_manager"?(r.value="manager",y.value.tag.visible=!0,windowManager.setActiveWindow("tag")):A.data.type==="weilin_prompt_ui_open_global_lora_manager"?(o.value="look",y.value.lora.visible=!0,windowManager.setActiveWindow("lora")):A.data.type==="weilin_prompt_ui_prompt_update_prompt_global"?u.value=A.data.data:A.data.type==="weilin_prompt_ui_floating_ball_setting"?t.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true":A.data.type==="weilin_prompt_ui_restore_window"?j():A.data.type==="weilin_prompt_ui_open_cloud_window"?(y.value.cloud_window.visible=!0,windowManager.setActiveWindow("cloud_window")):A.data.type==="weilin_prompt_ui_open_node_lora_stack_window"?(y.value.lora_stack_window.visible=!0,nextTick(()=>{V.value.initLoraStack(A.data.prompt,A.data.seed)}),windowManager.setActiveWindow("lora_stack_window")):A.data.type==="weilin_prompt_ui_openLoraDetail"?Q.value.open({name:A.data.lora}):A.data.type==="weilin_prompt_ui_open_danbooru_manager_window"?(y.value.danbooru_manager_window.visible=!0,windowManager.setActiveWindow("danbooru_manager_window")):A.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_get_template_"+n.value,data:A.data.data},"*"):A.data.type==="weilin_prompt_ui_get_template_response"?n.value===A.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response",data:A.data.data},"*"):A.data.type==="weilin_prompt_ui_prompt_inner_update_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_update_template_"+n.value,data:A.data.data},"*"):A.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"?window.postMessage({type:"weilin_prompt_ui_get_template_go_random_"+n.value,data:A.data.data},"*"):A.data.type==="weilin_prompt_ui_get_template_go_random_response"&&n.value===A.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response",data:A.data.data},"*")},ee=async()=>{try{if(localStorage.getItem(v)==="false"){console.info("WeiLin-Comfyui-Tools 版本更新提醒已禁用");return}const L=await fetch("https://raw.githubusercontent.com/weilin9999/WeiLin-Comfyui-Tools/refs/heads/main/src/src/utils/version.js");if(!L.ok){console.error("获取版本信息失败:",L.status);return}const ae=(await L.text()).match(/export const version = "([^"]+)"/);if(ae&&ae[1]){const Y=ae[1];console.info(`WeiLin-Comfyui-Tools GitHub版本： ${Y}`),Y!==version&&(m.value=`WeiLin-Comfyui-Tools 发现新版本 ${Y}，当前版本 ${version}`,d.value=!0,g.value&&clearTimeout(g.value),g.value=setTimeout(()=>{d.value=!1,g.value=null},1e4),console.info(`WeiLin-Comfyui-Tools 发现新版本 ${Y}，当前版本 ${version} GitHub链接：https://github.com/weilin9999/WeiLin-Comfyui-Tools`))}}catch(A){console.error("WeiLin-Comfyui-Tools 检查更新失败:",A)}};return(A,L)=>(openBlock(),createElementBlock("div",_hoisted_1,[y.value.prompt.visible?(openBlock(),createBlock(DraggableWindow,{key:0,name:"promptBox",title:s.value==="prompt"?unref(a)("promptBox.windowTitle"):unref(a)("promptBox.windowTitleGlobal"),position:y.value.prompt.position,size:y.value.prompt.size,"z-index":unref(windowManager).getZIndex("prompt"),"onUpdate:position":L[0]||(L[0]=W=>F("prompt",W)),"onUpdate:size":L[1]||(L[1]=W=>H("prompt",W)),onActive:L[2]||(L[2]=W=>unref(windowManager).setActiveWindow("prompt")),onClose:L[3]||(L[3]=W=>R("prompt"))},{default:withCtx(()=>[createVNode(PromptBox,{promptManager:s.value,hasPromptLoraStack:l.value,ref_key:"promptBoxRef",ref:oe},null,8,["promptManager","hasPromptLoraStack"])]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.tag.visible?(openBlock(),createBlock(DraggableWindow,{key:1,name:"tagManager",title:unref(a)("tagManager.windowTitle"),position:y.value.tag.position,size:y.value.tag.size,"z-index":unref(windowManager).getZIndex("tag"),"onUpdate:position":L[4]||(L[4]=W=>F("tag",W)),"onUpdate:size":L[5]||(L[5]=W=>H("tag",W)),onActive:L[6]||(L[6]=W=>unref(windowManager).setActiveWindow("tag")),onClose:L[7]||(L[7]=W=>R("tag"))},{default:withCtx(()=>[createVNode(TagManager,{tagManager:r.value},null,8,["tagManager"])]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.lora.visible?(openBlock(),createBlock(DraggableWindow,{key:2,name:"loraManager",title:unref(a)("loraManager.windowTitle"),position:y.value.lora.position,size:y.value.lora.size,"z-index":unref(windowManager).getZIndex("lora"),"onUpdate:position":L[8]||(L[8]=W=>F("lora",W)),"onUpdate:size":L[9]||(L[9]=W=>H("lora",W)),onActive:L[10]||(L[10]=W=>unref(windowManager).setActiveWindow("lora")),onClose:L[11]||(L[11]=W=>R("lora"))},{default:withCtx(()=>[createVNode(LoraManager,{loraManager:o.value,ref_key:"loraManagerRef",ref:q},null,8,["loraManager"])]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.history.visible?(openBlock(),createBlock(DraggableWindow,{key:3,name:"historyManager",title:unref(a)("history.windowTitle"),position:y.value.history.position,size:y.value.history.size,"z-index":unref(windowManager).getZIndex("history"),"onUpdate:position":L[12]||(L[12]=W=>F("history",W)),"onUpdate:size":L[13]||(L[13]=W=>H("history",W)),onActive:L[14]||(L[14]=W=>unref(windowManager).setActiveWindow("history")),onClose:L[15]||(L[15]=W=>R("history"))},{default:withCtx(()=>[createVNode(HistoryManager)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.ai_window.visible?(openBlock(),createBlock(DraggableWindow,{key:4,name:"aiWindow",title:unref(a)("aiWindow.windowTitle"),position:y.value.ai_window.position,size:y.value.ai_window.size,"z-index":unref(windowManager).getZIndex("ai_window"),"onUpdate:position":L[16]||(L[16]=W=>F("ai_window",W)),"onUpdate:size":L[17]||(L[17]=W=>H("ai_window",W)),onActive:L[18]||(L[18]=W=>unref(windowManager).setActiveWindow("ai_window")),onClose:L[19]||(L[19]=W=>R("ai_window"))},{default:withCtx(()=>[createVNode(AiWindow)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.node_list_window.visible?(openBlock(),createBlock(DraggableWindow,{key:5,name:"nodeListWindow",title:unref(a)("nodeListWindow.windowTitle"),position:y.value.node_list_window.position,size:y.value.node_list_window.size,"z-index":unref(windowManager).getZIndex("node_list_window"),"onUpdate:position":L[20]||(L[20]=W=>F("node_list_window",W)),"onUpdate:size":L[21]||(L[21]=W=>H("node_list_window",W)),onActive:L[22]||(L[22]=W=>unref(windowManager).setActiveWindow("node_list_window")),onClose:L[23]||(L[23]=W=>R("node_list_window"))},{default:withCtx(()=>[createVNode(NodeListWindow)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.cloud_window.visible?(openBlock(),createBlock(DraggableWindow,{key:6,name:"cloudWindow",title:unref(a)("cloudWindow.windowTitle"),position:y.value.cloud_window.position,size:y.value.cloud_window.size,"z-index":unref(windowManager).getZIndex("cloud_window"),"onUpdate:position":L[24]||(L[24]=W=>F("cloud_window",W)),"onUpdate:size":L[25]||(L[25]=W=>H("cloud_window",W)),onActive:L[26]||(L[26]=W=>unref(windowManager).setActiveWindow("cloud_window")),onClose:L[27]||(L[27]=W=>R("cloud_window"))},{default:withCtx(()=>[createVNode(CloudWindow)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.lora_stack_window.visible?(openBlock(),createBlock(DraggableWindow,{key:7,name:"loraStackWindow",title:unref(a)("controls.loraStack"),position:y.value.lora_stack_window.position,size:y.value.lora_stack_window.size,"z-index":unref(windowManager).getZIndex("lora_stack_window"),"onUpdate:position":L[28]||(L[28]=W=>F("lora_stack_window",W)),"onUpdate:size":L[29]||(L[29]=W=>H("lora_stack_window",W)),onActive:L[30]||(L[30]=W=>unref(windowManager).setActiveWindow("lora_stack_window")),onClose:L[31]||(L[31]=W=>R("lora_stack_window"))},{default:withCtx(()=>[createVNode(LoraStackWindow,{ref_key:"loraStackRef",ref:V},null,512)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),y.value.danbooru_manager_window.visible?(openBlock(),createBlock(DraggableWindow,{key:8,name:"DanbooruManagerWindow",title:unref(a)("controls.danbooruManager"),position:y.value.danbooru_manager_window.position,size:y.value.danbooru_manager_window.size,"z-index":unref(windowManager).getZIndex("danbooru_manager_window"),"onUpdate:position":L[32]||(L[32]=W=>F("danbooru_manager_window",W)),"onUpdate:size":L[33]||(L[33]=W=>H("danbooru_manager_window",W)),onActive:L[34]||(L[34]=W=>unref(windowManager).setActiveWindow("danbooru_manager_window")),onClose:L[35]||(L[35]=W=>R("danbooru_manager_window"))},{default:withCtx(()=>[createVNode(DanbooruManagerWindow,{ref_key:"danbooruManagerRef",ref:O},null,512)]),_:1},8,["title","position","size","z-index"])):createCommentVNode("",!0),t.value?(openBlock(),createBlock(FloatingBall,{key:9})):createCommentVNode("",!0),createVNode(loraDetail,{ref_key:"loraDetailLoraStackRef",ref:Q},null,512),d.value?(openBlock(),createElementBlock("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("span",null,toDisplayString$1(m.value),1),createBaseVNode("div",{class:"version-update-actions"},[createBaseVNode("button",{class:"goto-github-btn",onClick:$},"前往GitHub"),createBaseVNode("button",{class:"no-remind-btn",onClick:w},"不再提醒"),createBaseVNode("button",{class:"close-version-update",onClick:b},"×")])])])):createCommentVNode("",!0)]))}},App=_export_sfc(_sfc_main,[["__scopeId","data-v-b041d233"]]);var clipboard$1={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var clipboard=clipboard$1.exports,hasRequiredClipboard;function requireClipboard(){return hasRequiredClipboard||(hasRequiredClipboard=1,function(e,t){(function(n,o){e.exports=o()})(clipboard,function(){return function(){var a={686:function(r,s,l){l.d(s,{default:function(){return ae}});var c=l(279),f=l.n(c),u=l(370),d=l.n(u),m=l(817),g=l.n(m);function v(Y){try{return document.execCommand(Y)}catch{return!1}}var b=function(ne){var te=g()(ne);return v("cut"),te},$=b;function w(Y){var ne=document.documentElement.getAttribute("dir")==="rtl",te=document.createElement("textarea");te.style.fontSize="12pt",te.style.border="0",te.style.padding="0",te.style.margin="0",te.style.position="absolute",te.style[ne?"right":"left"]="-9999px";var ge=window.pageYOffset||document.documentElement.scrollTop;return te.style.top="".concat(ge,"px"),te.setAttribute("readonly",""),te.value=Y,te}var C=function(ne,te){var ge=w(ne);te.container.appendChild(ge);var re=g()(ge);return v("copy"),ge.remove(),re},P=function(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ge="";return typeof ne=="string"?ge=C(ne,te):ne instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(ne==null?void 0:ne.type)?ge=C(ne.value,te):(ge=g()(ne),v("copy")),ge},y=P;function E(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(te){return typeof te}:E=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},E(Y)}var R=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=ne.action,ge=te===void 0?"copy":te,re=ne.container,B=ne.target,z=ne.text;if(ge!=="copy"&&ge!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(B!==void 0)if(B&&E(B)==="object"&&B.nodeType===1){if(ge==="copy"&&B.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ge==="cut"&&(B.hasAttribute("readonly")||B.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(z)return y(z,{container:re});if(B)return ge==="cut"?$(B):y(B,{container:re})},F=R;function H(Y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(te){return typeof te}:H=function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},H(Y)}function j(Y,ne){if(!(Y instanceof ne))throw new TypeError("Cannot call a class as a function")}function fe(Y,ne){for(var te=0;te<ne.length;te++){var ge=ne[te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(Y,ge.key,ge)}}function oe(Y,ne,te){return ne&&fe(Y.prototype,ne),te&&fe(Y,te),Y}function V(Y,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(ne&&ne.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),ne&&q(Y,ne)}function q(Y,ne){return q=Object.setPrototypeOf||function(ge,re){return ge.__proto__=re,ge},q(Y,ne)}function Q(Y){var ne=ee();return function(){var ge=A(Y),re;if(ne){var B=A(this).constructor;re=Reflect.construct(ge,arguments,B)}else re=ge.apply(this,arguments);return O(this,re)}}function O(Y,ne){return ne&&(H(ne)==="object"||typeof ne=="function")?ne:G(Y)}function G(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function ee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function A(Y){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(te){return te.__proto__||Object.getPrototypeOf(te)},A(Y)}function L(Y,ne){var te="data-clipboard-".concat(Y);if(ne.hasAttribute(te))return ne.getAttribute(te)}var W=function(Y){V(te,Y);var ne=Q(te);function te(ge,re){var B;return j(this,te),B=ne.call(this),B.resolveOptions(re),B.listenClick(ge),B}return oe(te,[{key:"resolveOptions",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof re.action=="function"?re.action:this.defaultAction,this.target=typeof re.target=="function"?re.target:this.defaultTarget,this.text=typeof re.text=="function"?re.text:this.defaultText,this.container=H(re.container)==="object"?re.container:document.body}},{key:"listenClick",value:function(re){var B=this;this.listener=d()(re,"click",function(z){return B.onClick(z)})}},{key:"onClick",value:function(re){var B=re.delegateTarget||re.currentTarget,z=this.action(B)||"copy",Z=F({action:z,container:this.container,target:this.target(B),text:this.text(B)});this.emit(Z?"success":"error",{action:z,text:Z,trigger:B,clearSelection:function(){B&&B.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(re){return L("action",re)}},{key:"defaultTarget",value:function(re){var B=L("target",re);if(B)return document.querySelector(B)}},{key:"defaultText",value:function(re){return L("text",re)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(re){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return y(re,B)}},{key:"cut",value:function(re){return $(re)}},{key:"isSupported",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],B=typeof re=="string"?[re]:re,z=!!document.queryCommandSupported;return B.forEach(function(Z){z=z&&!!document.queryCommandSupported(Z)}),z}}]),te}(f()),ae=W},828:function(r){var s=9;if(typeof Element<"u"&&!Element.prototype.matches){var l=Element.prototype;l.matches=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector}function c(f,u){for(;f&&f.nodeType!==s;){if(typeof f.matches=="function"&&f.matches(u))return f;f=f.parentNode}}r.exports=c},438:function(r,s,l){var c=l(828);function f(m,g,v,b,$){var w=d.apply(this,arguments);return m.addEventListener(v,w,$),{destroy:function(){m.removeEventListener(v,w,$)}}}function u(m,g,v,b,$){return typeof m.addEventListener=="function"?f.apply(null,arguments):typeof v=="function"?f.bind(null,document).apply(null,arguments):(typeof m=="string"&&(m=document.querySelectorAll(m)),Array.prototype.map.call(m,function(w){return f(w,g,v,b,$)}))}function d(m,g,v,b){return function($){$.delegateTarget=c($.target,g),$.delegateTarget&&b.call(m,$)}}r.exports=u},879:function(r,s){s.node=function(l){return l!==void 0&&l instanceof HTMLElement&&l.nodeType===1},s.nodeList=function(l){var c=Object.prototype.toString.call(l);return l!==void 0&&(c==="[object NodeList]"||c==="[object HTMLCollection]")&&"length"in l&&(l.length===0||s.node(l[0]))},s.string=function(l){return typeof l=="string"||l instanceof String},s.fn=function(l){var c=Object.prototype.toString.call(l);return c==="[object Function]"}},370:function(r,s,l){var c=l(879),f=l(438);function u(v,b,$){if(!v&&!b&&!$)throw new Error("Missing required arguments");if(!c.string(b))throw new TypeError("Second argument must be a String");if(!c.fn($))throw new TypeError("Third argument must be a Function");if(c.node(v))return d(v,b,$);if(c.nodeList(v))return m(v,b,$);if(c.string(v))return g(v,b,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(v,b,$){return v.addEventListener(b,$),{destroy:function(){v.removeEventListener(b,$)}}}function m(v,b,$){return Array.prototype.forEach.call(v,function(w){w.addEventListener(b,$)}),{destroy:function(){Array.prototype.forEach.call(v,function(w){w.removeEventListener(b,$)})}}}function g(v,b,$){return f(document.body,v,b,$)}r.exports=u},817:function(r){function s(l){var c;if(l.nodeName==="SELECT")l.focus(),c=l.value;else if(l.nodeName==="INPUT"||l.nodeName==="TEXTAREA"){var f=l.hasAttribute("readonly");f||l.setAttribute("readonly",""),l.select(),l.setSelectionRange(0,l.value.length),f||l.removeAttribute("readonly"),c=l.value}else{l.hasAttribute("contenteditable")&&l.focus();var u=window.getSelection(),d=document.createRange();d.selectNodeContents(l),u.removeAllRanges(),u.addRange(d),c=u.toString()}return c}r.exports=s},279:function(r){function s(){}s.prototype={on:function(l,c,f){var u=this.e||(this.e={});return(u[l]||(u[l]=[])).push({fn:c,ctx:f}),this},once:function(l,c,f){var u=this;function d(){u.off(l,d),c.apply(f,arguments)}return d._=c,this.on(l,d,f)},emit:function(l){var c=[].slice.call(arguments,1),f=((this.e||(this.e={}))[l]||[]).slice(),u=0,d=f.length;for(u;u<d;u++)f[u].fn.apply(f[u].ctx,c);return this},off:function(l,c){var f=this.e||(this.e={}),u=f[l],d=[];if(u&&c)for(var m=0,g=u.length;m<g;m++)u[m].fn!==c&&u[m].fn._!==c&&d.push(u[m]);return d.length?f[l]=d:delete f[l],this}},r.exports=s,r.exports.TinyEmitter=s}},n={};function o(r){if(n[r])return n[r].exports;var s=n[r]={exports:{}};return a[r](s,s.exports,o),s.exports}return function(){o.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(s,{a:s}),s}}(),function(){o.d=function(r,s){for(var l in s)o.o(s,l)&&!o.o(r,l)&&Object.defineProperty(r,l,{enumerable:!0,get:s[l]})}}(),function(){o.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)}}(),o(686)}().default})}(clipboard$1)),clipboard$1.exports}var clipboardExports=requireClipboard();const Clipboard=getDefaultExportFromCjs(clipboardExports),VueClipboard=e=>({toClipboard(t,a){return new Promise((n,o)=>{const r=document.createElement("button"),s=new Clipboard(r,{text:()=>t,action:()=>"copy",container:a!==void 0?a:document.body});s.on("success",l=>{s.destroy(),n(l)}),s.on("error",l=>{s.destroy(),o(l)}),document.body.appendChild(r),r.click(),document.body.removeChild(r)})}}),suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){warnKeyDropped(e);return}return t}function warnKeyDropped(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function destr(e,t={}){if(typeof e!="string")return e;const a=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return a.slice(1,-1);if(a.length<=9){const n=a.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!JsonSigRx.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(suspectProtoRx.test(e)||suspectConstructorRx.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function get(e,t){if(e==null)return;let a=e;for(let n=0;n<t.length;n++){if(a==null||a[t[n]]==null)return;a=a[t[n]]}return a}function set(e,t,a){if(a.length===0)return t;const n=a[0];return a.length>1&&(t=set(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,n)?Number.isInteger(Number(a[1]))?[]:{}:e[n],t,Array.prototype.slice.call(a,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function unset(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const a={};for(const n in e)a[n]=e[n];return delete a[t[0]],a}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const a={};for(const n in e)a[n]=e[n];return a}return set(e,unset(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function deepPickUnsafe(e,t){return t.map(a=>a.split(".")).map(a=>[a,get(e,a)]).filter(a=>a[1]!==void 0).reduce((a,n)=>set(a,n[1],n[0]),{})}function deepOmitUnsafe(e,t){return t.map(a=>a.split(".")).reduce((a,n)=>unset(a,n),e)}function hydrateStore(e,{storage:t,serializer:a,key:n,debug:o,pick:r,omit:s,beforeHydrate:l,afterHydrate:c},f,u=!0){try{u&&(l==null||l(f));const d=t.getItem(n);if(d){const m=a.deserialize(d),g=r?deepPickUnsafe(m,r):m,v=s?deepOmitUnsafe(g,s):g;e.$patch(v)}u&&(c==null||c(f))}catch(d){o&&console.error("[pinia-plugin-persistedstate]",d)}}function persistState(e,{storage:t,serializer:a,key:n,debug:o,pick:r,omit:s}){try{const l=r?deepPickUnsafe(e,r):e,c=s?deepOmitUnsafe(l,s):l,f=a.serialize(c);t.setItem(n,f)}catch(l){o&&console.error("[pinia-plugin-persistedstate]",l)}}function createPersistence(e,t,a){const{pinia:n,store:o,options:{persist:r=a}}=e;if(!r)return;if(!(o.$id in n.state.value)){const c=n._s.get(o.$id.replace("__hot:",""));c&&Promise.resolve().then(()=>c.$persist());return}const l=(Array.isArray(r)?r:r===!0?[{}]:[r]).map(t);o.$hydrate=({runHooks:c=!0}={})=>{l.forEach(f=>{hydrateStore(o,f,e,c)})},o.$persist=()=>{l.forEach(c=>{persistState(o.$state,c)})},l.forEach(c=>{hydrateStore(o,c,e),o.$subscribe((f,u)=>persistState(u,c),{detached:!0})})}function createPersistedState(e={}){return function(t){createPersistence(t,a=>({key:(e.key?e.key:n=>n)(a.key??t.store.$id),debug:a.debug??e.debug??!1,serializer:a.serializer??e.serializer??{serialize:n=>JSON.stringify(n),deserialize:n=>destr(n)},storage:a.storage??e.storage??window.localStorage,beforeHydrate:a.beforeHydrate,afterHydrate:a.afterHydrate,pick:a.pick,omit:a.omit}),e.auto??!1)}}var src_default=createPersistedState();const{toClipboard}=VueClipboard(),div=document.createElement("div");div.id="weilin_comfyui_tools_prompt_ui_div";const body=document.querySelector("body");body.appendChild(div);const pinia=createPinia();pinia.use(src_default);const app=createApp(App);app.use(pinia),app.use(i18n),initI18n(),app.config.globalProperties.$copyText=toClipboard,app.mount(div),console.log("WeiLin Prompt UI is running - version "+version),console.log("WeiLin 节点插件已运行 - 版本 "+version)});
//# sourceMappingURL=main.entry.js.map
